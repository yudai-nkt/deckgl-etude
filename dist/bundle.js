!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!_[e]||!b[e])return;for(var n in b[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(d[n]=t[n]);0==--m&&0===y&&O()}(e,n),t&&t(e,n)};var n,r=!0,i="e44b262574814c725ec7",a={},o=[],s=[];function u(e){var t=S[e];if(!t)return T;var r=function(r){return t.hot.active?(S[r]?-1===S[r].parents.indexOf(e)&&S[r].parents.push(e):(o=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),o=[]),T(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return T[e]},set:function(t){T[e]=t}}};for(var a in T)Object.prototype.hasOwnProperty.call(T,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,i(a));return r.e=function(e){return"ready"===h&&p("prepare"),y++,T.e(e).then(t,(function(e){throw t(),e}));function t(){y--,"prepare"===h&&(g[e]||k(e),0===y&&0===m&&O())}},r.t=function(e,t){return 1&t&&(e=r(e)),T.t(e,-2&t)},r}function l(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:w,apply:E,status:function(e){if(!e)return h;c.push(e)},addStatusHandler:function(e){c.push(e)},removeStatusHandler:function(e){var t=c.indexOf(e);t>=0&&c.splice(t,1)},data:a[e]};return n=void 0,t}var c=[],h="idle";function p(e){h=e;for(var t=0;t<c.length;t++)c[t].call(null,e)}var f,d,v,m=0,y=0,g={},b={},_={};function x(e){return+e+""===e?+e:e}function w(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=e,p("check"),(t=1e4,t=t||1e4,new Promise((function(e,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=T.p+""+i+".hot-update.json";r.open("GET",a,!0),r.timeout=t,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)e();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var t=JSON.parse(r.responseText)}catch(e){return void n(e)}e(t)}}}))).then((function(e){if(!e)return p("idle"),null;b={},g={},_=e.c,v=e.h,p("prepare");var t=new Promise((function(e,t){f={resolve:e,reject:t}}));d={};return k(0),"prepare"===h&&0===y&&0===m&&O(),t}));var t}function k(e){_[e]?(b[e]=!0,m++,function(e){var t=document.createElement("script");t.charset="utf-8",t.src=T.p+""+e+"."+i+".hot-update.js",document.head.appendChild(t)}(e)):g[e]=!0}function O(){p("ready");var e=f;if(f=null,e)if(r)Promise.resolve().then((function(){return E(r)})).then((function(t){e.resolve(t)}),(function(t){e.reject(t)}));else{var t=[];for(var n in d)Object.prototype.hasOwnProperty.call(d,n)&&t.push(x(n));e.resolve(t)}}function E(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");var n,r,s,u,l;function c(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,o=i.chain;if((u=S[a])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(u.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var s=0;s<u.parents.length;s++){var l=u.parents[s],c=S[l];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([l]),moduleId:a,parentId:l};-1===t.indexOf(l)&&(c.hot._acceptedDependencies[a]?(n[l]||(n[l]=[]),f(n[l],[a])):(delete n[l],t.push(l),r.push({chain:o.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var m={},y=[],g={},b=function(){console.warn("[HMR] unexpected require("+k.moduleId+") to disposed module")};for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)){var k;l=x(w);var O=!1,E=!1,P=!1,j="";switch((k=d[w]?c(l):{type:"disposed",moduleId:w}).chain&&(j="\nUpdate propagation: "+k.chain.join(" -> ")),k.type){case"self-declined":t.onDeclined&&t.onDeclined(k),t.ignoreDeclined||(O=new Error("Aborted because of self decline: "+k.moduleId+j));break;case"declined":t.onDeclined&&t.onDeclined(k),t.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+k.moduleId+" in "+k.parentId+j));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(k),t.ignoreUnaccepted||(O=new Error("Aborted because "+l+" is not accepted"+j));break;case"accepted":t.onAccepted&&t.onAccepted(k),E=!0;break;case"disposed":t.onDisposed&&t.onDisposed(k),P=!0;break;default:throw new Error("Unexception type "+k.type)}if(O)return p("abort"),Promise.reject(O);if(E)for(l in g[l]=d[l],f(y,k.outdatedModules),k.outdatedDependencies)Object.prototype.hasOwnProperty.call(k.outdatedDependencies,l)&&(m[l]||(m[l]=[]),f(m[l],k.outdatedDependencies[l]));P&&(f(y,[k.moduleId]),g[l]=b)}var C,A=[];for(r=0;r<y.length;r++)l=y[r],S[l]&&S[l].hot._selfAccepted&&g[l]!==b&&A.push({module:l,errorHandler:S[l].hot._selfAccepted});p("dispose"),Object.keys(_).forEach((function(e){!1===_[e]&&function(e){delete installedChunks[e]}(e)}));for(var M,I,R=y.slice();R.length>0;)if(l=R.pop(),u=S[l]){var L={},z=u.hot._disposeHandlers;for(s=0;s<z.length;s++)(n=z[s])(L);for(a[l]=L,u.hot.active=!1,delete S[l],delete m[l],s=0;s<u.children.length;s++){var D=S[u.children[s]];D&&((C=D.parents.indexOf(l))>=0&&D.parents.splice(C,1))}}for(l in m)if(Object.prototype.hasOwnProperty.call(m,l)&&(u=S[l]))for(I=m[l],s=0;s<I.length;s++)M=I[s],(C=u.children.indexOf(M))>=0&&u.children.splice(C,1);for(l in p("apply"),i=v,g)Object.prototype.hasOwnProperty.call(g,l)&&(e[l]=g[l]);var F=null;for(l in m)if(Object.prototype.hasOwnProperty.call(m,l)&&(u=S[l])){I=m[l];var B=[];for(r=0;r<I.length;r++)if(M=I[r],n=u.hot._acceptedDependencies[M]){if(-1!==B.indexOf(n))continue;B.push(n)}for(r=0;r<B.length;r++){n=B[r];try{n(I)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:l,dependencyId:I[r],error:e}),t.ignoreErrored||F||(F=e)}}}for(r=0;r<A.length;r++){var N=A[r];l=N.module,o=[l];try{T(l)}catch(e){if("function"==typeof N.errorHandler)try{N.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:n,originalError:e}),t.ignoreErrored||F||(F=n),F||(F=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:l,error:e}),t.ignoreErrored||F||(F=e)}}return F?(p("fail"),Promise.reject(F)):(p("idle"),new Promise((function(e){e(y)})))}var S={};function T(t){if(S[t])return S[t].exports;var n=S[t]={i:t,l:!1,exports:{},hot:l(t),parents:(s=o,o=[],s),children:[]};return e[t].call(n.exports,n,n.exports,u(t)),n.l=!0,n.exports}T.m=e,T.c=S,T.d=function(e,t,n){T.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},T.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},T.t=function(e,t){if(1&t&&(e=T(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(T.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)T.d(n,r,function(t){return e[t]}.bind(null,r));return n},T.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return T.d(t,"a",t),t},T.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},T.p="/",T.h=function(){return i},u(95)(T.s=95)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(61);e.exports=n(89)(r.isElement,!0)},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(13),i=n(5);function a(e,t){return!t||"object"!==Object(r.a)(t)&&"function"!=typeof t?Object(i.a)(e):t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(37);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";e.exports=n(82)},function(e,t,n){e.exports=n(94)},function(e,t,n){"use strict";n.d(t,"p",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"o",(function(){return u})),n.d(t,"n",(function(){return l})),n.d(t,"j",(function(){return c})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"d",(function(){return v})),n.d(t,"i",(function(){return m})),n.d(t,"h",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"b",(function(){return b}));var r=n(12);function i(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function a(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],v=t[13],m=t[14],y=t[15],g=n*s-r*o,b=n*u-i*o,_=n*l-a*o,x=r*u-i*s,w=r*l-a*s,k=i*l-a*u,O=c*v-h*d,E=c*m-p*d,S=c*y-f*d,T=h*m-p*v,P=h*y-f*v,j=p*y-f*m,C=g*j-b*P+_*T+x*S-w*E+k*O;return C?(C=1/C,e[0]=(s*j-u*P+l*T)*C,e[1]=(i*P-r*j-a*T)*C,e[2]=(v*k-m*w+y*x)*C,e[3]=(p*w-h*k-f*x)*C,e[4]=(u*S-o*j-l*E)*C,e[5]=(n*j-i*S+a*E)*C,e[6]=(m*_-d*k-y*b)*C,e[7]=(c*k-p*_+f*b)*C,e[8]=(o*P-s*S+l*O)*C,e[9]=(r*S-n*P-a*O)*C,e[10]=(d*w-v*_+y*g)*C,e[11]=(h*_-c*w-f*g)*C,e[12]=(s*E-o*T-u*O)*C,e[13]=(n*T-r*E+i*O)*C,e[14]=(v*b-d*x-m*g)*C,e[15]=(c*x-h*b+p*g)*C,e):null}function o(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],p=e[11],f=e[12],d=e[13],v=e[14],m=e[15];return(t*o-n*a)*(h*m-p*v)-(t*s-r*a)*(c*m-p*d)+(t*u-i*a)*(c*v-h*d)+(n*s-r*o)*(l*m-p*f)-(n*u-i*o)*(l*v-h*f)+(r*u-i*s)*(l*d-c*f)}function s(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],b=n[0],_=n[1],x=n[2],w=n[3];return e[0]=b*r+_*s+x*h+w*v,e[1]=b*i+_*u+x*p+w*m,e[2]=b*a+_*l+x*f+w*y,e[3]=b*o+_*c+x*d+w*g,b=n[4],_=n[5],x=n[6],w=n[7],e[4]=b*r+_*s+x*h+w*v,e[5]=b*i+_*u+x*p+w*m,e[6]=b*a+_*l+x*f+w*y,e[7]=b*o+_*c+x*d+w*g,b=n[8],_=n[9],x=n[10],w=n[11],e[8]=b*r+_*s+x*h+w*v,e[9]=b*i+_*u+x*p+w*m,e[10]=b*a+_*l+x*f+w*y,e[11]=b*o+_*c+x*d+w*g,b=n[12],_=n[13],x=n[14],w=n[15],e[12]=b*r+_*s+x*h+w*v,e[13]=b*i+_*u+x*p+w*m,e[14]=b*a+_*l+x*f+w*y,e[15]=b*o+_*c+x*d+w*g,e}function u(e,t,n){var r,i,a,o,s,u,l,c,h,p,f,d,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=p,e[10]=f,e[11]=d,e[12]=r*v+s*m+h*y+t[12],e[13]=i*v+u*m+p*y+t[13],e[14]=a*v+l*m+f*y+t[14],e[15]=o*v+c*m+d*y+t[15]),e}function l(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function c(e,t,n,i){var a,o,s,u,l,c,h,p,f,d,v,m,y,g,b,_,x,w,k,O,E,S,T,P,j=i[0],C=i[1],A=i[2],M=Math.hypot(j,C,A);return M<r.b?null:(j*=M=1/M,C*=M,A*=M,a=Math.sin(n),s=1-(o=Math.cos(n)),u=t[0],l=t[1],c=t[2],h=t[3],p=t[4],f=t[5],d=t[6],v=t[7],m=t[8],y=t[9],g=t[10],b=t[11],_=j*j*s+o,x=C*j*s+A*a,w=A*j*s-C*a,k=j*C*s-A*a,O=C*C*s+o,E=A*C*s+j*a,S=j*A*s+C*a,T=C*A*s-j*a,P=A*A*s+o,e[0]=u*_+p*x+m*w,e[1]=l*_+f*x+y*w,e[2]=c*_+d*x+g*w,e[3]=h*_+v*x+b*w,e[4]=u*k+p*O+m*E,e[5]=l*k+f*O+y*E,e[6]=c*k+d*O+g*E,e[7]=h*k+v*O+b*E,e[8]=u*S+p*T+m*P,e[9]=l*S+f*T+y*P,e[10]=c*S+d*T+g*P,e[11]=h*S+v*T+b*P,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=u*i+p*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=p*i-u*r,e}function p(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=u*i-p*r,e[8]=a*r+l*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=u*r+p*i,e}function f(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=u*i+p*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=p*i-u*r,e}function d(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,h=r*s,p=i*o,f=i*s,d=i*u,v=a*o,m=a*s,y=a*u;return e[0]=1-h-d,e[1]=c+y,e[2]=p-m,e[3]=0,e[4]=c-y,e[5]=1-l-d,e[6]=f+v,e[7]=0,e[8]=p+m,e[9]=f-v,e[10]=1-l-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function v(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function m(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e}function y(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e}function g(e,t,n,i){var a,o,s,u,l,c,h,p,f,d,v=t[0],m=t[1],y=t[2],g=i[0],b=i[1],_=i[2],x=n[0],w=n[1],k=n[2];return Math.abs(v-x)<r.b&&Math.abs(m-w)<r.b&&Math.abs(y-k)<r.b?function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}(e):(h=v-x,p=m-w,f=y-k,a=b*(f*=d=1/Math.hypot(h,p,f))-_*(p*=d),o=_*(h*=d)-g*f,s=g*p-b*h,(d=Math.hypot(a,o,s))?(a*=d=1/d,o*=d,s*=d):(a=0,o=0,s=0),u=p*s-f*o,l=f*a-h*s,c=h*o-p*a,(d=Math.hypot(u,l,c))?(u*=d=1/d,l*=d,c*=d):(u=0,l=0,c=0),e[0]=a,e[1]=u,e[2]=h,e[3]=0,e[4]=o,e[5]=l,e[6]=p,e[7]=0,e[8]=s,e[9]=c,e[10]=f,e[11]=0,e[12]=-(a*v+o*m+s*y),e[13]=-(u*v+l*m+c*y),e[14]=-(h*v+p*m+f*y),e[15]=1,e)}function b(e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],p=e[9],f=e[10],d=e[11],v=e[12],m=e[13],y=e[14],g=e[15],b=t[0],_=t[1],x=t[2],w=t[3],k=t[4],O=t[5],E=t[6],S=t[7],T=t[8],P=t[9],j=t[10],C=t[11],A=t[12],M=t[13],I=t[14],R=t[15];return Math.abs(n-b)<=r.b*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-_)<=r.b*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(a-x)<=r.b*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-w)<=r.b*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-k)<=r.b*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(u-O)<=r.b*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(l-E)<=r.b*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-S)<=r.b*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(h-T)<=r.b*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(p-P)<=r.b*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-j)<=r.b*Math.max(1,Math.abs(f),Math.abs(j))&&Math.abs(d-C)<=r.b*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(v-A)<=r.b*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(m-M)<=r.b*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(y-I)<=r.b*Math.max(1,Math.abs(y),Math.abs(I))&&Math.abs(g-R)<=r.b*Math.max(1,Math.abs(g),Math.abs(R))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(101);function i(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function a(e){for(var t in e)return!1;return!0}function o(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function s(e){if(e.canvas&&e.luma){var t=e.luma.canvasSizeInfo.clientWidth;return t?e.drawingBufferWidth/t:1}return 1}function u(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=s(e),i=e.drawingBufferWidth,a=e.drawingBufferHeight;return c(t,r,i,a,n)}function l(e){var t="undefined"==typeof window?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function c(e,t,n,r,i){var a,o=h(e[0],t,n),s=p(e[1],t,r,i),u=h(e[0]+1,t,n),l=u===n-1?u:u-1;return u=p(e[1]+1,t,r,i),i?(a=s,s=u=0===u?u:u+1):a=u===r-1?u:u-1,{x:o,y:s,width:Math.max(l-o+1,1),height:Math.max(a-s+1,1)}}function h(e,t,n){return Math.min(Math.round(e*t),n-1)}function p(e,t,n,r){return r?Math.max(0,n-1-Math.round(e*t)):Math.min(Math.round(e*t),n-1)}function f(e){return Boolean(e&&Number.isFinite(e._version))}function d(e){return Boolean(e&&2===e._version)}n.d(t,"i",(function(){return v})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return d}));var v=new r.a({id:"luma.gl"})},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(66);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c})),n.d(t,"d",(function(){return r.d})),n.d(t,"e",(function(){return r.e})),n.d(t,"f",(function(){return r.f}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c}));n(13),n(38),n(15),n(34),Math.PI,Math.PI;var r={};function i(e){return Math.round(e/r.EPSILON)*r.EPSILON}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.precision,a=void 0===n?r.precision||4:n;return e=i(e),"".concat(parseFloat(e.toPrecision(a)))}function o(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function s(e,t,n){if(o(e)){n=n||((i=e).clone?i.clone():new Array(i.length));for(var r=0;r<n.length&&r<e.length;++r)n[r]=t(e[r],r,n);return n}var i;return t(e)}function u(e,t,n){return s(e,(function(e){return Math.max(t,Math.min(n,e))}))}function l(e,t,n){return o(e)?e.map((function(e,r){return l(e,t[r],n)})):n*t+(1-n)*e}function c(e,t,n){var i=r.EPSILON;n&&(r.EPSILON=n);try{if(e===t)return!0;if(o(e)&&o(t)){if(e.length!==t.length)return!1;for(var a=0;a<e.length;++a)if(!c(e[a],t[a]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):!(!Number.isFinite(e)||!Number.isFinite(t))&&Math.abs(e-t)<=r.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}finally{r.EPSILON=i}}r.EPSILON=1e-12,r.debug=!1,r.precision=4,r.printTypes=!1,r.printDegrees=!1,r.printRowMajor=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return p}));var r=n(12);function i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function a(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function o(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function s(e,t){return e[0]=-t[0],e[1]=-t[1],e}function u(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function l(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}var c,h,p=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e};c=new r.a(2),r.a!=Float32Array&&(c[0]=0,c[1]=0),h=c},function(e,t,n){e.exports=n(91)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(17);function i(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function a(e,t,n){if(r.b.debug&&!function(e,t){if(e.length!==t)return!1;for(var n=0;n<e.length;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e,t))throw new Error("math.gl: ".concat(""|n," some fields set to invalid numbers'"));return e}var o={};function s(e,t){o[e]||(o[e]=!0,console.warn("".concat(e," has been removed in version ").concat(t,", see upgrade guide for more information")))}},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"i",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return h})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return v}));var r=n(12);function i(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function o(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function s(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function u(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],l=t[2],c=i*l-a*u,h=a*s-r*l,p=r*u-i*s,f=i*p-a*h,d=a*c-r*p,v=r*h-i*c,m=2*o;return c*=m,h*=m,p*=m,f*=2,d*=2,v*=2,e[0]=s+c+f,e[1]=u+h+d,e[2]=l+p+v,e}function l(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function c(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function h(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function p(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2],u=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(a*a+o*o+s*s),l=u&&function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}(e,t)/u;return Math.acos(Math.min(Math.max(l,-1),1))}var f,d,v=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e};f=new r.a(3),r.a!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),d=f},,function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="undefined"!=typeof window?window:e,i=(void 0!==e||window,"undefined"!=typeof document?document:{})}).call(this,n(30))},function(e,t,n){"use strict";(function(e,r){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(13),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":Object(i.a)(r))&&r},o=a.window||a.self||a.global,s=a.process||{};console}).call(this,n(30),n(31))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(12);function i(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function a(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}var o,s;o=new r.a(4),r.a!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0),s=o},function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g})),n.d(t,"d",(function(){return _}));var r,i,a,o=n(8),s=n(15),u=n(0),l=n(14),c=(r={},Object(u.a)(r,3042,!1),Object(u.a)(r,32773,new Float32Array([0,0,0,0])),Object(u.a)(r,32777,32774),Object(u.a)(r,34877,32774),Object(u.a)(r,32969,1),Object(u.a)(r,32968,0),Object(u.a)(r,32971,1),Object(u.a)(r,32970,0),Object(u.a)(r,3106,new Float32Array([0,0,0,0])),Object(u.a)(r,3107,[!0,!0,!0,!0]),Object(u.a)(r,2884,!1),Object(u.a)(r,2885,1029),Object(u.a)(r,2929,!1),Object(u.a)(r,2931,1),Object(u.a)(r,2932,513),Object(u.a)(r,2928,new Float32Array([0,1])),Object(u.a)(r,2930,!0),Object(u.a)(r,3024,!0),Object(u.a)(r,36006,null),Object(u.a)(r,2886,2305),Object(u.a)(r,33170,4352),Object(u.a)(r,2849,1),Object(u.a)(r,32823,!1),Object(u.a)(r,32824,0),Object(u.a)(r,10752,0),Object(u.a)(r,32938,1),Object(u.a)(r,32939,!1),Object(u.a)(r,3089,!1),Object(u.a)(r,3088,new Int32Array([0,0,1024,1024])),Object(u.a)(r,2960,!1),Object(u.a)(r,2961,0),Object(u.a)(r,2968,4294967295),Object(u.a)(r,36005,4294967295),Object(u.a)(r,2962,519),Object(u.a)(r,2967,0),Object(u.a)(r,2963,4294967295),Object(u.a)(r,34816,519),Object(u.a)(r,36003,0),Object(u.a)(r,36004,4294967295),Object(u.a)(r,2964,7680),Object(u.a)(r,2965,7680),Object(u.a)(r,2966,7680),Object(u.a)(r,34817,7680),Object(u.a)(r,34818,7680),Object(u.a)(r,34819,7680),Object(u.a)(r,2978,[0,0,1024,1024]),Object(u.a)(r,3333,4),Object(u.a)(r,3317,4),Object(u.a)(r,37440,!1),Object(u.a)(r,37441,!1),Object(u.a)(r,37443,37444),Object(u.a)(r,35723,4352),Object(u.a)(r,36010,null),Object(u.a)(r,35977,!1),Object(u.a)(r,3330,0),Object(u.a)(r,3332,0),Object(u.a)(r,3331,0),Object(u.a)(r,3314,0),Object(u.a)(r,32878,0),Object(u.a)(r,3316,0),Object(u.a)(r,3315,0),Object(u.a)(r,32877,0),r),h=function(e,t,n){return t?e.enable(n):e.disable(n)},p=function(e,t,n){return e.hint(n,t)},f=function(e,t,n){return e.pixelStorei(n,t)};function d(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var v=(i={},Object(u.a)(i,3042,h),Object(u.a)(i,32773,(function(e,t){return e.blendColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,32777,"blendEquation"),Object(u.a)(i,34877,"blendEquation"),Object(u.a)(i,32969,"blendFunc"),Object(u.a)(i,32968,"blendFunc"),Object(u.a)(i,32971,"blendFunc"),Object(u.a)(i,32970,"blendFunc"),Object(u.a)(i,3106,(function(e,t){return e.clearColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,3107,(function(e,t){return e.colorMask.apply(e,Object(s.a)(t))})),Object(u.a)(i,2884,h),Object(u.a)(i,2885,(function(e,t){return e.cullFace(t)})),Object(u.a)(i,2929,h),Object(u.a)(i,2931,(function(e,t){return e.clearDepth(t)})),Object(u.a)(i,2932,(function(e,t){return e.depthFunc(t)})),Object(u.a)(i,2928,(function(e,t){return e.depthRange.apply(e,Object(s.a)(t))})),Object(u.a)(i,2930,(function(e,t){return e.depthMask(t)})),Object(u.a)(i,3024,h),Object(u.a)(i,35723,p),Object(u.a)(i,36006,(function(e,t){var n=Object(l.h)(e)?36009:36160;return e.bindFramebuffer(n,t)})),Object(u.a)(i,2886,(function(e,t){return e.frontFace(t)})),Object(u.a)(i,33170,p),Object(u.a)(i,2849,(function(e,t){return e.lineWidth(t)})),Object(u.a)(i,32823,h),Object(u.a)(i,32824,"polygonOffset"),Object(u.a)(i,10752,"polygonOffset"),Object(u.a)(i,35977,h),Object(u.a)(i,32938,"sampleCoverage"),Object(u.a)(i,32939,"sampleCoverage"),Object(u.a)(i,3089,h),Object(u.a)(i,3088,(function(e,t){return e.scissor.apply(e,Object(s.a)(t))})),Object(u.a)(i,2960,h),Object(u.a)(i,2961,(function(e,t){return e.clearStencil(t)})),Object(u.a)(i,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(u.a)(i,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(u.a)(i,2962,"stencilFuncFront"),Object(u.a)(i,2967,"stencilFuncFront"),Object(u.a)(i,2963,"stencilFuncFront"),Object(u.a)(i,34816,"stencilFuncBack"),Object(u.a)(i,36003,"stencilFuncBack"),Object(u.a)(i,36004,"stencilFuncBack"),Object(u.a)(i,2964,"stencilOpFront"),Object(u.a)(i,2965,"stencilOpFront"),Object(u.a)(i,2966,"stencilOpFront"),Object(u.a)(i,34817,"stencilOpBack"),Object(u.a)(i,34818,"stencilOpBack"),Object(u.a)(i,34819,"stencilOpBack"),Object(u.a)(i,2978,(function(e,t){return e.viewport.apply(e,Object(s.a)(t))})),Object(u.a)(i,3333,f),Object(u.a)(i,3317,f),Object(u.a)(i,37440,f),Object(u.a)(i,37441,f),Object(u.a)(i,37443,f),Object(u.a)(i,3330,f),Object(u.a)(i,3332,f),Object(u.a)(i,3331,f),Object(u.a)(i,36010,(function(e,t){return e.bindFramebuffer(36008,t)})),Object(u.a)(i,3314,f),Object(u.a)(i,32878,f),Object(u.a)(i,3316,f),Object(u.a)(i,3315,f),Object(u.a)(i,32877,f),Object(u.a)(i,"framebuffer",(function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)})),Object(u.a)(i,"blend",(function(e,t){return t?e.enable(3042):e.disable(3042)})),Object(u.a)(i,"blendColor",(function(e,t){return e.blendColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"blendEquation",(function(e,t){t=d(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(s.a)(t))})),Object(u.a)(i,"blendFunc",(function(e,t){t=d(t)&&2===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,e.blendFuncSeparate.apply(e,Object(s.a)(t))})),Object(u.a)(i,"clearColor",(function(e,t){return e.clearColor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"clearDepth",(function(e,t){return e.clearDepth(t)})),Object(u.a)(i,"clearStencil",(function(e,t){return e.clearStencil(t)})),Object(u.a)(i,"colorMask",(function(e,t){return e.colorMask.apply(e,Object(s.a)(t))})),Object(u.a)(i,"cull",(function(e,t){return t?e.enable(2884):e.disable(2884)})),Object(u.a)(i,"cullFace",(function(e,t){return e.cullFace(t)})),Object(u.a)(i,"depthTest",(function(e,t){return t?e.enable(2929):e.disable(2929)})),Object(u.a)(i,"depthFunc",(function(e,t){return e.depthFunc(t)})),Object(u.a)(i,"depthMask",(function(e,t){return e.depthMask(t)})),Object(u.a)(i,"depthRange",(function(e,t){return e.depthRange.apply(e,Object(s.a)(t))})),Object(u.a)(i,"dither",(function(e,t){return t?e.enable(3024):e.disable(3024)})),Object(u.a)(i,"derivativeHint",(function(e,t){e.hint(35723,t)})),Object(u.a)(i,"frontFace",(function(e,t){return e.frontFace(t)})),Object(u.a)(i,"mipmapHint",(function(e,t){return e.hint(33170,t)})),Object(u.a)(i,"lineWidth",(function(e,t){return e.lineWidth(t)})),Object(u.a)(i,"polygonOffsetFill",(function(e,t){return t?e.enable(32823):e.disable(32823)})),Object(u.a)(i,"polygonOffset",(function(e,t){return e.polygonOffset.apply(e,Object(s.a)(t))})),Object(u.a)(i,"sampleCoverage",(function(e,t){return e.sampleCoverage.apply(e,Object(s.a)(t))})),Object(u.a)(i,"scissorTest",(function(e,t){return t?e.enable(3089):e.disable(3089)})),Object(u.a)(i,"scissor",(function(e,t){return e.scissor.apply(e,Object(s.a)(t))})),Object(u.a)(i,"stencilTest",(function(e,t){return t?e.enable(2960):e.disable(2960)})),Object(u.a)(i,"stencilMask",(function(e,t){var n=t=d(t)?t:[t,t],r=Object(o.a)(n,2),i=r[0],a=r[1];e.stencilMaskSeparate(1028,i),e.stencilMaskSeparate(1029,a)})),Object(u.a)(i,"stencilFunc",(function(e,t){var n=t=d(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,r=Object(o.a)(n,6),i=r[0],a=r[1],u=r[2],l=r[3],c=r[4],h=r[5];e.stencilFuncSeparate(1028,i,a,u),e.stencilFuncSeparate(1029,l,c,h)})),Object(u.a)(i,"stencilOp",(function(e,t){var n=t=d(t)&&3===t.length?[].concat(Object(s.a)(t),Object(s.a)(t)):t,r=Object(o.a)(n,6),i=r[0],a=r[1],u=r[2],l=r[3],c=r[4],h=r[5];e.stencilOpSeparate(1028,i,a,u),e.stencilOpSeparate(1029,l,c,h)})),Object(u.a)(i,"viewport",(function(e,t){return e.viewport.apply(e,Object(s.a)(t))})),i);function m(e,t,n){return void 0!==t[e]?t[e]:n[e]}var y={blendEquation:function(e,t,n){return e.blendEquationSeparate(m(32777,t,n),m(34877,t,n))},blendFunc:function(e,t,n){return e.blendFuncSeparate(m(32969,t,n),m(32968,t,n),m(32971,t,n),m(32970,t,n))},polygonOffset:function(e,t,n){return e.polygonOffset(m(32824,t,n),m(10752,t,n))},sampleCoverage:function(e,t,n){return e.sampleCoverage(m(32938,t,n),m(32939,t,n))},stencilFuncFront:function(e,t,n){return e.stencilFuncSeparate(1028,m(2962,t,n),m(2967,t,n),m(2963,t,n))},stencilFuncBack:function(e,t,n){return e.stencilFuncSeparate(1029,m(34816,t,n),m(36003,t,n),m(36004,t,n))},stencilOpFront:function(e,t,n){return e.stencilOpSeparate(1028,m(2964,t,n),m(2965,t,n),m(2966,t,n))},stencilOpBack:function(e,t,n){return e.stencilOpSeparate(1029,m(34817,t,n),m(34818,t,n),m(34819,t,n))}},g={enable:function(e,t){return e(Object(u.a)({},t,!0))},disable:function(e,t){return e(Object(u.a)({},t,!1))},pixelStorei:function(e,t,n){return e(Object(u.a)({},t,n))},hint:function(e,t,n){return e(Object(u.a)({},t,n))},bindFramebuffer:function(e,t,n){var r;switch(t){case 36160:return e((r={},Object(u.a)(r,36006,n),Object(u.a)(r,36010,n),r));case 36009:return e(Object(u.a)({},36006,n));case 36008:return e(Object(u.a)({},36010,n));default:return null}},blendColor:function(e,t,n,r,i){return e(Object(u.a)({},32773,new Float32Array([t,n,r,i])))},blendEquation:function(e,t){var n;return e((n={},Object(u.a)(n,32777,t),Object(u.a)(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var r;return e((r={},Object(u.a)(r,32777,t),Object(u.a)(r,34877,n),r))},blendFunc:function(e,t,n){var r;return e((r={},Object(u.a)(r,32969,t),Object(u.a)(r,32968,n),Object(u.a)(r,32971,t),Object(u.a)(r,32970,n),r))},blendFuncSeparate:function(e,t,n,r,i){var a;return e((a={},Object(u.a)(a,32969,t),Object(u.a)(a,32968,n),Object(u.a)(a,32971,r),Object(u.a)(a,32970,i),a))},clearColor:function(e,t,n,r,i){return e(Object(u.a)({},3106,new Float32Array([t,n,r,i])))},clearDepth:function(e,t){return e(Object(u.a)({},2931,t))},clearStencil:function(e,t){return e(Object(u.a)({},2961,t))},colorMask:function(e,t,n,r,i){return e(Object(u.a)({},3107,[t,n,r,i]))},cullFace:function(e,t){return e(Object(u.a)({},2885,t))},depthFunc:function(e,t){return e(Object(u.a)({},2932,t))},depthRange:function(e,t,n){return e(Object(u.a)({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(u.a)({},2930,t))},frontFace:function(e,t){return e(Object(u.a)({},2886,t))},lineWidth:function(e,t){return e(Object(u.a)({},2849,t))},polygonOffset:function(e,t,n){var r;return e((r={},Object(u.a)(r,32824,t),Object(u.a)(r,10752,n),r))},sampleCoverage:function(e,t,n){var r;return e((r={},Object(u.a)(r,32938,t),Object(u.a)(r,32939,n),r))},scissor:function(e,t,n,r,i){return e(Object(u.a)({},3088,new Int32Array([t,n,r,i])))},stencilMask:function(e,t){var n;return e((n={},Object(u.a)(n,2968,t),Object(u.a)(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(u.a)({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,r){var i;return e((i={},Object(u.a)(i,2962,t),Object(u.a)(i,2967,n),Object(u.a)(i,2963,r),Object(u.a)(i,34816,t),Object(u.a)(i,36003,n),Object(u.a)(i,36004,r),i))},stencilFuncSeparate:function(e,t,n,r,i){var a;return e((a={},Object(u.a)(a,1028===t?2962:34816,n),Object(u.a)(a,1028===t?2967:36003,r),Object(u.a)(a,1028===t?2963:36004,i),a))},stencilOp:function(e,t,n,r){var i;return e((i={},Object(u.a)(i,2964,t),Object(u.a)(i,2965,n),Object(u.a)(i,2966,r),Object(u.a)(i,34817,t),Object(u.a)(i,34818,n),Object(u.a)(i,34819,r),i))},stencilOpSeparate:function(e,t,n,r,i){var a;return e((a={},Object(u.a)(a,1028===t?2964:34817,n),Object(u.a)(a,1028===t?2965:34818,r),Object(u.a)(a,1028===t?2966:34819,i),a))},viewport:function(e,t,n,r,i){return e(Object(u.a)({},2978,[t,n,r,i]))}},b=function(e,t){return e.isEnabled(t)},_=(a={},Object(u.a)(a,3042,b),Object(u.a)(a,2884,b),Object(u.a)(a,2929,b),Object(u.a)(a,3024,b),Object(u.a)(a,32823,b),Object(u.a)(a,32926,b),Object(u.a)(a,32928,b),Object(u.a)(a,3089,b),Object(u.a)(a,2960,b),Object(u.a)(a,35977,b),a)},,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&f())}function f(){if(!c){var e=s(p);c=!0;for(var t=l.length;t;){for(u=l,l=[];++h<t;)u&&u[h].run();h=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return d}));var r=n(2),i=n(1),a=n(28),o=n(33),s=n(14);function u(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function l(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=n.apply(void 0,[e.state._updateCache].concat(i)),s=o.valueChanged,u=o.oldValue;return s&&r.apply(void 0,i),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function c(e){var t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}var h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.copyState,s=void 0!==i&&i,u=n.log,l=void 0===u?function(){}:u;Object(r.a)(this,e),this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=s?Object(o.a)(t):Object.assign({},a.c),this.log=l,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(i.a)(e,[{key:"push",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stateStack.push({})}},{key:"pop",value:function(){Object(s.a)(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(o.c)(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var i in e){Object(s.a)(void 0!==i);var a=e[i],o=this.cache[i];Object(s.d)(a,o)||(n=!0,t=o,!r||i in r||(r[i]=o),this.cache[i]=a)}return{valueChanged:n,oldValue:t}}}]),e}();function p(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,i=void 0===r||r,o=n.copyState;if(Object(s.a)(void 0!==o),!t.state){var p=void 0!==e?e:window;for(var f in p.polyfillContext&&p.polyfillContext(t),t.state=new h(t,{copyState:o,enable:i}),c(t),a.b){var d=a.b[f];l(t,f,d)}u(t,"getParameter"),u(t,"isEnabled")}return t.state.enable=i,t}function f(e){e.state||p(e,{copyState:!1}),e.state.push()}function d(e){Object(s.a)(e.state),e.state.pop()}}).call(this,n(30))},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return l}));var r=n(28),i=n(32),a=n(14);function o(e,t){if(Object(a.a)(Object(a.g)(e),"setParameters requires a WebGL context"),!Object(a.f)(t)){var n={};for(var i in t){var o=Number(i),s=r.e[i];s&&("string"==typeof s?n[s]=!0:s(e,t[i],o))}var u=e.state&&e.state.cache;if(u)for(var l in n){(0,r.a[l])(e,t,u)}}}function s(e,t){if("number"==typeof(t=t||r.c)){var n=t,i=r.d[n];return i?i(e,n):e.getParameter(n)}var a=Array.isArray(t)?t:Object.keys(t),o={},s=!0,u=!1,l=void 0;try{for(var c,h=a[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var p=c.value,f=r.d[p];o[p]=f?f(e,Number(p)):e.getParameter(Number(p))}}catch(e){u=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}return o}function u(e){o(e,r.c)}function l(e,t,n){if(Object(a.f)(t))return n(e);var r,s=t.nocatch,u=void 0===s||s;if(Object(i.c)(e),o(e,t),u)r=n(e),Object(i.b)(e);else try{r=n(e)}finally{Object(i.b)(e)}return r}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",i="undefined"!=typeof window?window:e,a=(void 0!==e||window,"undefined"!=typeof document&&document,!1);try{var o={get passive(){return a=!0,!0}};i.addEventListener("test",o,o),i.removeEventListener("test",o,o)}catch(e){}}).call(this,n(30))},,function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(37);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(e,t,n){return(a=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&Object(r.a)(a,n.prototype),a}).apply(null,arguments)}},function(e,t,n){"use strict";function r(e,t,n){var r=t[0],i=t[1],a=n[3]*r+n[7]*i||1;return e[0]=(n[0]*r+n[4]*i)/a,e[1]=(n[1]*r+n[5]*i)/a,e}function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a||1;return e[0]=(n[0]*r+n[4]*i+n[8]*a)/o,e[1]=(n[1]*r+n[5]*i+n[9]*a)/o,e[2]=(n[2]*r+n[6]*i+n[10]*a)/o,e}function a(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e[2]=t[2],e}n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return a}))},function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n(13),a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document},o=a.global||a.self||a.window,s="object"!==(void 0===r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser,u=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/);u&&parseFloat(u[1])}).call(this,n(30),n(31))},function(e,t,n){"use strict";var r,i,a=n(0),o=n(14),s=function(e){return Object(o.h)(e)?void 0:0},u=(r={},Object(a.a)(r,3074,(function(e){return Object(o.h)(e)?void 0:36064})),Object(a.a)(r,35723,(function(e){return Object(o.h)(e)?void 0:4352})),Object(a.a)(r,35977,s),Object(a.a)(r,32937,s),Object(a.a)(r,36795,(function(e,t){var n=Object(o.h)(e)?e.getExtension("EXT_disjoint_timer_query_webgl2"):e.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),Object(a.a)(r,37445,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(a.a)(r,37446,(function(e,t){var n=e.getExtension("WEBGL_debug_renderer_info");return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(a.a)(r,34047,(function(e,t){var n=e.luma.extensions.EXT_texture_filter_anisotropic;return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(a.a)(r,32883,s),Object(a.a)(r,35071,s),Object(a.a)(r,37447,s),Object(a.a)(r,36063,(function(e,t){if(!Object(o.h)(e)){var n=e.getExtension("WEBGL_draw_buffers");return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(a.a)(r,35379,s),Object(a.a)(r,35374,s),Object(a.a)(r,35377,s),Object(a.a)(r,34852,(function(e){if(!Object(o.h)(e)){var t=e.getExtension("WEBGL_draw_buffers");return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(a.a)(r,36203,(function(e){return e.getExtension("OES_element_index")?2147483647:65535})),Object(a.a)(r,33001,(function(e){return e.getExtension("OES_element_index")?16777216:65535})),Object(a.a)(r,33e3,(function(e){return 16777216})),Object(a.a)(r,37157,s),Object(a.a)(r,35373,s),Object(a.a)(r,35657,s),Object(a.a)(r,36183,s),Object(a.a)(r,37137,s),Object(a.a)(r,34045,s),Object(a.a)(r,35978,s),Object(a.a)(r,35979,s),Object(a.a)(r,35968,s),Object(a.a)(r,35376,s),Object(a.a)(r,35375,s),Object(a.a)(r,35659,s),Object(a.a)(r,37154,s),Object(a.a)(r,35371,s),Object(a.a)(r,35658,s),Object(a.a)(r,35076,s),Object(a.a)(r,35077,s),Object(a.a)(r,35380,s),r);n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var l=(i={},Object(a.a)(i,"OES_vertex_array_object",{meta:{suffix:"OES"},createVertexArray:function(){Object(o.a)(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(a.a)(i,"ANGLE_instanced_arrays",{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o.a)(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(a.a)(i,"WEBGL_draw_buffers",{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o.a)(!1)}}),Object(a.a)(i,"EXT_disjoint_timer_query",{meta:{suffix:"EXT"},createQuery:function(){Object(o.a)(!1)},deleteQuery:function(){Object(o.a)(!1)},beginQuery:function(){Object(o.a)(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),i),c={readBuffer:function(e,t,n){Object(o.h)(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var i,a=function(e,t){return{webgl2:Object(o.h)(e),ext:e.getExtension(t)}}(e,"ANGLE_instanced_arrays"),s=a.webgl2,u=a.ext;switch(r){case 35069:i=!!s&&void 0;break;case 35070:i=s||u?void 0:0}return void 0!==i?i:t(n,r)},getProgramParameter:function(e,t,n,r){if(!Object(o.h)(e))switch(r){case 35967:return 35981;case 35971:case 35382:return 0}return t(n,r)},getInternalformatParameter:function(e,t,n,r,i){if(!Object(o.h)(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(n,r,i)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var i=e.luma.extensions.EXT_texture_filter_anisotropic;r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046}return t(n,r)},getParameter:function(e,t,n){var r=u[n],i="function"==typeof r?r(e,t,n):r;return void 0!==i?i:t(n)},hint:function(e,t,n,r){return t(n,r)}}},,,function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";(function(e){function r(){var t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==e&&e.hrtime){var n=e.hrtime();t=1e3*n[0]+n[1]/1e6}else t=Date.now();return t}n.d(t,"a",(function(){return r}))}).call(this,n(31))},function(e,t,n){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(i,a,o,s){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),h=Math.round,p=Math.abs,f=Date.now;function d(e,t,n){return setTimeout(x(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(void 0!==e.length)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=i.console&&(i.console.warn||i.console.log);return a&&a.call(i.console,r,n),e.apply(this,arguments)}}u="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t}:Object.assign;var g=y((function(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;)(!n||n&&void 0===e[r[i]])&&(e[r[i]]=t[r[i]]),i++;return e}),"extend","Use `assign`."),b=y((function(e,t){return g(e,t,!0)}),"merge","Use `assign`.");function _(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&u(r,n)}function x(e,t){return function(){return e.apply(t,arguments)}}function w(e,t){return"function"==typeof e?e.apply(t&&t[0]||void 0,t):e}function k(e,t){return void 0===e?t:e}function O(e,t,n){m(P(t),(function(t){e.addEventListener(t,n,!1)}))}function E(e,t,n){m(P(t),(function(t){e.removeEventListener(t,n,!1)}))}function S(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function P(e){return e.trim().split(/\s+/g)}function j(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function C(e){return Array.prototype.slice.call(e,0)}function A(e,t,n){for(var r=[],i=[],a=0;a<e.length;){var o=t?e[a][t]:e[a];j(i,o)<0&&r.push(e[a]),i[a]=o,a++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function M(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),a=0;a<l.length;){if((r=(n=l[a])?n+i:t)in e)return r;a++}}var I=1;function R(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var L="ontouchstart"in i,z=void 0!==M(i,"PointerEvent"),D=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),F=["x","y"],B=["clientX","clientY"];function N(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){w(e.options.enable,[e])&&n.handler(t)},this.init()}function U(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,a=1&t&&r-i==0,o=12&t&&r-i==0;n.isFirst=!!a,n.isFinal=!!o,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=V(t));i>1&&!n.firstMultiple?n.firstMultiple=V(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,o=n.firstMultiple,s=o?o.center:a.center,u=t.center=W(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=Z(s,u),t.distance=H(s,u),function(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},a=e.prevInput||{};1!==t.eventType&&4!==a.eventType||(i=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}(n,t),t.offsetDirection=G(t.deltaX,t.deltaY);var l=q(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=l.x,t.overallVelocityY=l.y,t.overallVelocity=p(l.x)>p(l.y)?l.x:l.y,t.scale=o?(c=o.pointers,h=r,H(h[0],h[1],B)/H(c[0],c[1],B)):1,t.rotation=o?function(e,t){return Z(t[1],t[0],B)+Z(e[1],e[0],B)}(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,i,a,o=e.lastInterval||t,s=t.timeStamp-o.timeStamp;if(8!=t.eventType&&(s>25||void 0===o.velocity)){var u=t.deltaX-o.deltaX,l=t.deltaY-o.deltaY,c=q(s,u,l);r=c.x,i=c.y,n=p(c.x)>p(c.y)?c.x:c.y,a=G(u,l),e.lastInterval=t}else n=o.velocity,r=o.velocityX,i=o.velocityY,a=o.direction;t.velocity=n,t.velocityX=r,t.velocityY=i,t.direction=a}(n,t);var c,h;var d=e.element;S(t.srcEvent.target,d)&&(d=t.srcEvent.target);t.target=d}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function V(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:h(e.pointers[n].clientX),clientY:h(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:W(t),deltaX:e.deltaX,deltaY:e.deltaY}}function W(e){var t=e.length;if(1===t)return{x:h(e[0].clientX),y:h(e[0].clientY)};for(var n=0,r=0,i=0;i<t;)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:h(n/t),y:h(r/t)}}function q(e,t,n){return{x:t/e||0,y:n/e||0}}function G(e,t){return e===t?1:p(e)>=p(t)?e<0?2:4:t<0?8:16}function H(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function Z(e,t,n){n||(n=F);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return 180*Math.atan2(i,r)/Math.PI}N.prototype={handler:function(){},init:function(){this.evEl&&O(this.element,this.evEl,this.domHandler),this.evTarget&&O(this.target,this.evTarget,this.domHandler),this.evWin&&O(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(R(this.element),this.evWin,this.domHandler)}};var X={mousedown:1,mousemove:2,mouseup:4};function Y(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,N.apply(this,arguments)}_(Y,N,{handler:function(e){var t=X[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:"touch",3:"pen",4:"mouse",5:"kinect"},$="pointerdown",Q="pointermove pointerup pointercancel";function ee(){this.evEl=$,this.evWin=Q,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&($="MSPointerDown",Q="MSPointerMove MSPointerUp MSPointerCancel"),_(ee,N,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),i=K[r],a=J[e.pointerType]||e.pointerType,o="touch"==a,s=j(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(s,1))}});var te={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ne(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,N.apply(this,arguments)}function re(e,t){var n=C(e.touches),r=C(e.changedTouches);return 12&t&&(n=A(n.concat(r),"identifier",!0)),[n,r]}_(ne,N,{handler:function(e){var t=te[e.type];if(1===t&&(this.started=!0),this.started){var n=re.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ae(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},N.apply(this,arguments)}function oe(e,t){var n=C(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,a,o=C(e.changedTouches),s=[],u=this.target;if(a=n.filter((function(e){return S(e.target,u)})),1===t)for(i=0;i<a.length;)r[a[i].identifier]=!0,i++;for(i=0;i<o.length;)r[o[i].identifier]&&s.push(o[i]),12&t&&delete r[o[i].identifier],i++;return s.length?[A(a.concat(s),"identifier",!0),s]:void 0}_(ae,N,{handler:function(e){var t=ie[e.type],n=oe.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});function se(){N.apply(this,arguments);var e=x(this.handler,this);this.touch=new ae(this.manager,e),this.mouse=new Y(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function ue(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,le.call(this,t)):12&e&&le.call(this,t)}function le(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function ce(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],a=Math.abs(t-i.x),o=Math.abs(n-i.y);if(a<=25&&o<=25)return!0}return!1}_(se,N,{handler:function(e,t,n){var r="touch"==n.pointerType,i="mouse"==n.pointerType;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)ue.call(this,t,n);else if(i&&ce.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var he=M(c.style,"touchAction"),pe=void 0!==he,fe=function(){if(!pe)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){e[n]=!t||i.CSS.supports("touch-action",n)})),e}();function de(e,t){this.manager=e,this.set(t)}de.prototype={set:function(e){"compute"==e&&(e=this.compute()),pe&&this.manager.element.style&&fe[e]&&(this.manager.element.style[he]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){w(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(T(e,"none"))return"none";var t=T(e,"pan-x"),n=T(e,"pan-y");if(t&&n)return"none";if(t||n)return t?"pan-x":"pan-y";if(T(e,"manipulation"))return"manipulation";return"auto"}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,i=T(r,"none")&&!fe.none,a=T(r,"pan-y")&&!fe["pan-y"],o=T(r,"pan-x")&&!fe["pan-x"];if(i){var s=1===e.pointers.length,u=e.distance<2,l=e.deltaTime<250;if(s&&u&&l)return}if(!o||!a)return i||a&&6&n||o&&24&n?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};function ve(e){this.options=u({},this.defaults,e||{}),this.id=I++,this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function me(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function ye(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function ge(e,t){var n=t.manager;return n?n.get(e):e}function be(){ve.apply(this,arguments)}function _e(){be.apply(this,arguments),this.pX=null,this.pY=null}function xe(){be.apply(this,arguments)}function we(){ve.apply(this,arguments),this._timer=null,this._input=null}function ke(){be.apply(this,arguments)}function Oe(){be.apply(this,arguments)}function Ee(){ve.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Se(e,t){return(t=t||{}).recognizers=k(t.recognizers,Se.defaults.preset),new Te(e,t)}ve.prototype={defaults:{},set:function(e){return u(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=ge(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)||(e=ge(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===j(t,e=ge(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=ge(e,this);var t=j(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+me(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+me(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=u({},e);if(!w(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},_(be,ve,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,i=this.attrTest(e);return r&&(8&n||!i)?16|t:r||i?4&n?8|t:2&t?4|t:2:32}}),_(_e,be,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,a=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===a?1:a<0?2:4,n=a!=this.pX,r=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return be.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=ye(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),_(xe,be,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),_(we,ve,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!i)this.reset();else if(1&e.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(ke,be,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),_(Oe,be,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return _e.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:24&n&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&p(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=ye(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),_(Ee,ve,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=e.eventType)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,o=!this.pCenter||H(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,o&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return 32},failTimeout:function(){return this._timer=d((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Se.VERSION="2.0.7",Se.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ke,{enable:!1}],[xe,{enable:!1},["rotate"]],[Oe,{direction:6}],[_e,{direction:6},["swipe"]],[Ee],[Ee,{event:"doubletap",taps:2},["tap"]],[we]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function Te(e,t){var n;this.options=u({},Se.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(z?ee:D?ae:L?se:Y))(n,U),this.touchAction=new de(this,this.options.touchAction),Pe(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Pe(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(i,a){n=M(r.style,a),t?(e.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}Te.prototype={set:function(e){return u(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var a=0;a<r.length;)n=r[a],2===t.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(e),!i&&14&n.state&&(i=t.curRecognizer=n),a++}},get:function(e){if(e instanceof ve)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=j(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(void 0!==e&&void 0!==t){var n=this.handlers;return m(P(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(void 0!==e){var n=this.handlers;return m(P(e),(function(e){t?n[e]&&n[e].splice(j(n[e],t),1):delete n[e]})),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=a.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&Pe(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(Se,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Te,Input:N,TouchAction:de,TouchInput:ae,MouseInput:Y,PointerEventInput:ee,TouchMouseInput:se,SingleTouchInput:ne,Recognizer:ve,AttrRecognizer:be,Tap:Ee,Pan:_e,Swipe:Oe,Pinch:xe,Rotate:ke,Press:we,on:O,off:E,each:m,merge:b,extend:g,assign:u,inherit:_,bindFn:x,prefixed:M}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Se,void 0===(r=function(){return Se}.call(t,n,t,e))||(e.exports=r)}(window,document)},,,function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";e.exports=n(83)},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return a}));var r=n(13),i=n(52);function a(){return!("object"===(void 0===e?"undefined":Object(r.a)(e))&&"[object process]"===String(e)&&!e.browser)||Object(i.a)()}}).call(this,n(31))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var r=n(13);function i(t){if("undefined"!=typeof window&&"object"===Object(r.a)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===Object(r.a)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":Object(r.a)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,i=t||n;return!!(i&&i.indexOf("Electron")>=0)}}).call(this,n(31))},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(6),o=n(4),s=n(7),u=n(37);var l=n(38);function c(e){var t="function"==typeof Map?new Map:void 0;return(c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Object(l.a)(e,arguments,Object(o.a)(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(u.a)(r,e)})(e)}var h=n(17);n.d(t,"a",(function(){return p}));var p=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"from",value:function(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check()}},{key:"to",value:function(e){return e===this?this:Object(h.e)(e)?this.toArray(e):this.toObject(e)}},{key:"toTarget",value:function(e){return e?this.to(e):this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"toString",value:function(){return this.formatString(h.b)}},{key:"formatString",value:function(e){for(var t="",n=0;n<this.ELEMENTS;++n)t+=(n>0?", ":"")+Object(h.d)(this[n],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}},{key:"equals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!Object(h.c)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(!e||this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"negate",value:function(){for(var e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}},{key:"lerp",value:function(e,t,n){void 0===n&&(n=t,t=e,e=this);for(var r=0;r<this.ELEMENTS;++r){var i=e[r];this[r]=i+n*(t[r]-i)}return this.check()}},{key:"min",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}},{key:"max",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}},{key:"clamp",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),t[n]);return this.check()}},{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]+=a[o];return this.check()}},{key:"subtract",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]-=a[o];return this.check()}},{key:"scale",value:function(e){if(Array.isArray(e))return this.multiply(e);for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"sub",value:function(e){return this.subtract(e)}},{key:"setScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}},{key:"addScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}},{key:"subScalar",value:function(e){return this.addScalar(-e)}},{key:"multiplyScalar",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}},{key:"divideScalar",value:function(e){return this.scale(1/e)}},{key:"clampScalar",value:function(e,t){for(var n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),t);return this.check()}},{key:"multiplyByScalar",value:function(e){return this.scale(e)}},{key:"check",value:function(){if(h.b.debug&&!this.validate(this))throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}},{key:"validate",value:function(){for(var e=this.length===this.ELEMENTS,t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}},{key:"elements",get:function(){return this}}]),t}(c(Array))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(2),i=n(1),a=n(0),o=n(3),s=n.n(o),u=n(25);var l={container:s.a.object,gl:s.a.object,mapboxApiAccessToken:s.a.string,mapboxApiUrl:s.a.string,attributionControl:s.a.bool,preserveDrawingBuffer:s.a.bool,reuseMaps:s.a.bool,transformRequest:s.a.func,mapOptions:s.a.object,mapStyle:s.a.oneOfType([s.a.string,s.a.object]),visible:s.a.bool,asyncRender:s.a.bool,onLoad:s.a.func,onError:s.a.func,width:s.a.number,height:s.a.number,viewState:s.a.object,longitude:s.a.number,latitude:s.a.number,zoom:s.a.number,bearing:s.a.number,pitch:s.a.number,altitude:s.a.number},c={container:u.a.body,mapboxApiAccessToken:function(){var t=null;if("undefined"!=typeof window&&window.location){var n=window.location.search.match(/access_token=([^&\/]*)/);t=n&&n[1]}t||void 0===e||(t=t||Object({NODE_ENV:"development",MapboxAccessToken:void 0}).REACT_APP_MAPBOX_ACCESS_TOKEN);return t||"no-token"}(),mapboxApiUrl:"https://api.mapbox.com",preserveDrawingBuffer:!1,attributionControl:!0,reuseMaps:!1,mapOptions:{},mapStyle:"mapbox://styles/mapbox/light-v8",visible:!0,asyncRender:!1,onLoad:function(){},onError:function(e){e&&console.error(e.error)},width:0,height:0,longitude:0,latitude:0,zoom:0,bearing:0,pitch:0};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"component";e.debug&&s.a.checkPropTypes(l,e,"prop",t)}var p=function(){function e(t){var n=this;if(Object(r.a)(this,e),Object(a.a)(this,"mapboxgl",void 0),Object(a.a)(this,"props",c),Object(a.a)(this,"_map",null),Object(a.a)(this,"width",0),Object(a.a)(this,"height",0),Object(a.a)(this,"_fireLoadEvent",(function(){n.props.onLoad({type:"load",target:n._map})})),!t.mapboxgl)throw new Error("Mapbox not available");this.mapboxgl=t.mapboxgl,e.initialized||(e.initialized=!0,this._checkStyleSheet(this.mapboxgl.version)),this._initialize(t)}return Object(i.a)(e,[{key:"finalize",value:function(){return this._destroy(),this}},{key:"setProps",value:function(e){return this._update(this.props,e),this}},{key:"resize",value:function(){return this._map.resize(),this}},{key:"redraw",value:function(){var e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"getMap",value:function(){return this._map}},{key:"_reuse",value:function(t){this._map=e.savedMap;var n=this._map.getContainer(),r=t.container;for(r.classList.add("mapboxgl-map");n.childNodes.length>0;)r.appendChild(n.childNodes[0]);this._map._container=r,e.savedMap=null,t.mapStyle&&this._map.setStyle(t.mapStyle,{diff:!1}),this._map.isStyleLoaded()?this._fireLoadEvent():this._map.once("styledata",this._fireLoadEvent)}},{key:"_create",value:function(t){if(t.reuseMaps&&e.savedMap)this._reuse(t);else{if(t.gl){var n=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=n,t.gl}}var r={container:t.container,center:[0,0],zoom:8,pitch:0,bearing:0,maxZoom:24,style:t.mapStyle,interactive:!1,trackResize:!1,attributionControl:t.attributionControl,preserveDrawingBuffer:t.preserveDrawingBuffer};t.transformRequest&&(r.transformRequest=t.transformRequest),this._map=new this.mapboxgl.Map(Object.assign({},r,t.mapOptions)),this._map.once("load",t.onLoad),this._map.on("error",t.onError)}return this}},{key:"_destroy",value:function(){this._map&&(e.savedMap?this._map.remove():(e.savedMap=this._map,this._map.off("load",this.props.onLoad),this._map.off("error",this.props.onError),this._map.off("styledata",this._fireLoadEvent)),this._map=null)}},{key:"_initialize",value:function(e){var t=this;h(e=Object.assign({},c,e),"Mapbox"),this.mapboxgl.accessToken=e.mapboxApiAccessToken||c.mapboxApiAccessToken,this.mapboxgl.baseApiUrl=e.mapboxApiUrl,this._create(e);var n=e.container;Object.defineProperty(n,"offsetWidth",{get:function(){return t.width}}),Object.defineProperty(n,"clientWidth",{get:function(){return t.width}}),Object.defineProperty(n,"offsetHeight",{get:function(){return t.height}}),Object.defineProperty(n,"clientHeight",{get:function(){return t.height}});var r=this._map.getCanvas();r&&(r.style.outline="none"),this._updateMapViewport({},e),this._updateMapSize({},e),this.props=e}},{key:"_update",value:function(e,t){if(this._map){h(t=Object.assign({},this.props,t),"Mapbox");var n=this._updateMapViewport(e,t),r=this._updateMapSize(e,t);t.asyncRender||!n&&!r||this.redraw(),this.props=t}}},{key:"_updateMapSize",value:function(e,t){var n=e.width!==t.width||e.height!==t.height;return n&&(this.width=t.width,this.height=t.height,this.resize()),n}},{key:"_updateMapViewport",value:function(e,t){var n=this._getViewState(e),r=this._getViewState(t),i=r.latitude!==n.latitude||r.longitude!==n.longitude||r.zoom!==n.zoom||r.pitch!==n.pitch||r.bearing!==n.bearing||r.altitude!==n.altitude;return i&&(this._map.jumpTo(this._viewStateToMapboxProps(r)),r.altitude!==n.altitude&&(this._map.transform.altitude=r.altitude)),i}},{key:"_getViewState",value:function(e){var t=e.viewState||e,n=t.longitude,r=t.latitude,i=t.zoom,a=t.pitch,o=void 0===a?0:a,s=t.bearing,u=void 0===s?0:s,l=t.altitude;return{longitude:n,latitude:r,zoom:i,pitch:o,bearing:u,altitude:void 0===l?1.5:l}}},{key:"_checkStyleSheet",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0.47.0";if(void 0!==u.a)try{var t=u.a.createElement("div");t.className="mapboxgl-map",t.style.display="none",u.a.body.append(t);var n="static"!==window.getComputedStyle(t).position;if(!n){var r=u.a.createElement("link");r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href","https://api.tiles.mapbox.com/mapbox-gl-js/v".concat(e,"/mapbox-gl.css")),u.a.head.append(r)}}catch(e){}}},{key:"_viewStateToMapboxProps",value:function(e){return{center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}}}]),e}();Object(a.a)(p,"initialized",!1),Object(a.a)(p,"propTypes",l),Object(a.a)(p,"defaultProps",c),Object(a.a)(p,"savedMap",null)}).call(this,n(31))},,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=o(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))i.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var h=0;h<s.length;h++)a.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t,n){"use strict";var r=function(){},i=n(60),a={},o=Function.call.bind(Object.prototype.hasOwnProperty);function s(e,t,n,s,u){for(var l in e)if(o(e,l)){var c;try{if("function"!=typeof e[l]){var h=Error((s||"React class")+": "+n+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[l]+"`.");throw h.name="Invariant Violation",h}c=e[l](t,l,s,n,null,i)}catch(e){c=e}if(!c||c instanceof Error||r((s||"React class")+": type specification of "+n+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof c+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),c instanceof Error&&!(c.message in a)){a[c.message]=!0;var p=u?u():"";r("Failed "+n+" type: "+c.message+(null!=p?p:""))}}}r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},s.resetWarningCache=function(){a={}},e.exports=s},function(e,t,n){"use strict";(function(e){var r=n(44);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){if("undefined"!=typeof window&&"object"===(0,i.default)(window.process)&&"renderer"===window.process.type)return!0;if(void 0!==e&&"object"===(0,i.default)(e.versions)&&Boolean(e.versions.electron))return!0;var n="object"===("undefined"==typeof navigator?"undefined":(0,i.default)(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent,r=t||n;if(r&&r.indexOf("Electron")>=0)return!0;return!1};var i=r(n(49))}).call(this,n(31))},function(e,t){},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(88)},function(e,t,n){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",o={};e(o),(n=i(o)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else t=i;else e=i}return r(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,a,o;for(void 0===t&&(t=1e-6),i=e,o=0;o<8;o++){if(a=this.sampleCurveX(i)-e,Math.abs(a)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=this.sampleCurveX(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var i=a;function a(e,t){this.x=e,this.y=t}function o(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!o(e[r],t[r]))return!1;return!0}return e===t}function s(e,t,r,i){var a=new n(e,t,r,i);return function(e){return a.solve(e)}}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),a=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e};var u=s(.25,.1,.25,1);function l(e,t,n){return Math.min(n,Math.max(t,e))}function c(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function h(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var a=i[r];for(var o in a)e[o]=a[o]}return e}var p=1;function f(){return p++}function d(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function v(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function m(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function y(e,t){return-1!==e.indexOf(t,e.length-t.length)}function g(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function b(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function _(e){return Array.isArray(e)?e.map(_):"object"==typeof e&&e?g(e,_):e}var x={};function w(e){x[e]||("undefined"!=typeof console&&console.warn(e),x[e]=!0)}function k(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function O(e){for(var t=0,n=0,r=e.length,i=r-1,a=void 0,o=void 0;n<r;i=n++)a=e[n],t+=((o=e[i]).x-a.x)*(a.y+o.y);return t}function E(e){try{var t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var S,T,P,j=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),C=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,A=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,M={now:j,frame:function(e){var t=C(e);return{cancel:function(){return A(t)}}},getImageData:function(e){var t=self.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},resolveURL:function(e){return S||(S=self.document.createElement("a")),S.href=e,S.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio}},I={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},R={supported:!1,testSupport:function(e){!L&&P&&(z?D(e):T=e)}},L=!1,z=!1;function D(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,P),e.isContextLost())return;R.supported=!0}catch(e){}e.deleteTexture(t),L=!0}self.document&&((P=self.document.createElement("img")).onload=function(){T&&D(T),T=null,z=!0},P.onerror=function(){L=!0,T=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var F="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes";function B(e,t){var n=Z(I.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!I.REQUIRE_ACCESS_TOKEN)return X(e);if(!(t=t||I.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+F);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+F);return e.params.push("access_token="+t),X(e)}function N(e){return 0===e.indexOf("mapbox:")}var U=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function V(e){return U.test(e)}var W=/(\.(png|jpg)\d*)(?=$)/,q=/\.[\w]+$/,G=function(e){var t=Z(e);if(!t.path.match(/(^\/v4\/)/)||!t.path.match(q))return e;var n="mapbox://tiles/";n+=t.path.replace("/v4/","");var r=t.params.filter((function(e){return!e.match(/^access_token=/)}));return r.length&&(n+="?"+r.join("&")),n},H=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/;function Z(e){var t=e.match(H);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function X(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Y(e){if(!e)return null;var t,n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse((t=n[1],decodeURIComponent(self.atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))))}catch(e){return null}}var K=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};K.prototype.getStorageKey=function(e){var t,n=Y(I.ACCESS_TOKEN),r="";return n&&n.u?(t=n.u,r=self.btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))):r=I.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+r:"mapbox.eventData:"+r},K.prototype.fetchEventData=function(){var e=E("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=self.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){w("Unable to read from LocalStorage")}},K.prototype.saveEventData=function(){var e=E("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){w("Unable to write to LocalStorage")}},K.prototype.processRequests=function(){},K.prototype.postEvent=function(e,t,n){var r=this;if(I.EVENTS_URL){var i=Z(I.EVENTS_URL);i.params.push("access_token="+(I.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"0.54.1",userId:this.anonId},o=t?h(a,t):a,s={url:X(i),headers:{"Content-Type":"text/plain"},body:JSON.stringify([o])};this.pendingRequest=ce(s,(function(e){r.pendingRequest=null,n(e),r.saveEventData(),r.processRequests()}))}},K.prototype.queueRequest=function(e){this.queue.push(e),this.processRequests()};var J=function(e){function t(){e.call(this,"map.load"),this.success={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postMapLoadEvent=function(e,t){I.EVENTS_URL&&I.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return N(e)||V(e)}))&&this.queueRequest({id:t,timestamp:Date.now()})},t.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var t=this.queue.shift(),n=t.id,r=t.timestamp;n&&this.success[n]||(this.anonId||this.fetchEventData(),v(this.anonId)||(this.anonId=d()),this.postEvent(r,{},(function(t){t||n&&(e.success[n]=!0)})))}},t}(K),$=new(function(e){function t(){e.call(this,"appUserTurnstile")}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.postTurnstileEvent=function(e){I.EVENTS_URL&&I.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return N(e)||V(e)}))&&this.queueRequest(Date.now())},t.prototype.processRequests=function(){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var t=Y(I.ACCESS_TOKEN),n=t?t.u:I.ACCESS_TOKEN,r=n!==this.eventData.tokenU;v(this.anonId)||(this.anonId=d(),r=!0);var i=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),o=new Date(i),s=(i-this.eventData.lastSuccess)/864e5;r=r||s>=1||s<-1||a.getDate()!==o.getDate()}else r=!0;if(!r)return this.processRequests();this.postEvent(i,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=i,e.eventData.tokenU=n)}))}},t}(K)),Q=$.postTurnstileEvent.bind($),ee=new J,te=ee.postMapLoadEvent.bind(ee),ne={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ne);var re=function(e){function t(t,n,r){401===n&&V(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=n,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error);function ie(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}var ae,oe,se=ie()?function(){return self.worker&&self.worker.referrer}:function(){var e=self.location.origin;if(e&&"null"!==e&&"file://"!==e)return e+self.location.pathname},ue=function(e,t){if(!/^file:/.test(e.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n=new self.AbortController,r=new self.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:se(),signal:n.signal});return"json"===e.type&&r.headers.set("Accept","application/json"),self.fetch(r).then((function(n){n.ok?n[e.type||"text"]().then((function(e){t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires"))})).catch((function(e){return t(new Error(e.message))})):t(new re(n.statusText,n.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))})),{cancel:function(){return n.abort()}}}(e,t);if(ie()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t)}return function(e,t){var n=new self.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&n.setRequestHeader("Accept","application/json"),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new re(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},le=function(e,t){return ue(h(e,{type:"arrayBuffer"}),t)},ce=function(e,t){return ue(h(e,{method:"POST"}),t)};ae=[],oe=0;var he=function(e,t){if(oe>=I.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return ae.push(n),n}oe++;var r=!1,i=function(){if(!r)for(r=!0,oe--;ae.length&&oe<I.MAX_PARALLEL_IMAGE_REQUESTS;){var e=ae.shift(),t=e.requestParameters,n=e.callback;e.cancelled||(e.cancel=he(t,n).cancel)}},a=le(e,(function(e,n,r,a){if(i(),e)t(e);else if(n){var o=new self.Image,s=self.URL||self.webkitURL;o.onload=function(){t(null,o),s.revokeObjectURL(o.src)},o.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var u=new self.Blob([new Uint8Array(n)],{type:"image/png"});o.cacheControl=r,o.expires=a,o.src=n.byteLength?s.createObjectURL(u):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}));return{cancel:function(){a.cancel(),i()}}};function pe(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function fe(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var de=function(e,t){void 0===t&&(t={}),h(this,t),this.type=e},ve=function(e){function t(t,n){void 0===n&&(n={}),e.call(this,"error",h({error:t},n))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(de),me=function(){};me.prototype.on=function(e,t){return this._listeners=this._listeners||{},pe(e,t,this._listeners),this},me.prototype.off=function(e,t){return fe(e,t,this._listeners),fe(e,t,this._oneTimeListeners),this},me.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},pe(e,t,this._oneTimeListeners),this},me.prototype.fire=function(e,t){"string"==typeof e&&(e=new de(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,e);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];a<o.length;a+=1){var s=o[a];fe(n,s,this._oneTimeListeners),s.call(this,e)}var u=this._eventedParent;u&&(h(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(e))}else e instanceof ve&&console.error(e.error);return this},me.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},me.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var ye={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"string",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:[{"!":"text-offset"}],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:[{"!":"text-anchor"},{"!":"text-offset"},{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",requires:["text-field"],values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"string",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}}},ge=function(e,t,n,r){this.message=(e?e+": ":"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function be(e){var t=e.key,n=e.value;return n?[new ge(t,n,"constants have been deprecated as of v8")]:[]}function _e(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];for(var r=0,i=t;r<i.length;r+=1){var a=i[r];for(var o in a)e[o]=a[o]}return e}function xe(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function we(e){return Array.isArray(e)?e.map(we):xe(e)}var ke=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),Oe=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,r=t;n<r.length;n+=1){var i=r[n],a=i[0],o=i[1];this.bindings[a]=o}};Oe.prototype.concat=function(e){return new Oe(this,e)},Oe.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},Oe.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Ee={kind:"null"},Se={kind:"number"},Te={kind:"string"},Pe={kind:"boolean"},je={kind:"color"},Ce={kind:"object"},Ae={kind:"value"},Me={kind:"collator"},Ie={kind:"formatted"};function Re(e,t){return{kind:"array",itemType:e,N:t}}function Le(e){if("array"===e.kind){var t=Le(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var ze=[Ee,Se,Te,Pe,je,Ie,Ce,Re(Ae)];function De(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!De(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=ze;n<r.length;n+=1)if(!De(r[n],t))return null}return"Expected "+Le(e)+" but found "+Le(t)+" instead."}var Fe=t((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function a(e){return"%"===e[e.length-1]?r(parseFloat(e)/100*255):r(parseInt(e))}function o(e){return"%"===e[e.length-1]?i(parseFloat(e)/100):i(parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,i=e.replace(/ /g,"").toLowerCase();if(i in n)return n[i].slice();if("#"===i[0])return 4===i.length?(t=parseInt(i.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===i.length&&(t=parseInt(i.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var u=i.indexOf("("),l=i.indexOf(")");if(-1!==u&&l+1===i.length){var c=i.substr(0,u),h=i.substr(u+1,l-(u+1)).split(","),p=1;switch(c){case"rgba":if(4!==h.length)return null;p=o(h.pop());case"rgb":return 3!==h.length?null:[a(h[0]),a(h[1]),a(h[2]),p];case"hsla":if(4!==h.length)return null;p=o(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,d=o(h[1]),v=o(h[2]),m=v<=.5?v*(d+1):v+d-v*d,y=2*v-m;return[r(255*s(y,m,f+1/3)),r(255*s(y,m,f)),r(255*s(y,m,f-1/3)),p];default:return null}}return null}}catch(e){}})).parseCSSColor,Be=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};Be.parse=function(e){if(e){if(e instanceof Be)return e;if("string"==typeof e){var t=Fe(e);if(t)return new Be(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},Be.prototype.toString=function(){var e=this.toArray(),t=e[0],n=e[1],r=e[2],i=e[3];return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+i+")"},Be.prototype.toArray=function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]},Be.black=new Be(0,0,0,1),Be.white=new Be(1,1,1,1),Be.transparent=new Be(0,0,0,0),Be.red=new Be(1,0,0,1);var Ne=function(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Ne.prototype.compare=function(e,t){return this.collator.compare(e,t)},Ne.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ue=function(e,t,n){this.text=e,this.scale=t,this.fontStack=n},Ve=function(e){this.sections=e};function We(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function qe(e){if(null===e)return Ee;if("string"==typeof e)return Te;if("boolean"==typeof e)return Pe;if("number"==typeof e)return Se;if(e instanceof Be)return je;if(e instanceof Ne)return Me;if(e instanceof Ve)return Ie;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var a=qe(i[r]);if(t){if(t===a)continue;t=Ae;break}t=a}return Re(t||Ae,n)}return Ce}function Ge(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Be||e instanceof Ve?e.toString():JSON.stringify(e)}Ve.fromString=function(e){return new Ve([new Ue(e,null,null)])},Ve.prototype.toString=function(){return this.sections.map((function(e){return e.text})).join("")},Ve.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),e.push(i)}return e};var He=function(e,t){this.type=e,this.value=t};He.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!function e(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Be)return!0;if(t instanceof Ne)return!0;if(t instanceof Ve)return!0;if(Array.isArray(t)){for(var n=0,r=t;n<r.length;n+=1)if(!e(r[n]))return!1;return!0}if("object"==typeof t){for(var i in t)if(!e(t[i]))return!1;return!0}return!1}(e[1]))return t.error("invalid value");var n=e[1],r=qe(n),i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new He(r,n)},He.prototype.evaluate=function(){return this.value},He.prototype.eachChild=function(){},He.prototype.possibleOutputs=function(){return[this.value]},He.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Be?["rgba"].concat(this.value.toArray()):this.value instanceof Ve?this.value.serialize():this.value};var Ze=function(e){this.name="ExpressionEvaluationError",this.message=e};Ze.prototype.toJSON=function(){return this.message};var Xe={string:Te,number:Se,boolean:Pe,object:Ce},Ye=function(e,t){this.type=e,this.args=t};Ye.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n,r=1,i=e[0];if("array"===i){var a,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in Xe)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=Xe[s],r++}else a=Ae;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=Re(a,o)}else n=Xe[i];for(var u=[];r<e.length;r++){var l=t.parse(e[r],r,Ae);if(!l)return null;u.push(l)}return new Ye(n,u)},Ye.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!De(this.type,qe(n)))return n;if(t===this.args.length-1)throw new Ze("Expected value to be of type "+Le(this.type)+", but found "+Le(qe(n))+" instead.")}return null},Ye.prototype.eachChild=function(e){this.args.forEach(e)},Ye.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})))},Ye.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var Ke=function(e){this.type=Ie,this.sections=e};Ke.parse=function(e,t){if(e.length<3)return t.error("Expected at least two arguments.");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");for(var n=[],r=1;r<e.length-1;r+=2){var i=t.parse(e[r],1,Ae);if(!i)return null;var a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a)return t.error("Formatted text type must be 'string', 'value', or 'null'.");var o=e[r+1];if("object"!=typeof o||Array.isArray(o))return t.error("Format options argument must be an object.");var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,Se)))return null;var u=null;if(o["text-font"]&&!(u=t.parse(o["text-font"],1,Re(Te))))return null;n.push({text:i,scale:s,font:u})}return new Ke(n)},Ke.prototype.evaluate=function(e){return new Ve(this.sections.map((function(t){return new Ue(Ge(t.text.evaluate(e)),t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null)})))},Ke.prototype.eachChild=function(e){for(var t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e(r.text),r.scale&&e(r.scale),r.font&&e(r.font)}},Ke.prototype.possibleOutputs=function(){return[void 0]},Ke.prototype.serialize=function(){for(var e=["format"],t=0,n=this.sections;t<n.length;t+=1){var r=n[t];e.push(r.text.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),e.push(i)}return e};var Je={"to-boolean":Pe,"to-color":je,"to-number":Se,"to-string":Te},$e=function(e,t){this.type=e,this.args=t};$e.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");for(var r=Je[n],i=[],a=1;a<e.length;a++){var o=t.parse(e[a],a,Ae);if(!o)return null;i.push(o)}return new $e(r,i)},$e.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(t=i[r].evaluate(e))instanceof Be)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":We(t[0],t[1],t[2],t[3])))return new Be(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Ze(n||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,u=this.args;s<u.length;s+=1){if(null===(o=u[s].evaluate(e)))return 0;var l=Number(o);if(!isNaN(l))return l}throw new Ze("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?Ve.fromString(Ge(this.args[0].evaluate(e))):Ge(this.args[0].evaluate(e))},$e.prototype.eachChild=function(e){this.args.forEach(e)},$e.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})))},$e.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ke([{text:this.args[0],scale:null,font:null}]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var Qe=["Unknown","Point","LineString","Polygon"],et=function(){this.globals=null,this.feature=null,this.featureState=null,this._parseColorCache={}};et.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},et.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Qe[this.feature.type]:this.feature.type:null},et.prototype.properties=function(){return this.feature&&this.feature.properties||{}},et.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Be.parse(e)),t};var tt=function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r};tt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},tt.prototype.eachChild=function(e){this.args.forEach(e)},tt.prototype.possibleOutputs=function(){return[void 0]},tt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},tt.parse=function(e,t){var n,r=e[0],i=tt.definitions[r];if(!i)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=o.filter((function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var h=c[l],p=h[0],f=h[1];u=new st(t.registry,t.path,null,t.scope);for(var d=[],v=!1,m=1;m<e.length;m++){var y=e[m],g=Array.isArray(p)?p[m-1]:p.type,b=u.parse(y,1+d.length,g);if(!b){v=!0;break}d.push(b)}if(!v)if(Array.isArray(p)&&p.length!==d.length)u.error("Expected "+p.length+" arguments, but found "+d.length+" instead.");else{for(var _=0;_<d.length;_++){var x=Array.isArray(p)?p[_]:p.type,w=d[_];u.concat(_+1).checkSubtype(x,w.type)}if(0===u.errors.length)return new tt(r,a,f,d)}}if(1===s.length)(n=t.errors).push.apply(n,u.errors);else{for(var k=(s.length?s:o).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(Le).join(", ")+")":"("+Le(t.type)+"...)"})).join(" | "),O=[],E=1;E<e.length;E++){var S=t.parse(e[E],1+O.length);if(!S)return null;O.push(Le(S.type))}t.error("Expected arguments of type "+k+", but found ("+O.join(", ")+") instead.")}return null},tt.register=function(e,t){for(var n in tt.definitions=t,t)e[n]=tt};var nt=function(e,t,n){this.type=Me,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t};function rt(e){if(e instanceof tt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild((function(e){t&&!rt(e)&&(t=!1)})),t}function it(e){if(e instanceof tt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!it(e)&&(t=!1)})),t}function at(e,t){if(e instanceof tt&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!at(e,t)&&(n=!1)})),n}nt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,Pe);if(!r)return null;var i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,Pe);if(!i)return null;var a=null;return n.locale&&!(a=t.parse(n.locale,1,Te))?null:new nt(r,i,a)},nt.prototype.evaluate=function(e){return new Ne(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},nt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},nt.prototype.possibleOutputs=function(){return[void 0]},nt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var ot=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};ot.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new ot(n,t.scope.get(n)):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},ot.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},ot.prototype.eachChild=function(){},ot.prototype.possibleOutputs=function(){return[void 0]},ot.prototype.serialize=function(){return["var",this.name]};var st=function(e,t,n,r,i){void 0===t&&(t=[]),void 0===r&&(r=new Oe),void 0===i&&(i=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};function ut(e,t){for(var n,r,i=0,a=e.length-1,o=0;i<=a;){if(n=e[o=Math.floor((i+a)/2)],r=e[o+1],t===n||t>n&&t<r)return o;if(n<t)i=o+1;else{if(!(n>t))throw new Ze("Input is not a number.");a=o-1}}return Math.max(o-1,0)}st.prototype.parse=function(e,t,n,r,i){return void 0===i&&(i={}),t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)},st.prototype._parse=function(e,t){function n(e,t,n){return"assert"===n?new Ye(t,[e]):"coerce"===n?new $e(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof He)&&function e(t){if(t instanceof ot)return e(t.boundExpression);if(t instanceof tt&&"error"===t.name)return!1;if(t instanceof nt)return!1;var n=t instanceof $e||t instanceof Ye,r=!0;return t.eachChild((function(t){r=n?r&&e(t):r&&t instanceof He})),!!r&&rt(t)&&at(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var u=new et;try{a=new He(a.type,a.evaluate(u))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===e?this.error("'undefined' value invalid. Use null instead."):"object"==typeof e?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof e+" instead.")},st.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new st(this.registry,r,t||null,i,this.errors)},st.prototype.error=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new ke(r,e))},st.prototype.checkSubtype=function(e,t){var n=De(e,t);return n&&this.error(n),n};var lt=function(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var a=i[r],o=a[0],s=a[1];this.labels.push(o),this.outputs.push(s)}};function ct(e,t,n){return e*(1-n)+t*n}lt.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,Se)))return null;var i=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),r.unshift(-1/0);for(var o=0;o<r.length;o+=2){var s=r[o],u=r[o+1],l=o+1,c=o+2;if("number"!=typeof s)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(i.length&&i[i.length-1][0]>=s)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var h=t.parse(u,c,a);if(!h)return null;a=a||h.type,i.push([s,h])}return new lt(a,n,i)},lt.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[ut(t,r)].evaluate(e)},lt.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},lt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()})))},lt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var ht=Object.freeze({number:ct,color:function(e,t,n){return new Be(ct(e.r,t.r,n),ct(e.g,t.g,n),ct(e.b,t.b,n),ct(e.a,t.a,n))},array:function(e,t,n){return e.map((function(e,r){return ct(e,t[r],n)}))}}),pt=6/29,ft=3*pt*pt,dt=Math.PI/180,vt=180/Math.PI;function mt(e){return e>.008856451679035631?Math.pow(e,1/3):e/ft+4/29}function yt(e){return e>pt?e*e*e:ft*(e-4/29)}function gt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _t(e){var t=bt(e.r),n=bt(e.g),r=bt(e.b),i=mt((.4124564*t+.3575761*n+.1804375*r)/.95047),a=mt((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-mt((.0193339*t+.119192*n+.9503041*r)/1.08883)),alpha:e.a}}function xt(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*yt(t),n=.95047*yt(n),r=1.08883*yt(r),new Be(gt(3.2404542*n-1.5371385*t-.4985314*r),gt(-.969266*n+1.8760108*t+.041556*r),gt(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function wt(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var kt={forward:_t,reverse:xt,interpolate:function(e,t,n){return{l:ct(e.l,t.l,n),a:ct(e.a,t.a,n),b:ct(e.b,t.b,n),alpha:ct(e.alpha,t.alpha,n)}}},Ot={forward:function(e){var t=_t(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*vt;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*dt,n=e.c;return xt({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:wt(e.h,t.h,n),c:ct(e.c,t.c,n),l:ct(e.l,t.l,n),alpha:ct(e.alpha,t.alpha,n)}}},Et=Object.freeze({lab:kt,hcl:Ot}),St=function(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var a=0,o=i;a<o.length;a+=1){var s=o[a],u=s[0],l=s[1];this.labels.push(u),this.outputs.push(l)}};function Tt(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}St.interpolationFactor=function(e,t,r,i){var a=0;if("exponential"===e.name)a=Tt(t,e.base,r,i);else if("linear"===e.name)a=Tt(t,1,r,i);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new n(o[0],o[1],o[2],o[3]).solve(Tt(t,1,r,i))}return a},St.parse=function(e,t){var n=e[0],r=e[1],i=e[2],a=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,2,Se)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=je:t.expectedType&&"value"!==t.expectedType.kind&&(l=t.expectedType);for(var c=0;c<a.length;c+=2){var h=a[c],p=a[c+1],f=c+3,d=c+4;if("number"!=typeof h)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=h)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var v=t.parse(p,d,l);if(!v)return null;l=l||v.type,u.push([h,v])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new St(l,n,r,i,u):t.error("Type "+Le(l)+" is not interpolatable.")},St.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var a=ut(t,r),o=t[a],s=t[a+1],u=St.interpolationFactor(this.interpolation,r,o,s),l=n[a].evaluate(e),c=n[a+1].evaluate(e);return"interpolate"===this.operator?ht[this.type.kind.toLowerCase()](l,c,u):"interpolate-hcl"===this.operator?Ot.reverse(Ot.interpolate(Ot.forward(l),Ot.forward(c),u)):kt.reverse(kt.interpolate(kt.forward(l),kt.forward(c),u))},St.prototype.eachChild=function(e){e(this.input);for(var t=0,n=this.outputs;t<n.length;t+=1)e(n[t])},St.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()})))},St.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t};var Pt=function(e,t){this.type=e,this.args=t};Pt.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],a=0,o=e.slice(1);a<o.length;a+=1){var s=o[a],u=t.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!u)return null;n=n||u.type,i.push(u)}var l=r&&i.some((function(e){return De(r,e.type)}));return new Pt(l?Ae:n,i)},Pt.prototype.evaluate=function(e){for(var t=null,n=0,r=this.args;n<r.length&&null===(t=r[n].evaluate(e));n+=1);return t},Pt.prototype.eachChild=function(e){this.args.forEach(e)},Pt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.args.map((function(e){return e.possibleOutputs()})))},Pt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var jt=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};jt.prototype.evaluate=function(e){return this.result.evaluate(e)},jt.prototype.eachChild=function(e){for(var t=0,n=this.bindings;t<n.length;t+=1)e(n[t][1]);e(this.result)},jt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],r=1;r<e.length-1;r+=2){var i=e[r];if("string"!=typeof i)return t.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var a=t.parse(e[r+1],r+1);if(!a)return null;n.push([i,a])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return o?new jt(n,o):null},jt.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},jt.prototype.serialize=function(){for(var e=["let"],t=0,n=this.bindings;t<n.length;t+=1){var r=n[t],i=r[0],a=r[1];e.push(i,a.serialize())}return e.push(this.result.serialize()),e};var Ct=function(e,t,n){this.type=e,this.index=t,this.input=n};Ct.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,Se),r=t.parse(e[2],2,Re(t.expectedType||Ae));if(!n||!r)return null;var i=r.type;return new Ct(i.itemType,n,r)},Ct.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Ze("Array index out of bounds: "+t+" < 0.");if(t>=n.length)throw new Ze("Array index out of bounds: "+t+" > "+(n.length-1)+".");if(t!==Math.floor(t))throw new Ze("Array index must be an integer, but found "+t+" instead.");return n[t]},Ct.prototype.eachChild=function(e){e(this.index),e(this.input)},Ct.prototype.possibleOutputs=function(){return[void 0]},Ct.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var At=function(e,t,n,r,i,a){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=a};At.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var i={},a=[],o=2;o<e.length-1;o+=2){var s=e[o],u=e[o+1];Array.isArray(s)||(s=[s]);var l=t.concat(o);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,h=s;c<h.length;c+=1){var p=h[c];if("number"!=typeof p&&"string"!=typeof p)return l.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,qe(p)))return null}else n=qe(p);if(void 0!==i[String(p)])return l.error("Branch labels must be unique.");i[String(p)]=a.length}var f=t.parse(u,o,r);if(!f)return null;r=r||f.type,a.push(f)}var d=t.parse(e[1],1,Ae);if(!d)return null;var v=t.parse(e[e.length-1],e.length-1,r);return v?"value"!==d.type.kind&&t.concat(1).checkSubtype(n,d.type)?null:new At(n,r,d,i,a,v):null},At.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(qe(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},At.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},At.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.outputs.map((function(e){return e.possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},At.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,a=Object.keys(this.cases).sort();i<a.length;i+=1){var o=a[i];void 0===(h=r[this.cases[o]])?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[h][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},u=0,l=n;u<l.length;u+=1){var c=l[u],h=c[0],p=c[1];1===p.length?t.push(s(p[0])):t.push(p.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var Mt=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};function It(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Rt(e,t,n,r){return 0===r.compare(t,n)}function Lt(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){this.type=Pe,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return i.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,Ae);if(!a)return null;if(!It(n,a.type))return t.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Le(a.type)+"'.");var o=t.parse(e[2],2,Ae);if(!o)return null;if(!It(n,o.type))return t.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Le(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+Le(a.type)+"' and '"+Le(o.type)+"'.");r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Ye(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Ye(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,Me)))return null}return new i(a,o,s)},i.prototype.evaluate=function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=qe(a),u=qe(o);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new Ze('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=qe(a),c=qe(o);if("string"!==l.kind||"string"!==c.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)},i.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},i.prototype.possibleOutputs=function(){return[!0,!1]},i.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},i}()}Mt.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],i=1;i<e.length-1;i+=2){var a=t.parse(e[i],i,Pe);if(!a)return null;var o=t.parse(e[i+1],i+1,n);if(!o)return null;r.push([a,o]),n=n||o.type}var s=t.parse(e[e.length-1],e.length-1,n);return s?new Mt(n,r,s):null},Mt.prototype.evaluate=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},Mt.prototype.eachChild=function(e){for(var t=0,n=this.branches;t<n.length;t+=1){var r=n[t],i=r[0],a=r[1];e(i),e(a)}e(this.otherwise)},Mt.prototype.possibleOutputs=function(){var e;return(e=[]).concat.apply(e,this.branches.map((function(e){return e[0],e[1].possibleOutputs()}))).concat(this.otherwise.possibleOutputs())},Mt.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e};var zt=Lt("==",(function(e,t,n){return t===n}),Rt),Dt=Lt("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!Rt(0,t,n,r)})),Ft=Lt("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Bt=Lt(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Nt=Lt("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Ut=Lt(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Vt=function(e,t,n,r,i){this.type=Te,this.number=e,this.locale=t,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Vt.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var n=t.parse(e[1],1,Se);if(!n)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=t.parse(r.locale,1,Te)))return null;var a=null;if(r.currency&&!(a=t.parse(r.currency,1,Te)))return null;var o=null;if(r["min-fraction-digits"]&&!(o=t.parse(r["min-fraction-digits"],1,Se)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Se))?null:new Vt(n,i,a,o,s)},Vt.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Vt.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Vt.prototype.possibleOutputs=function(){return[void 0]},Vt.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Wt=function(e){this.type=Se,this.input=e};Wt.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error("Expected argument of type string or array, but found "+Le(n.type)+" instead."):new Wt(n):null},Wt.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Ze("Expected value to be of type string or array, but found "+Le(qe(t))+" instead.")},Wt.prototype.eachChild=function(e){e(this.input)},Wt.prototype.possibleOutputs=function(){return[void 0]},Wt.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var qt={"==":zt,"!=":Dt,">":Bt,"<":Ft,">=":Ut,"<=":Nt,array:Ye,at:Ct,boolean:Ye,case:Mt,coalesce:Pt,collator:nt,format:Ke,interpolate:St,"interpolate-hcl":St,"interpolate-lab":St,length:Wt,let:jt,literal:He,match:At,number:Ye,"number-format":Vt,object:Ye,step:lt,string:Ye,"to-boolean":$e,"to-color":$e,"to-number":$e,"to-string":$e,var:ot};function Gt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var o=a?a.evaluate(e):1,s=We(n,r,i,o);if(s)throw new Ze(s);return new Be(n/255*o,r/255*o,i/255*o,o)}function Ht(e,t){return e in t}function Zt(e,t){var n=t[e];return void 0===n?null:n}function Xt(e){return{type:e}}function Yt(e){return{result:"success",value:e}}function Kt(e){return{result:"error",value:e}}function Jt(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function $t(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Qt(e){return!!e.expression&&e.expression.interpolated}function en(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function tn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function nn(e){return e}function rn(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function an(e,t,n,r,i){return rn(typeof n===i?r[n]:void 0,e.default,t.default)}function on(e,t,n){if("number"!==en(n))return rn(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=ln(e.stops,n);return e.stops[i][1]}function sn(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==en(n))return rn(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=ln(e.stops,n),o=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],u=e.stops[a+1][1],l=ht[t.type]||nn;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=Et[e.colorSpace];l=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=s.evaluate.apply(void 0,e),r=u.evaluate.apply(void 0,e);if(void 0!==n&&void 0!==r)return l(n,r,o)}}:l(s,u,o)}function un(e,t,n){return"color"===t.type?n=Be.parse(n):"formatted"===t.type?n=Ve.fromString(n.toString()):en(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),rn(n,e.default,t.default)}function ln(e,t){for(var n,r,i=0,a=e.length-1,o=0;i<=a;){if(n=e[o=Math.floor((i+a)/2)][0],r=e[o+1][0],t===n||t>n&&t<r)return o;n<t?i=o+1:n>t&&(a=o-1)}return Math.max(o-1,0)}tt.register(qt,{error:[{kind:"error"},[Te],function(e,t){var n=t[0];throw new Ze(n.evaluate(e))}],typeof:[Te,[Ae],function(e,t){return Le(qe(t[0].evaluate(e)))}],"to-rgba":[Re(Se,4),[je],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[je,[Se,Se,Se],Gt],rgba:[je,[Se,Se,Se,Se],Gt],has:{type:Pe,overloads:[[[Te],function(e,t){return Ht(t[0].evaluate(e),e.properties())}],[[Te,Ce],function(e,t){var n=t[0],r=t[1];return Ht(n.evaluate(e),r.evaluate(e))}]]},get:{type:Ae,overloads:[[[Te],function(e,t){return Zt(t[0].evaluate(e),e.properties())}],[[Te,Ce],function(e,t){var n=t[0],r=t[1];return Zt(n.evaluate(e),r.evaluate(e))}]]},"feature-state":[Ae,[Te],function(e,t){return Zt(t[0].evaluate(e),e.featureState||{})}],properties:[Ce,[],function(e){return e.properties()}],"geometry-type":[Te,[],function(e){return e.geometryType()}],id:[Ae,[],function(e){return e.id()}],zoom:[Se,[],function(e){return e.globals.zoom}],"heatmap-density":[Se,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Se,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ae,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Se,Xt(Se),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[Se,Xt(Se),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:Se,overloads:[[[Se,Se],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[Se],function(e,t){return-t[0].evaluate(e)}]]},"/":[Se,[Se,Se],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[Se,[Se,Se],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[Se,[],function(){return Math.LN2}],pi:[Se,[],function(){return Math.PI}],e:[Se,[],function(){return Math.E}],"^":[Se,[Se,Se],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[Se,[Se],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[Se,[Se],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[Se,[Se],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[Se,[Se],function(e,t){var n=t[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[Se,[Se],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[Se,[Se],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[Se,[Se],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[Se,[Se],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[Se,[Se],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[Se,[Se],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[Se,Xt(Se),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Se,Xt(Se),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Se,[Se],function(e,t){var n=t[0];return Math.abs(n.evaluate(e))}],round:[Se,[Se],function(e,t){var n=t[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[Se,[Se],function(e,t){var n=t[0];return Math.floor(n.evaluate(e))}],ceil:[Se,[Se],function(e,t){var n=t[0];return Math.ceil(n.evaluate(e))}],"filter-==":[Pe,[Te,Ae],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[Pe,[Ae],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[Pe,[Te],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[Pe,[Te,Ae],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Pe,[Ae],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[Pe,[Te,Ae],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>a}],"filter-id->":[Pe,[Ae],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[Pe,[Te,Ae],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Pe,[Ae],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[Pe,[Te,Ae],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Pe,[Ae],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[Pe,[Ae],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Pe,[],function(e){return null!==e.id()}],"filter-type-in":[Pe,[Re(Te)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Pe,[Re(Ae)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Pe,[Te,Re(Ae)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[Pe,[Te,Re(Ae)],function(e,t){var n=t[0],r=t[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:Pe,overloads:[[[Pe,Pe],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[Xt(Pe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:Pe,overloads:[[[Pe,Pe],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[Xt(Pe),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[Pe,[Pe],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Pe,[Te],function(e,t){var n=t[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[Te,[Te],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Te,[Te],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Te,Xt(Ae),function(e,t){return t.map((function(t){return Ge(t.evaluate(e))})).join("")}],"resolved-locale":[Te,[Me],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var cn=function(e,t){var n;this.expression=e,this._warningHistory={},this._evaluator=new et,this._defaultValue=t?"color"===(n=t).type&&tn(n.default)?new Be(0,0,0,0):"color"===n.type?Be.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=t&&"enum"===t.type?t.values:null};function hn(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in qt}function pn(e,t){var n=new st(qt,[],t?function(e){var t={color:je,string:Te,number:Se,enum:Te,boolean:Pe,formatted:Ie};return"array"===e.type?Re(t[e.value]||Ae,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Yt(new cn(r,t)):Kt(n.errors)}cn.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this.expression.evaluate(this._evaluator)},cn.prototype.evaluate=function(e,t,n){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null;try{var r=this.expression.evaluate(this._evaluator);if(null==r)return this._defaultValue;if(this._enumValues&&!(r in this._enumValues))throw new Ze("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(r)+" instead.");return r}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var fn=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!it(t.expression)};fn.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},fn.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)};var dn=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,this.isStateDependent="camera"!==e&&!it(t.expression),n instanceof St&&(this._interpolationType=n.interpolation)};function vn(e,t){if("error"===(e=pn(e,t)).result)return e;var n=e.value.expression,r=rt(n);if(!r&&!Jt(t))return Kt([new ke("","data expressions not supported")]);var i=at(n,["zoom"]);if(!i&&!$t(t))return Kt([new ke("","zoom expressions not supported")]);var a=function e(t){var n=null;if(t instanceof jt)n=e(t.result);else if(t instanceof Pt)for(var r=0,i=t.args;r<i.length;r+=1){var a=i[r];if(n=e(a))break}else(t instanceof lt||t instanceof St)&&t.input instanceof tt&&"zoom"===t.input.name&&(n=t);return n instanceof ke||t.eachChild((function(t){var r=e(t);r instanceof ke?n=r:!n&&r?n=new ke("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new ke("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return a||i?a instanceof ke?Kt([a]):a instanceof St&&!Qt(t)?Kt([new ke("",'"interpolate" expressions cannot be used with this property')]):Yt(a?new dn(r?"camera":"composite",e.value,a):new fn(r?"constant":"source",e.value)):Kt([new ke("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}dn.prototype.evaluateWithoutErrorHandling=function(e,t,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n)},dn.prototype.evaluate=function(e,t,n){return this._styleExpression.evaluate(e,t,n)},dn.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?St.interpolationFactor(this._interpolationType,e,t,n):0};var mn=function(e,t){this._parameters=e,this._specification=t,_e(this,function e(t,n){var r,i,a,o="color"===n.type,s=t.stops&&"object"==typeof t.stops[0][0],u=s||void 0!==t.property,l=s||!u,c=t.type||(Qt(n)?"exponential":"interval");if(o&&((t=_e({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],Be.parse(e[1])]}))),t.default?t.default=Be.parse(t.default):t.default=Be.parse(n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Et[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===c)r=sn;else if("interval"===c)r=on;else if("categorical"===c){r=an,i=Object.create(null);for(var h=0,p=t.stops;h<p.length;h+=1){var f=p[h];i[f[0]]=f[1]}a=typeof t.stops[0][0]}else{if("identity"!==c)throw new Error('Unknown function type "'+c+'"');r=un}if(s){for(var d={},v=[],m=0;m<t.stops.length;m++){var y=t.stops[m],g=y[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:t.type,property:t.property,default:t.default,stops:[]},v.push(g)),d[g].stops.push([y[0].value,y[1]])}for(var b=[],_=0,x=v;_<x.length;_+=1){var w=x[_];b.push([d[w].zoom,e(d[w],n)])}return{kind:"composite",interpolationFactor:St.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:b.map((function(e){return e[0]})),evaluate:function(e,r){var i=e.zoom;return sn({stops:b,base:t.base},n,i).evaluate(i,r)}}}return l?{kind:"camera",interpolationFactor:"exponential"===c?St.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==t.base?t.base:1}):function(){return 0},zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){var o=e.zoom;return r(t,n,o,i,a)}}:{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?rn(t.default,n.default):r(t,n,s,i,a)}}}(this._parameters,this._specification))};function yn(e,t){if(tn(e))return new mn(e,t);if(hn(e)){var n=vn(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return e.key+": "+e.message})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Be.parse(e)),{kind:"constant",evaluate:function(){return r}}}function gn(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],u=en(n);if("object"!==u)return[new ge(t,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],h=r[c]||r["*"],p=void 0;if(i[c])p=i[c];else if(r[c])p=Vn;else if(i["*"])p=i["*"];else{if(!r["*"]){s.push(new ge(t,n[l],'unknown property "'+l+'"'));continue}p=Vn}s=s.concat(p({key:(t?t+".":t)+l,value:n[l],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new ge(t,n,'missing required property "'+f+'"'));return s}function bn(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Vn;if("array"!==en(t))return[new ge(a,t,"array expected, "+en(t)+" found")];if(n.length&&t.length!==n.length)return[new ge(a,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new ge(a,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===en(n.value)&&(s=n.value);for(var u=[],l=0;l<t.length;l++)u=u.concat(o({array:t,arrayIndex:l,value:t[l],valueSpec:s,style:r,styleSpec:i,key:a+"["+l+"]"}));return u}function _n(e){var t=e.key,n=e.value,r=e.valueSpec,i=en(n);return"number"!==i?[new ge(t,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new ge(t,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new ge(t,n,n+" is greater than the maximum value "+r.maximum)]:[]}function xn(e){var t,n,r,i=e.valueSpec,a=xe(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,u=!s,l="array"===en(e.value.stops)&&"array"===en(e.value.stops[0])&&"object"===en(e.value.stops[0][0]),c=gn({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new ge(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(bn({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===en(n)&&0===n.length&&t.push(new ge(e.key,n,"array must have at least one stop")),t},default:function(e){return Vn({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new ge(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new ge(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Qt(e.valueSpec)&&c.push(new ge(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Jt(e.valueSpec)?c.push(new ge(e.key,e.value,"property functions not supported")):s&&!$t(e.valueSpec)&&c.push(new ge(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!l||void 0!==e.value.property||c.push(new ge(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==en(a))return[new ge(s,a,"array expected, "+en(a)+" found")];if(2!==a.length)return[new ge(s,a,"array length 2 expected, length "+a.length+" found")];if(l){if("object"!==en(a[0]))return[new ge(s,a,"object expected, "+en(a[0])+" found")];if(void 0===a[0].zoom)return[new ge(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new ge(s,a,"object stop key must have value")];if(r&&r>xe(a[0].zoom))return[new ge(s,a[0].zoom,"stop zoom values must appear in ascending order")];xe(a[0].zoom)!==r&&(r=xe(a[0].zoom),n=void 0,o={}),t=t.concat(gn({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:_n,value:p}}))}else t=t.concat(p({key:s+"[0]",value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return hn(we(a[1]))?t.concat([new ge(s+"[1]",a[1],"expressions are not allowed in function stops.")]):t.concat(Vn({key:s+"[1]",value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function p(e,r){var s=en(e.value),u=xe(e.value),l=null!==e.value?e.value:r;if(t){if(s!==t)return[new ge(e.key,l,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ge(e.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, "+s+" found";return Jt(i)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ge(e.key,l,c)]}return"categorical"!==a||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==a&&"number"===s&&void 0!==n&&u<n?[new ge(e.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===a&&u in o?[new ge(e.key,l,"stop domain values must be unique")]:(o[u]=!0,[])):[new ge(e.key,l,"integer expected, found "+u)]}}function wn(e){var t=("property"===e.expressionContext?vn:pn)(we(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new ge(""+e.key+t.key,e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==n.possibleOutputs().indexOf(void 0))return[new ge(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!it(n))return[new ge(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!it(n))return[new ge(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!at(n,["zoom","feature-state"]))return[new ge(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!rt(n))return[new ge(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function kn(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(xe(n))&&i.push(new ge(t,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(xe(n))&&i.push(new ge(t,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function On(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var r=n[t];if(!On(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}mn.deserialize=function(e){return new mn(e._parameters,e._specification)},mn.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var En={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sn(e){if(null==e)return function(){return!0};On(e)||(e=Pn(e));var t=pn(e,En);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function Tn(e,t){return e<t?-1:e>t?1:0}function Pn(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?jn(e[1],e[2],"=="):"!="===n?Mn(jn(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?jn(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(Pn))):"all"===n?["all"].concat(e.slice(1).map(Pn)):"none"===n?["all"].concat(e.slice(1).map(Pn).map(Mn)):"in"===n?Cn(e[1],e.slice(2)):"!in"===n?Mn(Cn(e[1],e.slice(2))):"has"===n?An(e[1]):"!has"!==n||Mn(An(e[1]))}function jn(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function Cn(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Tn)]]:["filter-in-small",e,["literal",t]]}}function An(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Mn(e){return["!",e]}function In(e){return On(we(e.value))?wn(_e({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var n=t.value,r=t.key;if("array"!==en(n))return[new ge(r,n,"array expected, "+en(n)+" found")];var i,a=t.styleSpec,o=[];if(n.length<1)return[new ge(r,n,"filter array must have at least 1 element")];switch(o=o.concat(kn({key:r+"[0]",value:n[0],valueSpec:a.filter_operator,style:t.style,styleSpec:t.styleSpec})),xe(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===xe(n[1])&&o.push(new ge(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&o.push(new ge(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=en(n[1]))&&o.push(new ge(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=en(n[s]),"$type"===xe(n[1])?o=o.concat(kn({key:r+"["+s+"]",value:n[s],valueSpec:a.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new ge(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)o=o.concat(e({key:r+"["+u+"]",value:n[u],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":i=en(n[1]),2!==n.length?o.push(new ge(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&o.push(new ge(r+"[1]",n[1],"string expected, "+i+" found"))}return o}(e)}function Rn(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i[t+"_"+e.layerType];if(!s)return[];var u=o.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Vn({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var l,c=e.valueSpec||s[o];if(!c)return[new ge(n,a,'unknown property "'+o+'"')];if("string"===en(a)&&Jt(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(a)))return[new ge(n,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var h=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new ge(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&tn(we(a))&&"identity"===xe(a.type)&&h.push(new ge(n,a,'"text-font" does not support identity functions'))),h.concat(Vn({key:e.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Ln(e){return Rn(e,"paint")}function zn(e){return Rn(e,"layout")}function Dn(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new ge(r,n,'either "type" or "ref" is required'));var o,s=xe(n.type),u=xe(n.ref);if(n.id)for(var l=xe(n.id),c=0;c<e.arrayIndex;c++){var h=i.layers[c];xe(h.id)===l&&t.push(new ge(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+h.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new ge(r,n[e],'"'+e+'" is prohibited for ref layers'))})),i.layers.forEach((function(e){xe(e.id)===u&&(o=e)})),o?o.ref?t.push(new ge(r,n.ref,"ref cannot reference another ref layer")):s=xe(o.type):t.push(new ge(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var p=i.sources&&i.sources[n.source],f=p&&xe(p.type);p?"vector"===f&&"raster"===s?t.push(new ge(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?t.push(new ge(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new ge(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&p.lineMetrics||t.push(new ge(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new ge(r,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new ge(r,n.source,'source "'+n.source+'" not found'))}else t.push(new ge(r,n,'missing required property "source"'));return t=t.concat(gn({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Vn({key:r+".type",value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:In,layout:function(e){return gn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return zn(_e({layerType:s},e))}}})},paint:function(e){return gn({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ln(_e({layerType:s},e))}}})}}}))}function Fn(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ge(n,t,'"type" is required')];var a,o=xe(t.type);switch(o){case"vector":case"raster":case"raster-dem":if(a=gn({key:n,value:t,valueSpec:r["source_"+o.replace("-","_")],style:e.style,styleSpec:r}),"url"in t)for(var s in t)["type","url","tileSize"].indexOf(s)<0&&a.push(new ge(n+"."+s,t[s],'a source with a "url" property may not include a "'+s+'" property'));return a;case"geojson":if(a=gn({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r}),t.cluster)for(var u in t.clusterProperties){var l=t.clusterProperties[u],c=l[0],h=l[1],p="string"==typeof c?[c,["accumulated"],["get",u]]:c;a.push.apply(a,wn({key:n+"."+u+".map",value:h,expressionContext:"cluster-map"})),a.push.apply(a,wn({key:n+"."+u+".reduce",value:p,expressionContext:"cluster-reduce"}))}return a;case"video":return gn({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return gn({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ge(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return kn({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Bn(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],o=en(t);if(void 0===t)return a;if("object"!==o)return a.concat([new ge("light",t,"object expected, "+o+" found")]);for(var s in t){var u=s.match(/^(.*)-transition$/);a=u&&r[u[1]]&&r[u[1]].transition?a.concat(Vn({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?a.concat(Vn({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n})):a.concat([new ge(s,t[s],'unknown property "'+s+'"')])}return a}function Nn(e){var t=e.value,n=e.key,r=en(t);return"string"!==r?[new ge(n,t,"string expected, "+r+" found")]:[]}var Un={"*":function(){return[]},array:bn,boolean:function(e){var t=e.value,n=e.key,r=en(t);return"boolean"!==r?[new ge(n,t,"boolean expected, "+r+" found")]:[]},number:_n,color:function(e){var t=e.key,n=e.value,r=en(n);return"string"!==r?[new ge(t,n,"color expected, "+r+" found")]:null===Fe(n)?[new ge(t,n,'color expected, "'+n+'" found')]:[]},constants:be,enum:kn,filter:In,function:xn,layer:Dn,object:gn,source:Fn,light:Bn,string:Nn,formatted:function(e){return 0===Nn(e).length?[]:wn(e)}};function Vn(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&tn(xe(t))?xn(e):n.expression&&hn(we(t))?wn(e):n.type&&Un[n.type]?Un[n.type](e):gn(_e({},e,{valueSpec:n.type?r[n.type]:n}))}function Wn(e){var t=e.value,n=e.key,r=Nn(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ge(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ge(n,t,'"glyphs" url must include a "{range}" token'))),r}function qn(e,t){t=t||ye;var n=[];return n=n.concat(Vn({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Wn,"*":function(){return[]}}})),e.constants&&(n=n.concat(be({key:"constants",value:e.constants,style:e,styleSpec:t}))),Gn(n)}function Gn(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function Hn(e){return function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return Gn(e.apply(this,t))}}qn.source=Hn(Fn),qn.light=Hn(Bn),qn.layer=Hn(Dn),qn.filter=Hn(In),qn.paintProperty=Hn(Ln),qn.layoutProperty=Hn(zn);var Zn=qn,Xn=qn.light,Yn=qn.paintProperty,Kn=qn.layoutProperty;function Jn(e,t){var n=!1;if(t&&t.length)for(var r=0,i=t;r<i.length;r+=1){var a=i[r];e.fire(new ve(new Error(a.message))),n=!0}return n}var $n=Qn;function Qn(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],t=i[1],n=i[2],this.d=t+2*n;for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];r.push(o===s?null:i.subarray(o,s))}var u=i[3+r.length],l=i[3+r.length+1];this.keys=i.subarray(u,l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var h=n/t*e;this.min=-h,this.max=e+h}Qn.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Qn.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Qn.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},Qn.prototype.query=function(e,t,n,r,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Qn.prototype._queryCell=function(e,t,n,r,i,a,o,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,h=0;h<u.length;h++){var p=u[h];if(void 0===o[p]){var f=4*p;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(o[p]=!0,a.push(l[p])):o[p]=!1}}},Qn.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var u=this._convertToCellCoord(e),l=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++){var d=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,d,a,o,s))return}},Qn.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Qn.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Qn.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+e.length]=a,i.set(this.keys,a),a+=this.keys.length,i[3+e.length+1]=a,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var er=self.ImageData,tr={};function nr(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),tr[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}for(var rr in nr("Object",Object),$n.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},$n.deserialize=function(e){return new $n(e.buffer)},nr("Grid",$n),nr("Color",Be),nr("Error",Error),nr("StylePropertyFunction",mn),nr("StyleExpression",cn,{omit:["_evaluator"]}),nr("ZoomDependentExpression",dn),nr("ZoomConstantExpression",fn),nr("CompoundExpression",tt,{omit:["_evaluate"]}),qt)qt[rr]._classRegistryKey||nr("Expression_"+rr,qt[rr]);function ir(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof er)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],i=0,a=e;i<a.length;i+=1){var o=a[i];r.push(ir(o,t))}return r}if("object"==typeof e){var s=e.constructor,u=s._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var l=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)if(e.hasOwnProperty(c)&&!(tr[u].omit.indexOf(c)>=0)){var h=e[c];l[c]=tr[u].shallow.indexOf(c)>=0?h:ir(h,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(l.$name=u),l}throw new Error("can't serialize object of type "+typeof e)}function ar(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof er)return e;if(Array.isArray(e))return e.map(ar);if("object"==typeof e){var t=e.$name||"Object",n=tr[t].klass;if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,a=Object.keys(e);i<a.length;i+=1){var o=a[i];if("$name"!==o){var s=e[o];r[o]=tr[t].shallow.indexOf(o)>=0?s:ar(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var or=function(){this.first=!0};or.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))};var sr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function ur(e){for(var t=0,n=e;t<n.length;t+=1)if(hr(n[t].charCodeAt(0)))return!0;return!1}function lr(e){for(var t=0,n=e;t<n.length;t+=1)if(!cr(n[t].charCodeAt(0)))return!1;return!0}function cr(e){return!(sr.Arabic(e)||sr["Arabic Supplement"](e)||sr["Arabic Extended-A"](e)||sr["Arabic Presentation Forms-A"](e)||sr["Arabic Presentation Forms-B"](e))}function hr(e){return!(746!==e&&747!==e&&(e<4352||!(sr["Bopomofo Extended"](e)||sr.Bopomofo(e)||sr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||sr["CJK Compatibility Ideographs"](e)||sr["CJK Compatibility"](e)||sr["CJK Radicals Supplement"](e)||sr["CJK Strokes"](e)||!(!sr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||sr["CJK Unified Ideographs Extension A"](e)||sr["CJK Unified Ideographs"](e)||sr["Enclosed CJK Letters and Months"](e)||sr["Hangul Compatibility Jamo"](e)||sr["Hangul Jamo Extended-A"](e)||sr["Hangul Jamo Extended-B"](e)||sr["Hangul Jamo"](e)||sr["Hangul Syllables"](e)||sr.Hiragana(e)||sr["Ideographic Description Characters"](e)||sr.Kanbun(e)||sr["Kangxi Radicals"](e)||sr["Katakana Phonetic Extensions"](e)||sr.Katakana(e)&&12540!==e||!(!sr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!sr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||sr["Unified Canadian Aboriginal Syllabics"](e)||sr["Unified Canadian Aboriginal Syllabics Extended"](e)||sr["Vertical Forms"](e)||sr["Yijing Hexagram Symbols"](e)||sr["Yi Syllables"](e)||sr["Yi Radicals"](e))))}function pr(e){return!(hr(e)||function(e){return!!(sr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||sr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||sr["Letterlike Symbols"](e)||sr["Number Forms"](e)||sr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||sr["Control Pictures"](e)&&9251!==e||sr["Optical Character Recognition"](e)||sr["Enclosed Alphanumerics"](e)||sr["Geometric Shapes"](e)||sr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||sr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||sr["CJK Symbols and Punctuation"](e)||sr.Katakana(e)||sr["Private Use Area"](e)||sr["CJK Compatibility Forms"](e)||sr["Small Form Variants"](e)||sr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function fr(e,t){return!(!t&&(e>=1424&&e<=2303||sr["Arabic Presentation Forms-A"](e)||sr["Arabic Presentation Forms-B"](e))||e>=2304&&e<=3583||e>=3840&&e<=4255||sr.Khmer(e))}var dr,vr=!1,mr=null,yr=!1,gr=new me,br={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return yr||null!=br.applyArabicShaping}},_r=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new or,this.transition={})};_r.prototype.isSupportedScript=function(e){return function(e,t){for(var n=0,r=e;n<r.length;n+=1)if(!fr(r[n].charCodeAt(0),t))return!1;return!0}(e,br.isLoaded())},_r.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},_r.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}};var xr=function(e,t){this.property=e,this.value=t,this.expression=yn(void 0===t?e.specification.default:t,e.specification)};xr.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},xr.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var wr=function(e){this.property=e,this.value=new xr(e,void 0)};wr.prototype.transitioned=function(e,t){return new Or(this.property,this.value,t,h({},e.transition,this.transition),e.now)},wr.prototype.untransitioned=function(){return new Or(this.property,this.value,null,{},0)};var kr=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};kr.prototype.getValue=function(e){return _(this._values[e].value.value)},kr.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new wr(this._values[e].property)),this._values[e].value=new xr(this._values[e].property,null===t?void 0:_(t))},kr.prototype.getTransition=function(e){return _(this._values[e].transition)},kr.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new wr(this._values[e].property)),this._values[e].transition=_(t)||void 0},kr.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e[r+"-transition"]=a)}return e},kr.prototype.transitioned=function(e,t){for(var n=new Er(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n},kr.prototype.untransitioned=function(){for(var e=new Er(this._properties),t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e};var Or=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};Or.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}(i))}return n};var Er=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};Er.prototype.possiblyEvaluate=function(e){for(var t=new Pr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t},Er.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1){var n=t[e];if(this._values[n].prior)return!0}return!1};var Sr=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};Sr.prototype.getValue=function(e){return _(this._values[e].value)},Sr.prototype.setValue=function(e,t){this._values[e]=new xr(this._values[e].property,null===t?void 0:_(t))},Sr.prototype.serialize=function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t+=1){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e},Sr.prototype.possiblyEvaluate=function(e){for(var t=new Pr(this._properties),n=0,r=Object.keys(this._values);n<r.length;n+=1){var i=r[n];t._values[i]=this._values[i].possiblyEvaluate(e)}return t};var Tr=function(e,t,n){this.property=e,this.value=t,this.parameters=n};Tr.prototype.isConstant=function(){return"constant"===this.value.kind},Tr.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},Tr.prototype.evaluate=function(e,t){return this.property.evaluate(this.value,this.parameters,e,t)};var Pr=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};Pr.prototype.get=function(e){return this._values[e]};var jr=function(e){this.specification=e};jr.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},jr.prototype.interpolate=function(e,t,n){var r=ht[this.specification.type];return r?r(e,t,n):e};var Cr=function(e){this.specification=e};Cr.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new Tr(this,{kind:"constant",value:e.expression.evaluate(t)},t):new Tr(this,e.expression,t)},Cr.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Tr(this,{kind:"constant",value:void 0},e.parameters);var r=ht[this.specification.type];return r?new Tr(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e},Cr.prototype.evaluate=function(e,t,n,r){return"constant"===e.kind?e.value:e.evaluate(t,n,r)};var Ar=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(e,t){if(void 0===e.value)return new Tr(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t),r=this._calculate(n,n,n,t);return new Tr(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){var i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Tr(this,{kind:"constant",value:i},t)}return new Tr(this,e.expression,t)},t.prototype.evaluate=function(e,t,n,r){if("source"===e.kind){var i=e.evaluate(t,n,r);return this._calculate(i,i,i,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value},t.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},t.prototype.interpolate=function(e){return e},t}(Cr),Mr=function(e){this.specification=e};Mr.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new _r(Math.floor(t.zoom-1),t)),e.expression.evaluate(new _r(Math.floor(t.zoom),t)),e.expression.evaluate(new _r(Math.floor(t.zoom+1),t)),t)}},Mr.prototype._calculate=function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}},Mr.prototype.interpolate=function(e){return e};var Ir=function(e){this.specification=e};Ir.prototype.possiblyEvaluate=function(e,t){return!!e.expression.evaluate(t)},Ir.prototype.interpolate=function(){return!1};var Rr=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},e){var n=e[t],r=this.defaultPropertyValues[t]=new xr(n,void 0),i=this.defaultTransitionablePropertyValues[t]=new wr(n);this.defaultTransitioningPropertyValues[t]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};nr("DataDrivenProperty",Cr),nr("DataConstantProperty",jr),nr("CrossFadedDataDrivenProperty",Ar),nr("CrossFadedProperty",Mr),nr("ColorRampProperty",Ir);var Lr=function(e){function t(t,n){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter=function(){return!0},"custom"!==t.type&&(t=t,this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),n.layout&&(this._unevaluatedLayout=new Sr(n.layout)),n.paint)){for(var r in this._transitionablePaint=new kr(n.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var i in t.layout)this.setLayoutProperty(i,t.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".layout."+e;if(this._validate(Kn,r,e,t,n))return}"visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t},t.prototype.getPaintProperty=function(e){return y(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(void 0===n&&(n={}),null!=t){var r="layers."+this.id+".paint."+e;if(this._validate(Yn,r,e,t,n))return!1}if(y(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var i=this._transitionablePaint._values[e],a="cross-faded-data-driven"===i.property.specification["property-type"]&&!i.value.value&&t,o=this._transitionablePaint._values[e].value.isDataDriven();this._transitionablePaint.setValue(e,t);var s=this._transitionablePaint._values[e].value.isDataDriven();return this._handleSpecialPaintPropertyUpdate(e),s||o||a},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),b(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},t.prototype._validate=function(e,t,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&Jn(this,e.call(Zn,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:ye,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Tr&&Jt(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(me),zr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Dr=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Fr=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Br(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map((function(e){var i,a=(i=e.type,zr[i].BYTES_PER_ELEMENT),o=n=Nr(n,Math.max(t,a)),s=e.components||1;return r=Math.max(r,a),n+=a*s,{name:e.name,type:e.type,components:s,offset:o}})),size:Nr(n,Math.max(r,t)),alignment:t}}function Nr(e,t){return Math.ceil(e/t)*t}Fr.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Fr.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Fr.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Fr.prototype.clear=function(){this.length=0},Fr.prototype.resize=function(e){this.reserve(e),this.length=e},Fr.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Fr.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ur=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e},t}(Fr);Ur.prototype.bytesPerElement=4,nr("StructArrayLayout2i4",Ur);var Vr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e},t}(Fr);Vr.prototype.bytesPerElement=8,nr("StructArrayLayout4i8",Vr);var Wr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)},t.prototype.emplace=function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e},t}(Fr);Wr.prototype.bytesPerElement=12,nr("StructArrayLayout2i4i12",Wr);var qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,a,o,s)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u){var l=6*e,c=12*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint8[c+8]=a,this.uint8[c+9]=o,this.uint8[c+10]=s,this.uint8[c+11]=u,e},t}(Fr);qr.prototype.bytesPerElement=12,nr("StructArrayLayout4i4ub12",qr);var Gr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,a,o,s)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u){var l=8*e;return this.uint16[l+0]=t,this.uint16[l+1]=n,this.uint16[l+2]=r,this.uint16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Fr);Gr.prototype.bytesPerElement=16,nr("StructArrayLayout8ui16",Gr);var Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,n,r,i,a,o,s)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+3]=i,this.uint16[l+4]=a,this.uint16[l+5]=o,this.uint16[l+6]=s,this.uint16[l+7]=u,e},t}(Fr);Hr.prototype.bytesPerElement=16,nr("StructArrayLayout4i4ui16",Hr);var Zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e},t}(Fr);Zr.prototype.bytesPerElement=12,nr("StructArrayLayout3f12",Zr);var Xr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint32[n+0]=t,e},t}(Fr);Xr.prototype.bytesPerElement=4,nr("StructArrayLayout1ul4",Xr);var Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s,u,l,c){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,a,o,s,u,l,c)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u,l,c,h){var p=12*e,f=6*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=a,this.int16[p+5]=o,this.uint32[f+3]=s,this.uint16[p+8]=u,this.uint16[p+9]=l,this.int16[p+10]=c,this.int16[p+11]=h,e},t}(Fr);Yr.prototype.bytesPerElement=24,nr("StructArrayLayout6i1ul2ui2i24",Yr);var Kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)},t.prototype.emplace=function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e},t}(Fr);Kr.prototype.bytesPerElement=12,nr("StructArrayLayout2i2i2i12",Kr);var Jr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e},t}(Fr);Jr.prototype.bytesPerElement=12,nr("StructArrayLayout2ub2f12",Jr);var $r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d){var v=this.length;return this.resize(v+1),this.emplace(v,e,t,n,r,i,a,o,s,u,l,c,h,p,f,d)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v){var m=22*e,y=11*e,g=44*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.uint16[m+2]=r,this.uint16[m+3]=i,this.uint32[y+2]=a,this.uint32[y+3]=o,this.uint32[y+4]=s,this.uint16[m+10]=u,this.uint16[m+11]=l,this.uint16[m+12]=c,this.float32[y+7]=h,this.float32[y+8]=p,this.uint8[g+36]=f,this.uint8[g+37]=d,this.uint32[y+10]=v,e},t}(Fr);$r.prototype.bytesPerElement=44,nr("StructArrayLayout2i2ui3ul3ui2f2ub1ul44",$r);var Qr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v,m,y){var g=this.length;return this.resize(g+1),this.emplace(g,e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v,m,y)},t.prototype.emplace=function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v,m,y,g){var b=22*e,_=11*e;return this.int16[b+0]=t,this.int16[b+1]=n,this.int16[b+2]=r,this.int16[b+3]=i,this.int16[b+4]=a,this.int16[b+5]=o,this.uint16[b+6]=s,this.uint16[b+7]=u,this.uint16[b+8]=l,this.uint16[b+9]=c,this.uint16[b+10]=h,this.uint16[b+11]=p,this.uint16[b+12]=f,this.uint16[b+13]=d,this.uint16[b+14]=v,this.uint32[_+8]=m,this.float32[_+9]=y,this.float32[_+10]=g,e},t}(Fr);Qr.prototype.bytesPerElement=44,nr("StructArrayLayout6i9ui1ul2f44",Qr);var ei=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.float32[n+0]=t,e},t}(Fr);ei.prototype.bytesPerElement=4,nr("StructArrayLayout1f4",ei);var ti=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e},t}(Fr);ti.prototype.bytesPerElement=6,nr("StructArrayLayout3i6",ti);var ni=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=2*e,a=4*e;return this.uint32[i+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,e},t}(Fr);ni.prototype.bytesPerElement=8,nr("StructArrayLayout1ul2ui8",ni);var ri=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)},t.prototype.emplace=function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e},t}(Fr);ri.prototype.bytesPerElement=6,nr("StructArrayLayout3ui6",ri);var ii=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e},t}(Fr);ii.prototype.bytesPerElement=4,nr("StructArrayLayout2ui4",ii);var ai=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){var n=1*e;return this.uint16[n+0]=t,e},t}(Fr);ai.prototype.bytesPerElement=2,nr("StructArrayLayout1ui2",ai);var oi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)},t.prototype.emplace=function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e},t}(Fr);oi.prototype.bytesPerElement=8,nr("StructArrayLayout2f8",oi);var si=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)},t.prototype.emplace=function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e},t}(Fr);si.prototype.bytesPerElement=16,nr("StructArrayLayout4f16",si);var ui=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(Dr);ui.prototype.size=24;var li=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new ui(this,e)},t}(Yr);nr("CollisionBoxArray",li);var ci=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},Object.defineProperties(t.prototype,n),t}(Dr);ci.prototype.size=44;var hi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new ci(this,e)},t}($r);nr("PlacedSymbolArray",hi);var pi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},radialTextOffset:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.rightJustifiedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+2]=e},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.centerJustifiedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+3]=e},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.leftJustifiedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+4]=e},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.verticalPlacedTextSymbolIndex.set=function(e){this._structArray.int16[this._pos2+5]=e},n.key.get=function(){return this._structArray.uint16[this._pos2+6]},n.key.set=function(e){this._structArray.uint16[this._pos2+6]=e},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+7]},n.textBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+7]=e},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.iconBoxStartIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.iconBoxEndIndex.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.featureIndex.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+12]},n.numHorizontalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+13]},n.numVerticalGlyphVertices.set=function(e){this._structArray.uint16[this._pos2+13]=e},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+14]},n.numIconVertices.set=function(e){this._structArray.uint16[this._pos2+14]=e},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+8]},n.crossTileID.set=function(e){this._structArray.uint32[this._pos4+8]=e},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+9]},n.textBoxScale.set=function(e){this._structArray.float32[this._pos4+9]=e},n.radialTextOffset.get=function(){return this._structArray.float32[this._pos4+10]},n.radialTextOffset.set=function(e){this._structArray.float32[this._pos4+10]=e},Object.defineProperties(t.prototype,n),t}(Dr);pi.prototype.size=44;var fi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new pi(this,e)},t}(Qr);nr("SymbolInstanceArray",fi);var di=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{configurable:!0}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(Dr);di.prototype.size=4;var vi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new di(this,e)},t}(ei);nr("GlyphOffsetArray",vi);var mi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{configurable:!0},y:{configurable:!0},tileUnitDistanceFromAnchor:{configurable:!0}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(Dr);mi.prototype.size=6;var yi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new mi(this,e)},t}(ti);nr("SymbolLineVertexArray",yi);var gi=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(Dr);gi.prototype.size=8;var bi=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new gi(this,e)},t}(ni);nr("FeatureIndexArray",bi);var _i=Br([{name:"a_pos",components:2,type:"Int16"}],4).members,xi=function(e){void 0===e&&(e=[]),this.segments=e};function wi(e,t){return 256*(e=l(Math.floor(e),0,255))+l(Math.floor(t),0,255)}xi.prototype.prepareSegment=function(e,t,n,r){var i=this.segments[this.segments.length-1];return e>xi.MAX_VERTEX_ARRAY_LENGTH&&w("Max vertices per segment is "+xi.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!i||i.vertexLength+e>xi.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},xi.prototype.get=function(){return this.segments},xi.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var n=t[e];for(var r in n.vaos)n.vaos[r].destroy()}},xi.simpleSegment=function(e,t,n,r){return new xi([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,nr("SegmentVector",xi);var ki=function(){this.ids=[],this.positions=[],this.indexed=!1};function Oi(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}ki.prototype.add=function(e,t,n,r){this.ids.push(e),this.positions.push(t,n,r)},ki.prototype.getPositions=function(e){for(var t=0,n=this.ids.length-1;t<n;){var r=t+n>>1;this.ids[r]>=e?n=r:t=r+1}for(var i=[];this.ids[t]===e;){var a=this.positions[3*t],o=this.positions[3*t+1],s=this.positions[3*t+2];i.push({index:a,start:o,end:s}),t++}return i},ki.serialize=function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,n,r,i){if(!(r>=i)){for(var a=t[r+i>>1],o=r-1,s=i+1;;){do{o++}while(t[o]<a);do{s--}while(t[s]>a);if(o>=s)break;Oi(t,o,s),Oi(n,3*o,3*s),Oi(n,3*o+1,3*s+1),Oi(n,3*o+2,3*s+2)}e(t,n,r,s),e(t,n,s+1,i)}}(n,r,0,n.length-1),t.push(n.buffer,r.buffer),{ids:n,positions:r}},ki.deserialize=function(e){var t=new ki;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t},nr("FeaturePositionMap",ki);var Ei=function(e,t){this.gl=e.gl,this.location=t},Si=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(Ei),Ti=function(e){function t(t,n){e.call(this,t,n),this.current=0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(Ei),Pi=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(Ei),ji=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(Ei),Ci=function(e){function t(t,n){e.call(this,t,n),this.current=[0,0,0,0]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(Ei),Ai=function(e){function t(t,n){e.call(this,t,n),this.current=Be.transparent}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(Ei),Mi=new Float32Array(16),Ii=function(e){function t(t,n){e.call(this,t,n),this.current=Mi}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(Ei);function Ri(e){return[wi(255*e.r,255*e.g),wi(255*e.b,255*e.a)]}var Li=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map((function(e){return"u_"+e})),this.type=n,this.maxValue=-1/0};Li.prototype.defines=function(){return this.names.map((function(e){return"#define HAS_UNIFORM_u_"+e}))},Li.prototype.setConstantPatternPositions=function(){},Li.prototype.populatePaintArray=function(){},Li.prototype.updatePaintArray=function(){},Li.prototype.upload=function(){},Li.prototype.destroy=function(){},Li.prototype.setUniforms=function(e,t,n,r){t.set(r.constantOr(this.value))},Li.prototype.getBinding=function(e,t){return"color"===this.type?new Ai(e,t):new Ti(e,t)},Li.serialize=function(e){var t=e.value,n=e.names,r=e.type;return{value:ir(t),names:n,type:r}},Li.deserialize=function(e){var t=e.value,n=e.names,r=e.type;return new Li(ar(t),n,r)};var zi=function(e,t,n){this.value=e,this.names=t,this.uniformNames=this.names.map((function(e){return"u_"+e})),this.type=n,this.maxValue=-1/0,this.patternPositions={patternTo:null,patternFrom:null}};zi.prototype.defines=function(){return this.names.map((function(e){return"#define HAS_UNIFORM_u_"+e}))},zi.prototype.populatePaintArray=function(){},zi.prototype.updatePaintArray=function(){},zi.prototype.upload=function(){},zi.prototype.destroy=function(){},zi.prototype.setConstantPatternPositions=function(e,t){this.patternPositions.patternTo=e.tlbr,this.patternPositions.patternFrom=t.tlbr},zi.prototype.setUniforms=function(e,t,n,r,i){var a=this.patternPositions;"u_pattern_to"===i&&a.patternTo&&t.set(a.patternTo),"u_pattern_from"===i&&a.patternFrom&&t.set(a.patternFrom)},zi.prototype.getBinding=function(e,t){return new Ci(e,t)};var Di=function(e,t,n,r){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map((function(e){return"a_"+e})),this.maxValue=-1/0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Di.prototype.defines=function(){return[]},Di.prototype.setConstantPatternPositions=function(){},Di.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new _r(0),t,{});if("color"===this.type)for(var a=Ri(i),o=r;o<e;o++)n.emplaceBack(a[0],a[1]);else{for(var s=r;s<e;s++)n.emplaceBack(i);this.maxValue=Math.max(this.maxValue,i)}},Di.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:0},n,r);if("color"===this.type)for(var o=Ri(a),s=e;s<t;s++)i.emplace(s,o[0],o[1]);else{for(var u=e;u<t;u++)i.emplace(u,a);this.maxValue=Math.max(this.maxValue,a)}},Di.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Di.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Di.prototype.setUniforms=function(e,t){t.set(0)},Di.prototype.getBinding=function(e,t){return new Ti(e,t)};var Fi=function(e,t,n,r,i,a){this.expression=e,this.names=t,this.uniformNames=this.names.map((function(e){return"a_"+e+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0;var o=a;this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};Fi.prototype.defines=function(){return[]},Fi.prototype.setConstantPatternPositions=function(){},Fi.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,r=n.length;n.reserve(e);var i=this.expression.evaluate(new _r(this.zoom),t,{}),a=this.expression.evaluate(new _r(this.zoom+1),t,{});if("color"===this.type)for(var o=Ri(i),s=Ri(a),u=r;u<e;u++)n.emplaceBack(o[0],o[1],s[0],s[1]);else{for(var l=r;l<e;l++)n.emplaceBack(i,a);this.maxValue=Math.max(this.maxValue,i,a)}},Fi.prototype.updatePaintArray=function(e,t,n,r){var i=this.paintVertexArray,a=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);if("color"===this.type)for(var s=Ri(a),u=Ri(o),l=e;l<t;l++)i.emplace(l,s[0],s[1],u[0],u[1]);else{for(var c=e;c<t;c++)i.emplace(c,a,o);this.maxValue=Math.max(this.maxValue,a,o)}},Fi.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Fi.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},Fi.prototype.setUniforms=function(e,t,n){t.set(this.interpolationFactor(n.zoom))},Fi.prototype.getBinding=function(e,t){return new Ti(e,t)};var Bi=function(e,t,n,r,i,a,o){this.expression=e,this.names=t,this.type=n,this.uniformNames=this.names.map((function(e){return"a_"+e+"_t"})),this.useIntegerZoom=r,this.zoom=i,this.maxValue=-1/0,this.layerId=o,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Uint16",components:4,offset:0}})),this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Bi.prototype.defines=function(){return[]},Bi.prototype.setConstantPatternPositions=function(){},Bi.prototype.populatePaintArray=function(e,t,n){var r=this.zoomInPaintVertexArray,i=this.zoomOutPaintVertexArray,a=this.layerId,o=r.length;if(r.reserve(e),i.reserve(e),n&&t.patterns&&t.patterns[a]){var s=t.patterns[a],u=s.min,l=s.mid,c=s.max,h=n[u],p=n[l],f=n[c];if(!h||!p||!f)return;for(var d=o;d<e;d++)r.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],h.tl[0],h.tl[1],h.br[0],h.br[1]),i.emplaceBack(p.tl[0],p.tl[1],p.br[0],p.br[1],f.tl[0],f.tl[1],f.br[0],f.br[1])}},Bi.prototype.updatePaintArray=function(e,t,n,r,i){var a=this.zoomInPaintVertexArray,o=this.zoomOutPaintVertexArray,s=this.layerId;if(i&&n.patterns&&n.patterns[s]){var u=n.patterns[s],l=u.min,c=u.mid,h=u.max,p=i[l],f=i[c],d=i[h];if(!p||!f||!d)return;for(var v=e;v<t;v++)a.emplace(v,f.tl[0],f.tl[1],f.br[0],f.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1]),o.emplace(v,f.tl[0],f.tl[1],f.br[0],f.br[1],d.tl[0],d.tl[1],d.br[0],d.br[1])}},Bi.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Bi.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()},Bi.prototype.setUniforms=function(e,t){t.set(0)},Bi.prototype.getBinding=function(e,t){return new Ti(e,t)};var Ni=function(){this.binders={},this.cacheKey="",this._buffers=[],this._featureMap=new ki,this._bufferOffset=0};Ni.createDynamic=function(e,t,n){var r=new Ni,i=[];for(var a in e.paint._values)if(n(a)){var o=e.paint.get(a);if(o instanceof Tr&&Jt(o.property.specification)){var s=Vi(a,e.type),u=o.property.specification.type,l=o.property.useIntegerZoom;if("cross-faded"===o.property.specification["property-type"]||"cross-faded-data-driven"===o.property.specification["property-type"])if("constant"===o.value.kind)r.binders[a]=new zi(o.value.value,s,u),i.push("/u_"+a);else{var c=Wi(a,u,"source");r.binders[a]=new Bi(o.value,s,u,l,t,c,e.id),i.push("/a_"+a)}else if("constant"===o.value.kind)r.binders[a]=new Li(o.value.value,s,u),i.push("/u_"+a);else if("source"===o.value.kind){var h=Wi(a,u,"source");r.binders[a]=new Di(o.value,s,u,h),i.push("/a_"+a)}else{var p=Wi(a,u,"composite");r.binders[a]=new Fi(o.value,s,u,l,t,p),i.push("/z_"+a)}}}return r.cacheKey=i.sort().join(""),r},Ni.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.binders)this.binders[i].populatePaintArray(e,t,r);void 0!==t.id&&this._featureMap.add(+t.id,n,this._bufferOffset,e),this._bufferOffset=e},Ni.prototype.setConstantPatternPositions=function(e,t){for(var n in this.binders)this.binders[n].setConstantPatternPositions(e,t)},Ni.prototype.updatePaintArrays=function(e,t,n,r){var i=!1;for(var a in e)for(var o=0,s=this._featureMap.getPositions(+a);o<s.length;o+=1){var u=s[o],l=t.feature(u.index);for(var c in this.binders){var h=this.binders[c];if(!(h instanceof Li||h instanceof zi)&&!0===h.expression.isStateDependent){var p=n.paint.get(c);h.expression=p.value,h.updatePaintArray(u.start,u.end,l,e[a],r),i=!0}}}return i},Ni.prototype.defines=function(){var e=[];for(var t in this.binders)e.push.apply(e,this.binders[t].defines());return e},Ni.prototype.getPaintVertexBuffers=function(){return this._buffers},Ni.prototype.getUniforms=function(e,t){var n=[];for(var r in this.binders)for(var i=this.binders[r],a=0,o=i.uniformNames;a<o.length;a+=1){var s=o[a];if(t[s]){var u=i.getBinding(e,t[s]);n.push({name:s,property:r,binding:u})}}return n},Ni.prototype.setUniforms=function(e,t,n,r){for(var i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.name,u=o.property,l=o.binding;this.binders[u].setUniforms(e,l,r,n.get(u),s)}},Ni.prototype.updatePatternPaintBuffers=function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof Bi){var i=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;i&&t.push(i)}else(r instanceof Di||r instanceof Fi)&&r.paintVertexBuffer&&t.push(r.paintVertexBuffer)}this._buffers=t},Ni.prototype.upload=function(e){for(var t in this.binders)this.binders[t].upload(e);var n=[];for(var r in this.binders){var i=this.binders[r];(i instanceof Di||i instanceof Fi)&&i.paintVertexBuffer&&n.push(i.paintVertexBuffer)}this._buffers=n},Ni.prototype.destroy=function(){for(var e in this.binders)this.binders[e].destroy()};var Ui=function(e,t,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,a=t;i<a.length;i+=1){var o=a[i];this.programConfigurations[o.id]=Ni.createDynamic(o,n,r),this.programConfigurations[o.id].layoutAttributes=e}this.needsUpload=!1};function Vi(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from"],"fill-pattern":["pattern_to","pattern_from"],"fill-extrusion-pattern":["pattern_to","pattern_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Wi(e,t,n){var r={color:{source:oi,composite:si},number:{source:ei,composite:oi}},i=function(e){return{"line-pattern":{source:Gr,composite:Gr},"fill-pattern":{source:Gr,composite:Gr},"fill-extrusion-pattern":{source:Gr,composite:Gr}}[e]}(e);return i&&i[n]||r[t][n]}Ui.prototype.populatePaintArrays=function(e,t,n,r){for(var i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,n,r);this.needsUpload=!0},Ui.prototype.updatePaintArrays=function(e,t,n,r){for(var i=0,a=n;i<a.length;i+=1){var o=a[i];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,t,o,r)||this.needsUpload}},Ui.prototype.get=function(e){return this.programConfigurations[e]},Ui.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Ui.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},nr("ConstantBinder",Li),nr("CrossFadedConstantBinder",zi),nr("SourceExpressionBinder",Di),nr("CrossFadedCompositeBinder",Bi),nr("CompositeExpressionBinder",Fi),nr("ProgramConfiguration",Ni,{omit:["_buffers"]}),nr("ProgramConfigurationSet",Ui);var qi=8192,Gi={min:-1*Math.pow(2,15),max:Math.pow(2,15)-1};function Hi(e){for(var t=qi/e.extent,n=e.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],a=0;a<i.length;a++){var o=i[a];o.x=Math.round(o.x*t),o.y=Math.round(o.y*t),(o.x<Gi.min||o.x>Gi.max||o.y<Gi.min||o.y>Gi.max)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}function Zi(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var Xi=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ur,this.indexArray=new ri,this.segments=new xi,this.programConfigurations=new Ui(_i,e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Yi(e,t){for(var n=0;n<e.length;n++)if(ia(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(ia(e,t[r]))return!0;return!!Qi(e,t)}function Ki(e,t,n){return!!ia(e,t)||!!ta(t,e,n)}function Ji(e,t){if(1===e.length)return ra(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(ia(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(ra(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(Qi(e,t[o]))return!0;return!1}function $i(e,t,n){if(e.length>1){if(Qi(e,t))return!0;for(var r=0;r<t.length;r++)if(ta(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(ta(e[i],t,n))return!0;return!1}function Qi(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(ea(r,i,t[a],t[a+1]))return!0;return!1}function ea(e,t,n,r){return k(e,n,r)!==k(t,n,r)&&k(e,t,n)!==k(e,t,r)}function ta(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(na(e,t[i-1],t[i])<r)return!0;return!1}function na(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function ra(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++)for(var s=0,u=(n=e[o]).length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function ia(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function aa(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=k(e,t,n[0]);return a!==k(e,t,n[1])||a!==k(e,t,n[2])||a!==k(e,t,n[3])}function oa(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].maxValue}function sa(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ua(e,t,n,r,a){if(!t[0]&&!t[1])return e;var o=i.convert(t)._mult(a);"viewport"===n&&o._rotate(-r);for(var s=[],u=0;u<e.length;u++){var l=e[u];s.push(l.sub(o))}return s}Xi.prototype.populate=function(e,t){for(var n=0,r=e;n<r.length;n+=1){var i=r[n],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new _r(this.zoom),a)){var u=Hi(a);this.addFeature(a,u,o),t.featureIndex.insert(a,u,o,s,this.index)}}},Xi.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Xi.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Xi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Xi.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_i),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Xi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Xi.prototype.addFeature=function(e,t,n){for(var r=0,i=t;r<i.length;r+=1)for(var a=0,o=i[r];a<o.length;a+=1){var s=o[a],u=s.x,l=s.y;if(!(u<0||u>=qi||l<0||l>=qi)){var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=c.vertexLength;Zi(this.layoutVertexArray,u,l,-1,-1),Zi(this.layoutVertexArray,u,l,1,-1),Zi(this.layoutVertexArray,u,l,1,1),Zi(this.layoutVertexArray,u,l,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),c.vertexLength+=4,c.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{})},nr("CircleBucket",Xi,{omit:["layers"]});var la={paint:new Rr({"circle-radius":new Cr(ye.paint_circle["circle-radius"]),"circle-color":new Cr(ye.paint_circle["circle-color"]),"circle-blur":new Cr(ye.paint_circle["circle-blur"]),"circle-opacity":new Cr(ye.paint_circle["circle-opacity"]),"circle-translate":new jr(ye.paint_circle["circle-translate"]),"circle-translate-anchor":new jr(ye.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jr(ye.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jr(ye.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(ye.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(ye.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(ye.paint_circle["circle-stroke-opacity"])})},ca="undefined"!=typeof Float32Array?Float32Array:Array;function ha(){var e=new ca(9);return ca!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function pa(){var e=new ca(3);return ca!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function fa(e,t,n){var r=new ca(3);return r[0]=e,r[1]=t,r[2]=n,r}function da(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function va(){var e=new ca(4);return ca!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Math.PI,pa(),function(){var e;e=new ca(4),ca!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}(),pa(),fa(1,0,0),fa(0,1,0),va(),va(),ha(),function(){var e;e=new ca(2),ca!=Float32Array&&(e[0]=0,e[1]=0)}();var ma=function(e){function t(t){e.call(this,t,la)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new Xi(e)},t.prototype.queryRadius=function(e){var t=e;return oa("circle-radius",this,t)+oa("circle-stroke-width",this,t)+sa(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,a,o,s){for(var u=ua(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),l=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n),c="map"===this.paint.get("circle-pitch-alignment"),h=c?u:function(e,t){return e.map((function(e){return ya(e,t)}))}(u,s),p=c?l*o:l,f=0,d=r;f<d.length;f+=1)for(var v=0,m=d[f];v<m.length;v+=1){var y=m[v],g=c?y:ya(y,s),b=p,_=da([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?b*=_[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(b*=a.cameraToCenterDistance/_[3]),Ki(h,g,b))return!0}return!1},t}(Lr);function ya(e,t){var n=da([],[e.x,e.y,0,1],t);return new i(n[0]/n[3],n[1]/n[3])}var ga=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Xi);function ba(e,t,n,r){var i=t.width,a=t.height;if(r){if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function _a(e,t,n){var r=t.width,i=t.height;if(r!==e.width||i!==e.height){var a=ba({},{width:r,height:i},n);xa(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=a.data}}function xa(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,u=0;u<i.height;u++)for(var l=((n.y+u)*e.width+n.x)*a,c=((r.y+u)*t.width+r.x)*a,h=0;h<i.width*a;h++)s[c+h]=o[l+h];return t}nr("HeatmapBucket",ga,{omit:["layers"]});var wa=function(e,t){ba(this,e,1,t)};wa.prototype.resize=function(e){_a(this,e,1)},wa.prototype.clone=function(){return new wa({width:this.width,height:this.height},new Uint8Array(this.data))},wa.copy=function(e,t,n,r,i){xa(e,t,n,r,i,1)};var ka=function(e,t){ba(this,e,4,t)};ka.prototype.resize=function(e){_a(this,e,4)},ka.prototype.replace=function(e,t){t?this.data.set(e):this.data=e},ka.prototype.clone=function(){return new ka({width:this.width,height:this.height},new Uint8Array(this.data))},ka.copy=function(e,t,n,r,i){xa(e,t,n,r,i,4)},nr("AlphaImage",wa),nr("RGBAImage",ka);var Oa={paint:new Rr({"heatmap-radius":new Cr(ye.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(ye.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jr(ye.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ir(ye.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jr(ye.paint_heatmap["heatmap-opacity"])})};function Ea(e,t){for(var n=new Uint8Array(1024),r={},i=0,a=0;i<256;i++,a+=4){r[t]=i/255;var o=e.evaluate(r);n[a+0]=Math.floor(255*o.r/o.a),n[a+1]=Math.floor(255*o.g/o.a),n[a+2]=Math.floor(255*o.b/o.a),n[a+3]=Math.floor(255*o.a)}return new ka({width:256,height:1},n)}var Sa=function(e){function t(t){e.call(this,t,Oa),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new ga(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){var e=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Ea(e,"heatmapDensity"),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(Lr),Ta={paint:new Rr({"hillshade-illumination-direction":new jr(ye.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new jr(ye.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jr(ye.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jr(ye.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jr(ye.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jr(ye.paint_hillshade["hillshade-accent-color"])})},Pa=function(e){function t(t){e.call(this,t,Ta)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(Lr),ja=Br([{name:"a_pos",components:2,type:"Int16"}],4).members,Ca=Ma,Aa=Ma;function Ma(e,t,n){n=n||2;var r,i,a,o,s,u,l,c=t&&t.length,h=c?t[0]*n:e.length,p=Ia(e,0,h,n,!0),f=[];if(!p||p.next===p.prev)return f;if(c&&(p=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Ia(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Wa(o));for(s.sort(Na),i=0;i<s.length;i++)Ua(s[i],n),n=Ra(n,n.next);return n}(e,t,p,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var d=n;d<h;d+=n)(s=e[d])<r&&(r=s),(u=e[d+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return La(p,f,n,r,i,l),f}function Ia(e,t,n,r,i){var a,o;if(i===eo(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Ja(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Ja(a,e[a],e[a+1],o);return o&&Za(o,o.next)&&($a(o),o=o.next),o}function Ra(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Za(r,r.next)&&0!==Ha(r.prev,r,r.next))r=r.next;else{if($a(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function La(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Va(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Da(e,r,i,a):za(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),$a(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?La(e=Fa(e,t,n),t,n,r,i,a,2):2===o&&Ba(e,t,n,r,i,a):La(Ra(e),t,n,r,i,a,1);break}}}function za(e){var t=e.prev,n=e,r=e.next;if(Ha(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(qa(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Ha(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Da(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Ha(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=Va(s,u,t,n,r),p=Va(l,c,t,n,r),f=e.prevZ,d=e.nextZ;f&&f.z>=h&&d&&d.z<=p;){if(f!==e.prev&&f!==e.next&&qa(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ha(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,d!==e.prev&&d!==e.next&&qa(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ha(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&qa(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Ha(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&qa(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Ha(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Fa(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Za(i,a)&&Xa(i,r,r.next,a)&&Ya(i,a)&&Ya(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),$a(r),$a(r.next),r=e=a),r=r.next}while(r!==e);return r}function Ba(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ga(o,s)){var u=Ka(o,s);return o=Ra(o,o.next),u=Ra(u,u.next),La(o,t,n,r,i,a),void La(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Na(e,t){return e.x-t.x}function Ua(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var u,l=n,c=n.x,h=n.y,p=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&qa(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&((u=Math.abs(a-r.y)/(i-r.x))<p||u===p&&r.x>n.x)&&Ya(r,e)&&(n=r,p=u),r=r.next;return n}(e,t)){var n=Ka(t,e);Ra(n,n.next)}}function Va(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Wa(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function qa(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Ga(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Xa(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Ya(e,t)&&Ya(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Ha(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Za(e,t){return e.x===t.x&&e.y===t.y}function Xa(e,t,n,r){return!!(Za(e,t)&&Za(n,r)||Za(e,r)&&Za(n,t))||Ha(e,t,n)>0!=Ha(e,t,r)>0&&Ha(n,r,e)>0!=Ha(n,r,t)>0}function Ya(e,t){return Ha(e.prev,e,e.next)<0?Ha(e,t,e.next)>=0&&Ha(e,e.prev,t)>=0:Ha(e,t,e.prev)<0||Ha(e,e.next,t)<0}function Ka(e,t){var n=new Qa(e.i,e.x,e.y),r=new Qa(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Ja(e,t,n,r){var i=new Qa(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $a(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Qa(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function eo(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function to(e,t,n,r,i){!function e(t,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o)*(s-o/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-s*l/o+c)),Math.min(i,Math.floor(n+(o-s)*l/o+c)),a)}var h=t[n],p=r,f=i;for(no(t,r,n),a(t[i],h)>0&&no(t,r,i);p<f;){for(no(t,p,f),p++,f--;a(t[p],h)<0;)p++;for(;a(t[f],h)>0;)f--}0===a(t[r],h)?no(t,r,f):no(t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(e,t,n||0,r||e.length-1,i||ro)}function no(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ro(e,t){return e<t?-1:e>t?1:0}function io(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],o=0;o<n;o++){var s=O(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var u=0;u<a.length;u++)a[u].length<=t||(to(a[u],t,1,a[u].length-1,ao),a[u]=a[u].slice(0,t));return a}function ao(e,t){return t.area-e.area}function oo(e,t,n){for(var r=n.patternDependencies,i=!1,a=0,o=t;a<o.length;a+=1){var s=o[a].paint.get(e+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function so(e,t,n,r,i){for(var a=i.patternDependencies,o=0,s=t;o<s.length;o+=1){var u=s[o],l=u.paint.get(e+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{}),h=l.evaluate({zoom:r},n,{}),p=l.evaluate({zoom:r+1},n,{});a[c]=!0,a[h]=!0,a[p]=!0,n.patterns[u.id]={min:c,mid:h,max:p}}}return n}Ma.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(eo(e,0,a,n));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*n,c=s<u-1?t[s+1]*n:e.length;o-=Math.abs(eo(e,l,c,n))}var h=0;for(s=0;s<r.length;s+=3){var p=r[s]*n,f=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((e[p]-e[d])*(e[f+1]-e[p+1])-(e[p]-e[f])*(e[d+1]-e[p+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},Ma.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n},Ca.default=Aa;var uo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ur,this.indexArray=new ri,this.indexArray2=new ii,this.programConfigurations=new Ui(ja,e.layers,e.zoom),this.segments=new xi,this.segments2=new xi,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};uo.prototype.populate=function(e,t){this.features=[],this.hasPattern=oo("fill",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new _r(this.zoom),a)){var u=Hi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(so("fill",this.layers,l,this.zoom,t)):this.addFeature(l,u,o,{}),t.featureIndex.insert(a,u,o,s,this.index)}}},uo.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},uo.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],a=i.geometry;this.addFeature(i,a,i.index,t)}},uo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},uo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},uo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ja),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},uo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},uo.prototype.addFeature=function(e,t,n,r){for(var i=0,a=io(t,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray),h=c.vertexLength,p=[],f=[],d=0,v=o;d<v.length;d+=1){var m=v[d];if(0!==m.length){m!==o[0]&&f.push(p.length/2);var y=this.segments2.prepareSegment(m.length,this.layoutVertexArray,this.indexArray2),g=y.vertexLength;this.layoutVertexArray.emplaceBack(m[0].x,m[0].y),this.indexArray2.emplaceBack(g+m.length-1,g),p.push(m[0].x),p.push(m[0].y);for(var b=1;b<m.length;b++)this.layoutVertexArray.emplaceBack(m[b].x,m[b].y),this.indexArray2.emplaceBack(g+b-1,g+b),p.push(m[b].x),p.push(m[b].y);y.vertexLength+=m.length,y.primitiveLength+=m.length}}for(var _=Ca(p,f),x=0;x<_.length;x+=3)this.indexArray.emplaceBack(h+_[x],h+_[x+1],h+_[x+2]);c.vertexLength+=s,c.primitiveLength+=_.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},nr("FillBucket",uo,{omit:["layers","features"]});var lo={paint:new Rr({"fill-antialias":new jr(ye.paint_fill["fill-antialias"]),"fill-opacity":new Cr(ye.paint_fill["fill-opacity"]),"fill-color":new Cr(ye.paint_fill["fill-color"]),"fill-outline-color":new Cr(ye.paint_fill["fill-outline-color"]),"fill-translate":new jr(ye.paint_fill["fill-translate"]),"fill-translate-anchor":new jr(ye.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ar(ye.paint_fill["fill-pattern"])})},co=function(e){function t(t){e.call(this,t,lo)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t);var n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new uo(e)},t.prototype.queryRadius=function(){return sa(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,a,o){return Ji(ua(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)},t.prototype.isTileClipped=function(){return!0},t}(Lr),ho=Br([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,po=fo;function fo(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(vo,this,t)}function vo(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function mo(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}fo.types=["Unknown","Point","LineString","Polygon"],fo.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,a=0,o=0,s=0,u=[];e.pos<n;){if(a<=0){var l=e.readVarint();r=7&l,a=l>>3}if(a--,1===r||2===r)o+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&u.push(t),t=[]),t.push(new i(o,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&u.push(t),u},fo.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,u=1/0,l=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<u&&(u=a),a>l&&(l=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,u,s,l]},fo.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,u=this.loadGeometry(),l=fo.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+s)/a;e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<u.length;r++)h[r]=u[r][0];c(u=h);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=mo(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(p.id=this.id),p};var yo=go;function go(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(bo,this,t),this.length=this._features.length}function bo(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function _o(e,t,n){if(3===e){var r=new yo(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}go.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new po(this._pbf,t,this.extent,this._keys,this._values)};var xo={VectorTile:function(e,t){this.layers=e.readFields(_o,{},t)},VectorTileFeature:po,VectorTileLayer:yo},wo=xo.VectorTileFeature.types,ko=Math.pow(2,13);function Oo(e,t,n,r,i,a,o,s){e.emplaceBack(t,n,2*Math.floor(r*ko)+o,i*ko*2,a*ko*2,Math.round(s))}var Eo=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Wr,this.indexArray=new ri,this.programConfigurations=new Ui(ho,e.layers,e.zoom),this.segments=new xi,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function So(e,t){return e.x===t.x&&(e.x<0||e.x>qi)||e.y===t.y&&(e.y<0||e.y>qi)}function To(e){return e.every((function(e){return e.x<0}))||e.every((function(e){return e.x>qi}))||e.every((function(e){return e.y<0}))||e.every((function(e){return e.y>qi}))}Eo.prototype.populate=function(e,t){this.features=[],this.hasPattern=oo("fill-extrusion",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new _r(this.zoom),a)){var u=Hi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(so("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,u,o,{}),t.featureIndex.insert(a,u,o,s,this.index,!0)}}},Eo.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],a=i.geometry;this.addFeature(i,a,i.index,t)}},Eo.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Eo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Eo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Eo.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ho),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Eo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Eo.prototype.addFeature=function(e,t,n,r){for(var i=0,a=io(t,500);i<a.length;i+=1){for(var o=a[i],s=0,u=0,l=o;u<l.length;u+=1)s+=l[u].length;for(var c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,p=o;h<p.length;h+=1){var f=p[h];if(0!==f.length&&!To(f))for(var d=0,v=0;v<f.length;v++){var m=f[v];if(v>=1){var y=f[v-1];if(!So(m,y)){c.vertexLength+4>xi.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=m.sub(y)._perp()._unit(),b=y.dist(m);d+b>32768&&(d=0),Oo(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,0,d),Oo(this.layoutVertexArray,m.x,m.y,g.x,g.y,0,1,d),d+=b,Oo(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,d),Oo(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,d);var _=c.vertexLength;this.indexArray.emplaceBack(_,_+2,_+1),this.indexArray.emplaceBack(_+1,_+2,_+3),c.vertexLength+=4,c.primitiveLength+=2}}}}if(c.vertexLength+s>xi.MAX_VERTEX_ARRAY_LENGTH&&(c=this.segments.prepareSegment(s,this.layoutVertexArray,this.indexArray)),"Polygon"===wo[e.type]){for(var x=[],w=[],k=c.vertexLength,O=0,E=o;O<E.length;O+=1){var S=E[O];if(0!==S.length){S!==o[0]&&w.push(x.length/2);for(var T=0;T<S.length;T++){var P=S[T];Oo(this.layoutVertexArray,P.x,P.y,0,0,1,1,0),x.push(P.x),x.push(P.y)}}}for(var j=Ca(x,w),C=0;C<j.length;C+=3)this.indexArray.emplaceBack(k+j[C],k+j[C+2],k+j[C+1]);c.primitiveLength+=j.length/3,c.vertexLength+=s}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r)},nr("FillExtrusionBucket",Eo,{omit:["layers","features"]});var Po={paint:new Rr({"fill-extrusion-opacity":new jr(ye["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(ye["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jr(ye["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jr(ye["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ar(ye["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(ye["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(ye["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jr(ye["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},jo=function(e){function t(t){e.call(this,t,Po)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new Eo(e)},t.prototype.queryRadius=function(){return sa(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,o,s,u){var l=ua(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),p=function(e,t,n,r){for(var a=[],o=0,s=e;o<s.length;o+=1){var u=s[o],l=[u.x,u.y,0,1];da(l,l,t),a.push(new i(l[0]/l[3],l[1]/l[3]))}return a}(l,u),f=function(e,t,n,r){for(var a=[],o=[],s=r[8]*t,u=r[9]*t,l=r[10]*t,c=r[11]*t,h=r[8]*n,p=r[9]*n,f=r[10]*n,d=r[11]*n,v=0,m=e;v<m.length;v+=1){for(var y=[],g=[],b=0,_=m[v];b<_.length;b+=1){var x=_[b],w=x.x,k=x.y,O=r[0]*w+r[4]*k+r[12],E=r[1]*w+r[5]*k+r[13],S=r[2]*w+r[6]*k+r[14],T=r[3]*w+r[7]*k+r[15],P=S+l,j=T+c,C=O+h,A=E+p,M=S+f,I=T+d,R=new i((O+s)/j,(E+u)/j);R.z=P/j,y.push(R);var L=new i(C/I,A/I);L.z=M/I,g.push(L)}a.push(y),o.push(g)}return[a,o]}(r,h,c,u);return function(e,t,n){var r=1/0;Ji(n,t)&&(r=Ao(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var u=a[s],l=a[s+1],c=o[s],h=[u,l,o[s+1],c,u];Yi(n,h)&&(r=Math.min(r,Ao(n,h)))}return r!==1/0&&r}(f[0],f[1],p)},t}(Lr);function Co(e,t){return e.x*t.x+e.y*t.y}function Ao(e,t){if(1===e.length){var n=t[0],r=t[1],i=t[3],a=e[0],o=r.sub(n),s=i.sub(n),u=a.sub(n),l=Co(o,o),c=Co(o,s),h=Co(s,s),p=Co(u,o),f=Co(u,s),d=l*h-c*c,v=(h*p-c*f)/d,m=(l*f-c*p)/d,y=1-v-m;return n.z*y+r.z*v+i.z*m}for(var g=1/0,b=0,_=t;b<_.length;b+=1){var x=_[b];g=Math.min(g,x.z)}return g}var Mo=Br([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Io=xo.VectorTileFeature.types,Ro=Math.cos(Math.PI/180*37.5),Lo=Math.pow(2,14)/.5;function zo(e,t,n,r,i,a,o){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(63*n.x)+128,Math.round(63*n.y)+128,1+(0===a?0:a<0?-1:1)|(.5*o&63)<<2,.5*o>>6)}var Do=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.features=[],this.hasPattern=!1,this.layoutVertexArray=new qr,this.indexArray=new ri,this.programConfigurations=new Ui(Mo,e.layers,e.zoom),this.segments=new xi,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Fo(e,t){return(e/t.tileTotal*(t.end-t.start)+t.start)*(Lo-1)}Do.prototype.populate=function(e,t){this.features=[],this.hasPattern=oo("line",this.layers,t);for(var n=0,r=e;n<r.length;n+=1){var i=r[n],a=i.feature,o=i.index,s=i.sourceLayerIndex;if(this.layers[0]._featureFilter(new _r(this.zoom),a)){var u=Hi(a),l={sourceLayerIndex:s,index:o,geometry:u,properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(l.id=a.id),this.hasPattern?this.features.push(so("line",this.layers,l,this.zoom,t)):this.addFeature(l,u,o,{}),t.featureIndex.insert(a,u,o,s,this.index)}}},Do.prototype.update=function(e,t,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n)},Do.prototype.addFeatures=function(e,t){for(var n=0,r=this.features;n<r.length;n+=1){var i=r[n],a=i.geometry;this.addFeature(i,a,i.index,t)}},Do.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Do.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Do.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Mo),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Do.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Do.prototype.addFeature=function(e,t,n,r){for(var i=this.layers[0].layout,a=i.get("line-join").evaluate(e,{}),o=i.get("line-cap"),s=i.get("line-miter-limit"),u=i.get("line-round-limit"),l=0,c=t;l<c.length;l+=1){var h=c[l];this.addLine(h,e,a,o,s,u,n,r)}},Do.prototype.addLine=function(e,t,n,r,i,a,o,s){var u=null;t.properties&&t.properties.hasOwnProperty("mapbox_clip_start")&&t.properties.hasOwnProperty("mapbox_clip_end")&&(u={start:t.properties.mapbox_clip_start,end:t.properties.mapbox_clip_end,tileTotal:void 0});for(var l="Polygon"===Io[t.type],c=e.length;c>=2&&e[c-1].equals(e[c-2]);)c--;for(var h=0;h<c-1&&e[h].equals(e[h+1]);)h++;if(!(c<(l?3:2))){u&&(u.tileTotal=function(e,t,n){for(var r,i,a=0,o=t;o<n-1;o++)r=e[o],i=e[o+1],a+=r.dist(i);return a}(e,h,c)),"bevel"===n&&(i=1.05);var p=qi/(512*this.overscaling)*15,f=e[h],d=this.segments.prepareSegment(10*c,this.layoutVertexArray,this.indexArray);this.distance=0;var v,m,y,g=r,b=l?"butt":r,_=!0,x=void 0,w=void 0,k=void 0,O=void 0;this.e1=this.e2=this.e3=-1,l&&(v=e[c-2],O=f.sub(v)._unit()._perp());for(var E=h;E<c;E++)if(!(w=l&&E===c-1?e[h+1]:e[E+1])||!e[E].equals(w)){O&&(k=O),v&&(x=v),v=e[E],O=w?w.sub(v)._unit()._perp():k;var S=(k=k||O).add(O);0===S.x&&0===S.y||S._unit();var T=S.x*O.x+S.y*O.y,P=0!==T?1/T:1/0,j=T<Ro&&x&&w;if(j&&E>h){var C=v.dist(x);if(C>2*p){var A=v.sub(v.sub(x)._mult(p/C)._round());this.distance+=A.dist(x),this.addCurrentVertex(A,this.distance,k.mult(1),0,0,!1,d,u),x=A}}var M=x&&w,I=M?n:w?g:b;if(M&&"round"===I&&(P<a?I="miter":P<=2&&(I="fakeround")),"miter"===I&&P>i&&(I="bevel"),"bevel"===I&&(P>2&&(I="flipbevel"),P<i&&(I="miter")),x&&(this.distance+=v.dist(x)),"miter"===I)S._mult(P),this.addCurrentVertex(v,this.distance,S,0,0,!1,d,u);else if("flipbevel"===I){if(P>100)S=O.clone().mult(-1);else{var R=k.x*O.y-k.y*O.x>0?-1:1,L=P*k.add(O).mag()/k.sub(O).mag();S._perp()._mult(L*R)}this.addCurrentVertex(v,this.distance,S,0,0,!1,d,u),this.addCurrentVertex(v,this.distance,S.mult(-1),0,0,!1,d,u)}else if("bevel"===I||"fakeround"===I){var z=k.x*O.y-k.y*O.x>0,D=-Math.sqrt(P*P-1);if(z?(y=0,m=D):(m=0,y=D),_||this.addCurrentVertex(v,this.distance,k,m,y,!1,d,u),"fakeround"===I){for(var F=Math.floor(8*(.5-(T-.5))),B=void 0,N=0;N<F;N++)B=O.mult((N+1)/(F+1))._add(k)._unit(),this.addPieSliceVertex(v,this.distance,B,z,d,u);this.addPieSliceVertex(v,this.distance,S,z,d,u);for(var U=F-1;U>=0;U--)B=k.mult((U+1)/(F+1))._add(O)._unit(),this.addPieSliceVertex(v,this.distance,B,z,d,u)}w&&this.addCurrentVertex(v,this.distance,O,-m,-y,!1,d,u)}else"butt"===I?(_||this.addCurrentVertex(v,this.distance,k,0,0,!1,d,u),w&&this.addCurrentVertex(v,this.distance,O,0,0,!1,d,u)):"square"===I?(_||(this.addCurrentVertex(v,this.distance,k,1,1,!1,d,u),this.e1=this.e2=-1),w&&this.addCurrentVertex(v,this.distance,O,-1,-1,!1,d,u)):"round"===I&&(_||(this.addCurrentVertex(v,this.distance,k,0,0,!1,d,u),this.addCurrentVertex(v,this.distance,k,1,1,!0,d,u),this.e1=this.e2=-1),w&&(this.addCurrentVertex(v,this.distance,O,-1,-1,!0,d,u),this.addCurrentVertex(v,this.distance,O,0,0,!1,d,u)));if(j&&E<c-1){var V=v.dist(w);if(V>2*p){var W=v.add(w.sub(v)._mult(p/V)._round());this.distance+=W.dist(v),this.addCurrentVertex(W,this.distance,O.mult(1),0,0,!1,d,u),v=W}}_=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,o,s)}},Do.prototype.addCurrentVertex=function(e,t,n,r,i,a,o,s){var u,l=this.layoutVertexArray,c=this.indexArray;s&&(t=Fo(t,s)),u=n.clone(),r&&u._sub(n.perp()._mult(r)),zo(l,e,u,a,!1,r,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),i&&u._sub(n.perp()._mult(i)),zo(l,e,u,a,!0,-i,t),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>Lo/2&&!s&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,r,i,a,o))},Do.prototype.addPieSliceVertex=function(e,t,n,r,i,a){n=n.mult(r?-1:1);var o=this.layoutVertexArray,s=this.indexArray;a&&(t=Fo(t,a)),zo(o,e,n,!1,r,0,t),this.e3=i.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),i.primitiveLength++),r?this.e2=this.e3:this.e1=this.e3},nr("LineBucket",Do,{omit:["layers","features"]});var Bo=new Rr({"line-cap":new jr(ye.layout_line["line-cap"]),"line-join":new Cr(ye.layout_line["line-join"]),"line-miter-limit":new jr(ye.layout_line["line-miter-limit"]),"line-round-limit":new jr(ye.layout_line["line-round-limit"])}),No={paint:new Rr({"line-opacity":new Cr(ye.paint_line["line-opacity"]),"line-color":new Cr(ye.paint_line["line-color"]),"line-translate":new jr(ye.paint_line["line-translate"]),"line-translate-anchor":new jr(ye.paint_line["line-translate-anchor"]),"line-width":new Cr(ye.paint_line["line-width"]),"line-gap-width":new Cr(ye.paint_line["line-gap-width"]),"line-offset":new Cr(ye.paint_line["line-offset"]),"line-blur":new Cr(ye.paint_line["line-blur"]),"line-dasharray":new Mr(ye.paint_line["line-dasharray"]),"line-pattern":new Ar(ye.paint_line["line-pattern"]),"line-gradient":new Ir(ye.paint_line["line-gradient"])}),layout:Bo},Uo=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new _r(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r,i){return n=h({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r,i)},t}(Cr))(No.paint.properties["line-width"].specification);Uo.useIntegerZoom=!0;var Vo=function(e){function t(t){e.call(this,t,No)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&this._updateGradient()},t.prototype._updateGradient=function(){var e=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Ea(e,"lineProgress"),this.gradientTexture=null},t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=Uo.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new Do(e)},t.prototype.queryRadius=function(e){var t=e,n=Wo(oa("line-width",this,t),oa("line-gap-width",this,t)),r=oa("line-offset",this,t);return n/2+Math.abs(r)+sa(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,a,o,s){var u=ua(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),l=s/2*Wo(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),c=this.paint.get("line-offset").evaluate(t,n);return c&&(r=function(e,t){for(var n=[],r=new i(0,0),a=0;a<e.length;a++){for(var o=e[a],s=[],u=0;u<o.length;u++){var l=o[u-1],c=o[u],h=o[u+1],p=0===u?r:c.sub(l)._unit()._perp(),f=u===o.length-1?r:h.sub(c)._unit()._perp(),d=p._add(f)._unit(),v=d.x*f.x+d.y*f.y;d._mult(1/v),s.push(d._mult(t)._add(c))}n.push(s)}return n}(r,c*s)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(ia(e,i[a]))return!0;if($i(e,i,n))return!0}return!1}(u,r,l)},t.prototype.isTileClipped=function(){return!0},t}(Lr);function Wo(e,t){return t>0?t+2*e:e}var qo=Br([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),Go=Br([{name:"a_projected_pos",components:3,type:"Float32"}],4),Ho=(Br([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Br([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Zo=(Br([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Br([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Xo=Br([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Yo(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),br.applyArabicShaping&&(e=br.applyArabicShaping(e)),e}(e.text,t,n)})),e}Br([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"}]),Br([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"radialTextOffset"}]),Br([{type:"Float32",name:"offsetX"}]),Br([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ko={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},Jo=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(i);nr("Anchor",Jo);var $o=256;function Qo(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate(new _r(e+1))};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;for(var a=i=Math.max(0,i-1);a<r.length&&r[a]<e+1;)a++;a=Math.min(r.length-1,a);var o={min:r[i],max:r[a]};return"composite"===n.kind?{functionType:"composite",zoomRange:o,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate(new _r(e+1)),zoomRange:o,sizeRange:{min:n.evaluate(new _r(o.min)),max:n.evaluate(new _r(o.max))},propertyValue:t.value}}function es(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/$o:"composite"===e.functionType?ct(n.lowerSize/$o,n.upperSize/$o,r.uSizeT):r.uSize}function ts(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,a=e.sizeRange,o=l(yn(r,n.specification).interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+o*(a.max-a.min)}}var s=e.propertyValue,u=e.zoomRange;return{uSizeT:l(yn(s,n.specification).interpolationFactor(t,u.min,u.max),0,1),uSize:0}}var ns=Object.freeze({getSizeData:Qo,evaluateSizeForFeature:es,evaluateSizeForZoom:ts,SIZE_PACK_FACTOR:$o}),rs=xo.VectorTileFeature.types,is=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function as(e,t,n,r,i,a,o,s){e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,s?s[0]:0,s?s[1]:0)}function os(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var ss=function(e){this.layoutVertexArray=new Hr,this.indexArray=new ri,this.programConfigurations=e,this.segments=new xi,this.dynamicLayoutVertexArray=new Zr,this.opacityVertexArray=new Xr,this.placedSymbolArray=new hi};ss.prototype.upload=function(e,t,n,r){n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,qo.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Go.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,is,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e)},ss.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},nr("SymbolBuffers",ss);var us=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new xi,this.collisionVertexArray=new Jr};us.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ho.members,!0)},us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},nr("CollisionBuffers",us);var ls=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1;var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qo(this.zoom,t["text-size"]),this.iconSizeData=Qo(this.zoom,t["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1);var a="viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey;this.sortFeaturesByY=a&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID};ls.prototype.createArrays=function(){this.text=new ss(new Ui(qo.members,this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new ss(new Ui(qo.members,this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.collisionBox=new us(Kr,Zo.members,ii),this.collisionCircle=new us(Kr,Xo.members,ri),this.glyphOffsetArray=new vi,this.lineVertexArray=new yi,this.symbolInstances=new fi},ls.prototype.calculateGlyphDependencies=function(e,t,n,r){for(var i=0;i<e.length;i++)if(t[e.charCodeAt(i)]=!0,n&&r){var a=Ko[e.charAt(i)];a&&(t[a.charCodeAt(0)]=!0)}},ls.prototype.populate=function(e,t){var n=this.layers[0],r=n.layout,i=r.get("text-font"),a=r.get("text-field"),o=r.get("icon-image"),s=("constant"!==a.value.kind||a.value.value.toString().length>0)&&("constant"!==i.value.kind||i.value.value.length>0),u="constant"!==o.value.kind||o.value.value&&o.value.value.length>0,l=r.get("symbol-sort-key");if(this.features=[],s||u){for(var c=t.iconDependencies,h=t.glyphDependencies,p=new _r(this.zoom),f=0,d=e;f<d.length;f+=1){var v=d[f],m=v.feature,y=v.index,g=v.sourceLayerIndex;if(n._featureFilter(p,m)){var b=void 0;if(s){var _=n.getValueAndResolveTokens("text-field",m);b=Yo(_ instanceof Ve?_:Ve.fromString(_),n,m)}var x=void 0;if(u&&(x=n.getValueAndResolveTokens("icon-image",m)),b||x){var w=this.sortFeaturesByKey?l.evaluate(m,{}):void 0,k={text:b,icon:x,index:y,sourceLayerIndex:g,geometry:Hi(m),properties:m.properties,type:rs[m.type],sortKey:w};if(void 0!==m.id&&(k.id=m.id),this.features.push(k),x&&(c[x]=!0),b)for(var O=i.evaluate(m,{}).join(","),E="map"===r.get("text-rotation-alignment")&&"point"!==r.get("symbol-placement"),S=0,T=b.sections;S<T.length;S+=1){var P=T[S],j=ur(b.toString()),C=P.fontStack||O,A=h[C]=h[C]||{};this.calculateGlyphDependencies(P.text,A,E,j)}}}}"line"===r.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function u(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var l=0;l<e.length;l++){var c=e[l],h=c.geometry,p=c.text?c.text.toString():null;if(p){var f=u(p,h),d=u(p,h,!0);if(f in n&&d in t&&n[f]!==t[d]){var v=s(f,d,h),m=o(f,d,r[v].geometry);delete t[f],delete n[d],n[u(p,r[m].geometry,!0)]=m,r[v].geometry=null}else f in n?o(f,d,h):d in t?s(f,d,h):(a(l),t[f]=i-1,n[d]=i-1)}else a(l)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},ls.prototype.update=function(e,t,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n))},ls.prototype.isEmpty=function(){return 0===this.symbolInstances.length},ls.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ls.prototype.upload=function(e){this.uploaded||(this.collisionBox.upload(e),this.collisionCircle.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ls.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},ls.prototype.addToLineVertexArray=function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=t[s-1].dist(t[s]));for(var u=0;u<t.length;u++){var l=a[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},ls.prototype.addSymbols=function(e,t,n,r,i,a,o,s,u,l){for(var c=e.indexArray,h=e.layoutVertexArray,p=e.dynamicLayoutVertexArray,f=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray,a.sortKey),d=this.glyphOffsetArray.length,v=f.vertexLength,m=0,y=t;m<y.length;m+=1){var g=y[m],b=g.tl,_=g.tr,x=g.bl,w=g.br,k=g.tex,O=f.vertexLength,E=g.glyphOffset[1];as(h,s.x,s.y,b.x,E+b.y,k.x,k.y,n),as(h,s.x,s.y,_.x,E+_.y,k.x+k.w,k.y,n),as(h,s.x,s.y,x.x,E+x.y,k.x,k.y+k.h,n),as(h,s.x,s.y,w.x,E+w.y,k.x+k.w,k.y+k.h,n),os(p,s,0),c.emplaceBack(O,O+1,O+2),c.emplaceBack(O+1,O+2,O+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(g.glyphOffset[0])}e.placedSymbolArray.emplaceBack(s.x,s.y,d,this.glyphOffsetArray.length-d,v,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,!1,0),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,a,a.index,{})},ls.prototype._addCollisionDebugVertex=function(e,t,n,r,i,a){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r,i,Math.round(a.x),Math.round(a.y))},ls.prototype.addCollisionDebugVertices=function(e,t,n,r,a,o,s,u){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),c=l.vertexLength,h=a.layoutVertexArray,p=a.collisionVertexArray,f=s.anchorX,d=s.anchorY;if(this._addCollisionDebugVertex(h,p,o,f,d,new i(e,t)),this._addCollisionDebugVertex(h,p,o,f,d,new i(n,t)),this._addCollisionDebugVertex(h,p,o,f,d,new i(n,r)),this._addCollisionDebugVertex(h,p,o,f,d,new i(e,r)),l.vertexLength+=4,u){var v=a.indexArray;v.emplaceBack(c,c+1,c+2),v.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var m=a.indexArray;m.emplaceBack(c,c+1),m.emplaceBack(c+1,c+2),m.emplaceBack(c+2,c+3),m.emplaceBack(c+3,c),l.primitiveLength+=4}},ls.prototype.addDebugCollisionBoxes=function(e,t,n){for(var r=e;r<t;r++){var i=this.collisionBoxArray.get(r),a=i.x1,o=i.y1,s=i.x2,u=i.y2,l=i.radius>0;this.addCollisionDebugVertices(a,o,s,u,l?this.collisionCircle:this.collisionBox,i.anchorPoint,n,l)}},ls.prototype.generateCollisionDebugBuffers=function(){for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t)}},ls.prototype._deserializeCollisionBoxesForSymbol=function(e,t,n,r,i){for(var a={},o=t;o<n;o++){var s=e.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY},a.textFeatureIndex=s.featureIndex;break}a.textCircles||(a.textCircles=[],a.textFeatureIndex=s.featureIndex),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var u=r;u<i;u++){var l=e.get(u);if(0===l.radius){a.iconBox={x1:l.x1,y1:l.y1,x2:l.x2,y2:l.y2,anchorPointX:l.anchorPointX,anchorPointY:l.anchorPointY},a.iconFeatureIndex=l.featureIndex;break}}return a},ls.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex))}},ls.prototype.hasTextData=function(){return this.text.segments.get().length>0},ls.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ls.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},ls.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},ls.prototype.addIndicesForPlacedTextSymbol=function(e){for(var t=this.text.placedSymbolArray.get(e),n=t.vertexStartIndex+4*t.numGlyphs,r=t.vertexStartIndex;r<n;r+=4)this.text.indexArray.emplaceBack(r,r+1,r+2),this.text.indexArray.emplaceBack(r+1,r+2,r+3)},ls.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);for(var i=Math.sin(e),a=Math.cos(e),o=[],s=[],u=0;u<this.symbolInstances.length;u++){var l=this.symbolInstances.get(u);o.push(0|Math.round(i*l.anchorX+a*l.anchorY)),s.push(l.featureIndex)}n.sort((function(e,t){return o[e]-o[t]||s[t]-s[e]})),this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var c=0,h=n;c<h.length;c+=1){var p=h[c],f=this.symbolInstances.get(p);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedTextSymbol(e)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedTextSymbol(f.verticalPlacedTextSymbolIndex);var d=this.icon.placedSymbolArray.get(p);if(d.numGlyphs){var v=d.vertexStartIndex;this.icon.indexArray.emplaceBack(v,v+1,v+2),this.icon.indexArray.emplaceBack(v+1,v+2,v+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},nr("SymbolBucket",ls,{omit:["layers","collisionBoxArray","features","compareText"]}),ls.MAX_GLYPHS=65535,ls.addDynamicAttributes=os;var cs=new Rr({"symbol-placement":new jr(ye.layout_symbol["symbol-placement"]),"symbol-spacing":new jr(ye.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jr(ye.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(ye.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jr(ye.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jr(ye.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new jr(ye.layout_symbol["icon-ignore-placement"]),"icon-optional":new jr(ye.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jr(ye.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(ye.layout_symbol["icon-size"]),"icon-text-fit":new jr(ye.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jr(ye.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(ye.layout_symbol["icon-image"]),"icon-rotate":new Cr(ye.layout_symbol["icon-rotate"]),"icon-padding":new jr(ye.layout_symbol["icon-padding"]),"icon-keep-upright":new jr(ye.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(ye.layout_symbol["icon-offset"]),"icon-anchor":new Cr(ye.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jr(ye.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jr(ye.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jr(ye.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(ye.layout_symbol["text-field"]),"text-font":new Cr(ye.layout_symbol["text-font"]),"text-size":new Cr(ye.layout_symbol["text-size"]),"text-max-width":new Cr(ye.layout_symbol["text-max-width"]),"text-line-height":new jr(ye.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(ye.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(ye.layout_symbol["text-justify"]),"text-radial-offset":new Cr(ye.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jr(ye.layout_symbol["text-variable-anchor"]),"text-anchor":new Cr(ye.layout_symbol["text-anchor"]),"text-max-angle":new jr(ye.layout_symbol["text-max-angle"]),"text-rotate":new Cr(ye.layout_symbol["text-rotate"]),"text-padding":new jr(ye.layout_symbol["text-padding"]),"text-keep-upright":new jr(ye.layout_symbol["text-keep-upright"]),"text-transform":new Cr(ye.layout_symbol["text-transform"]),"text-offset":new Cr(ye.layout_symbol["text-offset"]),"text-allow-overlap":new jr(ye.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new jr(ye.layout_symbol["text-ignore-placement"]),"text-optional":new jr(ye.layout_symbol["text-optional"])}),hs={paint:new Rr({"icon-opacity":new Cr(ye.paint_symbol["icon-opacity"]),"icon-color":new Cr(ye.paint_symbol["icon-color"]),"icon-halo-color":new Cr(ye.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(ye.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(ye.paint_symbol["icon-halo-blur"]),"icon-translate":new jr(ye.paint_symbol["icon-translate"]),"icon-translate-anchor":new jr(ye.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(ye.paint_symbol["text-opacity"]),"text-color":new Cr(ye.paint_symbol["text-color"]),"text-halo-color":new Cr(ye.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(ye.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(ye.paint_symbol["text-halo-blur"]),"text-translate":new jr(ye.paint_symbol["text-translate"]),"text-translate-anchor":new jr(ye.paint_symbol["text-translate-anchor"])}),layout:cs},ps=function(e){function t(t){e.call(this,t,hs)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("point"!==this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n,r=this.layout.get(e).evaluate(t,{}),i=this._unevaluatedLayout._values[e];return i.isDataDriven()||hn(i.value)?r:(n=t.properties,r.replace(/{([^{}]+)}/g,(function(e,t){return t in n?String(n[t]):""})))},t.prototype.createBucket=function(e){return new ls(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(Lr),fs={paint:new Rr({"background-color":new jr(ye.paint_background["background-color"]),"background-pattern":new Mr(ye.paint_background["background-pattern"]),"background-opacity":new jr(ye.paint_background["background-opacity"])})},ds=function(e){function t(t){e.call(this,t,fs)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Lr),vs={paint:new Rr({"raster-opacity":new jr(ye.paint_raster["raster-opacity"]),"raster-hue-rotate":new jr(ye.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jr(ye.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jr(ye.paint_raster["raster-brightness-max"]),"raster-saturation":new jr(ye.paint_raster["raster-saturation"]),"raster-contrast":new jr(ye.paint_raster["raster-contrast"]),"raster-resampling":new jr(ye.paint_raster["raster-resampling"]),"raster-fade-duration":new jr(ye.paint_raster["raster-fade-duration"])})},ms=function(e){function t(t){e.call(this,t,vs)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Lr),ys=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e)},t}(Lr),gs={circle:ma,heatmap:Sa,hillshade:Pa,fill:co,"fill-extrusion":jo,line:Vo,symbol:ps,background:ds,raster:ms};function bs(e){for(var t=0,n=0,r=0,i=e;r<i.length;r+=1){var a=i[r];t+=a.w*a.h,n=Math.max(n,a.w)}e.sort((function(e,t){return t.h-e.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}],s=0,u=0,l=0,c=e;l<c.length;l+=1)for(var h=c[l],p=o.length-1;p>=0;p--){var f=o[p];if(!(h.w>f.w||h.h>f.h)){if(h.x=f.x,h.y=f.y,u=Math.max(u,h.y+h.h),s=Math.max(s,h.x+h.w),h.w===f.w&&h.h===f.h){var d=o.pop();p<o.length&&(o[p]=d)}else h.h===f.h?(f.x+=h.w,f.w-=h.w):h.w===f.w?(f.y+=h.h,f.h-=h.h):(o.push({x:f.x+h.w,y:f.y,w:f.w-h.w,h:h.h}),f.y+=h.h,f.h-=h.h);break}}return{w:s,h:u,fill:t/(s*u)||0}}var _s=function(e,t){var n=t.pixelRatio,r=t.version;this.paddedRect=e,this.pixelRatio=n,this.version=r},xs={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};xs.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},xs.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},xs.tlbr.get=function(){return this.tl.concat(this.br)},xs.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(_s.prototype,xs);var ws=function(e,t){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(e,n,i),this.addImages(t,r,i);var a=bs(i),o=a.w,s=a.h,u=new ka({width:o||1,height:s||1});for(var l in e){var c=e[l],h=n[l].paddedRect;ka.copy(c.data,u,{x:0,y:0},{x:h.x+1,y:h.y+1},c.data)}for(var p in t){var f=t[p],d=r[p].paddedRect,v=d.x+1,m=d.y+1,y=f.data.width,g=f.data.height;ka.copy(f.data,u,{x:0,y:0},{x:v,y:m},f.data),ka.copy(f.data,u,{x:0,y:g-1},{x:v,y:m-1},{width:y,height:1}),ka.copy(f.data,u,{x:0,y:0},{x:v,y:m+g},{width:y,height:1}),ka.copy(f.data,u,{x:y-1,y:0},{x:v-1,y:m},{width:1,height:g}),ka.copy(f.data,u,{x:0,y:0},{x:v+y,y:m},{width:1,height:g})}this.image=u,this.iconPositions=n,this.patternPositions=r};ws.prototype.addImages=function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),t[r]=new _s(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},ws.prototype.patchUpdatedImages=function(e,t){for(var n in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)},ws.prototype.patchUpdatedImage=function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=e.tl,i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}},nr("ImagePosition",_s),nr("ImageAtlas",ws);var ks=self.HTMLImageElement,Os=self.HTMLCanvasElement,Es=self.HTMLVideoElement,Ss=self.ImageData,Ts=function(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};Ts.prototype.update=function(e,t,n){var r=e.width,i=e.height,a=!(this.size&&this.size[0]===r&&this.size[1]===i||n),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[r,i],e instanceof ks||e instanceof Os||e instanceof Es||e instanceof Ss?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,e.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;e instanceof ks||e instanceof Os||e instanceof Es||e instanceof Ss?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,i,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Ts.prototype.bind=function(e,t,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},Ts.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Ts.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ps=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?i-1:0,p=n?-1:1,f=e[t+h];for(h+=p,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=p,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=p,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=l}return(f?-1:1)*o*Math.pow(2,a-r)},js=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,d=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(o++,u/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*u-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+f]=255&o,f+=d,o/=256,l-=8);e[n+f-d]|=128*v},Cs=As;function As(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function Ms(e){return e.type===As.Bytes?e.readVarint()+e.pos:e.pos+1}function Is(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Rs(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Ls(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function zs(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Ds(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Fs(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Bs(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Ns(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Us(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Vs(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ws(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function qs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Gs(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Hs(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Zs(e,t,n){1===e&&n.readMessage(Xs,t)}function Xs(e,t,n){if(3===e){var r=n.readMessage(Ys,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,u=r.left,l=r.top,c=r.advance;t.push({id:i,bitmap:new wa({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:u,top:l,advance:c}})}}function Ys(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}As.Varint=0,As.Fixed64=1,As.Bytes=2,As.Fixed32=5,As.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=qs(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Hs(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=qs(this.buf,this.pos)+4294967296*qs(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=qs(this.buf,this.pos)+4294967296*Hs(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ps(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ps(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return Is(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return Is(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return Is(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return Is(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return Is(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return Is(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,u=e[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)<=127&&(l=null):3===c?(a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&((l=(15&u)<<12|(63&a)<<6|63&o)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&((l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=Ms(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=Ms(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===As.Varint)for(;this.buf[this.pos++]>127;);else if(t===As.Bytes)this.pos=this.readVarint()+this.pos;else if(t===As.Fixed32)this.pos+=4;else{if(t!==As.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Gs(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Gs(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Gs(this.buf,-1&e,this.pos),Gs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Gs(this.buf,-1&e,this.pos),Gs(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Rs(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),js(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),js(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Rs(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,As.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,Ls,t)},writePackedSVarint:function(e,t){this.writeMessage(e,zs,t)},writePackedBoolean:function(e,t){this.writeMessage(e,Bs,t)},writePackedFloat:function(e,t){this.writeMessage(e,Ds,t)},writePackedDouble:function(e,t){this.writeMessage(e,Fs,t)},writePackedFixed32:function(e,t){this.writeMessage(e,Ns,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,Us,t)},writePackedFixed64:function(e,t){this.writeMessage(e,Vs,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,Ws,t)},writeBytesField:function(e,t){this.writeTag(e,As.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,As.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,As.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,As.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,As.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,As.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,As.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,As.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,As.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,As.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ks=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,m(["receive"],this),this.target.addEventListener("message",this.receive,!1)};function Js(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Ks.prototype.send=function(e,t,n,r){var i=this,a=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[a]=n);var o=[];if(this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(a),data:ir(t,o)},o),n)return{cancel:function(){i.callbacks[a]=null,i.target.postMessage({targetMapId:r,sourceMapId:i.mapId,type:"<cancel>",id:String(a)})}}},Ks.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var a=function(e,t){delete n.callbacks[i];var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?ir(e):null,data:ir(t,r)},r)};if("<response>"===r.type||"<cancel>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(ar(r.error)):t&&t(null,ar(r.data));else if(void 0!==r.id&&this.parent[r.type]){this.callbacks[r.id]=null;var o=this.parent[r.type](r.sourceMapId,ar(r.data),a);o&&null===this.callbacks[r.id]&&(this.callbacks[r.id]=o.cancel)}else if(void 0!==r.id&&this.parent.getWorkerSource){var s=r.type.split("."),u=ar(r.data);this.parent.getWorkerSource(r.sourceMapId,s[0],u.source)[s[1]](u,a)}else this.parent[r.type](ar(r.data))}},Ks.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)};var $s=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};$s.prototype.setNorthEast=function(e){return this._ne=e instanceof Qs?new Qs(e.lng,e.lat):Qs.convert(e),this},$s.prototype.setSouthWest=function(e){return this._sw=e instanceof Qs?new Qs(e.lng,e.lat):Qs.convert(e),this},$s.prototype.extend=function(e){var t,n,r=this._sw,i=this._ne;if(e instanceof Qs)t=e,n=e;else{if(!(e instanceof $s))return Array.isArray(e)?e.every(Array.isArray)?this.extend($s.convert(e)):this.extend(Qs.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return r||i?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Qs(t.lng,t.lat),this._ne=new Qs(n.lng,n.lat)),this},$s.prototype.getCenter=function(){return new Qs((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},$s.prototype.getSouthWest=function(){return this._sw},$s.prototype.getNorthEast=function(){return this._ne},$s.prototype.getNorthWest=function(){return new Qs(this.getWest(),this.getNorth())},$s.prototype.getSouthEast=function(){return new Qs(this.getEast(),this.getSouth())},$s.prototype.getWest=function(){return this._sw.lng},$s.prototype.getSouth=function(){return this._sw.lat},$s.prototype.getEast=function(){return this._ne.lng},$s.prototype.getNorth=function(){return this._ne.lat},$s.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},$s.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},$s.prototype.isEmpty=function(){return!(this._sw&&this._ne)},$s.convert=function(e){return!e||e instanceof $s?e:new $s(e)};var Qs=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};function eu(e){return 2*Math.PI*6378137*Math.cos(e*Math.PI/180)}function tu(e){return(180+e)/360}function nu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ru(e,t){return e/eu(t)}function iu(e){var t=180-360*e;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90}Qs.prototype.wrap=function(){return new Qs(c(this.lng,-180,180),this.lat)},Qs.prototype.toArray=function(){return[this.lng,this.lat]},Qs.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Qs.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new $s(new Qs(this.lng-n,this.lat-t),new Qs(this.lng+n,this.lat+t))},Qs.convert=function(e){if(e instanceof Qs)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Qs(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Qs(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var au=function(e,t,n){void 0===n&&(n=0),this.x=+e,this.y=+t,this.z=+n};au.fromLngLat=function(e,t){void 0===t&&(t=0);var n=Qs.convert(e);return new au(tu(n.lng),nu(n.lat),ru(t,n.lat))},au.prototype.toLngLat=function(){return new Qs(360*this.x-180,iu(this.y))},au.prototype.toAltitude=function(){return this.z*eu(iu(this.y))};var ou=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=lu(0,e,t,n)};ou.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},ou.prototype.url=function(e,t){var n,r,i,a,o,s=(n=this.x,r=this.y,i=this.z,a=Js(256*n,256*(r=Math.pow(2,i)-r-1),i),o=Js(256*(n+1),256*(r+1),i),a[0]+","+a[1]+","+o[0]+","+o[1]),u=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},ou.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new i((e.x*t-this.x)*qi,(e.y*t-this.y)*qi)};var su=function(e,t){this.wrap=e,this.canonical=t,this.key=lu(e,t.z,t.x,t.y)},uu=function(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new ou(n,+r,+i),this.key=lu(t,e,r,i)};function lu(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}uu.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},uu.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new uu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},uu.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},uu.prototype.children=function(e){if(this.overscaledZ>=e)return[new uu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new uu(t,this.wrap,t,n,r),new uu(t,this.wrap,t,n+1,r),new uu(t,this.wrap,t,n,r+1),new uu(t,this.wrap,t,n+1,r+1)]},uu.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},uu.prototype.wrapped=function(){return new uu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},uu.prototype.unwrapTo=function(e){return new uu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},uu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},uu.prototype.toUnwrapped=function(){return new su(this.wrap,this.canonical)},uu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},uu.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new au(e.x-this.wrap,e.y))},nr("CanonicalTileID",ou),nr("OverscaledTileID",uu,{omit:["posMatrix"]});var cu=function(e,t,n){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return w('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');var r=this.dim=t.height;this.stride=this.dim+2,this.data=new Int32Array(this.stride*this.stride);for(var i=t.data,a="terrarium"===n?this._unpackTerrarium:this._unpackMapbox,o=0;o<r;o++)for(var s=0;s<r;s++){var u=4*(o*r+s);this.set(s,o,a(i[u],i[u+1],i[u+2]))}for(var l=0;l<r;l++)this.set(-1,l,this.get(0,l)),this.set(r,l,this.get(r-1,l)),this.set(l,-1,this.get(l,0)),this.set(l,r,this.get(l,r-1));this.set(-1,-1,this.get(0,0)),this.set(r,-1,this.get(r-1,0)),this.set(-1,r,this.get(0,r-1)),this.set(r,r,this.get(r-1,r-1))};cu.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},cu.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},cu.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},cu.prototype._unpackMapbox=function(e,t,n){return(256*e*256+256*t+n)/10-1e4},cu.prototype._unpackTerrarium=function(e,t,n){return 256*e+t+n/256-32768},cu.prototype.getPixels=function(){return new ka({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},cu.prototype.backfillBorder=function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,u=-n*this.dim,l=a;l<o;l++)for(var c=r;c<i;c++)this.set(c,l,e.get(c+s,l+u))},nr("DEMData",cu);var hu=Br([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),pu=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}};pu.prototype.encode=function(e){return this._stringToNumber[e]},pu.prototype.decode=function(e){return this._numberToString[e]};var fu=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},du={geometry:{configurable:!0}};du.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},du.geometry.set=function(e){this._geometry=e},fu.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(fu.prototype,du);var vu=function(){this.state={},this.stateChanges={},this.deletedStates={}};vu.prototype.updateState=function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},h(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]},vu.prototype.removeFeatureState=function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},vu.prototype.getState=function(e,t){var n=String(t),r=this.state[e]||{},i=this.stateChanges[e]||{},a=h({},r[n],i[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var o=this.deletedStates[e][t];if(null===o)return{};for(var s in o)delete a[s]}return a},vu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},vu.prototype.coalesceChanges=function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),h(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var u in this.state[o])s[u]={},this.state[o][u]={};else for(var l in this.deletedStates[o]){if(null===this.deletedStates[o][l])this.state[o][l]={};else for(var c=0,p=Object.keys(this.deletedStates[o][l]);c<p.length;c+=1){var f=p[c];delete this.state[o][l][f]}s[l]=this.state[o][l]}n[o]=n[o]||{},h(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)};var mu=function(e,t,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=t||new $n(qi,16,0),this.grid3D=new $n(qi,16,0),this.featureIndexArray=n||new bi};function yu(e){for(var t=1/0,n=1/0,r=-1/0,i=-1/0,a=0,o=e;a<o.length;a+=1){var s=o[a];t=Math.min(t,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:t,minY:n,maxX:r,maxY:i}}function gu(e,t){return t-e}mu.prototype.insert=function(e,t,n,r,i,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=a?this.grid3D:this.grid,u=0;u<t.length;u++){for(var l=t[u],c=[1/0,1/0,-1/0,-1/0],h=0;h<l.length;h++){var p=l[h];c[0]=Math.min(c[0],p.x),c[1]=Math.min(c[1],p.y),c[2]=Math.max(c[2],p.x),c[3]=Math.max(c[3],p.y)}c[0]<qi&&c[1]<qi&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},mu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new xo.VectorTile(new Cs(this.rawTileData)).layers,this.sourceLayerCoder=new pu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},mu.prototype.query=function(e,t,n){var r=this;this.loadVTLayers();for(var a=e.params||{},o=qi/e.tileSize/e.scale,s=Sn(a.filter),u=e.queryGeometry,l=e.queryPadding*o,c=yu(u),h=this.grid.query(c.minX-l,c.minY-l,c.maxX+l,c.maxY+l),p=yu(e.cameraQueryGeometry),f=0,d=this.grid3D.query(p.minX-l,p.minY-l,p.maxX+l,p.maxY+l,(function(t,n,r,a){return function(e,t,n,r,a){for(var o=0,s=e;o<s.length;o+=1){var u=s[o];if(t<=u.x&&n<=u.y&&r>=u.x&&a>=u.y)return!0}var l=[new i(t,n),new i(t,a),new i(r,a),new i(r,n)];if(e.length>2)for(var c=0,h=l;c<h.length;c+=1)if(ia(e,h[c]))return!0;for(var p=0;p<e.length-1;p++)if(aa(e[p],e[p+1],l))return!0;return!1}(e.cameraQueryGeometry,t-l,n-l,r+l,a+l)}));f<d.length;f+=1){var v=d[f];h.push(v)}h.sort(gu);for(var m,y={},g=function(i){var l=h[i];if(l!==m){m=l;var c=r.featureIndexArray.get(l),p=null;r.loadMatchingFeature(y,c.bucketIndex,c.sourceLayerIndex,c.featureIndex,s,a.layers,t,(function(t,i){p||(p=Hi(t));var a={};return t.id&&(a=n.getState(i.sourceLayer||"_geojsonTileLayer",t.id)),i.queryIntersectsFeature(u,t,a,p,r.z,e.transform,o,e.pixelPosMatrix)}))}},b=0;b<h.length;b++)g(b);return y},mu.prototype.loadMatchingFeature=function(e,t,n,r,i,a,o,s){var u=this.bucketLayerIDs[t];if(!a||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(a,u)){var l=this.sourceLayerCoder.decode(n),c=this.vtLayers[l].feature(r);if(i(new _r(this.tileID.overscaledZ),c))for(var h=0;h<u.length;h++){var p=u[h];if(!(a&&a.indexOf(p)<0)){var f=o[p];if(f){var d=!s||s(c,f);if(d){var v=new fu(c,this.z,this.x,this.y);v.layer=f.serialize();var m=e[p];void 0===m&&(m=e[p]=[]),m.push({featureIndex:r,feature:v,intersectionZ:d})}}}}}},mu.prototype.lookupSymbolFeatures=function(e,t,n,r,i,a){var o={};this.loadVTLayers();for(var s=Sn(r),u=0,l=e;u<l.length;u+=1){var c=l[u];this.loadMatchingFeature(o,t,n,c,s,i,a)}return o},mu.prototype.hasLayer=function(e){for(var t=0,n=this.bucketLayerIDs;t<n.length;t+=1)for(var r=0,i=n[t];r<i.length;r+=1)if(e===i[r])return!0;return!1},nr("FeatureIndex",mu,{omit:["rawTileData","sourceLayerCoder"]});var bu=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.expiredRequestCount=0,this.state="loading"};bu.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<M.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},bu.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},bu.prototype.loadVectorData=function(e,t,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;for(var r=function(){var e=a[i],r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));for(var o=0,s=r;o<s.length;o+=1){var u=s[o];n[u.id]=e}}},i=0,a=e;i<a.length;i+=1)r();return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof ls){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}for(var a in this.queryPadding=0,this.buckets){var o=this.buckets[a];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(a).queryRadius(o))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new li},bu.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},bu.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},bu.prototype.getBucket=function(e){return this.buckets[e.id]},bu.prototype.upload=function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ts(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ts(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},bu.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},bu.prototype.queryRenderedFeatures=function(e,t,n,r,i,a,o,s,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:n,cameraQueryGeometry:r,scale:i,tileSize:this.tileSize,pixelPosMatrix:u,transform:o,params:a,queryPadding:this.queryPadding*s},e,t):{}},bu.prototype.querySourceFeatures=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData){var n=this.latestFeatureIndex.loadVTLayers(),r=t?t.sourceLayer:"",i=n._geojsonTileLayer||n[r];if(i)for(var a=Sn(t&&t.filter),o=this.tileID.canonical,s=o.z,u=o.x,l=o.y,c={z:s,x:u,y:l},h=0;h<i.length;h++){var p=i.feature(h);if(a(new _r(this.tileID.overscaledZ),p)){var f=new fu(p,s,u,l);f.tile=c,e.push(f)}}}},bu.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},bu.prototype.setMask=function(e,t){if(!o(this.mask,e)&&(this.mask=e,this.clearMask(),!o(e,{0:!0}))){var n=new Vr,r=new ri;this.segments=new xi,this.segments.prepareSegment(0,n,r);for(var a=Object.keys(e),s=0;s<a.length;s++){var u=e[a[s]],l=qi>>u.z,c=new i(u.x*l,u.y*l),h=new i(c.x+l,c.y+l),p=this.segments.prepareSegment(4,n,r);n.emplaceBack(c.x,c.y,c.x,c.y),n.emplaceBack(h.x,c.y,h.x,c.y),n.emplaceBack(c.x,h.y,c.x,h.y),n.emplaceBack(h.x,h.y,h.x,h.y);var f=p.vertexLength;r.emplaceBack(f,f+1,f+2),r.emplaceBack(f+1,f+2,f+3),p.vertexLength+=4,p.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(n,hu.members),this.maskedIndexBuffer=t.createIndexBuffer(r)}},bu.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},bu.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},bu.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=function(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},bu.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},bu.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets){var i=this.buckets[r],a=i.layers[0].sourceLayer||"_geojsonTileLayer",o=n[a],s=e[a];o&&s&&0!==Object.keys(s).length&&(i.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{}),t&&t.style&&(this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(r).queryRadius(i))))}}},bu.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},bu.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<M.now()},bu.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},bu.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=M.now()+e};var _u={horizontal:1,vertical:2,horizontalOnly:3},xu=function(){this.text="",this.sectionIndex=[],this.sections=[]};function wu(e,t,n,r,i,a,o,s,u,l){var c,h=xu.fromFeature(e,n);l===_u.vertical&&h.verticalizePunctuation();var p=br.processBidirectionalText,f=br.processStyledBidirectionalText;if(p&&1===h.sections.length){c=[];for(var d=0,v=p(h.toString(),Pu(h,s,r,t));d<v.length;d+=1){var m=v[d],y=new xu;y.text=m,y.sections=h.sections;for(var g=0;g<m.length;g++)y.sectionIndex.push(0);c.push(y)}}else if(f){c=[];for(var b=0,_=f(h.text,h.sectionIndex,Pu(h,s,r,t));b<_.length;b+=1){var x=_[b],w=new xu;w.text=x[0],w.sectionIndex=x[1],w.sections=h.sections,c.push(w)}}else c=function(e,t){for(var n=[],r=e.text,i=0,a=0,o=t;a<o.length;a+=1){var s=o[a];n.push(e.substring(i,s)),i=s}return i<r.length&&n.push(e.substring(i,r.length)),n}(h,Pu(h,s,r,t));var k=[],O={positionedGlyphs:k,text:h.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:l,lineCount:c.length};return function(e,t,n,r,i,a,o,s){for(var u=0,l=-17,c=0,h=e.positionedGlyphs,p="right"===a?1:"left"===a?0:.5,f=0,d=n;f<d.length;f+=1){var v=d[f];v.trim();var m=v.getMaxScale();if(v.length()){for(var y=h.length,g=0;g<v.length();g++){var b=v.getSection(g),_=v.getCharCode(g),x=24*(m-b.scale),w=t[b.fontStack],k=w&&w[_];k&&(hr(_)&&o!==_u.horizontal?(h.push({glyph:_,x:u,y:x,vertical:!0,scale:b.scale,fontStack:b.fontStack}),u+=24*b.scale+s):(h.push({glyph:_,x:u,y:l+x,vertical:!1,scale:b.scale,fontStack:b.fontStack}),u+=k.metrics.advance*b.scale+s))}if(h.length!==y){var O=u-s;c=Math.max(O,c),Cu(h,t,y,h.length-1,p)}u=0,l+=r*m}else l+=r}var E=ju(i),S=E.horizontalAlign,T=E.verticalAlign;!function(e,t,n,r,i,a,o){for(var s=(t-n)*i,u=(-r*o+.5)*a,l=0;l<e.length;l++)e[l].x+=s,e[l].y+=u}(h,p,S,T,c,r,n.length);var P=l- -17;e.top+=-T*P,e.bottom=e.top+P,e.left+=-S*c,e.right=e.left+c}(O,t,c,i,a,o,l,s),!!k.length&&O}xu.fromFeature=function(e,t){for(var n=new xu,r=0;r<e.sections.length;r++){var i=e.sections[r];n.sections.push({scale:i.scale||1,fontStack:i.fontStack||t}),n.text+=i.text;for(var a=0;a<i.text.length;a++)n.sectionIndex.push(r)}return n},xu.prototype.length=function(){return this.text.length},xu.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xu.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xu.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n+1)||null,i=e.charCodeAt(n-1)||null;r&&pr(r)&&!Ko[e[n+1]]||i&&pr(i)&&!Ko[e[n-1]]||!Ko[e[n]]?t+=e[n]:t+=Ko[e[n]]}return t}(this.text)},xu.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&ku[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&ku[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)},xu.prototype.substring=function(e,t){var n=new xu;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n},xu.prototype.toString=function(){return this.text},xu.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)};var ku={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ou={};function Eu(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Su(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function Tu(e,t,n,r,i,a){for(var o=null,s=Eu(t,n,i,a),u=0,l=r;u<l.length;u+=1){var c=l[u],h=Eu(t-c.x,n,i,a)+c.badness;h<=s&&(o=c,s=h)}return{index:e,x:t,priorBreak:o,badness:s}}function Pu(e,t,n,r){if(!n)return[];if(!e)return[];for(var i,a=[],o=function(e,t,n,r){for(var i=0,a=0;a<e.length();a++){var o=e.getSection(a),s=r[o.fontStack],u=s&&s[e.getCharCode(a)];u&&(i+=u.metrics.advance*o.scale+t)}return i/Math.max(1,Math.ceil(i/n))}(e,t,n,r),s=0,u=0;u<e.length();u++){var l=e.getSection(u),c=e.getCharCode(u),h=r[l.fontStack],p=h&&h[c];p&&!ku[c]&&(s+=p.metrics.advance*l.scale+t),u<e.length()-1&&(Ou[c]||!((i=c)<11904)&&(sr["Bopomofo Extended"](i)||sr.Bopomofo(i)||sr["CJK Compatibility Forms"](i)||sr["CJK Compatibility Ideographs"](i)||sr["CJK Compatibility"](i)||sr["CJK Radicals Supplement"](i)||sr["CJK Strokes"](i)||sr["CJK Symbols and Punctuation"](i)||sr["CJK Unified Ideographs Extension A"](i)||sr["CJK Unified Ideographs"](i)||sr["Enclosed CJK Letters and Months"](i)||sr["Halfwidth and Fullwidth Forms"](i)||sr.Hiragana(i)||sr["Ideographic Description Characters"](i)||sr["Kangxi Radicals"](i)||sr["Katakana Phonetic Extensions"](i)||sr.Katakana(i)||sr["Vertical Forms"](i)||sr["Yi Radicals"](i)||sr["Yi Syllables"](i)))&&a.push(Tu(u+1,s,o,a,Su(c,e.getCharCode(u+1)),!1))}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Tu(e.length(),s,o,a,0,!0))}function ju(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Cu(e,t,n,r,i){if(i){var a=e[r],o=t[a.fontStack],s=o&&o[a.glyph];if(s)for(var u=s.metrics.advance*a.scale,l=(e[r].x+u)*i,c=n;c<=r;c++)e[c].x-=l}}function Au(e,t,n){var r=ju(n),i=r.horizontalAlign,a=r.verticalAlign,o=t[0],s=t[1],u=o-e.displaySize[0]*i,l=u+e.displaySize[0],c=s-e.displaySize[1]*a;return{image:e,top:c,bottom:c+e.displaySize[1],left:u,right:l}}function Mu(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var u=[],l=0;s<n/2;){var c=e[o-1],h=e[o],p=e[o+1];if(!p)return!1;var f=c.angleTo(h)-h.angleTo(p);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:f}),l+=f;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;o++,s+=h.dist(p)}return!0}function Iu(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function Ru(e,t,n){return e?.6*t*n:0}function Lu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function zu(e,t,n,r,i,a){for(var o=Ru(n,i,a),s=Lu(n,r)*a,u=0,l=Iu(e)/2,c=0;c<e.length-1;c++){var h=e[c],p=e[c+1],f=h.dist(p);if(u+f>l){var d=(l-u)/f,v=ct(h.x,p.x,d),m=ct(h.y,p.y,d),y=new Jo(v,m,p.angleTo(h),c);return y._round(),!o||Mu(e,y,s,o,t)?y:void 0}u+=f}}function Du(e,t,n,r,i,a,o,s,u){var l=Ru(r,a,o),c=Lu(r,i),h=c*o,p=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-h<t/4&&(t=h+t/4),function e(t,n,r,i,a,o,s,u,l){for(var c=o/2,h=Iu(t),p=0,f=n-r,d=[],v=0;v<t.length-1;v++){for(var m=t[v],y=t[v+1],g=m.dist(y),b=y.angleTo(m);f+r<p+g;){var _=((f+=r)-p)/g,x=ct(m.x,y.x,_),w=ct(m.y,y.y,_);if(x>=0&&x<l&&w>=0&&w<l&&f-c>=0&&f+c<=h){var k=new Jo(x,w,b,v);k._round(),i&&!Mu(t,k,o,i,a)||d.push(k)}}p+=g}return u||d.length||s||(d=e(t,p/2,r,i,a,o,s,!0,l)),d}(e,p?t/2*s%t:(c/2+2*a)*o*s%t,t,l,n,h,p,!1,u)}Ou[10]=!0,Ou[32]=!0,Ou[38]=!0,Ou[40]=!0,Ou[41]=!0,Ou[43]=!0,Ou[45]=!0,Ou[47]=!0,Ou[173]=!0,Ou[183]=!0,Ou[8203]=!0,Ou[8208]=!0,Ou[8211]=!0,Ou[8231]=!0;var Fu=function(e,t,n,r,a,o,s,u,l,c,h,p){var f=s.top*u-l,d=s.bottom*u+l,v=s.left*u-l,m=s.right*u+l;if(this.boxStartIndex=e.length,c){var y=d-f,g=m-v;y>0&&(y=Math.max(10*u,y),this._addLineCollisionCircles(e,t,n,n.segment,g,y,r,a,o,h))}else{if(p){var b=new i(v,f),_=new i(m,f),x=new i(v,d),w=new i(m,d),k=p*Math.PI/180;b._rotate(k),_._rotate(k),x._rotate(k),w._rotate(k),v=Math.min(b.x,_.x,x.x,w.x),m=Math.max(b.x,_.x,x.x,w.x),f=Math.min(b.y,_.y,x.y,w.y),d=Math.max(b.y,_.y,x.y,w.y)}e.emplaceBack(n.x,n.y,v,f,m,d,r,a,o,0,0)}this.boxEndIndex=e.length};Fu.prototype._addLineCollisionCircles=function(e,t,n,r,i,a,o,s,u,l){var c=a/2,h=Math.floor(i/c)||1,p=1+.4*Math.log(l)/Math.LN2,f=Math.floor(h*p/2),d=-a/2,v=n,m=r+1,y=d,g=-i/2,b=g-i/4;do{if(--m<0){if(y>g)return;m=0;break}y-=t[m].dist(v),v=t[m]}while(y>b);for(var _=t[m].dist(t[m+1]),x=-f;x<h+f;x++){var w=x*c,k=g+w;if(w<0&&(k+=w),w>i&&(k+=w-i),!(k<y)){for(;y+_<k;){if(y+=_,++m+1>=t.length)return;_=t[m].dist(t[m+1])}var O=k-y,E=t[m],S=t[m+1].sub(E)._unit()._mult(O)._add(E)._round(),T=Math.abs(k-d)<c?0:.8*(k-d);e.emplaceBack(S.x,S.y,-a/2,-a/2,a/2,a/2,o,s,u,a/2,T)}}};var Bu=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=Nu),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function Nu(e,t){return e<t?-1:e>t?1:0}function Uu(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var r=1/0,a=1/0,o=-1/0,s=-1/0,u=e[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<r)&&(r=c.x),(!l||c.y<a)&&(a=c.y),(!l||c.x>o)&&(o=c.x),(!l||c.y>s)&&(s=c.y)}var h=o-r,p=s-a,f=Math.min(h,p),d=f/2,v=new Bu([],Vu);if(0===f)return new i(r,a);for(var m=r;m<o;m+=f)for(var y=a;y<s;y+=f)v.push(new Wu(m+d,y+d,d,e));for(var g=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var u=i[a],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,t+=3*c}return new Wu(n/t,r/t,0,e)}(e),b=v.length;v.length;){var _=v.pop();(_.d>g.d||!g.d)&&(g=_,n&&console.log("found best %d after %d probes",Math.round(1e4*_.d)/1e4,b)),_.max-g.d<=t||(d=_.h/2,v.push(new Wu(_.p.x-d,_.p.y-d,d,e)),v.push(new Wu(_.p.x+d,_.p.y-d,d,e)),v.push(new Wu(_.p.x-d,_.p.y+d,d,e)),v.push(new Wu(_.p.x+d,_.p.y+d,d,e)),b+=4)}return n&&(console.log("num probes: "+b),console.log("best distance: "+g.d)),g.p}function Vu(e,t){return t.max-e.max}function Wu(e,t,n,r){this.p=new i(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,u=s-1;o<s;u=o++){var l=a[o],c=a[u];l.y>e.y!=c.y>e.y&&e.x<(c.x-l.x)*(e.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,na(e,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Bu.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Bu.prototype.pop=function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},Bu.prototype.peek=function(){return this.data[0]},Bu.prototype._up=function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r},Bu.prototype._down=function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,i)>=0)break;t[e]=o,e=a}t[e]=i};var qu=t((function(e){e.exports=function(e,t){var n,r,i,a,o,s,u,l;for(n=3&e.length,r=e.length-n,i=t,o=3432918353,s=461845907,l=0;l<r;)u=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,i=27492+(65535&(a=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(l+2))<<16;case 2:u^=(255&e.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(l)))*o+(((u>>>16)*o&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),Gu=t((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),Hu=qu,Zu=qu,Xu=Gu;function Yu(e,t){var n=0,r=0,i=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}function Ku(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ju(e,t,n,r,a,o,s){var u=o.layoutTextSize.evaluate(t,{}),l=o.layoutIconSize.evaluate(t,{}),c=o.textMaxSize.evaluate(t,{});void 0===c&&(c=u);var h=e.layers[0].layout,p=h.get("icon-offset").evaluate(t,{}),f=el(n.horizontal),d=u/24,v=e.tilePixelRatio*d,m=e.tilePixelRatio*c/24,y=e.tilePixelRatio*l,g=e.tilePixelRatio*h.get("symbol-spacing"),b=h.get("text-padding")*e.tilePixelRatio,_=h.get("icon-padding")*e.tilePixelRatio,x=h.get("text-max-angle")/180*Math.PI,k="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),O="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),E=h.get("symbol-placement"),S=g/2,T=function(u,l){l.x<0||l.x>=qi||l.y<0||l.y>=qi||function(e,t,n,r,a,o,s,u,l,c,h,p,f,d,v,m,y,g,b,_,x){var k,O,E=e.addToLineVertexArray(t,n),S=0,T=0,P=0,j={},C=Hu(""),A=24*(o.layout.get("text-radial-offset").evaluate(b,{})||0);for(var M in r.horizontal){var I=r.horizontal[M];if(!k){C=Hu(I.text);var R=o.layout.get("text-rotate").evaluate(b,{});k=new Fu(s,n,t,u,l,c,I,h,p,f,e.overscaling,R)}var L=1===I.lineCount;if(T+=Qu(e,t,I,o,f,b,d,E,r.vertical?_u.horizontal:_u.horizontalOnly,L?Object.keys(r.horizontal):[M],j,_,x),L)break}r.vertical&&(P+=Qu(e,t,r.vertical,o,f,b,d,E,_u.vertical,["vertical"],j,_,x));var z=k?k.boxStartIndex:e.collisionBoxArray.length,D=k?k.boxEndIndex:e.collisionBoxArray.length;if(a){var F=function(e,t,n,r,a,o){var s,u,l,c,h=t.image,p=n.layout,f=t.top-1/h.pixelRatio,d=t.left-1/h.pixelRatio,v=t.bottom+1/h.pixelRatio,m=t.right+1/h.pixelRatio;if("none"!==p.get("icon-text-fit")&&a){var y=m-d,g=v-f,b=p.get("text-size").evaluate(o,{})/24,_=a.left*b,x=a.right*b,w=a.top*b,k=x-_,O=a.bottom*b-w,E=p.get("icon-text-fit-padding")[0],S=p.get("icon-text-fit-padding")[1],T=p.get("icon-text-fit-padding")[2],P=p.get("icon-text-fit-padding")[3],j="width"===p.get("icon-text-fit")?.5*(O-g):0,C="height"===p.get("icon-text-fit")?.5*(k-y):0,A="width"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?k:y,M="height"===p.get("icon-text-fit")||"both"===p.get("icon-text-fit")?O:g;s=new i(_+C-P,w+j-E),u=new i(_+C+S+A,w+j-E),l=new i(_+C+S+A,w+j+T+M),c=new i(_+C-P,w+j+T+M)}else s=new i(d,f),u=new i(m,f),l=new i(m,v),c=new i(d,v);var I=n.layout.get("icon-rotate").evaluate(o,{})*Math.PI/180;if(I){var R=Math.sin(I),L=Math.cos(I),z=[L,-R,R,L];s._matMult(z),u._matMult(z),c._matMult(z),l._matMult(z)}return[{tl:s,tr:u,bl:c,br:l,tex:h.paddedRect,writingMode:void 0,glyphOffset:[0,0]}]}(0,a,o,0,el(r.horizontal),b),B=o.layout.get("icon-rotate").evaluate(b,{});O=new Fu(s,n,t,u,l,c,a,v,m,!1,e.overscaling,B),S=4*F.length;var N=e.iconSizeData,U=null;"source"===N.functionType?(U=[$o*o.layout.get("icon-size").evaluate(b,{})])[0]>$u&&w(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'):"composite"===N.functionType&&((U=[$o*x.compositeIconSizes[0].evaluate(b,{}),$o*x.compositeIconSizes[1].evaluate(b,{})])[0]>$u||U[1]>$u)&&w(e.layerIds[0]+': Value for "icon-size" is >= 256. Reduce your "icon-size".'),e.addSymbols(e.icon,F,U,g,y,b,!1,t,E.lineStartIndex,E.lineLength)}var V=O?O.boxStartIndex:e.collisionBoxArray.length,W=O?O.boxEndIndex:e.collisionBoxArray.length;e.glyphOffsetArray.length>=ls.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),e.symbolInstances.emplaceBack(t.x,t.y,j.right>=0?j.right:-1,j.center>=0?j.center:-1,j.left>=0?j.left:-1,j.vertical||-1,C,z,D,V,W,u,T,P,S,0,h,A)}(e,l,u,n,r,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,b,k,s,y,_,O,p,t,a,o)};if("line"===E)for(var P=0,j=function(e,t,n,r,a){for(var o=[],s=0;s<e.length;s++)for(var u=e[s],l=void 0,c=0;c<u.length-1;c++){var h=u[c],p=u[c+1];h.x<0&&p.x<0||(h.x<0?h=new i(0,h.y+(p.y-h.y)*((0-h.x)/(p.x-h.x)))._round():p.x<0&&(p=new i(0,h.y+(p.y-h.y)*((0-h.x)/(p.x-h.x)))._round()),h.y<0&&p.y<0||(h.y<0?h=new i(h.x+(p.x-h.x)*((0-h.y)/(p.y-h.y)),0)._round():p.y<0&&(p=new i(h.x+(p.x-h.x)*((0-h.y)/(p.y-h.y)),0)._round()),h.x>=r&&p.x>=r||(h.x>=r?h=new i(r,h.y+(p.y-h.y)*((r-h.x)/(p.x-h.x)))._round():p.x>=r&&(p=new i(r,h.y+(p.y-h.y)*((r-h.x)/(p.x-h.x)))._round()),h.y>=a&&p.y>=a||(h.y>=a?h=new i(h.x+(p.x-h.x)*((a-h.y)/(p.y-h.y)),a)._round():p.y>=a&&(p=new i(h.x+(p.x-h.x)*((a-h.y)/(p.y-h.y)),a)._round()),l&&h.equals(l[l.length-1])||(l=[h],o.push(l)),l.push(p)))))}return o}(t.geometry,0,0,qi,qi);P<j.length;P+=1)for(var C=j[P],A=0,M=Du(C,g,x,n.vertical||f,r,24,m,e.overscaling,qi);A<M.length;A+=1){var I=M[A];f&&tl(e,f.text,S,I)||T(C,I)}else if("line-center"===E)for(var R=0,L=t.geometry;R<L.length;R+=1){var z=L[R];if(z.length>1){var D=zu(z,x,n.vertical||f,r,24,m);D&&T(z,D)}}else if("Polygon"===t.type)for(var F=0,B=io(t.geometry,0);F<B.length;F+=1){var N=B[F],U=Uu(N,16);T(N[0],new Jo(U.x,U.y,0))}else if("LineString"===t.type)for(var V=0,W=t.geometry;V<W.length;V+=1){var q=W[V];T(q,new Jo(q[0].x,q[0].y,0))}else if("Point"===t.type)for(var G=0,H=t.geometry;G<H.length;G+=1)for(var Z=0,X=H[G];Z<X.length;Z+=1){var Y=X[Z];T([Y],new Jo(Y.x,Y.y,0))}}Hu.murmur3=Zu,Hu.murmur2=Xu;var $u=65535;function Qu(e,t,n,r,a,o,s,u,l,c,h,p,f){var d=function(e,t,n,r,a,o,s){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=t.positionedGlyphs,c=[],h=0;h<l.length;h++){var p=l[h],f=s[p.fontStack],d=f&&f[p.glyph];if(d){var v=d.rect;if(v){var m=d.metrics.advance*p.scale/2,y=a?[p.x+m,p.y]:[0,0],g=a?[0,0]:[p.x+m+n[0],p.y+n[1]],b=(d.metrics.left-4)*p.scale-m+g[0],_=(-d.metrics.top-4)*p.scale+g[1],x=b+v.w*p.scale,w=_+v.h*p.scale,k=new i(b,_),O=new i(x,_),E=new i(b,w),S=new i(x,w);if(a&&p.vertical){var T=new i(-m,m),P=-Math.PI/2,j=new i(5,0);k._rotateAround(P,T)._add(j),O._rotateAround(P,T)._add(j),E._rotateAround(P,T)._add(j),S._rotateAround(P,T)._add(j)}if(u){var C=Math.sin(u),A=Math.cos(u),M=[A,-C,C,A];k._matMult(M),O._matMult(M),E._matMult(M),S._matMult(M)}c.push({tl:k,tr:O,bl:E,br:S,tex:v,writingMode:t.writingMode,glyphOffset:y})}}}return c}(0,n,s,r,a,o,p),v=e.textSizeData,m=null;"source"===v.functionType?(m=[$o*r.layout.get("text-size").evaluate(o,{})])[0]>$u&&w(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'):"composite"===v.functionType&&((m=[$o*f.compositeTextSizes[0].evaluate(o,{}),$o*f.compositeTextSizes[1].evaluate(o,{})])[0]>$u||m[1]>$u)&&w(e.layerIds[0]+': Value for "text-size" is >= 256. Reduce your "text-size".'),e.addSymbols(e.text,d,m,s,a,o,l,t,u.lineStartIndex,u.lineLength);for(var y=0,g=c;y<g.length;y+=1)h[g[y]]=e.text.placedSymbolArray.length-1;return 4*d.length}function el(e){for(var t in e)return e[t];return null}function tl(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[t]=[];return i[t].push(r),!1}e.Actor=Ks,e.AlphaImage=wa,e.CanonicalTileID=ou,e.CollisionBoxArray=li,e.Color=Be,e.DEMData=cu,e.DataConstantProperty=jr,e.DictionaryCoder=pu,e.EXTENT=qi,e.ErrorEvent=ve,e.EvaluationParameters=_r,e.Event=de,e.Evented=me,e.FeatureIndex=mu,e.FillBucket=uo,e.FillExtrusionBucket=Eo,e.ImageAtlas=ws,e.ImagePosition=_s,e.LineBucket=Do,e.LngLat=Qs,e.LngLatBounds=$s,e.MercatorCoordinate=au,e.ONE_EM=24,e.OverscaledTileID=uu,e.Point=i,e.Point$1=i,e.ProgramConfiguration=Ni,e.Properties=Rr,e.Protobuf=Cs,e.RGBAImage=ka,e.ResourceType=ne,e.SegmentVector=xi,e.SourceFeatureState=vu,e.StructArrayLayout1ui2=ai,e.StructArrayLayout2i4=Ur,e.StructArrayLayout2ui4=ii,e.StructArrayLayout3ui6=ri,e.StructArrayLayout4i8=Vr,e.SymbolBucket=ls,e.Texture=Ts,e.Tile=bu,e.Transitionable=kr,e.Uniform1f=Ti,e.Uniform1i=Si,e.Uniform2f=Pi,e.Uniform3f=ji,e.Uniform4f=Ci,e.UniformColor=Ai,e.UniformMatrix4f=Ii,e.UnwrappedTileID=su,e.ValidationError=ge,e.WritingMode=_u,e.ZoomHistory=or,e.addDynamicAttributes=os,e.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)}))}))},e.bezier=s,e.bindAll=m,e.browser=M,e.canonicalizeTileset=function(e,t){if(!N(t))return e.tiles||[];for(var n=[],r=0,i=e.tiles;r<i.length;r+=1){var a=i[r],o=G(a);n.push(o)}return n},e.clamp=l,e.clone=function(e){var t=new ca(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=_,e.config=I,e.create=function(){var e=new ca(16);return ca!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=ha,e.create$2=function(){var e=new ca(4);return ca!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=pn,e.createLayout=Br,e.createStyleLayer=function(e){return"custom"===e.type?new ys(e):new gs[e.type](e)},e.deepEqual=o,e.ease=u,e.emitValidationErrors=Jn,e.endsWith=y,e.evaluateRadialOffset=Yu,e.evaluateSizeForFeature=es,e.evaluateSizeForZoom=ts,e.evented=gr,e.extend=h,e.featureFilter=Sn,e.filterObject=b,e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=ju,e.getAnchorJustification=Ku,e.getArrayBuffer=le,e.getImage=he,e.getJSON=function(e,t){return ue(h(e,{type:"json"}),t)},e.getReferrer=se,e.getVideo=function(e,t){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(var a=0;a<e.length;a++){var o=self.document.createElement("source");n=e[a],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),o.src=e[a],i.appendChild(o)}return{cancel:function(){}}},e.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.invert=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],h=t[9],p=t[10],f=t[11],d=t[12],v=t[13],m=t[14],y=t[15],g=n*s-r*o,b=n*u-i*o,_=n*l-a*o,x=r*u-i*s,w=r*l-a*s,k=i*l-a*u,O=c*v-h*d,E=c*m-p*d,S=c*y-f*d,T=h*m-p*v,P=h*y-f*v,j=p*y-f*m,C=g*j-b*P+_*T+x*S-w*E+k*O;return C?(C=1/C,e[0]=(s*j-u*P+l*T)*C,e[1]=(i*P-r*j-a*T)*C,e[2]=(v*k-m*w+y*x)*C,e[3]=(p*w-h*k-f*x)*C,e[4]=(u*S-o*j-l*E)*C,e[5]=(n*j-i*S+a*E)*C,e[6]=(m*_-d*k-y*b)*C,e[7]=(c*k-p*_+f*b)*C,e[8]=(o*P-s*S+l*O)*C,e[9]=(r*S-n*P-a*O)*C,e[10]=(d*w-v*_+y*g)*C,e[11]=(h*_-c*w-f*g)*C,e[12]=(s*E-o*T-u*O)*C,e[13]=(n*T-r*E+i*O)*C,e[14]=(v*b-d*x-m*g)*C,e[15]=(c*x-h*b+p*g)*C,e):null},e.isChar=sr,e.isMapboxURL=N,e.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},e.makeRequest=ue,e.mapObject=g,e.mercatorXfromLng=tu,e.mercatorYfromLat=nu,e.mercatorZfromAltitude=ru,e.multiply=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],b=n[0],_=n[1],x=n[2],w=n[3];return e[0]=b*r+_*s+x*h+w*v,e[1]=b*i+_*u+x*p+w*m,e[2]=b*a+_*l+x*f+w*y,e[3]=b*o+_*c+x*d+w*g,b=n[4],_=n[5],x=n[6],w=n[7],e[4]=b*r+_*s+x*h+w*v,e[5]=b*i+_*u+x*p+w*m,e[6]=b*a+_*l+x*f+w*y,e[7]=b*o+_*c+x*d+w*g,b=n[8],_=n[9],x=n[10],w=n[11],e[8]=b*r+_*s+x*h+w*v,e[9]=b*i+_*u+x*p+w*m,e[10]=b*a+_*l+x*f+w*y,e[11]=b*o+_*c+x*d+w*g,b=n[12],_=n[13],x=n[14],w=n[15],e[12]=b*r+_*s+x*h+w*v,e[13]=b*i+_*u+x*p+w*m,e[14]=b*a+_*l+x*f+w*y,e[15]=b*o+_*c+x*d+w*g,e},e.mvt=xo,e.normalizeGlyphsURL=function(e,t){if(!N(e))return e;var n=Z(e);return n.path="/fonts/v1"+n.path,B(n,t)},e.normalizeSourceURL=function(e,t){if(!N(e))return e;var n=Z(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),B(n,t)},e.normalizeSpriteURL=function(e,t,n,r){var i=Z(e);return N(e)?(i.path="/styles/v1"+i.path+"/sprite"+t+n,B(i,r)):(i.path+=""+t+n,X(i))},e.normalizeStyleURL=function(e,t){if(!N(e))return e;var n=Z(e);return n.path="/styles/v1"+n.path,B(n,t)},e.normalizeTileURL=function(e,t,n){if(!t||!N(t))return e;var r=Z(e),i=M.devicePixelRatio>=2||512===n?"@2x":"",a=R.supported?".webp":"$1";return r.path=r.path.replace(W,""+i+a),r.path="/v4"+r.path,B(r)},e.number=ct,e.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e},e.parseGlyphPBF=function(e){return new Cs(e).readFields(Zs,[])},e.pbf=Cs,e.performSymbolLayout=function(e,t,n,r,i,a){e.createArrays();var o=512*e.overscaling;e.tilePixelRatio=qi/o,e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,l={};if("composite"===e.textSizeData.functionType){var c=e.textSizeData.zoomRange,h=c.min,p=c.max;l.compositeTextSizes=[u["text-size"].possiblyEvaluate(new _r(h)),u["text-size"].possiblyEvaluate(new _r(p))]}if("composite"===e.iconSizeData.functionType){var f=e.iconSizeData.zoomRange,d=f.min,v=f.max;l.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new _r(d)),u["icon-size"].possiblyEvaluate(new _r(v))]}l.layoutTextSize=u["text-size"].possiblyEvaluate(new _r(e.zoom+1)),l.layoutIconSize=u["icon-size"].possiblyEvaluate(new _r(e.zoom+1)),l.textMaxSize=u["text-size"].possiblyEvaluate(new _r(18));for(var m=24*s.get("text-line-height"),y="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),g=s.get("text-keep-upright"),b=0,_=e.features;b<_.length;b+=1){var x=_[b],k=s.get("text-font").evaluate(x,{}).join(","),O=n,E={horizontal:{},vertical:void 0},S=x.text,T=[0,0];if(S){var P=S.toString(),j=24*s.get("text-letter-spacing").evaluate(x,{}),C=lr(P)?j:0,A=s.get("text-anchor").evaluate(x,{}),M=s.get("text-variable-anchor"),I=s.get("text-radial-offset").evaluate(x,{});M||(T=I?Yu(A,24*I):s.get("text-offset").evaluate(x,{}).map((function(e){return 24*e})));var R=y?"center":s.get("text-justify").evaluate(x,{}),L="point"===s.get("symbol-placement")?24*s.get("text-max-width").evaluate(x,{}):0;if(!y&&M)for(var z="auto"===R?M.map((function(e){return Ku(e)})):[R],D=!1,F=0;F<z.length;F++){var B=z[F];if(!E.horizontal[B])if(D)E.horizontal[B]=E.horizontal[0];else{var N=wu(S,t,k,L,m,"center",B,C,T,_u.horizontal);N&&(E.horizontal[B]=N,D=1===N.lineCount)}}else{"auto"===R&&(R=Ku(A));var U=wu(S,t,k,L,m,A,R,C,T,_u.horizontal);U&&(E.horizontal[R]=U),ur(P)&&y&&g&&(E.vertical=wu(S,t,k,L,m,A,R,C,T,_u.vertical))}}var V=void 0;if(x.icon){var W=r[x.icon];W&&(V=Au(i[x.icon],s.get("icon-offset").evaluate(x,{}),s.get("icon-anchor").evaluate(x,{})),void 0===e.sdfIcons?e.sdfIcons=W.sdf:e.sdfIcons!==W.sdf&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(W.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}(Object.keys(E.horizontal).length||V)&&Ju(e,x,E,V,O,l,T)}a&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(a=1/(r-i),e[10]=(i+r)*a,e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=br,e.polygonIntersectsPolygon=Yi,e.postMapLoadEvent=te,e.postTurnstileEvent=Q,e.potpack=bs,e.properties=hs,e.rasterBoundsAttributes=hu,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=nr,e.registerForPluginAvailability=function(e){return mr?e({pluginURL:mr,completionCallback:dr}):gr.once("pluginAvailable",e),e},e.rotate=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u,e},e.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=u*i+p*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=p*i-u*r,e},e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=u*i+p*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=p*i-u*r,e},e.scale=function(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.setRTLTextPlugin=function(e,t){if(vr)throw new Error("setRTLTextPlugin cannot be called multiple times.");vr=!0,mr=M.resolveURL(e),dr=function(e){e?(vr=!1,mr=null,t&&t(e)):yr=!0},gr.fire(new de("pluginAvailable",{pluginURL:mr,completionCallback:dr}))},e.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},e.styleSpec=ye,e.symbolSize=ns,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},e.transformMat4=da,e.translate=function(e,t,n){var r,i,a,o,s,u,l,c,h,p,f,d,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],p=t[9],f=t[10],d=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=h,e[9]=p,e[10]=f,e[11]=d,e[12]=r*v+s*m+h*y+t[12],e[13]=i*v+u*m+p*y+t[13],e[14]=a*v+l*m+f*y+t[14],e[15]=o*v+c*m+d*y+t[15]),e},e.uniqueId=f,e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers."+n+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+n+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Xn,e.validateStyle=Zn,e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.vectorTile=xo,e.version="0.54.1",e.warnOnce=w,e.webpSupported=R,e.window=self,e.wrap=c})),r(0,(function(e){function t(e){var n=typeof e;if("number"===n||"boolean"===n||"string"===n||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",i=0,a=e;i<a.length;i+=1)r+=t(a[i])+",";return r+"]"}for(var o=Object.keys(e).sort(),s="{",u=0;u<o.length;u++)s+=JSON.stringify(o[u])+":"+t(e[o[u]])+",";return s+"}"}function n(n){for(var r="",i=0,a=e.refProperties;i<a.length;i+=1)r+="/"+t(n[a[i]]);return r}var r=function(e){e&&this.replace(e)};r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var i=this,a=0,o=t;a<o.length;a+=1){var s=o[a];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=e.createStyleLayer(s);u._featureFilter=e.featureFilter(u.filter)}for(var l=0,c=r;l<c.length;l+=1){var h=c[l];delete this._layerConfigs[h],delete this._layers[h]}this.familiesBySource={};for(var p=0,f=function(e){for(var t={},r=0;r<e.length;r++){var i=n(e[r]),a=t[i];a||(a=t[i]=[]),a.push(e[r])}var o=[];for(var s in t)o.push(t[s]);return o}(e.values(this._layerConfigs));p<f.length;p+=1){var d=f[p].map((function(e){return i._layers[e.id]})),v=d[0];if("none"!==v.visibility){var m=v.source||"",y=this.familiesBySource[m];y||(y=this.familiesBySource[m]={});var g=v.sourceLayer||"_geojsonTileLayer",b=y[g];b||(b=y[g]=[]),b.push(d)}}};var i=function(t){var n={},r=[];for(var i in t){var a=t[i],o=n[i]={};for(var s in a){var u=a[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),o[s]={rect:l,metrics:u.metrics}}}}var c=e.potpack(r),h=c.w,p=c.h,f=new e.AlphaImage({width:h||1,height:p||1});for(var d in t){var v=t[d];for(var m in v){var y=v[+m];if(y&&0!==y.bitmap.width&&0!==y.bitmap.height){var g=n[d][m].rect;e.AlphaImage.copy(y.bitmap,f,{x:0,y:0},{x:g.x+1,y:g.y+1},y.bitmap)}}}this.image=f,this.positions=n};e.register("GlyphAtlas",i);var a=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies};function o(t,n){for(var r=new e.EvaluationParameters(n),i=0,a=t;i<a.length;i+=1)a[i].recalculate(r)}a.prototype.parse=function(t,n,r,a){var s=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var u=new e.DictionaryCoder(Object.keys(t.layers).sort()),l=new e.FeatureIndex(this.tileID);l.bucketLayerIDs=[];var c,h,p,f,d={},v={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{}},m=n.familiesBySource[this.source];for(var y in m){var g=t.layers[y];if(g){1===g.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(y),_=[],x=0;x<g.length;x++){var w=g.feature(x);_.push({feature:w,index:x,sourceLayerIndex:b})}for(var k=0,O=m[y];k<O.length;k+=1){var E=O[k],S=E[0];S.minzoom&&this.zoom<Math.floor(S.minzoom)||S.maxzoom&&this.zoom>=S.maxzoom||"none"!==S.visibility&&(o(E,this.zoom),(d[S.id]=S.createBucket({index:l.bucketLayerIDs.length,layers:E,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(_,v),l.bucketLayerIDs.push(E.map((function(e){return e.id}))))}}}var T=e.mapObject(v.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(T).length?r.send("getGlyphs",{uid:this.uid,stacks:T},(function(e,t){c||(c=e,h=t,C.call(s))})):h={};var P=Object.keys(v.iconDependencies);P.length?r.send("getImages",{icons:P},(function(e,t){c||(c=e,p=t,C.call(s))})):p={};var j=Object.keys(v.patternDependencies);function C(){if(c)return a(c);if(h&&p&&f){var t=new i(h),n=new e.ImageAtlas(p,f);for(var r in d){var s=d[r];s instanceof e.SymbolBucket?(o(s.layers,this.zoom),e.performSymbolLayout(s,h,t.positions,p,n.iconPositions,this.showCollisionBoxes)):s.hasPattern&&(s instanceof e.LineBucket||s instanceof e.FillBucket||s instanceof e.FillExtrusionBucket)&&(o(s.layers,this.zoom),s.addFeatures(v,n.patternPositions))}this.status="done",a(null,{buckets:e.values(d).filter((function(e){return!e.isEmpty()})),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:n,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?t.positions:null})}}j.length?r.send("getImages",{icons:j},(function(e,t){c||(c=e,f=t,C.call(s))})):f={},C.call(this)};var s="undefined"!=typeof performance,u={getEntriesByName:function(e){return!!(s&&performance&&performance.getEntriesByName)&&performance.getEntriesByName(e)},mark:function(e){return!!(s&&performance&&performance.mark)&&performance.mark(e)},measure:function(e,t,n){return!!(s&&performance&&performance.measure)&&performance.measure(e,t,n)},clearMarks:function(e){return!!(s&&performance&&performance.clearMarks)&&performance.clearMarks(e)},clearMeasures:function(e){return!!(s&&performance&&performance.clearMeasures)&&performance.clearMeasures(e)}},l=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},u.mark(this._marks.start)};function c(t,n){var r=e.getArrayBuffer(t.request,(function(t,r,i,a){t?n(t):r&&n(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),n()}}l.prototype.finish=function(){u.mark(this._marks.end);var e=u.getEntriesByName(this._marks.measure);return 0===e.length&&(u.measure(this._marks.measure,this._marks.start,this._marks.end),e=u.getEntriesByName(this._marks.measure),u.clearMarks(this._marks.start),u.clearMarks(this._marks.end),u.clearMeasures(this._marks.measure)),e},u.Performance=l;var h=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||c,this.loading={},this.loaded={}};h.prototype.loadTile=function(t,n){var r=this,i=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new u.Performance(t.request),s=this.loading[i]=new a(t);s.abort=this.loadVectorData(t,(function(t,a){if(delete r.loading[i],t||!a)return s.status="done",r.loaded[i]=s,n(t);var u=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);var c={};if(o){var h=o.finish();h&&(c.resourceTiming=JSON.parse(JSON.stringify(h)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,r.layerIndex,r.actor,(function(t,r){if(t||!r)return n(t);n(null,e.extend({rawTileData:u.slice(0)},r,l,c))})),r.loaded=r.loaded||{},r.loaded[i]=s}))},h.prototype.reloadTile=function(e,t){var n=this.loaded,r=e.uid,i=this;if(n&&n[r]){var a=n[r];a.showCollisionBoxes=e.showCollisionBoxes;var o=function(e,n){var r=a.reloadCallback;r&&(delete a.reloadCallback,a.parse(a.vectorTile,i.layerIndex,i.actor,r)),t(e,n)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.actor,o):o())}},h.prototype.abortTile=function(e,t){var n=this.loading,r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},h.prototype.removeTile=function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()};var p=function(){this.loaded={}};p.prototype.loadTile=function(t,n){var r=t.uid,i=t.encoding,a=t.rawImageData,o=new e.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=o,n(null,o)},p.prototype.removeTile=function(e){var t=this.loaded,n=e.uid;t&&t[n]&&delete t[n]};var f=6378137;function d(e){var t=0;if(e&&e.length>0){t+=Math.abs(v(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(v(e[n]))}return t}function v(e){var t,n,r,i,a,o,s=0,u=e.length;if(u>2){for(o=0;o<u;o++)o===u-2?(r=u-2,i=u-1,a=0):o===u-1?(r=u-1,i=0,a=1):(r=o,i=o+1,a=o+2),t=e[r],n=e[i],s+=(m(e[a][0])-m(t[0]))*Math.sin(m(n[1]));s=s*f*f/2}return s}function m(e){return e*Math.PI/180}var y={geometry:function e(t){var n,r=0;switch(t.type){case"Polygon":return d(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)r+=d(t.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<t.geometries.length;n++)r+=e(t.geometries[n]);return r}},ring:v};function g(e,t){return function(n){return e(n,t)}}function b(e,t){t=!!t,e[0]=_(e[0],t);for(var n=1;n<e.length;n++)e[n]=_(e[n],!t);return e}function _(e,t){return function(e){return y.ring(e)>=0}(e)===t?e:e.reverse()}var x=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,w=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};w.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];t.push([new e.Point$1(i[0],i[1])])}return t}for(var a=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var u=[],l=0,c=s[o];l<c.length;l+=1){var h=c[l];u.push(new e.Point$1(h[0],h[1]))}a.push(u)}return a},w.prototype.toGeoJSON=function(e,t,n){return x.call(this,e,t,n)};var k=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};k.prototype.feature=function(e){return new w(this._features[e])};var O=e.vectorTile.VectorTileFeature,E=S;function S(e,t){this.options=t||{},this.features=e,this.length=e.length}function T(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}S.prototype.feature=function(e){return new T(this.features[e],this.options.extent)},T.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],a=0;a<r.length;a++)i.push(new e.Point$1(r[a][0],r[a][1]));this.geometry.push(i)}return this.geometry},T.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var u=o[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},T.prototype.toGeoJSON=O.prototype.toGeoJSON;var P=A,j=A,C=E;function A(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,M,e.layers[n])}(t,n),n.finish()}function M(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,I,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,F,a[n])}function I(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,R,e),t.writeVarintField(3,n.type),t.writeMessage(4,D,n)}function R(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var u=a[s];void 0===u&&(r.push(s),u=r.length-1,a[s]=u),t.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,p=o[h];void 0===p&&(i.push(l),p=i.length-1,o[h]=p),t.writeVarint(p)}}function L(e,t){return(t<<3)+(7&e)}function z(e){return e<<1^e>>31}function D(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var u=n[s],l=1;1===r&&(l=u.length),t.writeVarint(L(1,l));for(var c=3===r?u.length-1:u.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(L(2,c-1));var p=u[h].x-i,f=u[h].y-a;t.writeVarint(z(p)),t.writeVarint(z(f)),i+=p,a+=f}3===r&&t.writeVarint(L(7,1))}}function F(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function B(e,t,n,r){N(e,n,r),N(t,2*n,2*r),N(t,2*n+1,2*r+1)}function N(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function U(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}P.fromVectorTileJs=j,P.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new E(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return A({layers:n})},P.GeoJSONWrapper=C;var V=function(e){return e[0]},W=function(e){return e[1]},q=function(e,t,n,r,i){void 0===t&&(t=V),void 0===n&&(n=W),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,o=this.ids=new a(e.length),s=this.coords=new i(2*e.length),u=0;u<e.length;u++)o[u]=u,s[2*u]=t(e[u]),s[2*u+1]=n(e[u]);!function e(t,n,r,i,a,o){if(!(a-i<=r)){var s=i+a>>1;!function e(t,n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);e(t,n,r,Math.max(i,Math.floor(r-u*c/s+h)),Math.min(a,Math.floor(r+(s-u)*c/s+h)),o)}var p=n[2*r+o],f=i,d=a;for(B(t,n,i,r),n[2*a+o]>p&&B(t,n,i,a);f<d;){for(B(t,n,f,d),f++,d--;n[2*f+o]<p;)f++;for(;n[2*d+o]>p;)d--}n[2*i+o]===p?B(t,n,i,d):B(t,n,++d,a),d<=r&&(i=d+1),r<=d&&(a=d-1)}}(t,n,s,i,a,o%2),e(t,n,r,i,s-1,o+1),e(t,n,r,s+1,a,o+1)}}(o,s,r,0,o.length-1,0)};q.prototype.range=function(e,t,n,r){return function(e,t,n,r,i,a,o){for(var s,u,l=[0,e.length-1,0],c=[];l.length;){var h=l.pop(),p=l.pop(),f=l.pop();if(p-f<=o)for(var d=f;d<=p;d++)s=t[2*d],u=t[2*d+1],s>=n&&s<=i&&u>=r&&u<=a&&c.push(e[d]);else{var v=Math.floor((f+p)/2);s=t[2*v],u=t[2*v+1],s>=n&&s<=i&&u>=r&&u<=a&&c.push(e[v]);var m=(h+1)%2;(0===h?n<=s:r<=u)&&(l.push(f),l.push(v-1),l.push(m)),(0===h?i>=s:a>=u)&&(l.push(v+1),l.push(p),l.push(m))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)},q.prototype.within=function(e,t,n){return function(e,t,n,r,i,a){for(var o=[0,e.length-1,0],s=[],u=i*i;o.length;){var l=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var p=h;p<=c;p++)U(t[2*p],t[2*p+1],n,r)<=u&&s.push(e[p]);else{var f=Math.floor((h+c)/2),d=t[2*f],v=t[2*f+1];U(d,v,n,r)<=u&&s.push(e[f]);var m=(l+1)%2;(0===l?n-i<=d:r-i<=v)&&(o.push(h),o.push(f-1),o.push(m)),(0===l?n+i>=d:r+i>=v)&&(o.push(f+1),o.push(c),o.push(m))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)};var G={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,map:function(e){return e}},H=function(e){this.options=Q(Object.create(G),e),this.trees=new Array(this.options.maxZoom+1)};function Z(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function X(e,t){var n=e.geometry.coordinates,r=n[0],i=n[1];return{x:J(r),y:$(i),zoom:1/0,index:t,parentId:-1}}function Y(e){return{type:"Feature",id:e.id,properties:K(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,n=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var t,n,r}function K(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return Q(Q({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function J(e){return e/360+.5}function $(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Q(e,t){for(var n in t)e[n]=t[n];return e}function ee(e){return e.x}function te(e){return e.y}function ne(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var u=((e-n)*o+(t-r)*s)/(o*o+s*s);u>1?(n=i,r=a):u>0&&(n+=o*u,r+=s*u)}return(o=e-n)*o+(s=t-r)*s}function re(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ie(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)ie(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)ie(e,t[r][i])}(i),i}function ie(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ae(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===a)oe(i,s);else if("MultiPoint"===a)for(var l=0;l<i.length;l++)oe(i[l],s);else if("LineString"===a)se(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(l=0;l<i.length;l++)s=[],se(i[l],s,o,!1),e.push(re(u,"LineString",s,t.properties));return}ue(i,s,o,!1)}else if("Polygon"===a)ue(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(l=0;l<t.geometry.geometries.length;l++)ae(e,{id:u,geometry:t.geometry.geometries[l],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];ue(i[l],c,o,!0),s.push(c)}}e.push(re(u,a,s,t.properties))}}function oe(e,t){t.push(le(e[0])),t.push(ce(e[1])),t.push(0)}function se(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var u=le(e[s][0]),l=ce(e[s][1]);t.push(u),t.push(l),t.push(0),s>0&&(o+=r?(i*l-u*a)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-a,2))),i=u,a=l}var c=t.length-3;t[2]=1,function e(t,n,r,i){for(var a,o=i,s=r-n>>1,u=r-n,l=t[n],c=t[n+1],h=t[r],p=t[r+1],f=n+3;f<r;f+=3){var d=ne(t[f],t[f+1],l,c,h,p);if(d>o)a=f,o=d;else if(d===o){var v=Math.abs(f-s);v<u&&(a=f,u=v)}}o>i&&(a-n>3&&e(t,n,a,i),t[a+2]=o,r-a>3&&e(t,a,r,i))}(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function ue(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];se(e[i],a,n,r),t.push(a)}}function le(e){return e/360+.5}function ce(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function he(e,t,n,r,i,a,o,s){if(r/=t,a>=(n/=t)&&o<r)return e;if(o<n||a>=r)return null;for(var u=[],l=0;l<e.length;l++){var c=e[l],h=c.geometry,p=c.type,f=0===i?c.minX:c.minY,d=0===i?c.maxX:c.maxY;if(f>=n&&d<r)u.push(c);else if(!(d<n||f>=r)){var v=[];if("Point"===p||"MultiPoint"===p)pe(h,v,n,r,i);else if("LineString"===p)fe(h,v,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===p)ve(h,v,n,r,i,!1);else if("Polygon"===p)ve(h,v,n,r,i,!0);else if("MultiPolygon"===p)for(var m=0;m<h.length;m++){var y=[];ve(h[m],y,n,r,i,!0),y.length&&v.push(y)}if(v.length){if(s.lineMetrics&&"LineString"===p){for(m=0;m<v.length;m++)u.push(re(c.id,p,v[m],c.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===v.length?(p="LineString",v=v[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===v.length?"Point":"MultiPoint"),u.push(re(c.id,p,v,c.tags))}}}return u.length?u:null}function pe(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function fe(e,t,n,r,i,a,o){for(var s,u,l=de(e),c=0===i?ye:ge,h=e.start,p=0;p<e.length-3;p+=3){var f=e[p],d=e[p+1],v=e[p+2],m=e[p+3],y=e[p+4],g=0===i?f:d,b=0===i?m:y,_=!1;o&&(s=Math.sqrt(Math.pow(f-m,2)+Math.pow(d-y,2))),g<n?b>n&&(u=c(l,f,d,m,y,n),o&&(l.start=h+s*u)):g>r?b<r&&(u=c(l,f,d,m,y,r),o&&(l.start=h+s*u)):me(l,f,d,v),b<n&&g>=n&&(u=c(l,f,d,m,y,n),_=!0),b>r&&g<=r&&(u=c(l,f,d,m,y,r),_=!0),!a&&_&&(o&&(l.end=h+s*u),t.push(l),l=de(e)),o&&(h+=s)}var x=e.length-3;f=e[x],d=e[x+1],v=e[x+2],(g=0===i?f:d)>=n&&g<=r&&me(l,f,d,v),x=l.length-3,a&&x>=3&&(l[x]!==l[0]||l[x+1]!==l[1])&&me(l,l[0],l[1],l[2]),l.length&&t.push(l)}function de(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ve(e,t,n,r,i,a){for(var o=0;o<e.length;o++)fe(e[o],t,n,r,i,a,!1)}function me(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ye(e,t,n,r,i,a){var o=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*o),e.push(1),o}function ge(e,t,n,r,i,a){var o=(a-n)/(i-n);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function be(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=_e(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(_e(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var u=[],l=0;l<a.geometry[s].length;l++)u.push(_e(a.geometry[s][l],t));i.push(u)}n.push(re(a.id,o,i,a.tags))}return n}function _e(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function xe(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(we(l[r],l[r+1],t,a,o,s));else for(r=0;r<l.length;r++){var h=[];for(i=0;i<l[r].length;i+=2)h.push(we(l[r][i],l[r][i+1],t,a,o,s));u.geometry.push(h)}}return e.transformed=!0,e}function we(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function ke(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Oe(o,e[s],a,i);var u=e[s].minX,l=e[s].minY,c=e[s].maxX,h=e[s].maxY;u<o.minX&&(o.minX=u),l<o.minY&&(o.minY=l),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function Oe(e,t,n,r){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Ee(o,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)Ee(o,i[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)Ee(o,l[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var p={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(p.id=t.id),e.features.push(p)}}function Ee(e,t,n,r,i,a){var o=r*r;if(r>0&&t.size<(i?o:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>o)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}(s,a),e.push(s)}}function Se(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ae(n,e.features[r],t,r);else"Feature"===e.type?ae(n,e,t):ae(n,{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=he(e,1,-1-n,n,0,-1,2,t),a=he(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=he(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=be(i,1).concat(r)),a&&(r=r.concat(be(a,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Te(e,t,n){return 32*((1<<e)*n+t)+e}function Pe(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new k(r.features),a=P(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}H.prototype.load=function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare "+e.length+" points";n&&console.time(o),this.points=e;for(var s=[],u=0;u<e.length;u++)e[u].geometry&&s.push(X(e[u],u));this.trees[i+1]=new q(s,ee,te,a,Float32Array),n&&console.timeEnd(o);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new q(s,ee,te,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},H.prototype.getClusters=function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}for(var u=this.trees[this._limitZoom(t)],l=[],c=0,h=u.range(J(n),$(a),J(i),$(r));c<h.length;c+=1){var p=h[c],f=u.points[p];l.push(f.numPoints?Y(f):this.points[f.index])}return l},H.prototype.getChildren=function(e){var t=e>>5,n=e%32,r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(a.x,a.y,o);u<l.length;u+=1){var c=l[u],h=i.points[c];h.parentId===e&&s.push(h.numPoints?Y(h):this.points[h.index])}if(0===s.length)throw new Error(r);return s},H.prototype.getLeaves=function(e,t,n){t=t||10,n=n||0;var r=[];return this._appendLeaves(r,e,t,n,0),r},H.prototype.getTile=function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,u=(n-s)/i,l=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,l),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,l),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,l),r.points,-1,n,i,c),c.features.length?c:null},H.prototype.getClusterExpansionZoom=function(e){for(var t=e%32-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t},H.prototype._appendLeaves=function(e,t,n,r,i){for(var a=0,o=this.getChildren(t);a<o.length;a+=1){var s=o[a],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i},H.prototype._addTileFeatures=function(e,t,n,r,i,a){for(var o=0,s=e;o<s.length;o+=1){var u=t[s[o]],l={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:u.numPoints?K(u):this.points[u.index].properties},c=u.numPoints?u.id:this.points[u.index].id;void 0!==c&&(l.id=c),a.features.push(l)}},H.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},H.prototype._cluster=function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,o=r.reduce,s=i/(a*Math.pow(2,t)),u=0;u<e.length;u++){var l=e[u];if(!(l.zoom<=t)){l.zoom=t;for(var c=this.trees[t+1],h=c.within(l.x,l.y,s),p=l.numPoints||1,f=l.x*p,d=l.y*p,v=o?this._map(l,!0):null,m=(u<<5)+(t+1),y=0,g=h;y<g.length;y+=1){var b=g[y],_=c.points[b];if(!(_.zoom<=t)){_.zoom=t;var x=_.numPoints||1;f+=_.x*x,d+=_.y*x,p+=x,_.parentId=m,o&&o(v,this._map(_))}}1===p?n.push(l):(l.parentId=m,n.push(Z(f/p,d/p,m,p,v)))}}return n},H.prototype._map=function(e,t){if(e.numPoints)return t?Q({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?Q({},r):r},Se.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Se.prototype.splitTile=function(e,t,n,r,i,a,o){for(var s=[e,t,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=Te(t,n,r),p=this.tiles[h];if(!p&&(l>1&&console.time("creation"),p=this.tiles[h]=ke(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,i){if(t===u.maxZoom||t===i)continue;var d=1<<i-t;if(n!==Math.floor(a/d)||r!==Math.floor(o/d))continue}else if(t===u.indexMaxZoom||p.numPoints<=u.indexMaxPoints)continue;if(p.source=null,0!==e.length){l>1&&console.time("clipping");var v,m,y,g,b,_,x=.5*u.buffer/u.extent,w=.5-x,k=.5+x,O=1+x;v=m=y=g=null,b=he(e,c,n-x,n+k,0,p.minX,p.maxX,u),_=he(e,c,n+w,n+O,0,p.minX,p.maxX,u),e=null,b&&(v=he(b,c,r-x,r+k,1,p.minY,p.maxY,u),m=he(b,c,r+w,r+O,1,p.minY,p.maxY,u),b=null),_&&(y=he(_,c,r-x,r+k,1,p.minY,p.maxY,u),g=he(_,c,r+w,r+O,1,p.minY,p.maxY,u),_=null),l>1&&console.timeEnd("clipping"),s.push(v||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(y||[],t+1,2*n+1,2*r),s.push(g||[],t+1,2*n+1,2*r+1)}}},Se.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=Te(e,t=(t%o+o)%o,n);if(this.tiles[s])return xe(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,l=e,c=t,h=n;!u&&l>0;)l--,c=Math.floor(c/2),h=Math.floor(h/2),u=this.tiles[Te(l,c,h)];return u&&u.source?(a>1&&console.log("found parent tile z%d-%d-%d",l,c,h),a>1&&console.time("drilling down"),this.splitTile(u.source,l,c,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?xe(this.tiles[s],i):null):null};var je=function(t){function n(e,n,r){t.call(this,e,n,Pe),r&&(this.loadGeoJSON=r)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new u.Performance(r.request);this.loadGeoJSON(r,(function(a,o){if(a||!o)return n(a);if("object"!=typeof o)return n(new Error("Input data is not a valid GeoJSON object."));!function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(g(e,n)),t;case"GeometryCollection":return t.geometries=t.geometries.map(g(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return function(e,t){return"Polygon"===e.type?e.coordinates=b(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(g(b,t))),e}(t,n);default:return t}}(o,!0);try{t._geoJSONIndex=r.cluster?new H(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var h=c[l],p=r[h],f=p[0],d=p[1],v=e.createExpression(d),m=e.createExpression("string"==typeof f?[f,["accumulated"],["get",h]]:f);i[h]=v.value,a[h]=m.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=u;n<r.length;n+=1){var a=r[n];t[a]=i[a].evaluate(o,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];o.accumulated=e[i],e[i]=a[i].evaluate(o,s)}},n}(r)).load(o.features):function(e,t){return new Se(e,t)}(o,r.geojsonVtOptions)}catch(a){return n(a)}t.loaded={};var s={};if(i){var u=i.finish();u&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}n(null,s)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(e,n){var r=this.loaded,i=e.uid;return r&&r[i]?t.prototype.reloadTile.call(this,e,n):this.loadTile(e,n)},n.prototype.loadGeoJSON=function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data is not a valid GeoJSON object."));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},n.prototype.getClusterExpansionZoom=function(e,t){t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))},n.prototype.getClusterChildren=function(e,t){t(null,this._geoJSONIndex.getChildren(e.clusterId))},n.prototype.getClusterLeaves=function(e,t){t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))},n}(h),Ce=function(t){var n=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.workerSourceTypes={vector:h,geojson:je},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(n.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');n.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isLoaded())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return Ce.prototype.setReferrer=function(e,t){this.referrer=t},Ce.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},Ce.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},Ce.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).loadTile(t,n)},Ce.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e,t.source).loadTile(t,n)},Ce.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).reloadTile(t,n)},Ce.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)},Ce.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)},Ce.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},Ce.prototype.removeSource=function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}},Ce.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}},Ce.prototype.loadRTLTextPlugin=function(t,n,r){try{e.plugin.isLoaded()||(this.self.importScripts(n),r(e.plugin.isLoaded()?null:new Error("RTL Text Plugin failed to import scripts from "+n)))}catch(e){r(e.toString())}},Ce.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},Ce.prototype.getWorkerSource=function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i){r.actor.send(t,n,i,e)}};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e))}return this.workerSources[e][t][n]},Ce.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new p),this.demWorkerSources[e][t]},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Ce(e.window)),Ce})),r(0,(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&function(e){return void 0===n[e]&&(n[e]=function(e){var n=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(e)),n[e]}(e&&e.failIfMajorPerformanceCaveat))}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t);var n={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(t,n,r){var i=e.window.document.createElement(t);return n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(t,n){return e.window.document.createElementNS(t,n)}},r=e.window.document?e.window.document.documentElement.style:null;function i(e){if(!r)return null;for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var a,o=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&o&&(a=r[o],r[o]="none")},n.enableDrag=function(){r&&o&&(r[o]=a)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[s]=t};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});e.window.addEventListener("test",l,l),e.window.removeEventListener("test",l,l)}catch(e){u=!1}n.addEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&u?e.addEventListener(t,n,r):e.addEventListener(t,n,r.capture)},n.removeEventListener=function(e,t,n,r){void 0===r&&(r={}),"passive"in r&&u?e.removeEventListener(t,n,r):e.removeEventListener(t,n,r.capture)};var c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};function h(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}n.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(t,n){var r=t.getBoundingClientRect();return n=n.touches?n.touches[0]:n,new e.Point(n.clientX-r.left-t.clientLeft,n.clientY-r.top-t.clientTop)},n.touchPos=function(t,n){for(var r=t.getBoundingClientRect(),i=[],a="touchend"===n.type?n.changedTouches:n.touches,o=0;o<a.length;o++)i.push(new e.Point(a[o].clientX-r.left-t.clientLeft,a[o].clientY-r.top-t.clientTop));return i},n.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var p=function(t){function n(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,n=this.requestors;t<n.length;t+=1){var r=n[t],i=r.ids,a=r.callback;this._notify(i,a)}this.requestors=[]}},n.prototype.getImage=function(e){return this.images[e]},n.prototype.addImage=function(e,t){this.images[e]=t},n.prototype.updateImage=function(e,t){var n=this.images[e];t.version=n.version+1,this.images[e]=t,this.updatedImages[e]=!0},n.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(e,t){var n=!0;if(!this.isLoaded())for(var r=0,i=e;r<i.length;r+=1){var a=i[r];this.images[a]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},n.prototype._notify=function(t,n){for(var r={},i=0,a=t;i<a.length;i+=1){var o=a[i];this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},n.prototype.getPattern=function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position},n.prototype.bind=function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,h=this.images[s].data,p=h.width,f=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:l,y:c},{width:p,height:f}),e.RGBAImage.copy(h,o,{x:0,y:f-1},{x:l,y:c-1},{width:p,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:l,y:c+f},{width:p,height:1}),e.RGBAImage.copy(h,o,{x:p-1,y:0},{x:l-1,y:c},{width:1,height:f}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:l+p,y:c},{width:1,height:f})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];h(i)&&this.updateImage(r,i)}}},n}(e.Evented),f=v,d=1e20;function v(e,t,n,r,i,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(e,t,n,r,i,a,o){for(var s=0;s<t;s++){for(var u=0;u<n;u++)r[u]=e[u*t+s];for(y(r,i,a,o,n),u=0;u<n;u++)e[u*t+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<t;s++)r[s]=e[u*t+s];for(y(r,i,a,o,t),s=0;s<t;s++)e[u*t+s]=Math.sqrt(i[s])}}function y(e,t,n,r,i){n[0]=0,r[0]=-d,r[1]=+d;for(var a=1,o=0;a<i;a++){for(var s=(e[a]+a*a-(e[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);s<=r[o];)o--,s=(e[a]+a*a-(e[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);n[++o]=a,r[o]=s,r[o+1]=+d}for(a=0,o=0;a<i;a++){for(;r[o+1]<a;)o++;t[a]=(a-n[o])*(a-n[o])+e[n[o]]}}v.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=t.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?d:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?d:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++){var a=this.gridOuter[r]-this.gridInner[r];n[r]=Math.max(0,Math.min(255,Math.round(255-255*(a/this.radius+this.cutoff))))}return n};var g=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};g.prototype.setURL=function(e){this.url=e},g.prototype.getGlyphs=function(t,n){var r=this,i=[];for(var a in t)for(var o=0,s=t[a];o<s.length;o+=1){var u=s[o];i.push({stack:a,id:u})}e.asyncAll(i,(function(e,t){var n=e.stack,i=e.id,a=r.entries[n];a||(a=r.entries[n]={glyphs:{},requests:{}});var o=a.glyphs[i];if(void 0===o)if(o=r._tinySDF(a,n,i))t(null,{stack:n,id:i,glyph:o});else{var s=Math.floor(i/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else{var u=a.requests[s];u||(u=a.requests[s]=[],g.loadGlyphRange(n,s,r.url,r.requestTransform,(function(e,t){if(t)for(var n in t)a.glyphs[+n]=t[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(e,t);delete a.requests[s]}))),u.push((function(e,r){e?t(e):r&&t(null,{stack:n,id:i,glyph:r[i]||null})}))}}else t(null,{stack:n,id:i,glyph:o})}),(function(e,t){if(e)n(e);else if(t){for(var r={},i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.stack,u=o.id,l=o.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}}))},g.prototype._tinySDF=function(t,n,r){var i=this.localIdeographFontFamily;if(i&&(e.isChar["CJK Unified Ideographs"](r)||e.isChar["Hangul Syllables"](r))){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),a=t.tinySDF=new g.TinySDF(24,3,8,.25,i,o)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(t,n,r,i,a){var o=256*n,s=o+255,u=i(e.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(u,(function(t,n){if(t)a(t);else if(n){for(var r={},i=0,o=e.parseGlyphPBF(n);i<o.length;i+=1){var s=o[i];r[s.id]=s}a(null,r)}}))},g.TinySDF=f;var b=function(){this.specification=e.styleSpec.light.position};b.prototype.possiblyEvaluate=function(t,n){return e.sphericalToCartesian(t.expression.evaluate(n))},b.prototype.interpolate=function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r)}};var _=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new b,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),x=function(t){function n(n){t.call(this),this._transitionable=new e.Transitionable(_),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(t,n){if(void 0===n&&(n={}),!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},n.prototype._validate=function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},n}(e.Evented),w=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};w.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},w.prototype.addDash=function(t,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<t.length;o++)a+=t[o];for(var s=this.width/a,u=s/2,l=t.length%2==1,c=-r;c<=r;c++)for(var h=this.nextRow+r+c,p=this.width*h,f=l?-t[t.length-1]:0,d=t[0],v=1,m=0;m<this.width;m++){for(;d<m/s;)f=d,d+=t[v],l&&v===t.length-1&&(d+=t[0]),v++;var y=Math.abs(m-f*s),g=Math.abs(m-d*s),b=Math.min(y,g),_=v%2==1,x=void 0;if(n){var w=r?c/r*(u+1):0;if(_){var k=u-Math.abs(w);x=Math.sqrt(b*b+k*k)}else x=u-Math.sqrt(b*b+w*w)}else x=(_?1:-1)*b;this.data[3+4*(p+m)]=Math.max(0,Math.min(255,x+128))}var O={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=i,this.dirty=!0,O},w.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))};var k=function t(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var i=this.workerPool.acquire(this.id),a=0;a<i.length;a++){var o=i[a],s=new t.Actor(o,r,this.id);s.name="Worker "+a,this.actors.push(s)}};function O(t,n,r){var i=function(n,i){if(n)return r(n);if(i){var a=e.pick(i,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);i.vector_layers&&(a.vectorLayers=i.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(e){return e.id}))),t.url&&(a.tiles=e.canonicalizeTileset(a,t.url)),r(null,a)}};return t.url?e.getJSON(n(e.normalizeSourceURL(t.url),e.ResourceType.Source),i):e.browser.frame((function(){return i(null,t)}))}k.prototype.broadcast=function(t,n,r){r=r||function(){},e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r)},k.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},k.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},k.Actor=e.Actor;var E=function(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24};E.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},E.prototype.contains=function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<a&&t.y>=i&&t.y<o};var S=function(t){function n(n,r,i,a){if(t.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,e.extend(this,e.pick(r,["url","scheme","tileSize"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._transformRequest,(function(n,r){t._tileJSONRequest=null,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId()),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.loadTile=function(t,n){var r=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url),i={request:this.map._transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};function a(e,r){return t.aborted?n(null):e&&404!==e.status?n(e):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,void 0===t.workerID||"expired"===t.state?t.workerID=this.dispatcher.send("loadTile",i,a.bind(this)):"loading"===t.state?t.reloadCallback=n:this.dispatcher.send("reloadTile",i,a.bind(this),t.workerID)},n.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},n.prototype.hasTransition=function(){return!1},n}(e.Evented),T=function(t){function n(n,r,i,a){t.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._transformRequest,(function(n,r){t._tileJSONRequest=null,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId()),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return e.extend({},this._options)},n.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},n.prototype.loadTile=function(t,n){var r=this,i=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(i,e.ResourceType.Tile),(function(i,a){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(a){r.map._refreshExpiredTiles&&t.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=r.map.painter.context,s=o.gl;t.texture=r.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new e.Texture(o,a,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",n(null)}}))},n.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},n.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},n.prototype.hasTransition=function(){return!1},n}(e.Evented),P=function(t){function n(n,r,i,a){t.call(this,n,r,i,a),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({},r),this.encoding=r.encoding||"mapbox"}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(t,n){var r=e.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);t.request=e.getImage(this.map._transformRequest(r,e.ResourceType.Tile),function(r,i){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(i){this.map._refreshExpiredTiles&&t.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=e.browser.getImageData(i),o={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:a,encoding:this.encoding};t.workerID&&"expired"!==t.state||(t.workerID=this.dispatcher.send("loadDEMTile",o,function(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",n(null))}.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},n.prototype._getNeighboringTiles=function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},n}(T),j=function(t){function n(n,r,i,a){t.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this.dispatcher=i,this.setEventedParent(a),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution);var o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(r.clusterRadius||50)*o,log:!1},clusterProperties:r.clusterProperties},r.workerOptions)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)t.fire(new e.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setData=function(t){var n=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)n.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new e.Event("data",r))}})),this},n.prototype.getClusterExpansionZoom=function(e,t){return this.dispatcher.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t,this.workerID),this},n.prototype.getClusterChildren=function(e,t){return this.dispatcher.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t,this.workerID),this},n.prototype.getClusterLeaves=function(e,t,n,r){return this.dispatcher.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r,this.workerID),this},n.prototype._updateWorkerData=function(t){var n=this,r=e.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._transformRequest(e.browser.resolveURL(i),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",r,(function(e,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.dispatcher.send(n.type+".coalesce",{source:r.source},null,n.workerID),t(e))}),this.workerID)},n.prototype.loadTile=function(t,n){var r=this,i=void 0===t.workerID?"loadTile":"reloadTile",a={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send(i,a,(function(e,a){return t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===i),n(null))}),this.workerID)},n.prototype.abortTile=function(e){e.aborted=!0},n.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},n.prototype.onRemove=function(){this._removed=!0,this.dispatcher.send("removeSource",{type:this.type,source:this.id},null,this.workerID)},n.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(e.Evented),C=function(t){function n(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(t,n){var r=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._transformRequest(this.url,e.ResourceType.Image),(function(i,a){i?r.fire(new e.ErrorEvent(i)):a&&(r.image=a,t&&(r.coordinates=t),n&&n(),r._finishLoading())}))},n.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(e){this.map=e,this.load()},n.prototype.setCoordinates=function(t){var n=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var n=1/0,r=1/0,i=-1/0,a=-1/0,o=0,s=t;o<s.length;o+=1){var u=s[o];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),a=Math.max(a,u.y)}var l=i-n,c=a-r,h=Math.max(l,c),p=Math.max(0,Math.floor(-Math.log(h)/Math.LN2)),f=Math.pow(2,p);return new e.CanonicalTileID(p,Math.floor((n+i)/2*f),Math.floor((r+a)/2*f))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(e){return n.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(e.Evented),A=function(t){function n(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){var t=this,n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1){var a=i[r];this.urls.push(this.map._transformRequest(a,e.ResourceType.Source).url)}e.getVideo(this.urls,(function(n,r){n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(C),M=function(t){function n(n,r,i,a){t.call(this,n,r,i,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.load=function(){this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,e.rasterBoundsAttributes.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[i];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1},n}(C),I={vector:S,raster:T,"raster-dem":P,geojson:j,video:A,image:C,canvas:M};function R(t,n){var r=e.identity([]);return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(n.toUnwrapped()))}function L(e,t,n,r,i){var a=function(e,t,n){if(e)for(var r=0,i=e;r<i.length;r+=1){var a=t[i[r]];if(a&&a.source===n&&"fill-extrusion"===a.type)return!0}else for(var o in t){var s=t[o];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(r&&r.layers,t,e.id),o=i.maxPitchScaleFactor(),s=e.tilesIn(n,o,a);s.sort(z);for(var u=[],l=0,c=s;l<c.length;l+=1){var h=c[l];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,r,i,o,R(e.transform,h.tileID))})}var p=function(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.queryResults,s=a.wrappedTileID,u=n[s]=n[s]||{};for(var l in o)for(var c=o[l],h=u[l]=u[l]||{},p=t[l]=t[l]||[],f=0,d=c;f<d.length;f+=1){var v=d[f];h[v.featureIndex]||(h[v.featureIndex]=!0,p.push(v))}}return t}(u);for(var f in p)p[f].forEach((function(t){var n=t.feature,r=e.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return p}function z(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var D=function(e,t){this.max=e,this.onRemove=t,this.reset()};D.prototype.reset=function(){for(var e in this.data)for(var t=0,n=this.data[e];t<n.length;t+=1){var r=n[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},D.prototype.add=function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},D.prototype.has=function(e){return e.wrapped().key in this.data},D.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},D.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},D.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},D.prototype.remove=function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},D.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this};var F=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};F.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},F.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},F.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},N=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};N.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},N.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},N.prototype.enableAttributes=function(e,t){for(var n=0;n<this.attributes.length;n++){var r=this.attributes[n],i=t.attributes[r.name];void 0!==i&&e.enableVertexAttribArray(i)}},N.prototype.setVertexAttribPointers=function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[B[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},N.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)};var U=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};U.prototype.get=function(){return this.current},U.prototype.set=function(e){},U.prototype.getDefault=function(){return this.default},U.prototype.setDefault=function(){this.set(this.default)};var V=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(U),W=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(U),q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(U),G=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(U),H=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(U),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(U),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(U),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(U),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(U),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(U),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(U),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(U),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(U),te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(U),ne=function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return e.Color.transparent},n.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},n}(U),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(U),ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(U),ae=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(U),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(U),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(U),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(U),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(U),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(U),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(U),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(U),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(U),de=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(U),ve=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(U),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(U),ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(U),ge=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(U),be=function(e){function t(t,n){e.call(this,t),this.context=t,this.parent=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getDefault=function(){return null},t}(U),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(be),xe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(be),we=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,i=this.framebuffer=r.createFramebuffer();this.colorAttachment=new _e(e,i),this.depthAttachment=new xe(e,i)};we.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)};var ke=function(e,t,n){this.func=e,this.mask=t,this.range=n};ke.ReadOnly=!1,ke.ReadWrite=!0,ke.disabled=new ke(519,ke.ReadOnly,[0,1]);var Oe=function(e,t,n,r,i,a){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=a};Oe.disabled=new Oe({func:519,mask:0},0,0,7680,7680,7680);var Ee=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};Ee.disabled=new Ee(Ee.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ee.unblended=new Ee(Ee.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ee.alphaBlended=new Ee([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Se=function(e,t,n){this.enable=e,this.mode=t,this.frontFace=n};Se.disabled=new Se(!1,1029,2305),Se.backCCW=new Se(!0,1029,2305);var Te=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new V(this),this.clearDepth=new W(this),this.clearStencil=new q(this),this.colorMask=new G(this),this.depthMask=new H(this),this.stencilMask=new Z(this),this.stencilFunc=new X(this),this.stencilOp=new Y(this),this.stencilTest=new K(this),this.depthRange=new J(this),this.depthTest=new $(this),this.depthFunc=new Q(this),this.blend=new ee(this),this.blendFunc=new te(this),this.blendColor=new ne(this),this.blendEquation=new re(this),this.cullFace=new ie(this),this.cullFaceSide=new ae(this),this.frontFace=new oe(this),this.program=new se(this),this.activeTexture=new ue(this),this.viewport=new le(this),this.bindFramebuffer=new ce(this),this.bindRenderbuffer=new he(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new fe(this),this.bindElementBuffer=new de(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ve(this),this.pixelStoreUnpack=new me(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ge(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};Te.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Te.prototype.createIndexBuffer=function(e,t){return new F(this,e,t)},Te.prototype.createVertexBuffer=function(e,t,n){return new N(this,e,t,n)},Te.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},Te.prototype.createFramebuffer=function(e,t){return new we(this,e,t)},Te.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},Te.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Te.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Te.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Te.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,Ee.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Te.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(t){function n(n,r,i){var a=this;t.call(this),this.id=n,this.dispatcher=i,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=function(t,n,r,i){var a=new I[n.type](t,n,r,i);if(a.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+a.id);return e.bindAll(["load","abort","unload","serialize","prepare"],a),a}(n,r,i,this),this._tiles={},this._cache=new D(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},n.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},n.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},n.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(je)},n.prototype.getRenderableIds=function(t){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(+i,t)&&r.push(+i);return t?r.sort((function(t,r){var i=n._tiles[t].tileID,a=n._tiles[r].tileID,o=new e.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new e.Point(a.canonical.x,a.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x})):r.sort(je)},n.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},n.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},n.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},n.prototype._tileLoaded=function(t,n,r,i){if(i)return t.state="errored",void(404!==i.status?this._source.fire(new e.ErrorEvent(i,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(n,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},n.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}},n.prototype.getTile=function(e){return this.getTileByID(e.key)},n.prototype.getTileByID=function(e){return this._tiles[e]},n.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},n.prototype._retainLoadedChildren=function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var u=o;u.overscaledZ>t;)if(e[(u=u.scaledTo(u.overscaledZ-1)).key]){r[o.key]=o;break}}}},n.prototype.findLoadedParent=function(e,t){for(var n=e.overscaledZ-1;n>=t;n--){var r=e.scaledTo(n);if(!r)return;var i=String(r.key),a=this._tiles[i];if(a&&a.hasData())return a;if(this._cache.has(r))return this._cache.get(r)}},n.prototype.updateCacheSize=function(e){var t=(Math.ceil(e.width/this._source.tileSize)+1)*(Math.ceil(e.height/this._source.tileSize)+1),n=Math.floor(5*t),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(r)},n.prototype.handleWrapJump=function(e){var t=(e-(void 0===this._prevLng?e:this._prevLng))/360,n=Math.round(t);if(this._prevLng=e,n){var r={};for(var i in this._tiles){var a=this._tiles[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+n),r[a.tileID.key]=a}for(var o in this._tiles=r,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var s in this._tiles){var u=this._tiles[s];this._setTileReloadTimer(s,u)}}},n.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((function(e){return r._source.hasTile(e)})))):i=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),o=Math.max(a-n.maxOverzooming,this._source.minzoom),s=Math.max(a+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,a);if(Ce(this._source.type)){for(var l={},c={},h=0,p=Object.keys(u);h<p.length;h+=1){var f=p[h],d=u[f],v=this._tiles[f];if(v&&!(v.fadeEndTime&&v.fadeEndTime<=e.browser.now())){var m=this.findLoadedParent(d,o);m&&(this._addTile(m.tileID),l[m.tileID.key]=m.tileID),c[f]=d}}for(var y in this._retainLoadedChildren(c,a,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var g in u)this._tiles[g].clearFadeHold();for(var b=0,_=e.keysDifference(this._tiles,u);b<_.length;b+=1){var x=_[b],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}}},n.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},n.prototype._updateRetainedTiles=function(e,t){for(var r={},i={},a=Math.max(t-n.maxOverzooming,this._source.minzoom),o=Math.max(t+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=e;u<l.length;u+=1){var c=l[u],h=this._addTile(c);r[c.key]=c,h.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,o,r);for(var p=0,f=e;p<f.length;p+=1){var d=f[p],v=this._tiles[d.key];if(!v.hasData()){if(t+1>this._source.maxzoom){var m=d.children(this._source.maxzoom)[0],y=this.getTile(m);if(y&&y.hasData()){r[m.key]=m;continue}}else{var g=d.children(this._source.maxzoom);if(r[g[0].key]&&r[g[1].key]&&r[g[2].key]&&r[g[3].key])continue}for(var b=v.wasRequested(),_=d.overscaledZ-1;_>=a;--_){var x=d.scaledTo(_);if(i[x.key])break;if(i[x.key]=!0,!(v=this.getTile(x))&&b&&(v=this._addTile(x)),v&&(r[x.key]=x,b=v.wasRequested(),v.hasData()))break}}}return r},n.prototype._addTile=function(t){var n=this._tiles[t.key];if(n)return n;(n=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,n),n.tileID=t,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,n)));var r=Boolean(n);return r||(n=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,t.key,n.state))),n?(n.uses++,this._tiles[t.key]=n,r||this._source.fire(new e.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))},n.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},n.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},n.prototype.tilesIn=function(t,n,r){var i=this,a=[],o=this.transform;if(!o)return a;for(var s=r?o.getCameraQueryGeometry(t):t,u=t.map((function(e){return o.pointCoordinate(e)})),l=s.map((function(e){return o.pointCoordinate(e)})),c=this.getIds(),h=1/0,p=1/0,f=-1/0,d=-1/0,v=0,m=l;v<m.length;v+=1){var y=m[v];h=Math.min(h,y.x),p=Math.min(p,y.y),f=Math.max(f,y.x),d=Math.max(d,y.y)}for(var g=function(t){var r=i._tiles[c[t]];if(!r.holdingForFade()){var s=r.tileID,v=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=n*r.queryPadding*e.EXTENT/r.tileSize/v,y=[s.getTilePoint(new e.MercatorCoordinate(h,p)),s.getTilePoint(new e.MercatorCoordinate(f,d))];if(y[0].x-m<e.EXTENT&&y[0].y-m<e.EXTENT&&y[1].x+m>=0&&y[1].y+m>=0){var g=u.map((function(e){return s.getTilePoint(e)})),b=l.map((function(e){return s.getTilePoint(e)}));a.push({tile:r,tileID:s,queryGeometry:g,cameraQueryGeometry:b,scale:v})}}},b=0;b<c.length;b++)g(b);return a},n.prototype.getVisibleCoordinates=function(e){for(var t=this,n=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),r=0,i=n;r<i.length;r+=1){var a=i[r];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ce(this._source.type))for(var t in this._tiles){var n=this._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=e.browser.now())return!0}return!1},n.prototype.setFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.updateState(e,t,n)},n.prototype.removeFeatureState=function(e,t,n){e=e||"_geojsonTileLayer",this._state.removeFeatureState(e,t,n)},n.prototype.getFeatureState=function(e,t){return e=e||"_geojsonTileLayer",this._state.getState(e,t)},n}(e.Evented);function je(e,t){return e%32-t%32||t-e}function Ce(e){return"raster"===e||"image"===e||"video"===e}function Ae(){return new e.window.Worker(Kr.workerUrl)}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;var Me=function(){this.active={}};Me.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<Me.workerCount;)this.workers.push(new Ae);return this.active[e]=!0,this.workers.slice()},Me.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)};var Ie,Re=Math.floor(e.browser.hardwareConcurrency/2);function Le(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function ze(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Le(e[r],t[e[r].ref]));return e}Me.workerCount=Math.max(Math.min(Re,6),1);var De={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Fe(e,t,n){n.push({command:De.addSource,args:[e,t[e]]})}function Be(e,t,n){t.push({command:De.removeSource,args:[e]}),n[e]=!0}function Ne(e,t,n,r){Be(e,n,r),Fe(e,t,n)}function Ue(t,n,r){var i;for(i in t[r])if(t[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!e.deepEqual(t[r][i],n[r][i]))return!1;return!0}function Ve(t,n,r,i,a,o){var s;for(s in n=n||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}))}function We(e){return e.id}function qe(e,t){return e[t.id]=t,e}var Ge=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};Ge.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Ge.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ge.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},Ge.prototype._insertBoxCell=function(e,t,n,r,i,a){this.boxCells[i].push(a)},Ge.prototype._insertCircleCell=function(e,t,n,r,i,a){this.circleCells[i].push(a)},Ge.prototype._query=function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],h=this.circles[3*u+2];o.push({key:this.circleKeys[u],x1:l-h,y1:c-h,x2:l+h,y2:c+h})}return a?o.filter(a):o}var p={hitTest:i,seenUids:{box:{},circle:{}}};return this._forEachCell(e,t,n,r,this._queryCell,o,p,a),i?o.length>0:o},Ge.prototype._queryCircle=function(e,t,n,r,i){var a=e-n,o=e+n,s=t-n,u=t+n;if(o<0||a>this.width||u<0||s>this.height)return!r&&[];var l=[],c={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(a,s,o,u,this._queryCellCircle,l,c,i),r?l.length>0:l},Ge.prototype.query=function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)},Ge.prototype.hitTest=function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)},Ge.prototype.hitTestCircle=function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)},Ge.prototype._queryCell=function(e,t,n,r,i,a,o,s){var u=o.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,h=0,p=l;h<p.length;h+=1){var f=p[h];if(!u.box[f]){u.box[f]=!0;var d=4*f;if(e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1]&&(!s||s(this.boxKeys[f]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[f],x1:c[d],y1:c[d+1],x2:c[d+2],y2:c[d+3]})}}}var v=this.circleCells[i];if(null!==v)for(var m=this.circles,y=0,g=v;y<g.length;y+=1){var b=g[y];if(!u.circle[b]){u.circle[b]=!0;var _=3*b;if(this._circleAndRectCollide(m[_],m[_+1],m[_+2],e,t,n,r)&&(!s||s(this.circleKeys[b]))){if(o.hitTest)return a.push(!0),!0;var x=m[_],w=m[_+1],k=m[_+2];a.push({key:this.circleKeys[b],x1:x-k,y1:w-k,x2:x+k,y2:w+k})}}}},Ge.prototype._queryCellCircle=function(e,t,n,r,i,a,o,s){var u=o.circle,l=o.seenUids,c=this.boxCells[i];if(null!==c)for(var h=this.bboxes,p=0,f=c;p<f.length;p+=1){var d=f[p];if(!l.box[d]){l.box[d]=!0;var v=4*d;if(this._circleAndRectCollide(u.x,u.y,u.radius,h[v+0],h[v+1],h[v+2],h[v+3])&&(!s||s(this.boxKeys[d])))return a.push(!0),!0}}var m=this.circleCells[i];if(null!==m)for(var y=this.circles,g=0,b=m;g<b.length;g+=1){var _=b[g];if(!l.circle[_]){l.circle[_]=!0;var x=3*_;if(this._circlesCollide(y[x],y[x+1],y[x+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[_])))return a.push(!0),!0}}},Ge.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var u=this._convertToXCellCoord(e),l=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),p=u;p<=c;p++)for(var f=l;f<=h;f++){var d=this.xCellCount*f+p;if(i.call(this,e,t,n,r,d,a,o,s))return}},Ge.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Ge.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Ge.prototype._circlesCollide=function(e,t,n,r,i,a){var o=r-e,s=i-t,u=n+a;return u*u>o*o+s*s},Ge.prototype._circleAndRectCollide=function(e,t,n,r,i,a,o){var s=(a-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;var l=(o-i)/2,c=Math.abs(t-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var h=u-s,p=c-l;return h*h+p*p<=n*n};var He=e.properties.layout;function Ze(t,n,r,i,a){var o=e.create();return n?(e.scale(o,o,[1/a,1/a,1]),r||e.rotateZ(o,o,i.angle)):e.multiply(o,i.labelPlaneMatrix,t),o}function Xe(t,n,r,i,a){if(n){var o=e.clone(t);return e.scale(o,o,[a,a,1]),r||e.rotateZ(o,o,-i.angle),o}return i.glCoordMatrix}function Ye(t,n){var r=[t.x,t.y,0,1];at(r,r,n);var i=r[3];return{point:new e.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Ke(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function Je(t,n,r,i,a,o,s,u){var l=i?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(l,r.transform.zoom,He.properties[i?"text-size":"icon-size"]),h=[256/r.width*2+1,256/r.height*2+1],p=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;p.clear();for(var f=t.lineVertexArray,d=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,v=r.transform.width/r.transform.height,m=!1,y=0;y<d.length;y++){var g=d.get(y);if(g.hidden||g.writingMode===e.WritingMode.vertical&&!m)it(g.numGlyphs,p);else{m=!1;var b=[g.anchorX,g.anchorY,0,1];if(e.transformMat4(b,b,n),Ke(b,h)){var _=.5+b[3]/r.transform.cameraToCenterDistance*.5,x=e.evaluateSizeForFeature(l,c,g),w=s?x*_:x/_,k=new e.Point(g.anchorX,g.anchorY),O=Ye(k,a).point,E={},S=et(g,w,!1,u,n,a,o,t.glyphOffsetArray,f,p,O,k,E,v);m=S.useVertical,(S.notEnoughRoom||m||S.needsFlipping&&et(g,w,!0,u,n,a,o,t.glyphOffsetArray,f,p,O,k,E,v).notEnoughRoom)&&it(g.numGlyphs,p)}else it(g.numGlyphs,p)}}i?t.text.dynamicLayoutVertexBuffer.updateData(p):t.icon.dynamicLayoutVertexBuffer.updateData(p)}function $e(e,t,n,r,i,a,o,s,u,l,c,h){var p=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,v=t.getoffsetX(s.glyphStartIndex),m=t.getoffsetX(p-1),y=nt(e*v,n,r,i,a,o,s.segment,f,d,u,l,c,h);if(!y)return null;var g=nt(e*m,n,r,i,a,o,s.segment,f,d,u,l,c,h);return g?{first:y,last:g}:null}function Qe(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(t===e.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function et(t,n,r,i,a,o,s,u,l,c,h,p,f,d){var v,m=n/24,y=t.lineOffsetX*m,g=t.lineOffsetY*m;if(t.numGlyphs>1){var b=t.glyphStartIndex+t.numGlyphs,_=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=$e(m,u,y,g,r,h,p,t,l,o,f,!1);if(!w)return{notEnoughRoom:!0};var k=Ye(w.first.point,s).point,O=Ye(w.last.point,s).point;if(i&&!r){var E=Qe(t.writingMode,k,O,d);if(E)return E}v=[w.first];for(var S=t.glyphStartIndex+1;S<b-1;S++)v.push(nt(m*u.getoffsetX(S),y,g,r,h,p,t.segment,_,x,l,o,f,!1));v.push(w.last)}else{if(i&&!r){var T=Ye(p,a).point,P=t.lineStartIndex+t.segment+1,j=new e.Point(l.getx(P),l.gety(P)),C=Ye(j,a),A=C.signedDistanceFromCamera>0?C.point:tt(p,j,T,1,a),M=Qe(t.writingMode,T,A,d);if(M)return M}var I=nt(m*u.getoffsetX(t.glyphStartIndex),y,g,r,h,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,l,o,f,!1);if(!I)return{notEnoughRoom:!0};v=[I]}for(var R=0,L=v;R<L.length;R+=1){var z=L[R];e.addDynamicAttributes(c,z.point,z.angle)}return{}}function tt(e,t,n,r,i){var a=Ye(e.add(e.sub(t)._unit()),i).point,o=n.sub(a);return n.add(o._mult(r/o.mag()))}function nt(t,n,r,i,a,o,s,u,l,c,h,p,f){var d=i?t-n:t+n,v=d>0?1:-1,m=0;i&&(v*=-1,m=Math.PI),v<0&&(m+=Math.PI);for(var y=v>0?u+s:u+s+1,g=y,b=a,_=a,x=0,w=0,k=Math.abs(d);x+w<=k;){if((y+=v)<u||y>=l)return null;if(_=b,void 0===(b=p[y])){var O=new e.Point(c.getx(y),c.gety(y)),E=Ye(O,h);if(E.signedDistanceFromCamera>0)b=p[y]=E.point;else{var S=y-v;b=tt(0===x?o:new e.Point(c.getx(S),c.gety(S)),O,_,k-x+1,h)}}x+=w,w=_.dist(b)}var T=(k-x)/w,P=b.sub(_),j=P.mult(T)._add(_);return j._add(P._unit()._perp()._mult(r*v)),{point:j,angle:m+Math.atan2(b.y-_.y,b.x-_.x),tileDistance:f?{prevTileDistance:y-v===g?0:c.gettileUnitDistanceFromAnchor(y-v),lastSegmentViewportDistance:k-x}:null}}var rt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function it(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(rt,3*r)}}function at(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var ot=function(e,t,n){void 0===t&&(t=new Ge(e.width+200,e.height+200,25)),void 0===n&&(n=new Ge(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function st(e,t,n){e[t+4]=n?1:0}function ut(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}ot.prototype.placeCollisionBox=function(e,t,n,r,i){var a=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=n*a.perspectiveRatio,s=e.x1*o+a.point.x,u=e.y1*o+a.point.y,l=e.x2*o+a.point.x,c=e.y2*o+a.point.y;return!this.isInsideGrid(s,u,l,c)||!t&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},ot.prototype.approximateTileDistance=function(e,t,n,r,i){var a=i?1:r/this.pitchfactor,o=e.lastSegmentViewportDistance*n;return e.prevTileDistance+o+(a-1)*o*Math.abs(Math.sin(t))},ot.prototype.placeCollisionCircles=function(t,n,r,i,a,o,s,u,l,c,h,p,f){var d=[],v=this.projectAnchor(l,a.anchorX,a.anchorY),m=u/24,y=a.lineOffsetX*u,g=a.lineOffsetY*u,b=new e.Point(a.anchorX,a.anchorY),_=$e(m,s,y,g,!1,Ye(b,c).point,b,a,o,c,{},!0),x=!1,w=!1,k=!0,O=v.perspectiveRatio*i,E=1/(i*r),S=0,T=0;_&&(S=this.approximateTileDistance(_.first.tileDistance,_.first.angle,E,v.cameraDistance,p),T=this.approximateTileDistance(_.last.tileDistance,_.last.angle,E,v.cameraDistance,p));for(var P=0;P<t.length;P+=5){var j=t[P],C=t[P+1],A=t[P+2],M=t[P+3];if(!_||M<-S||M>T)st(t,P,!1);else{var I=this.projectPoint(l,j,C),R=A*O;if(d.length>0){var L=I.x-d[d.length-4],z=I.y-d[d.length-3];if(R*R*2>L*L+z*z&&P+8<t.length){var D=t[P+8];if(D>-S&&D<T){st(t,P,!1);continue}}}var F=P/5;d.push(I.x,I.y,R,F),st(t,P,!0);var B=I.x-R,N=I.y-R,U=I.x+R,V=I.y+R;if(k=k&&this.isOffscreen(B,N,U,V),w=w||this.isInsideGrid(B,N,U,V),!n&&this.grid.hitTestCircle(I.x,I.y,R,f)){if(!h)return{circles:[],offscreen:!1};x=!0}}}return{circles:x||!w?[]:d,offscreen:k}},ot.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,a=-1/0,o=-1/0,s=0,u=t;s<u.length;s+=1){var l=u[s],c=new e.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),n.push(c)}for(var h={},p={},f=0,d=this.grid.query(r,i,a,o).concat(this.ignoredGrid.query(r,i,a,o));f<d.length;f+=1){var v=d[f],m=v.key;if(void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]={}),!h[m.bucketInstanceId][m.featureIndex]){var y=[new e.Point(v.x1,v.y1),new e.Point(v.x2,v.y1),new e.Point(v.x2,v.y2),new e.Point(v.x1,v.y2)];e.polygonIntersectsPolygon(n,y)&&(h[m.bucketInstanceId][m.featureIndex]=!0,void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]=[]),p[m.bucketInstanceId].push(m.featureIndex))}}return p},ot.prototype.insertCollisionBox=function(e,t,n,r,i){var a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};(t?this.ignoredGrid:this.grid).insert(a,e[0],e[1],e[2],e[3])},ot.prototype.insertCollisionCircles=function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])},ot.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return at(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},ot.prototype.projectPoint=function(t,n,r){var i=[n,r,0,1];return at(i,i,t),new e.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},ot.prototype.projectAndGetPerspectiveRatio=function(t,n,r){var i=[n,r,0,1];return at(i,i,t),{point:new e.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},ot.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},ot.prototype.isInsideGrid=function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary};var lt=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};lt.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ct=function(e,t,n,r,i){this.text=new lt(e?e.text:null,t,n,i),this.icon=new lt(e?e.icon:null,t,r,i)};ct.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ht=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},pt=function(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},ft=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function dt(t,n,r,i,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,u=-(o.verticalAlign-.5)*r,l=e.evaluateRadialOffset(t,i);return new e.Point(s+l[0]*a,u+l[1]*a)}ft.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var vt=function(e,t,n,r){this.transform=e.clone(),this.collisionIndex=new ot(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new ft(n),this.prevPlacement=r,r&&(r.prevPlacement=void 0)};function mt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}vt.prototype.placeLayerTile=function(t,n,r,i){var a=n.getBucket(t),o=n.latestFeatureIndex;if(a&&o&&t.id===a.layerIds[0]){var s=n.collisionBoxArray,u=a.layers[0].layout,l=Math.pow(2,this.transform.zoom-n.tileID.overscaledZ),c=n.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(n.tileID.toUnwrapped()),p=Ze(h,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,ut(n,1,this.transform.zoom)),f=Ze(h,"map"===u.get("icon-pitch-alignment"),"map"===u.get("icon-rotation-alignment"),this.transform,ut(n,1,this.transform.zoom));this.retainedQueryData[a.bucketInstanceId]=new pt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,n.tileID),this.placeLayerBucket(a,h,p,f,l,c,r,n.holdingForFade(),i,s)}},vt.prototype.attemptAnchorPlacement=function(t,n,r,i,a,o,s,u,l,c,h,p,f,d){var v,m=dt(t,r,i,a,o),y=this.collisionIndex.placeCollisionBox(function(t,n,r,i,a,o){var s=t.x1,u=t.x2,l=t.y1,c=t.y2,h=t.anchorPointX,p=t.anchorPointY,f=new e.Point(n,r);return i&&f._rotate(a?o:-o),{x1:s+f.x,y1:l+f.y,x2:u+f.x,y2:c+f.y,anchorPointX:h,anchorPointY:p}}(n,m.x,m.y,s,u,this.transform.angle),p,l,c,h.predicate);if(y.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID]&&this.prevPlacement.placements[f.crossTileID].text&&(v=this.prevPlacement.variableOffsets[f.crossTileID].anchor),this.variableOffsets[f.crossTileID]={radialOffset:a,width:r,height:i,anchor:t,textBoxScale:o,prevAnchor:v},this.markUsedJustification(d,t,f),y},vt.prototype.placeLayerBucket=function(t,n,r,i,a,o,s,u,l,c){var h=t.layers[0].layout,p=e.evaluateSizeForZoom(t.textSizeData,this.transform.zoom,e.properties.layout.properties["text-size"]),f=h.get("text-optional"),d=h.get("icon-optional"),v=h.get("text-allow-overlap"),m=h.get("icon-allow-overlap"),y=v&&(m||!t.hasIconData()||d),g=m&&(v||!t.hasTextData()||f),b=this.collisionGroups.get(t.sourceID),_="map"===h.get("text-rotation-alignment"),x="map"===h.get("text-pitch-alignment");!t.collisionArrays&&c&&t.deserializeCollisionBoxes(c);for(var w=0;w<t.symbolInstances.length;w++){var k=t.symbolInstances.get(w);if(!l[k.crossTileID]){if(u){this.placements[k.crossTileID]=new ht(!1,!1,!1);continue}var O=!1,E=!1,S=!0,T=null,P=null,j=null,C=0,A=0,M=t.collisionArrays[w];M.textFeatureIndex&&(C=M.textFeatureIndex);var I=M.textBox;if(I)if(h.get("text-variable-anchor")){var R=I.x2-I.x1,L=I.y2-I.y1,z=k.textBoxScale,D=h.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[k.crossTileID]){var F=this.prevPlacement.variableOffsets[k.crossTileID];D[0]!==F.anchor&&(D=D.filter((function(e){return e!==F.anchor}))).unshift(F.anchor)}for(var B=0,N=D;B<N.length;B+=1){var U=N[B];if(T=this.attemptAnchorPlacement(U,I,R,L,k.radialTextOffset,z,_,x,o,n,b,v,k,t)){O=!0;break}}if(!this.variableOffsets[k.crossTileID]&&this.prevPlacement){var V=this.prevPlacement.variableOffsets[k.crossTileID];V&&(this.variableOffsets[k.crossTileID]=V,this.markUsedJustification(t,V.anchor,k))}}else O=(T=this.collisionIndex.placeCollisionBox(I,h.get("text-allow-overlap"),o,n,b.predicate)).box.length>0;S=T&&T.offscreen;var W=M.textCircles;if(W){var q=t.text.placedSymbolArray.get(k.centerJustifiedTextSymbolIndex),G=e.evaluateSizeForFeature(t.textSizeData,p,q);P=this.collisionIndex.placeCollisionCircles(W,h.get("text-allow-overlap"),a,o,q,t.lineVertexArray,t.glyphOffsetArray,G,n,r,s,x,b.predicate),O=h.get("text-allow-overlap")||P.circles.length>0,S=S&&P.offscreen}M.iconFeatureIndex&&(A=M.iconFeatureIndex),M.iconBox&&(E=(j=this.collisionIndex.placeCollisionBox(M.iconBox,h.get("icon-allow-overlap"),o,n,b.predicate)).box.length>0,S=S&&j.offscreen);var H=f||0===k.numHorizontalGlyphVertices&&0===k.numVerticalGlyphVertices,Z=d||0===k.numIconVertices;H||Z?Z?H||(E=E&&O):O=E&&O:E=O=E&&O,O&&T&&this.collisionIndex.insertCollisionBox(T.box,h.get("text-ignore-placement"),t.bucketInstanceId,C,b.ID),E&&j&&this.collisionIndex.insertCollisionBox(j.box,h.get("icon-ignore-placement"),t.bucketInstanceId,A,b.ID),O&&P&&this.collisionIndex.insertCollisionCircles(P.circles,h.get("text-ignore-placement"),t.bucketInstanceId,C,b.ID),this.placements[k.crossTileID]=new ht(O||y,E||g,S||t.justReloaded),l[k.crossTileID]=!0}}t.justReloaded=!1},vt.prototype.markUsedJustification=function(t,n,r){var i={left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex},a=i[e.getAnchorJustification(n)];for(var o in i){var s=i[o];s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=a>=0&&s!==a?0:r.crossTileID)}},vt.prototype.commit=function(e){this.commitTime=e;var t=this.prevPlacement,n=!1,r=t&&0!==this.fadeDuration?(this.commitTime-t.commitTime)/this.fadeDuration:1,i=t?t.opacities:{},a=t?t.variableOffsets:{};for(var o in this.placements){var s=this.placements[o],u=i[o];u?(this.opacities[o]=new ct(u,r,s.text,s.icon),n=n||s.text!==u.text.placed||s.icon!==u.icon.placed):(this.opacities[o]=new ct(null,r,s.text,s.icon,s.skipFade),n=n||s.text||s.icon)}for(var l in i){var c=i[l];if(!this.opacities[l]){var h=new ct(c,r,!1,!1);h.isHidden()||(this.opacities[l]=h,n=n||c.text.placed||c.icon.placed)}}for(var p in a)this.variableOffsets[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.variableOffsets[p]=a[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},vt.prototype.updateLayerOpacities=function(e,t){for(var n={},r=0,i=t;r<i.length;r+=1){var a=i[r],o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,n,a.collisionBoxArray)}},vt.prototype.updateBucketOpacities=function(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexArray.clear(),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexArray.clear();var i=t.layers[0].layout,a=new ct(null,0,!1,!1,!0),o=i.get("text-allow-overlap"),s=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),l="map"===i.get("text-rotation-alignment"),c="map"===i.get("text-pitch-alignment"),h=new ct(null,0,o&&(s||!t.hasIconData()||i.get("icon-optional")),s&&(o||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasCollisionBoxData()||t.hasCollisionCircleData())&&t.deserializeCollisionBoxes(r);for(var p=0;p<t.symbolInstances.length;p++){var f=t.symbolInstances.get(p),d=f.numHorizontalGlyphVertices,v=f.numVerticalGlyphVertices,m=f.crossTileID,y=n[m],g=this.opacities[m];y?g=a:g||(g=h,this.opacities[m]=g),n[m]=!0;var b=d>0||v>0,_=f.numIconVertices>0;if(b){for(var x=Ot(g.text),w=(d+v)/4,k=0;k<w;k++)t.text.opacityVertexArray.emplaceBack(x);var O=g.text.isHidden()?1:0;[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=O)}));var E=this.variableOffsets[f.crossTileID];E&&this.markUsedJustification(t,E.anchor,f)}if(_){for(var S=Ot(g.icon),T=0;T<f.numIconVertices/4;T++)t.icon.opacityVertexArray.emplaceBack(S);t.icon.placedSymbolArray.get(p).hidden=g.icon.isHidden()}if(t.hasCollisionBoxData()||t.hasCollisionCircleData()){var P=t.collisionArrays[p];if(P){if(P.textBox){var j=new e.Point(0,0),C=!0;if(u){var A=this.variableOffsets[m];A?(j=dt(A.anchor,A.width,A.height,A.radialOffset,A.textBoxScale),l&&j._rotate(c?this.transform.angle:-this.transform.angle)):C=!1}mt(t.collisionBox.collisionVertexArray,g.text.placed,!C,j.x,j.y)}P.iconBox&&mt(t.collisionBox.collisionVertexArray,g.icon.placed,!1);var M=P.textCircles;if(M&&t.hasCollisionCircleData())for(var I=0;I<M.length;I+=5){var R=y||0===M[I+4];mt(t.collisionCircle.collisionVertexArray,g.text.placed,R)}}}}t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasCollisionBoxData()&&t.collisionBox.collisionVertexBuffer&&t.collisionBox.collisionVertexBuffer.updateData(t.collisionBox.collisionVertexArray),t.hasCollisionCircleData()&&t.collisionCircle.collisionVertexBuffer&&t.collisionCircle.collisionVertexBuffer.updateData(t.collisionCircle.collisionVertexArray)},vt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},vt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},vt.prototype.stillRecent=function(e){return this.commitTime+this.fadeDuration>e},vt.prototype.setStale=function(){this.stale=!0};var yt=Math.pow(2,25),gt=Math.pow(2,24),bt=Math.pow(2,17),_t=Math.pow(2,16),xt=Math.pow(2,9),wt=Math.pow(2,8),kt=Math.pow(2,1);function Ot(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*yt+t*gt+n*bt+t*_t+n*xt+t*wt+n*kt+t}var Et=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};Et.prototype.continuePlacement=function(e,t,n,r,i){for(;this._currentTileIndex<e.length;){var a=e[this._currentTileIndex];if(t.placeLayerTile(r,a,n,this._seenCrossTileIDs),this._currentTileIndex++,i())return!0}};var St=function(e,t,n,r,i,a,o){this.placement=new vt(e,i,a,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};St.prototype.isDone=function(){return this._done},St.prototype.continuePlacement=function(t,n,r){for(var i=this,a=e.browser.now(),o=function(){var t=e.browser.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Et),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},St.prototype.commit=function(e){return this.placement.commit(e),this.placement};var Tt=512/e.EXTENT/2,Pt=function(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<t.length;r++){var i=t.get(r),a=i.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,e)})}};Pt.prototype.getScaledCoordinates=function(t,n){var r=n.canonical.z-this.tileID.canonical.z,i=Tt/Math.pow(2,r);return{x:Math.floor((n.canonical.x*e.EXTENT+t.anchorX)*i),y:Math.floor((n.canonical.y*e.EXTENT+t.anchorY)*i)}},Pt.prototype.findMatches=function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,t),u=0,l=o;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var jt=function(){this.maxCrossTileID=0};jt.prototype.generate=function(){return++this.maxCrossTileID};var Ct=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ct.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=e},Ct.prototype.addBucket=function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var u=o[s];u.tileID.isChildOf(e)&&u.findMatches(t.symbolInstances,e,i)}else{var l=o[e.scaledTo(Number(a)).key];l&&l.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Pt(e,t.symbolInstances,t.bucketInstanceId),!0},Ct.prototype.removeBucketCrossTileIDs=function(e,t){for(var n in t.indexedSymbolInstances)for(var r=0,i=t.indexedSymbolInstances[n];r<i.length;r+=1){var a=i[r];delete this.usedCrossTileIDs[e][a.crossTileID]}},Ct.prototype.removeStaleBuckets=function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t};var At=function(){this.layerIndexes={},this.crossTileIDs=new jt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};At.prototype.addLayer=function(e,t,n){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Ct);var i=!1,a={};r.handleWrapJump(n);for(var o=0,s=t;o<s.length;o+=1){var u=s[o],l=u.getBucket(e);l&&e.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),a[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(i=!0),i},At.prototype.pruneUnusedLayers=function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]};var Mt=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},It=e.pick(De,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Rt=e.pick(De,["setCenter","setZoom","setBearing","setPitch"]),Lt=function(t){function n(r,i){var a=this;void 0===i&&(i={}),t.call(this),this.map=r,this.dispatcher=new k((Ie||(Ie=new Me),Ie),this),this.imageManager=new p,this.imageManager.setEventedParent(this),this.glyphManager=new g(r._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new w(256,512),this.crossTileSymbolIndex=new At,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var o=this;this._rtlTextPluginCallback=n.registerForPluginAvailability((function(e){for(var t in o.dispatcher.broadcast("loadRTLTextPlugin",e.pluginURL,e.completionCallback),o.sourceCaches)o.sourceCaches[t].reload()})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=a.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var r in a._layers){var i=a._layers[r];i.source===n.id&&a._validateLayer(i)}}}}))}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.loadURL=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=e.normalizeStyleURL(t,n.accessToken);var a=this.map._transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,n){r._request=null,t?r.fire(new e.ErrorEvent(t)):n&&r._load(n,i)}))},n.prototype.loadJSON=function(t,n){var r=this;void 0===n&&(n={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,r._load(t,!1!==n.validate)}))},n.prototype._load=function(t,n){var r=this;if(!n||!Mt(this,e.validateStyle(t))){for(var i in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(i,t.sources[i],{validate:!1});t.sprite?this._spriteRequest=function(t,n,r){var i,a,o,s=e.browser.devicePixelRatio>1?"@2x":"",u=e.getJSON(n(e.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){u=null,o||(o=e,i=t,c())})),l=e.getImage(n(e.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){l=null,o||(o=e,a=t,c())}));function c(){if(o)r(o);else if(i&&a){var t=e.browser.getImageData(a),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,h=u.x,p=u.y,f=u.sdf,d=u.pixelRatio,v=new e.RGBAImage({width:l,height:c});e.RGBAImage.copy(t,v,{x:h,y:p},{x:0,y:0},{width:l,height:c}),n[s]={data:v,pixelRatio:d,sdf:f}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(t.sprite,this.map._transformRequest,(function(t,n){if(r._spriteRequest=null,t)r.fire(new e.ErrorEvent(t));else if(n)for(var i in n)r.imageManager.addImage(i,n[i]);r.imageManager.setLoaded(!0),r.fire(new e.Event("data",{dataType:"style"}))})):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=ze(this.stylesheet.layers);this._order=a.map((function(e){return e.id})),this._layers={};for(var o=0,s=a;o<s.length;o+=1){var u=s[o];(u=e.createStyleLayer(u)).setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=u}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},n.prototype._validateLayer=function(t){var n=this.sourceCaches[t.source];if(n){var r=t.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+t.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(e){for(var t=[],n=0,r=e;n<r.length;n+=1){var i=r[n],a=this._layers[i];"custom"!==a.type&&t.push(a.serialize())}return t},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var h=c[l],p=this._layers[h];p.recalculate(t),!p.isHidden(t.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,n&&this.fire(new e.Event("data",{dataType:"style"}))}},n.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},n.prototype.setState=function(t){var n=this;if(this._checkLoaded(),Mt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=ze(t.layers);var r=function(t,n){if(!t)return[{command:De.setStyle,args:[n]}];var r=[];try{if(!e.deepEqual(t.version,n.version))return[{command:De.setStyle,args:[n]}];e.deepEqual(t.center,n.center)||r.push({command:De.setCenter,args:[n.center]}),e.deepEqual(t.zoom,n.zoom)||r.push({command:De.setZoom,args:[n.zoom]}),e.deepEqual(t.bearing,n.bearing)||r.push({command:De.setBearing,args:[n.bearing]}),e.deepEqual(t.pitch,n.pitch)||r.push({command:De.setPitch,args:[n.pitch]}),e.deepEqual(t.sprite,n.sprite)||r.push({command:De.setSprite,args:[n.sprite]}),e.deepEqual(t.glyphs,n.glyphs)||r.push({command:De.setGlyphs,args:[n.glyphs]}),e.deepEqual(t.transition,n.transition)||r.push({command:De.setTransition,args:[n.transition]}),e.deepEqual(t.light,n.light)||r.push({command:De.setLight,args:[n.light]});var i={},a=[];!function(t,n,r,i){var a;for(a in n=n||{},t=t||{})t.hasOwnProperty(a)&&(n.hasOwnProperty(a)||Be(a,r,i));for(a in n)n.hasOwnProperty(a)&&(t.hasOwnProperty(a)?e.deepEqual(t[a],n[a])||("geojson"===t[a].type&&"geojson"===n[a].type&&Ue(t,n,a)?r.push({command:De.setGeoJSONSourceData,args:[a,n[a].data]}):Ne(a,n,r,i)):Fe(a,n,r))}(t.sources,n.sources,a,i);var o=[];t.layers&&t.layers.forEach((function(e){i[e.source]?r.push({command:De.removeLayer,args:[e.id]}):o.push(e)})),r=r.concat(a),function(t,n,r){n=n||[];var i,a,o,s,u,l,c,h=(t=t||[]).map(We),p=n.map(We),f=t.reduce(qe,{}),d=n.reduce(qe,{}),v=h.slice(),m=Object.create(null);for(i=0,a=0;i<h.length;i++)o=h[i],d.hasOwnProperty(o)?a++:(r.push({command:De.removeLayer,args:[o]}),v.splice(v.indexOf(o,a),1));for(i=0,a=0;i<p.length;i++)o=p[p.length-1-i],v[v.length-1-i]!==o&&(f.hasOwnProperty(o)?(r.push({command:De.removeLayer,args:[o]}),v.splice(v.lastIndexOf(o,v.length-a),1)):a++,l=v[v.length-i],r.push({command:De.addLayer,args:[d[o],l]}),v.splice(v.length-i,0,o),m[o]=!0);for(i=0;i<p.length;i++)if(s=f[o=p[i]],u=d[o],!m[o]&&!e.deepEqual(s,u))if(e.deepEqual(s.source,u.source)&&e.deepEqual(s["source-layer"],u["source-layer"])&&e.deepEqual(s.type,u.type)){for(c in Ve(s.layout,u.layout,r,o,null,De.setLayoutProperty),Ve(s.paint,u.paint,r,o,null,De.setPaintProperty),e.deepEqual(s.filter,u.filter)||r.push({command:De.setFilter,args:[o,u.filter]}),e.deepEqual(s.minzoom,u.minzoom)&&e.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:De.setLayerZoomRange,args:[o,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ve(s[c],u[c],r,o,c.slice(6),De.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:De.setLayerProperty,args:[o,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ve(s[c],u[c],r,o,c.slice(6),De.setPaintProperty):e.deepEqual(s[c],u[c])||r.push({command:De.setLayerProperty,args:[o,c,u[c]]}))}else r.push({command:De.removeLayer,args:[o]}),l=v[v.lastIndexOf(o)+1],r.push({command:De.addLayer,args:[u,l]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:De.setStyle,args:[n]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in Rt)}));if(0===r.length)return!1;var i=r.filter((function(e){return!(e.command in It)}));if(i.length>0)throw new Error("Unimplemented: "+i.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&n[e.command].apply(n,e.args)})),this.stylesheet=t,!0},n.prototype.addImage=function(t,n){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,n),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},n.prototype.getImage=function(e){return this.imageManager.getImage(e)},n.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this.fire(new e.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(t,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=this.sourceCaches[t]=new Pe(t,n,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:a.serialize(),sourceId:t}})),a.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},n.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},n.prototype.addLayer=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var a;if("custom"===t.type){if(Mt(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateStyle.layer,"layers."+i,t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}})}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a,this._removedLayers[i]&&a.source&&"custom"!==a.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},n.prototype.moveLayer=function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(e){return this._layers[e]},n.prototype.setLayerZoomRange=function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(t,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(t);if(i){if(!e.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(e.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=e.clone$1(n),this._updateLayer(i)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},n.prototype.setLayoutProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var a=this.getLayer(t);a?e.deepEqual(a.getLayoutProperty(n),r)||(a.setLayoutProperty(n,r,i),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(t,n,r,i){void 0===i&&(i={}),this._checkLoaded();var a=this.getLayer(t);a?e.deepEqual(a.getPaintProperty(n),r)||(a.setPaintProperty(n,r,i)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},n.prototype.setFeatureState=function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,a=this.sourceCaches[r],o=parseInt(t.id,10);if(void 0!==a){var s=a.getSource().type;"geojson"===s&&i?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==s||i?isNaN(o)||o<0?this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided and non-negative."))):a.setFeatureState(i,o,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(t,n){this._checkLoaded();var r=t.source,i=this.sourceCaches[r];if(void 0!==i){var a=i.getSource().type,o="vector"===a?t.sourceLayer:void 0,s=parseInt(t.id,10);"vector"!==a||o?void 0!==t.id&&isNaN(s)||s<0?this.fire(new e.ErrorEvent(new Error("The feature id parameter must be non-negative."))):n&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):i.removeFeatureState(o,s,n):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.sourceCaches[n],a=parseInt(t.id,10);if(void 0!==i)if("vector"!==i.getSource().type||r){if(!(isNaN(a)||a<0))return i.getFeatureState(r,a);this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided and non-negative.")))}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));else this.fire(new e.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},n.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;for(var s=0,u=e;s<u.length;s+=1){var l=u[s][o];if(l)for(var c=0,h=l;c<h.length;c+=1){var p=h[c];i.push(p)}}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var f=[],d=this._order.length-1;d>=0;d--){var v=this._order[d];if(n(v))for(var m=i.length-1;m>=0;m--){var y=i[m].feature;if(r[y.layer.id]<d)break;f.push(y),i.pop()}else for(var g=0,b=e;g<b.length;g+=1){var _=b[g][v];if(_)for(var x=0,w=_;x<w.length;x+=1){var k=w[x];f.push(k.feature)}}}return f},n.prototype.queryRenderedFeatures=function(t,n,r){n&&n.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",n.filter);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=n.layers;a<o.length;a+=1){var s=o[a],u=this._layers[s];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var c in this.sourceCaches)n.layers&&!i[c]||l.push(L(this.sourceCaches[c],this._layers,t,n,r));return this.placement&&l.push(function(e,t,n,r,i,a){for(var o={},s=i.queryRenderedSymbols(n),u=[],l=0,c=Object.keys(s).map(Number);l<c.length;l+=1){var h=c[l];u.push(a[h])}u.sort(z);for(var p=function(){var t=d[f],n=t.featureIndex.lookupSymbolFeatures(s[t.bucketInstanceId],t.bucketIndex,t.sourceLayerIndex,r.filter,r.layers,e);for(var i in n){var a=o[i]=o[i]||[],u=n[i];u.sort((function(e,n){var r=t.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(n.featureIndex)-i}return n.featureIndex-e.featureIndex}));for(var l=0,c=u;l<c.length;l+=1){var h=c[l];a.push(h)}}},f=0,d=u;f<d.length;f+=1)p();var v=function(n){o[n].forEach((function(r){var i=r.feature,a=e[n],o=t[a.source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var m in o)v(m);return o}(this._layers,this.sourceCaches,t,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(t,n){n&&n.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",n.filter);var r=this.sourceCaches[t];return r?function(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}(r,n):[]},n.prototype.addSourceType=function(e,t,r){return n.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(n.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(t,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in t)if(!e.deepEqual(t[a],r[a])){i=!0;break}if(i){var o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,n),this.light.updateTransitions(o)}},n.prototype._validate=function(t,n,r,i,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Mt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.styleSpec},i)))},n.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginAvailable",this._rtlTextPluginCallback),this.sourceCaches)this.sourceCaches[t].clearTiles();this.dispatcher.remove()},n.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},n.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},n.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},n.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},n.prototype._updatePlacement=function(t,n,r,i){for(var a=!1,o=!1,s={},u=0,l=this._order;u<l.length;u+=1){var c=l[u],h=this._layers[c];if("symbol"===h.type){if(!s[h.source]){var p=this.sourceCaches[h.source];s[h.source]=p.getRenderableIds(!0).map((function(e){return p.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var f=this.crossTileSymbolIndex.addLayer(h,s[h.source],t.center.lng);a=a||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var d=this._layerOrderChanged||0===r;if((d||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now()))&&(this.pauseablePlacement=new St(t,this._order,d,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,s),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),o=!0),a&&this.pauseablePlacement.placement.setStale()),o||a)for(var v=0,m=this._order;v<m.length;v+=1){var y=m[v],g=this._layers[y];"symbol"===g.type&&this.placement.updateLayerOpacities(g,s[g.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},n.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},n.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},n.prototype.getResource=function(t,n,r){return e.makeRequest(n,r)},n}(e.Evented);Lt.getSourceType=function(e){return I[e]},Lt.setSourceType=function(e,t){I[e]=t},Lt.registerForPluginAvailability=e.registerForPluginAvailability;var zt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Dt=ln("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ft=ln("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Bt=ln("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Nt=ln("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvarying vec3 v_data;void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/DEVICE_PIXEL_RATIO/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Ut=ln("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Vt=ln("#pragma mapbox: define highp float weight\nuniform highp float u_intensity;varying vec2 v_extrude;\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;const highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Wt=ln("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),qt=ln("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Gt=ln("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ht=ln("uniform highp vec4 u_color;void main() {gl_FragColor=u_color;}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Zt=ln("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),Xt=ln("#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_pos;void main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Yt=ln("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Kt=ln("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec4 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Jt=ln("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),$t=ln("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec4 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Qt=ln("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;return (data.r+data.g*256.0+data.b*256.0*256.0)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),en=ln("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),tn=ln("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),nn=ln("#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nuniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;void main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\n#define scale 0.015873016\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),rn=ln("uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec4 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float pixelRatio=u_scale.x;float tileZoomRatio=u_scale.y;float fromScale=u_scale.z;float toScale=u_scale.w;vec2 display_size_a=vec2((pattern_br_a.x-pattern_tl_a.x)/pixelRatio,(pattern_br_a.y-pattern_tl_a.y)/pixelRatio);vec2 display_size_b=vec2((pattern_br_b.x-pattern_tl_b.x)/pixelRatio,(pattern_br_b.y-pattern_tl_b.y)/pixelRatio);vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x,1.0);float x_b=mod(v_linesofar/pattern_size_b.x,1.0);float y_a=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_a.y+2.0)/2.0)/pattern_size_a.y);float y_b=0.5+(v_normal.y*clamp(v_width2.s,0.0,(pattern_size_b.y+2.0)/2.0)/pattern_size_b.y);vec2 pos_a=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,vec2(x_a,y_a));vec2 pos_b=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,vec2(x_b,y_b));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_gl_units_to_pixels;uniform mediump float u_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);}"),an=ln("uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/DEVICE_PIXEL_RATIO)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\n#define ANTIALIASING 1.0/DEVICE_PIXEL_RATIO/2.0\nattribute vec4 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_gl_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nvec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=a_pos_normal.xy;mediump vec2 normal=a_pos_normal.zw;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_gl_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),on=ln("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),sn=ln("uniform sampler2D u_texture;\n#pragma mapbox: define lowp float opacity\nvarying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;\n#pragma mapbox: define lowp float opacity\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;void main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),un=ln("#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nuniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_gl_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;void main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size[0],a_size[1],u_size_t)/256.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size[0]/256.0;} else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {size=u_size;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_gl_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=vec2(tex.x,tex.y);v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}");function ln(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:e=e.replace(n,(function(e,t,n,i,a){return r[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+n+" "+i+" "+a+";\n#else\nuniform "+n+" "+i+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+n+" "+i+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:t=t.replace(n,(function(e,t,n,i,a){var o="float"===i?"vec2":"vec4",s=a.match(/color/)?"color":o;return r[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+n+" "+o+" a_"+a+";\nvarying "+n+" "+i+" "+a+";\n#else\nuniform "+n+" "+i+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+n+" "+i+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+n+" "+i+" "+a+" = u_"+a+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+n+" "+o+" a_"+a+";\n#else\nuniform "+n+" "+i+" u_"+a+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+n+" "+i+" "+a+" = a_"+a+";\n#else\n    "+n+" "+i+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+n+" "+i+" "+a+" = unpack_mix_"+s+"(a_"+a+", a_"+a+"_t);\n#else\n    "+n+" "+i+" "+a+" = u_"+a+";\n#endif\n"}))}}var cn=Object.freeze({prelude:Dt,background:Ft,backgroundPattern:Bt,circle:Nt,clippingMask:Ut,heatmap:Vt,heatmapTexture:Wt,collisionBox:qt,collisionCircle:Gt,debug:Ht,fill:Zt,fillOutline:Xt,fillOutlinePattern:Yt,fillPattern:Kt,fillExtrusion:Jt,fillExtrusionPattern:$t,hillshadePrepare:Qt,hillshade:en,line:tn,lineGradient:nn,linePattern:rn,lineSDF:an,raster:on,symbolIcon:sn,symbolSDF:un}),hn=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};hn.prototype.bind=function(e,t,n,r,i,a,o,s){this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);var c=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||c?this.freshBind(t,n,r,i,a,o,s):(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},hn.prototype.freshBind=function(e,t,n,r,i,a,o){var s,u=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=l.currentNumAttributes||0;for(var h=u;h<s;h++)c.disableVertexAttribArray(h)}t.enableAttributes(c,e);for(var p=0,f=n;p<f.length;p+=1)f[p].enableAttributes(c,e);a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var d=0,v=n;d<v.length;d+=1){var m=v[d];m.bind(),m.setVertexAttribPointers(c,e,i)}a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),l.currentNumAttributes=u},hn.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var pn=function(t,n,r,i,a){var o=t.gl;this.program=o.createProgram();var s=r.defines().concat("#define DEVICE_PIXEL_RATIO "+e.browser.devicePixelRatio.toFixed(1));a&&s.push("#define OVERDRAW_INSPECTOR;");var u=s.concat(Dt.fragmentSource,n.fragmentSource).join("\n"),l=s.concat(Dt.vertexSource,n.vertexSource).join("\n"),c=o.createShader(o.FRAGMENT_SHADER);o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);var h=o.createShader(o.VERTEX_SHADER);o.shaderSource(h,l),o.compileShader(h),o.attachShader(this.program,h);for(var p=r.layoutAttributes||[],f=0;f<p.length;f++)o.bindAttribLocation(this.program,f,p[f].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var d={},v=0;v<this.numAttributes;v++){var m=o.getActiveAttrib(this.program,v);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var y=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),g=0;g<y;g++){var b=o.getActiveUniform(this.program,g);b&&(d[b.name]=o.getUniformLocation(this.program,b.name))}this.fixedUniforms=i(t,d),this.binderUniforms=r.getUniforms(t,d)};function fn(t,n,r){var i=1/ut(r,1,n.transform.tileZoom),a=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,n.transform.tileZoom)/a,s=o*(r.tileID.canonical.x+r.tileID.wrap*a),u=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[e.browser.devicePixelRatio,i,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[s>>16,u>>16],u_pixel_coord_lower:[65535&s,65535&u]}}pn.prototype.draw=function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v){var m,y=e.gl;for(var g in e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(a),this.fixedUniforms)this.fixedUniforms[g].set(o[g]);f&&f.setUniforms(e,this.binderUniforms,h,{zoom:p});for(var b=(m={},m[y.LINES]=2,m[y.TRIANGLES]=3,m[y.LINE_STRIP]=1,m)[t],_=0,x=c.get();_<x.length;_+=1){var w=x[_],k=w.vaos||(w.vaos={});(k[s]||(k[s]=new hn)).bind(e,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,d,v),y.drawElements(t,w.primitiveLength*b,y.UNSIGNED_SHORT,w.primitiveOffset*b*2)}};var dn=function(t,n,r,i){var a=n.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],u=e.create$1();"viewport"===a.properties.get("anchor")&&e.fromRotation(u,-n.transform.angle),e.transformMat3(s,s,u);var l=a.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:i}},vn=function(t,n,r,i,a,o,s){return e.extend(dn(t,n,r,i),fn(o,n,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},mn=function(e){return{u_matrix:e}},yn=function(t,n,r,i){return e.extend(mn(t),fn(r,n,i))},gn=function(e,t){return{u_matrix:e,u_world:t}},bn=function(t,n,r,i,a){return e.extend(yn(t,n,r,i),{u_world:a})},_n=function(e,t,n,r){var i,a,o=e.transform;if("map"===r.paint.get("circle-pitch-alignment")){var s=ut(n,1,o.zoom);i=!0,a=[s,s]}else i=!1,a=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_scale_with_map:+("map"===r.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,n,r.paint.get("circle-translate"),r.paint.get("circle-translate-anchor")),u_pitch_with_map:+i,u_extrude_scale:a}},xn=function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,n.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,n.u_overscale_factor)}},wn=function(e,t,n){var r=ut(n,1,t.zoom),i=Math.pow(2,t.zoom-n.tileID.overscaledZ),a=n.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*i),t.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:a}},kn=function(e,t){return{u_matrix:e,u_color:t}},On=function(e){return{u_matrix:e}},En=function(e,t,n,r){return{u_matrix:e,u_extrude_scale:ut(t,1,n),u_intensity:r}};function Sn(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}var Tn=function(e,t,n){var r=e.transform;return{u_matrix:Mn(e,t,n),u_ratio:1/ut(t,1,r.zoom),u_gl_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},Pn=function(t,n,r){return e.extend(Tn(t,n,r),{u_image:0})},jn=function(t,n,r,i){var a=t.transform,o=An(n,a);return{u_matrix:Mn(t,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/ut(n,1,a.zoom),u_image:0,u_scale:[e.browser.devicePixelRatio,o,i.fromScale,i.toScale],u_fade:i.t,u_gl_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Cn=function(t,n,r,i,a){var o=t.transform,s=t.lineAtlas,u=An(n,o),l="round"===r.layout.get("line-cap"),c=s.getDash(i.from,l),h=s.getDash(i.to,l),p=c.width*a.fromScale,f=h.width*a.toScale;return e.extend(Tn(t,n,r),{u_patternscale_a:[u/p,-c.height/2],u_patternscale_b:[u/f,-h.height/2],u_sdfgamma:s.width/(256*Math.min(p,f)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:h.y,u_mix:a.t})};function An(e,t){return 1/ut(e,1,t.tileZoom)}function Mn(e,t,n){return e.translatePosMatrix(t.tileID.posMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var In=function(e,t,n,r,i){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(o=i.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Rn(i.paint.get("raster-hue-rotate"))};var a,o};function Rn(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var Ln=function(e,t,n,r,i,a,o,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_gl_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},zn=function(t,n,r,i,a,o,s,u,l,c,h){var p=a.transform;return e.extend(Ln(t,n,r,i,a,o,s,u,l,c),{u_gamma_scale:i?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_is_halo:+h})},Dn=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},Fn=function(t,n,r,i,a,o){return e.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from),a=n.imageManager.getPattern(e.to),o=n.imageManager.getPixelSize(),s=o.width,u=o.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,h=c*(r.tileID.canonical.x+r.tileID.wrap*l),p=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,u],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ut(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,p>>16],u_pixel_coord_lower:[65535&h,65535&p]}}(i,o,r,a),{u_matrix:t,u_opacity:n})},Bn={fillExtrusion:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fillExtrusionPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_lightpos:new e.Uniform3f(t,n.u_lightpos),u_lightintensity:new e.Uniform1f(t,n.u_lightintensity),u_lightcolor:new e.Uniform3f(t,n.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,n.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,n.u_height_factor),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade),u_opacity:new e.Uniform1f(t,n.u_opacity)}},fill:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},fillPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},fillOutline:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world)}},fillOutlinePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_texsize:new e.Uniform2f(t,n.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},circle:function(t,n){return{u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,n.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,n.u_extrude_scale),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},collisionBox:xn,collisionCircle:xn,debug:function(t,n){return{u_color:new e.UniformColor(t,n.u_color),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},clippingMask:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmap:function(t,n){return{u_extrude_scale:new e.Uniform1f(t,n.u_extrude_scale),u_intensity:new e.Uniform1f(t,n.u_intensity),u_matrix:new e.UniformMatrix4f(t,n.u_matrix)}},heatmapTexture:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_world:new e.Uniform2f(t,n.u_world),u_image:new e.Uniform1i(t,n.u_image),u_color_ramp:new e.Uniform1i(t,n.u_color_ramp),u_opacity:new e.Uniform1f(t,n.u_opacity)}},hillshade:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_latrange:new e.Uniform2f(t,n.u_latrange),u_light:new e.Uniform2f(t,n.u_light),u_shadow:new e.UniformColor(t,n.u_shadow),u_highlight:new e.UniformColor(t,n.u_highlight),u_accent:new e.UniformColor(t,n.u_accent)}},hillshadePrepare:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_image:new e.Uniform1i(t,n.u_image),u_dimension:new e.Uniform2f(t,n.u_dimension),u_zoom:new e.Uniform1f(t,n.u_zoom),u_maxzoom:new e.Uniform1f(t,n.u_maxzoom)}},line:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels)}},lineGradient:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_image:new e.Uniform1i(t,n.u_image)}},linePattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_texsize:new e.Uniform2f(t,n.u_texsize),u_ratio:new e.Uniform1f(t,n.u_ratio),u_image:new e.Uniform1i(t,n.u_image),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_scale:new e.Uniform4f(t,n.u_scale),u_fade:new e.Uniform1f(t,n.u_fade)}},lineSDF:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_ratio:new e.Uniform1f(t,n.u_ratio),u_gl_units_to_pixels:new e.Uniform2f(t,n.u_gl_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,n.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,n.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,n.u_sdfgamma),u_image:new e.Uniform1i(t,n.u_image),u_tex_y_a:new e.Uniform1f(t,n.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,n.u_tex_y_b),u_mix:new e.Uniform1f(t,n.u_mix)}},raster:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_tl_parent:new e.Uniform2f(t,n.u_tl_parent),u_scale_parent:new e.Uniform1f(t,n.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,n.u_buffer_scale),u_fade_t:new e.Uniform1f(t,n.u_fade_t),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image0:new e.Uniform1i(t,n.u_image0),u_image1:new e.Uniform1i(t,n.u_image1),u_brightness_low:new e.Uniform1f(t,n.u_brightness_low),u_brightness_high:new e.Uniform1f(t,n.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,n.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,n.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,n.u_spin_weights)}},symbolIcon:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_gl_coord_matrix:new e.UniformMatrix4f(t,n.u_gl_coord_matrix),u_is_text:new e.Uniform1f(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture)}},symbolSDF:function(t,n){return{u_is_size_zoom_constant:new e.Uniform1i(t,n.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,n.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,n.u_size_t),u_size:new e.Uniform1f(t,n.u_size),u_camera_to_center_distance:new e.Uniform1f(t,n.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,n.u_pitch),u_rotate_symbol:new e.Uniform1i(t,n.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,n.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,n.u_fade_change),u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,n.u_label_plane_matrix),u_gl_coord_matrix:new e.UniformMatrix4f(t,n.u_gl_coord_matrix),u_is_text:new e.Uniform1f(t,n.u_is_text),u_pitch_with_map:new e.Uniform1i(t,n.u_pitch_with_map),u_texsize:new e.Uniform2f(t,n.u_texsize),u_texture:new e.Uniform1i(t,n.u_texture),u_gamma_scale:new e.Uniform1f(t,n.u_gamma_scale),u_is_halo:new e.Uniform1f(t,n.u_is_halo)}},background:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_color:new e.UniformColor(t,n.u_color)}},backgroundPattern:function(t,n){return{u_matrix:new e.UniformMatrix4f(t,n.u_matrix),u_opacity:new e.Uniform1f(t,n.u_opacity),u_image:new e.Uniform1i(t,n.u_image),u_pattern_tl_a:new e.Uniform2f(t,n.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,n.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,n.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,n.u_pattern_br_b),u_texsize:new e.Uniform2f(t,n.u_texsize),u_mix:new e.Uniform1f(t,n.u_mix),u_pattern_size_a:new e.Uniform2f(t,n.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,n.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,n.u_scale_a),u_scale_b:new e.Uniform1f(t,n.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,n.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,n.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,n.u_tile_units_to_pixels)}}};function Nn(t,n){for(var r=t.sort((function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0})),i=0;i<r.length;i++){var a={},o=r[i],s=r.slice(i+1);Un(o.tileID.wrapped(),o.tileID,s,new e.OverscaledTileID(0,o.tileID.wrap+1,0,0,0),a),o.setMask(a,n)}}function Un(t,n,r,i,a){for(var o=0;o<r.length;o++){var s=r[o];if(i.isLessThan(s.tileID))break;if(n.key===s.tileID.key)return;if(s.tileID.isChildOf(n)){for(var u=n.children(1/0),l=0;l<u.length;l++)Un(t,u[l],r.slice(o),i,a);return}}var c=n.overscaledZ-t.overscaledZ,h=new e.CanonicalTileID(c,n.canonical.x-(t.canonical.x<<c),n.canonical.y-(t.canonical.y<<c));a[h.key]=a[h.key]||h}function Vn(e,t,n,r,i){for(var a=e.context,o=a.gl,s=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),u=0;u<r.length;u++){var l=r[u],c=t.getTile(l),h=c.getBucket(n);if(h){var p=i?h.collisionCircle:h.collisionBox;p&&s.draw(a,i?o.TRIANGLES:o.LINES,ke.disabled,Oe.disabled,e.colorModeForRenderPass(),Se.disabled,wn(l.posMatrix,e.transform,c),n.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,null,e.transform.zoom,null,null,p.collisionVertexBuffer)}}}var Wn=e.identity(new Float32Array(16)),qn=e.properties.layout;function Gn(t,n,r,i,a,o){var s=e.getAnchorAlignment(t),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=e.evaluateRadialOffset(t,i);return new e.Point((u/a+c[0])*o,(l/a+c[1])*o)}function Hn(t,n,r,i,a,o,s,u,l,c){var h=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray;p.clear();for(var f=0;f<h.length;f++){var d=h.get(f),v=!d.hidden&&d.crossTileID?i[d.crossTileID]:null;if(v){var m=new e.Point(d.anchorX,d.anchorY),y=Ye(m,r?u:s),g=.5+o.cameraToCenterDistance/y.signedDistanceFromCamera*.5,b=a.evaluateSizeForFeature(t.textSizeData,c,d)*g/e.ONE_EM;r&&(b*=t.tilePixelRatio/l);for(var _=v.width,x=v.height,w=v.radialOffset,k=v.textBoxScale,O=Gn(v.anchor,_,x,w,k,b),E=r?Ye(m.add(O),s).point:y.point.add(n?O.rotate(-o.angle):O),S=0;S<d.numGlyphs;S++)e.addDynamicAttributes(p,E,0)}else it(d.numGlyphs,p)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function Zn(t,n,r,i,a,o,s,u,l,c,h,p,f){for(var d,v,m=t.context,y=m.gl,g=t.transform,b="map"===u,_="map"===l,x=b&&"point"!==r.layout.get("symbol-placement"),w=b&&!_&&!x,k=void 0!==r.layout.get("symbol-sort-key").constantOr(1),O=t.depthModeForSublayer(0,ke.ReadOnly),E=r.layout.get("text-variable-anchor"),S=[],T=0,P=i;T<P.length;T+=1){var j=P[T],C=n.getTile(j),A=C.getBucket(r);if(A){var M=a?A.text:A.icon;if(M&&M.segments.get().length){var I=M.programConfigurations.get(r.id),R=a||A.sdfIcons,L=a?A.textSizeData:A.iconSizeData;d||(d=t.useProgram(R?"symbolSDF":"symbolIcon",I),v=e.evaluateSizeForZoom(L,g.zoom,qn.properties[a?"text-size":"icon-size"])),m.activeTexture.set(y.TEXTURE0);var z=void 0,D=void 0,F=void 0;if(a)D=C.glyphAtlasTexture,F=y.LINEAR,z=C.glyphAtlasTexture.size;else{var B=1!==r.layout.get("icon-size").constantOr(0)||A.iconsNeedLinear,N=_||0!==g.pitch;D=C.imageAtlasTexture,F=R||t.options.rotating||t.options.zooming||B||N?y.LINEAR:y.NEAREST,z=C.imageAtlasTexture.size}var U=ut(C,1,t.transform.zoom),V=Ze(j.posMatrix,_,b,t.transform,U),W=Xe(j.posMatrix,_,b,t.transform,U);if(x)Je(A,j.posMatrix,t,a,V,W,_,c);else if(a&&v&&E){var q=Math.pow(2,g.zoom-C.tileID.overscaledZ);Hn(A,b,_,f,e.symbolSize,g,V,j.posMatrix,q,v)}var G=t.translatePosMatrix(j.posMatrix,C,o,s),H=x||a&&E?Wn:V,Z=t.translatePosMatrix(W,C,o,s,!0),X=R&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),Y={program:d,buffers:M,uniformValues:R?zn(L.functionType,v,w,_,t,G,H,Z,a,z,!0):Ln(L.functionType,v,w,_,t,G,H,Z,a,z),atlasTexture:D,atlasInterpolation:F,isSDF:R,hasHalo:X};if(k)for(var K=0,J=M.segments.get();K<J.length;K+=1){var $=J[K];S.push({segments:new e.SegmentVector([$]),sortKey:$.sortKey,state:Y})}else S.push({segments:M.segments,sortKey:0,state:Y})}}}k&&S.sort((function(e,t){return e.sortKey-t.sortKey}));for(var Q=0,ee=S;Q<ee.length;Q+=1){var te=ee[Q],ne=te.state;if(ne.atlasTexture.bind(ne.atlasInterpolation,y.CLAMP_TO_EDGE),ne.isSDF){var re=ne.uniformValues;ne.hasHalo&&(re.u_is_halo=1,Xn(ne.buffers,te.segments,r,t,ne.program,O,h,p,re)),re.u_is_halo=0}Xn(ne.buffers,te.segments,r,t,ne.program,O,h,p,ne.uniformValues)}}function Xn(e,t,n,r,i,a,o,s,u){var l=r.context,c=l.gl;i.draw(l,c.TRIANGLES,a,o,s,Se.disabled,u,n.id,e.layoutVertexBuffer,e.indexBuffer,t,n.paint,r.transform.zoom,e.programConfigurations.get(n.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Yn(e,t,n,r,i,a,o){var s,u,l,c,h,p=e.context.gl,f=n.paint.get("fill-pattern"),d=f&&f.constantOr(1),v=n.getCrossfadeParameters();o?(u=d&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=p.LINES):(u=d?"fillPattern":"fill",s=p.TRIANGLES);for(var m=0,y=r;m<y.length;m+=1){var g=y[m],b=t.getTile(g);if(!d||b.patternsLoaded()){var _=b.getBucket(n);if(_){var x=_.programConfigurations.get(n.id),w=e.useProgram(u,x);d&&(e.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),x.updatePatternPaintBuffers(v));var k=f.constantOr(null);if(k&&b.imageAtlas){var O=b.imageAtlas.patternPositions[k.to],E=b.imageAtlas.patternPositions[k.from];O&&E&&x.setConstantPatternPositions(O,E)}var S=e.translatePosMatrix(g.posMatrix,b,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(o){c=_.indexBuffer2,h=_.segments2;var T=[p.drawingBufferWidth,p.drawingBufferHeight];l="fillOutlinePattern"===u&&d?bn(S,e,v,b,T):gn(S,T)}else c=_.indexBuffer,h=_.segments,l=d?yn(S,e,v,b):mn(S);w.draw(e.context,s,i,e.stencilModeForClipping(g),a,Se.disabled,l,n.id,_.layoutVertexBuffer,c,h,n.paint,e.transform.zoom,x)}}}}function Kn(e,t,n,r,i,a,o){for(var s=e.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),h=n.getCrossfadeParameters(),p=n.paint.get("fill-extrusion-opacity"),f=0,d=r;f<d.length;f+=1){var v=d[f],m=t.getTile(v),y=m.getBucket(n);if(y){var g=y.programConfigurations.get(n.id),b=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",g);c&&(e.context.activeTexture.set(u.TEXTURE0),m.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),g.updatePatternPaintBuffers(h));var _=l.constantOr(null);if(_&&m.imageAtlas){var x=m.imageAtlas.patternPositions[_.to],w=m.imageAtlas.patternPositions[_.from];x&&w&&g.setConstantPatternPositions(x,w)}var k=e.translatePosMatrix(v.posMatrix,m,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),O=n.paint.get("fill-extrusion-vertical-gradient"),E=c?vn(k,e,O,p,v,h,m):dn(k,e,O,p);b.draw(s,s.gl.TRIANGLES,i,a,o,Se.backCCW,E,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,e.transform.zoom,g)}}}function Jn(e,t,n,r,i,a){var o=e.context,s=o.gl,u=t.fbo;if(u){var l=e.useProgram("hillshade");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=function(e,t,n){var r=n.paint.get("hillshade-shadow-color"),i=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color"),o=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(o-=e.transform.angle);var s=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),s),u_image:0,u_latrange:Sn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),o],u_shadow:r,u_highlight:i,u_accent:a}}(e,t,n);t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments?l.draw(o,s.TRIANGLES,r,i,a,Se.disabled,c,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments):l.draw(o,s.TRIANGLES,r,i,a,Se.disabled,c,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}function $n(t,n,r,i,a,o,s){var u=t.context,l=u.gl;if(n.dem&&n.dem.data){var c=n.dem.dim,h=n.dem.stride,p=n.dem.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(h),n.demTexture){var f=n.demTexture;f.update(p,{premultiply:!1}),f.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new e.Texture(u,p,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var d=n.fbo;if(!d){var v=new e.Texture(u,{width:c,height:c,data:null},l.RGBA);v.bind(l.LINEAR,l.CLAMP_TO_EDGE),(d=n.fbo=u.createFramebuffer(c,c)).colorAttachment.set(v.texture)}u.bindFramebuffer.set(d.framebuffer),u.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,a,o,s,Se.disabled,function(t,n){var r=t.dem.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.tileID.overscaledZ,u_maxzoom:n}}(n,i),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function Qn(t,n,r,i,a){var o=i.paint.get("raster-fade-duration");if(o>0){var s=e.browser.now(),u=(s-t.timeAdded)/o,l=n?(s-n.timeAdded)/o:-1,c=r.getSource(),h=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),p=!n||Math.abs(n.tileID.overscaledZ-h)>Math.abs(t.tileID.overscaledZ-h),f=p&&t.refreshedUponExpiration?1:e.clamp(p?u:1-l,0,1);return t.refreshedUponExpiration&&u>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}function er(t,n,r){var i=t.context,a=i.gl,o=r.posMatrix,s=t.useProgram("debug"),u=ke.disabled,l=Oe.disabled,c=t.colorModeForRenderPass(),h="$debug";s.draw(i,a.LINE_STRIP,u,l,c,Se.disabled,kn(o,e.Color.red),h,t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);for(var p=n.getTileByID(r.key).latestRawTileData,f=p&&p.byteLength||0,d=Math.floor(f/1024),v=function(e,t,n,r){r=r||1;var i,a,o,s,u,l,c,h,p=[];for(i=0,a=e.length;i<a;i++)if(u=tr[e[i]]){for(h=null,o=0,s=u[1].length;o<s;o+=2)-1===u[1][o]&&-1===u[1][o+1]?h=null:(l=t+u[1][o]*r,c=200-u[1][o+1]*r,h&&p.push(h.x,h.y,l,c),h={x:l,y:c});t+=u[0]*r}return p}(r.toString()+" "+d+"kb",50,0,5),m=new e.StructArrayLayout2i4,y=new e.StructArrayLayout2ui4,g=0;g<v.length;g+=2)m.emplaceBack(v[g],v[g+1]),y.emplaceBack(g,g+1);for(var b=i.createVertexBuffer(m,zt.members),_=i.createIndexBuffer(y),x=e.SegmentVector.simpleSegment(0,0,m.length/2,m.length/2),w=n.getTile(r).tileSize,k=e.EXTENT/(Math.pow(2,t.transform.zoom-r.overscaledZ)*w),O=[[-1,-1],[-1,1],[1,-1],[1,1]],E=0;E<O.length;E++){var S=O[E];s.draw(i,a.LINES,u,l,c,Se.disabled,kn(e.translate([],o,[k*S[0],k*S[1],0]),e.Color.white),h,b,_,x)}s.draw(i,a.LINES,u,l,c,Se.disabled,kn(o,e.Color.black),h,b,_,x)}var tr={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]},nr={symbol:function(e,t,n,r,i){if("translucent"===e.renderPass){var a=Oe.disabled,o=e.colorModeForRenderPass();0!==n.paint.get("icon-opacity").constantOr(1)&&Zn(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright"),a,o,i),0!==n.paint.get("text-opacity").constantOr(1)&&Zn(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright"),a,o,i),t.map.showCollisionBoxes&&function(e,t,n,r){Vn(e,t,n,r,!1),Vn(e,t,n,r,!0)}(e,t,n,r)}},circle:function(e,t,n,r){if("translucent"===e.renderPass){var i=n.paint.get("circle-opacity"),a=n.paint.get("circle-stroke-width"),o=n.paint.get("circle-stroke-opacity");if(0!==i.constantOr(1)||0!==a.constantOr(1)&&0!==o.constantOr(1))for(var s=e.context,u=s.gl,l=e.depthModeForSublayer(0,ke.ReadOnly),c=Oe.disabled,h=e.colorModeForRenderPass(),p=0;p<r.length;p++){var f=r[p],d=t.getTile(f),v=d.getBucket(n);if(v){var m=v.programConfigurations.get(n.id);e.useProgram("circle",m).draw(s,u.TRIANGLES,l,c,h,Se.disabled,_n(e,f,d,n),n.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,n.paint,e.transform.zoom,m)}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=t.depthModeForSublayer(0,ke.ReadOnly),u=Oe.disabled,l=new Ee([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),function e(t,n,r,i){var a=t.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n.width/4,n.height/4,0,a.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),i.colorAttachment.set(r),t.extTextureHalfFloat&&a.checkFramebufferStatus(a.FRAMEBUFFER)!==a.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,i.colorAttachment.setDirty(),e(t,n,r,i))}(e,t,a,i)}}(a,t,r),a.clear({color:e.Color.transparent});for(var c=0;c<i.length;c++){var h=i[c];if(!n.hasRenderableParent(h)){var p=n.getTile(h),f=p.getBucket(r);if(f){var d=f.programConfigurations.get(r.id),v=t.useProgram("heatmap",d),m=t.transform.zoom;v.draw(a,o.TRIANGLES,s,u,l,Se.disabled,En(h.posMatrix,p,m,r.paint.get("heatmap-intensity")),r.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,r.paint,t.transform.zoom,d)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,ke.disabled,Oe.disabled,t.colorModeForRenderPass(),Se.disabled,function(t,n,r,i){var a=e.create();e.ortho(a,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:r,u_color_ramp:i,u_opacity:n.paint.get("heatmap-opacity")}}(t,n,0,1),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,ke.ReadOnly),u=t.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),h=c.constantOr(1),p=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),d=l?"lineSDF":h?"linePattern":p?"lineGradient":"line",v=t.context,m=v.gl,y=!0;if(p){v.activeTexture.set(m.TEXTURE0);var g=r.gradientTexture;if(!r.gradient)return;g||(g=r.gradientTexture=new e.Texture(v,r.gradient,m.RGBA)),g.bind(m.LINEAR,m.CLAMP_TO_EDGE)}for(var b=0,_=i;b<_.length;b+=1){var x=_[b],w=n.getTile(x);if(!h||w.patternsLoaded()){var k=w.getBucket(r);if(k){var O=k.programConfigurations.get(r.id),E=t.context.program.get(),S=t.useProgram(d,O),T=y||S.program!==E,P=c.constantOr(null);if(P&&w.imageAtlas){var j=w.imageAtlas.patternPositions[P.to],C=w.imageAtlas.patternPositions[P.from];j&&C&&O.setConstantPatternPositions(j,C)}var A=l?Cn(t,w,r,l,f):h?jn(t,w,r,f):p?Pn(t,w,r):Tn(t,w,r);l&&(T||t.lineAtlas.dirty)?(v.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(v)):h&&(v.activeTexture.set(m.TEXTURE0),w.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),O.updatePatternPaintBuffers(f)),S.draw(v,m.TRIANGLES,s,t.stencilModeForClipping(x),u,Se.disabled,A,r.id,k.layoutVertexBuffer,k.indexBuffer,k.segments,r.paint,t.transform.zoom,O),y=!1}}}}}},fill:function(t,n,r,i){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===l){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?ke.ReadWrite:ke.ReadOnly);Yn(t,n,r,i,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,ke.ReadOnly);Yn(t,n,r,i,h,s,!0)}}},"fill-extrusion":function(e,t,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===e.renderPass){var a=new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))Kn(e,t,n,r,a,Oe.disabled,Ee.disabled),Kn(e,t,n,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();Kn(e,t,n,r,a,Oe.disabled,o)}}},hillshade:function(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var i=e.context,a=t.getSource().maxzoom,o=e.depthModeForSublayer(0,ke.ReadOnly),s=Oe.disabled,u=e.colorModeForRenderPass(),l=0,c=r;l<c.length;l+=1){var h=c[l],p=t.getTile(h);p.needsHillshadePrepare&&"offscreen"===e.renderPass?$n(e,p,n,a,o,s,u):"translucent"===e.renderPass&&Jn(e,p,n,o,s,u)}i.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity"))for(var i=e.context,a=i.gl,o=t.getSource(),s=e.useProgram("raster"),u=Oe.disabled,l=e.colorModeForRenderPass(),c=r.length&&r[0].overscaledZ,h=!e.options.moving,p=0,f=r;p<f.length;p+=1){var d=f[p],v=e.depthModeForSublayer(d.overscaledZ-c,1===n.paint.get("raster-opacity")?ke.ReadWrite:ke.ReadOnly,a.LESS),m=t.getTile(d),y=e.transform.calculatePosMatrix(d.toUnwrapped(),h);m.registerFadeDuration(n.paint.get("raster-fade-duration"));var g=t.findLoadedParent(d,0),b=Qn(m,g,t,n,e.transform),_=void 0,x=void 0,w="nearest"===n.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;i.activeTexture.set(a.TEXTURE0),m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(a.TEXTURE1),g?(g.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),_=Math.pow(2,g.tileID.overscaledZ-m.tileID.overscaledZ),x=[m.tileID.canonical.x*_%1,m.tileID.canonical.y*_%1]):m.texture.bind(w,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var k=In(y,x||[0,0],_||1,b,n);o instanceof C?s.draw(i,a.TRIANGLES,v,u,l,Se.disabled,k,n.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):m.maskedBoundsBuffer&&m.maskedIndexBuffer&&m.segments?s.draw(i,a.TRIANGLES,v,u,l,Se.disabled,k,n.id,m.maskedBoundsBuffer,m.maskedIndexBuffer,m.segments,n.paint,e.transform.zoom):s.draw(i,a.TRIANGLES,v,u,l,Se.disabled,k,n.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var a=e.context,o=a.gl,s=e.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!e.isPatternMissing(l)){var c=l||1!==r.a||1!==i?"translucent":"opaque";if(e.renderPass===c){var h=Oe.disabled,p=e.depthModeForSublayer(0,"opaque"===c?ke.ReadWrite:ke.ReadOnly),f=e.colorModeForRenderPass(),d=e.useProgram(l?"backgroundPattern":"background"),v=s.coveringTiles({tileSize:u});l&&(a.activeTexture.set(o.TEXTURE0),e.imageManager.bind(e.context));for(var m=n.getCrossfadeParameters(),y=0,g=v;y<g.length;y+=1){var b=g[y],_=e.transform.calculatePosMatrix(b.toUnwrapped()),x=l?Fn(_,i,e,l,{tileID:b,tileSize:u},m):Dn(_,i,r);d.draw(a,o.TRIANGLES,p,h,f,Se.disabled,x,n.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,n){for(var r=0;r<n.length;r++)er(e,t,n[r])},custom:function(e,t,n){var r=e.context,i=n.implementation;if("offscreen"===e.renderPass){var a=i.prerender;a&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),a.call(i,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Oe.disabled);var o="3d"===i.renderingMode?new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,ke.ReadOnly);r.setDepthMode(o),i.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},rr=function(t,n){this.context=new Te(t),this.transform=n,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new e.ProgramConfiguration,this.crossTileSymbolIndex=new At};function ir(e,t){if(e.y>t.y){var n=e;e=t,t=n}return{x0:e.x,y0:e.y,x1:t.x,y1:t.y,dx:t.x-e.x,dy:t.y-e.y}}function ar(e,t,n,r,i){var a=Math.max(n,Math.floor(t.y0)),o=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var u=e.dx/e.dy,l=t.dx/t.dy,c=e.dx>0,h=t.dx<0,p=a;p<o;p++){var f=u*Math.max(0,Math.min(e.dy,p+c-e.y0))+e.x0,d=l*Math.max(0,Math.min(t.dy,p+h-t.y0))+t.x0;i(Math.floor(d),Math.ceil(f),p)}}function or(e,t,n,r,i,a){var o,s=ir(e,t),u=ir(t,n),l=ir(n,e);s.dy>u.dy&&(o=s,s=u,u=o),s.dy>l.dy&&(o=s,s=l,l=o),u.dy>l.dy&&(o=u,u=l,l=o),s.dy&&ar(l,s,r,i,a),u.dy&&ar(l,u,r,i,a)}rr.prototype.resize=function(t,n){var r=this.context.gl;if(this.width=t*e.browser.devicePixelRatio,this.height=n*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var i=0,a=this.style._order;i<a.length;i+=1){var o=a[i];this.style._layers[o].resize()}this.depthRbo&&(r.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},rr.prototype.setup=function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,zt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,zt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(e.EXTENT,0,e.EXTENT,0),i.emplaceBack(0,e.EXTENT,0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(i,e.rasterBoundsAttributes.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(a,zt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s);var u=this.context.gl;this.stencilClearMode=new Oe({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},rr.prototype.clearStencil=function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,n.TRIANGLES,ke.disabled,this.stencilClearMode,Ee.disabled,Se.disabled,On(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},rr.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var n=this.context,r=n.gl;this.nextStencilID+t.length>256&&this.clearStencil(),n.setColorMode(Ee.disabled),n.setDepthMode(ke.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,o=t;a<o.length;a+=1){var s=o[a],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,ke.disabled,new Oe({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),Ee.disabled,Se.disabled,On(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},rr.prototype.stencilModeFor3D=function(){this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Oe({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},rr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Oe({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},rr.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Ee([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ee.unblended:Ee.alphaBlended},rr.prototype.depthModeForSublayer=function(e,t,n){if(!this.opaquePassEnabledForLayer())return ke.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ke(n||this.context.gl.LEQUAL,t,[r,r])},rr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},rr.prototype.render=function(t,n){this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var r=this.style._order,i=this.style.sourceCaches;for(var a in i){var o=i[a];o.used&&o.prepare(this.context)}var s={},u={},l={};for(var c in i){var h=i[c];s[c]=h.getVisibleCoordinates(),u[c]=s[c].slice().reverse(),l[c]=h.getVisibleCoordinates(!0).reverse()}for(var p in i){var f=i[p],d=f.getSource();if("raster"===d.type||"raster-dem"===d.type){for(var v=[],m=0,y=s[p];m<y.length;m+=1){var g=y[m];v.push(f.getTile(g))}Nn(v,this.context)}}this.opaquePassCutoff=1/0;for(var b=0;b<r.length;b++){var _=r[b];if(this.style._layers[_].is3D()){this.opaquePassCutoff=b;break}}this.renderPass="offscreen",this.depthRboNeedsClear=!0;for(var x=0,w=r;x<w.length;x+=1){var k=w[x],O=this.style._layers[k];if(O.hasOffscreenPass()&&!O.isHidden(this.transform.zoom)){var E=u[O.source];("custom"===O.type||E.length)&&this.renderLayer(this,i[O.source],O,E)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){var S=this.style._layers[r[this.currentLayer]],T=i[S.source],P=s[S.source];this._renderTileClippingMasks(S,P),this.renderLayer(this,T,S,P)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){var j=this.style._layers[r[this.currentLayer]],C=i[j.source],A=("symbol"===j.type?l:u)[j.source];this._renderTileClippingMasks(j,s[j.source]),this.renderLayer(this,C,j,A)}if(this.options.showTileBoundaries)for(var M in i){nr.debug(this,i[M],s[M]);break}this.setCustomLayerDefaults()},rr.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},rr.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,nr[n.type](e,t,n,r,this.style.placement.variableOffsets))},rr.prototype.translatePosMatrix=function(t,n,r,i,a){if(!r[0]&&!r[1])return t;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),u=Math.cos(o);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[a?r[0]:ut(n,r[0],this.transform.zoom),a?r[1]:ut(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,l),c},rr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},rr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},rr.prototype.isPatternMissing=function(e){if(!e)return!1;var t=this.imageManager.getPattern(e.from),n=this.imageManager.getPattern(e.to);return!t||!n},rr.prototype.useProgram=function(e,t){void 0===t&&(t=this.emptyProgramConfiguration),this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new pn(this.context,cn[e],t,Bn[e],this._showOverdrawInspector)),this.cache[n]},rr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},rr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)};var sr=function(t,n,r){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===r||r,this._minZoom=t||0,this._maxZoom=n||22,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},ur={minZoom:{configurable:!0},maxZoom:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerPoint:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};sr.prototype.clone=function(){var e=new sr(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},ur.minZoom.get=function(){return this._minZoom},ur.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},ur.maxZoom.get=function(){return this._maxZoom},ur.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},ur.renderWorldCopies.get=function(){return this._renderWorldCopies},ur.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},ur.worldSize.get=function(){return this.tileSize*this.scale},ur.centerPoint.get=function(){return this.size._div(2)},ur.size.get=function(){return new e.Point(this.width,this.height)},ur.bearing.get=function(){return-this.angle/Math.PI*180},ur.bearing.set=function(t){var n=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ur.pitch.get=function(){return this._pitch/Math.PI*180},ur.pitch.set=function(t){var n=e.clamp(t,0,60)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},ur.fov.get=function(){return this._fov/Math.PI*180},ur.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},ur.zoom.get=function(){return this._zoom},ur.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},ur.center.get=function(){return this._center},ur.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},sr.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},sr.prototype.getVisibleUnwrappedCoordinates=function(t){var n=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),u=Math.floor(Math.max(r.x,i.x,a.x,o.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new e.UnwrappedTileID(l,t));return n},sr.prototype.coveringTiles=function(t){var n=this.coveringZoomLevel(t),r=n;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);var i=e.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,n),o=new e.Point(a*i.x-.5,a*i.y-.5);return function(t,n,r,i){void 0===i&&(i=!0);var a=1<<t,o={};function s(n,s,u){var l,c,h,p;if(u>=0&&u<=a)for(l=n;l<s;l++)c=Math.floor(l/a),h=(l%a+a)%a,0!==c&&!0!==i||(p=new e.OverscaledTileID(r,c,t,h,u),o[p.key]=p)}var u=n.map((function(t){return new e.Point(t.x,t.y)._mult(a)}));return or(u[0],u[1],u[2],0,a,s),or(u[2],u[3],u[0],0,a,s),Object.keys(o).map((function(e){return o[e]}))}(n,[this.pointCoordinate(new e.Point(0,0)),this.pointCoordinate(new e.Point(this.width,0)),this.pointCoordinate(new e.Point(this.width,this.height)),this.pointCoordinate(new e.Point(0,this.height))],t.reparseOverscaled?r:n,this._renderWorldCopies).sort((function(e,t){return o.dist(e.canonical)-o.dist(t.canonical)}))},sr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},ur.unmodified.get=function(){return this._unmodified},sr.prototype.zoomScale=function(e){return Math.pow(2,e)},sr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},sr.prototype.project=function(t){var n=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(n)*this.worldSize)},sr.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},ur.point.get=function(){return this.project(this.center)},sr.prototype.setLocationAtPoint=function(t,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(t),o=new e.MercatorCoordinate(a.x-(r.x-i.x),a.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},sr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},sr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},sr.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},sr.prototype.coordinateLocation=function(e){return e.toLngLat()},sr.prototype.pointCoordinate=function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(n,n,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],o=n[0]/i,s=r[0]/a,u=n[1]/i,l=r[1]/a,c=n[2]/i,h=r[2]/a,p=c===h?0:(0-c)/(h-c);return new e.MercatorCoordinate(e.number(o,s,p)/this.worldSize,e.number(u,l,p)/this.worldSize)},sr.prototype.coordinatePoint=function(t){var n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix),new e.Point(n[0]/n[3],n[1]/n[3])},sr.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},sr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},sr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},sr.prototype.calculatePosMatrix=function(t,n){void 0===n&&(n=!1);var r=t.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var a=t.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*t.wrap,u=e.identity(new Float64Array(16));return e.translate(u,u,[s*o,a.y*o,0]),e.scale(u,u,[o/e.EXTENT,o/e.EXTENT,1]),e.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},sr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},sr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,n,r,i,a=-90,o=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var h=this.latRange;a=e.mercatorYfromLat(h[1])*this.worldSize,t=(o=e.mercatorYfromLat(h[0])*this.worldSize)-a<l.y?l.y/(o-a):0}if(this.lngRange){var p=this.lngRange;s=e.mercatorXfromLng(p[0])*this.worldSize,n=(u=e.mercatorXfromLng(p[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,d=Math.max(n||0,t||0);if(d)return this.center=this.unproject(new e.Point(n?(u+s)/2:f.x,t?(o+a)/2:f.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var v=f.y,m=l.y/2;v-m<a&&(i=a+m),v+m>o&&(i=o-m)}if(this.lngRange){var y=f.x,g=l.x/2;y-g<s&&(r=s+g),y+g>u&&(r=u-g)}void 0===r&&void 0===i||(this.center=this.unproject(new e.Point(void 0!==r?r:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},sr.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,n=Math.PI/2+this._pitch,r=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-n-t),i=this.point,a=i.x,o=i.y,s=1.01*(Math.cos(Math.PI/2-this._pitch)*r+this.cameraToCenterDistance),u=new Float64Array(16);e.perspective(u,this._fov,this.width/this.height,1,s),e.scale(u,u,[1,-1,1]),e.translate(u,u,[0,0,-this.cameraToCenterDistance]),e.rotateX(u,u,this._pitch),e.rotateZ(u,u,this.angle),e.translate(u,u,[-a,-o,0]),this.mercatorMatrix=e.scale([],u,[this.worldSize,this.worldSize,this.worldSize]),e.scale(u,u,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=u;var l=this.width%2/2,c=this.height%2/2,h=Math.cos(this.angle),p=Math.sin(this.angle),f=a-Math.round(a)+h*l+p*c,d=o-Math.round(o)+h*c+p*l,v=new Float64Array(u);if(e.translate(v,v,[f>.5?f-1:f,d>.5?d-1:d,0]),this.alignedProjMatrix=v,u=e.create(),e.scale(u,u,[this.width/2,-this.height/2,1]),e.translate(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=e.create(),e.scale(u,u,[1,-1,1]),e.translate(u,u,[-1,-1,0]),e.scale(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(u=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}},sr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),n=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},sr.prototype.getCameraPoint=function(){var t=this._pitch,n=Math.tan(t)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,n))},sr.prototype.getCameraQueryGeometry=function(t){var n=this.getCameraPoint();if(1===t.length)return[t[0],n];for(var r=n.x,i=n.y,a=n.x,o=n.y,s=0,u=t;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}return[new e.Point(r,i),new e.Point(a,i),new e.Point(a,o),new e.Point(r,o),new e.Point(r,i)]},Object.defineProperties(sr.prototype,ur);var lr=function(){var t,n,r,i;e.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=(t=this._updateHashUnthrottled.bind(this),n=!1,r=0,i=function(){r=0,n&&(t(),r=setTimeout(i,300),n=!1)},function(){return n=!0,r||i(),r})};lr.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},lr.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},lr.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(t.lng*i)/i,o=Math.round(t.lat*i)/i,s=this._map.getBearing(),u=this._map.getPitch(),l="";return l+=e?"#/"+a+"/"+o+"/"+n:"#"+n+"/"+o+"/"+a,(s||u)&&(l+="/"+Math.round(10*s)/10),u&&(l+="/"+Math.round(u)),l},lr.prototype._onHashChange=function(){var t=e.window.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},lr.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",t)}catch(e){}};var cr=function(t){function r(r,i,a,o){void 0===o&&(o={});var s=n.mousePos(i.getCanvasContainer(),a),u=i.unproject(s);t.call(this,r,e.extend({point:s,lngLat:u,originalEvent:a},o)),this._defaultPrevented=!1,this.target=i}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),hr=function(t){function r(r,i,a){var o=n.touchPos(i.getCanvasContainer(),a),s=o.map((function(e){return i.unproject(e)})),u=o.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0)),l=i.unproject(u);t.call(this,r,{points:o,point:u,lngLats:s,lngLat:l,originalEvent:a}),this._defaultPrevented=!1}t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(e.Event),pr=function(e){function t(t,n,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,n),t}(e.Event),fr=function(t){this._map=t,this._el=t.getCanvasContainer(),this._delta=0,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};fr.prototype.isEnabled=function(){return!!this._enabled},fr.prototype.isActive=function(){return!!this._active},fr.prototype.isZooming=function(){return!!this._zooming},fr.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},fr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},fr.prototype.onWheel=function(t){if(this.isEnabled()){var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this.isActive()||this._start(t)),t.preventDefault()}},fr.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},fr.prototype._start=function(t){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this._zooming=!0,this._map.fire(new e.Event("movestart",{originalEvent:t})),this._map.fire(new e.Event("zoomstart",{originalEvent:t})),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},fr.prototype._onScrollFrame=function(){var t=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var a="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(a*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),h=u(c);n.zoom=e.number(s,o,h),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=o,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new e.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new e.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._map.fire(new e.Event("zoomend",{originalEvent:t._lastWheelEvent})),t._map.fire(new e.Event("moveend",{originalEvent:t._lastWheelEvent})),delete t._targetZoom}),200))}},fr.prototype._smoothOutEasing=function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.browser.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:n},n};var dr=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=n.clickTolerance||1,e.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};dr.prototype.isEnabled=function(){return!!this._enabled},dr.prototype.isActive=function(){return!!this._active},dr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},dr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},dr.prototype.onMouseDown=function(t){this.isEnabled()&&t.shiftKey&&0===t.button&&(e.window.document.addEventListener("mousemove",this._onMouseMove,!1),e.window.document.addEventListener("keydown",this._onKeyDown,!1),e.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,t),this._active=!0)},dr.prototype._onMouseMove=function(e){var t=n.mousePos(this._el,e);if(!(this._lastPos.equals(t)||!this._box&&t.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=t,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(r.x,t.x),a=Math.max(r.x,t.x),o=Math.min(r.y,t.y),s=Math.max(r.y,t.y);n.setTransform(this._box,"translate("+i+"px,"+o+"px)"),this._box.style.width=a-i+"px",this._box.style.height=s-o+"px"}},dr.prototype._onMouseUp=function(t){if(0===t.button){var r=this._startPos,i=n.mousePos(this._el,t);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",t):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new e.Event("boxzoomend",{originalEvent:t}))}},dr.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},dr.prototype._finish=function(){this._active=!1,e.window.document.removeEventListener("mousemove",this._onMouseMove,!1),e.window.document.removeEventListener("keydown",this._onKeyDown,!1),e.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},dr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))};var vr=e.bezier(0,0,.25,1),mr=function(t,n){this._map=t,this._el=n.element||t.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,e.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};mr.prototype.isEnabled=function(){return"disabled"!==this._state},mr.prototype.isActive=function(){return"active"===this._state},mr.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},mr.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},mr.prototype.onMouseDown=function(t){if("enabled"===this._state){if("right"===this._button){if(this._eventButton=n.mouseButton(t),this._eventButton!==(t.ctrlKey?0:2))return}else{if(t.ctrlKey||0!==n.mouseButton(t))return;this._eventButton=0}n.disableDrag(),e.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),e.window.document.addEventListener("mouseup",this._onMouseUp),e.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[e.browser.now(),this._map.getBearing()]],this._startPos=this._lastPos=n.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault()}},mr.prototype._onMouseMove=function(e){var t=n.mousePos(this._el,e);this._lastPos.equals(t)||(this._lastMoveEvent=e,this._lastPos=t,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},mr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t){var n=this._map.transform,r=this._startPos,i=this._lastPos,a=.8*(r.x-i.x),o=-.5*(r.y-i.y),s=n.bearing-a,u=n.pitch-o,l=this._inertia,c=l[l.length-1];this._drainInertiaBuffer(),l.push([e.browser.now(),this._map._normalizeBearing(s,c[1])]),n.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),n.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._startPos=this._lastPos}},mr.prototype._onMouseUp=function(e){if(n.mouseButton(e)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(e);break;case"pending":this._state="enabled",this._unbind()}},mr.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",e),this._pitchWithRotate&&this._fireEvent("pitchend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},mr.prototype._unbind=function(){e.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),e.window.document.removeEventListener("mouseup",this._onMouseUp),e.window.removeEventListener("blur",this._onBlur),n.enableDrag()},mr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._lastPos},mr.prototype._inertialRotate=function(e){var t=this;this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,a=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):t._fireEvent("moveend",e),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)a();else{var o=i[0],s=i[i.length-1],u=i[i.length-2],l=n._normalizeBearing(r,u[1]),c=s[1]-o[1],h=c<0?-1:1,p=(s[0]-o[0])/1e3;if(0!==c&&0!==p){var f=Math.abs(c*(.25/p));f>180&&(f=180);var d=f/180;l+=h*f*(d/2),Math.abs(n._normalizeBearing(l,0))<this._bearingSnap&&(l=n._normalizeBearing(0,l)),n.rotateTo(l,{duration:1e3*d,easing:vr,noMoveStart:!0},{originalEvent:e})}else a()}},mr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},mr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>0&&n-t[0][0]>160;)t.shift()};var yr=e.bezier(0,0,.3,1),gr=function(t,n){this._map=t,this._el=t.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,e.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};gr.prototype.isEnabled=function(){return"disabled"!==this._state},gr.prototype.isActive=function(){return"active"===this._state},gr.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled")},gr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},gr.prototype.onMouseDown=function(t){"enabled"===this._state&&(t.ctrlKey||0!==n.mouseButton(t)||(n.addEventListener(e.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(e.window.document,"mouseup",this._onMouseUp),this._start(t)))},gr.prototype.onTouchStart=function(t){"enabled"===this._state&&(t.touches.length>1||(n.addEventListener(e.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(e.window.document,"touchend",this._onTouchEnd),this._start(t)))},gr.prototype._start=function(t){e.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._lastPos=n.mousePos(this._el,t),this._inertia=[[e.browser.now(),this._startPos]]},gr.prototype._onMove=function(t){t.preventDefault();var r=n.mousePos(this._el,t);this._lastPos.equals(r)||"pending"===this._state&&r.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=r,this._drainInertiaBuffer(),this._inertia.push([e.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},gr.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var t=this._map.transform;t.setLocationAtPoint(t.pointLocation(this._startPos),this._lastPos),this._fireEvent("drag",e),this._fireEvent("move",e),this._startPos=this._lastPos,delete this._lastMoveEvent}},gr.prototype._onMouseUp=function(e){if(0===n.mouseButton(e))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onTouchEnd=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(e);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._onBlur=function(e){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("dragend",e),this._fireEvent("moveend",e);break;case"pending":this._state="enabled",this._unbind()}},gr.prototype._unbind=function(){n.removeEventListener(e.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(e.window.document,"touchend",this._onTouchEnd),n.removeEventListener(e.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(e.window.document,"mouseup",this._onMouseUp),n.removeEventListener(e.window,"blur",this._onBlur)},gr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._mouseDownPos,delete this._lastPos},gr.prototype._inertialPan=function(e){this._fireEvent("dragend",e),this._drainInertiaBuffer();var t=this._inertia;if(t.length<2)this._fireEvent("moveend",e);else{var n=t[t.length-1],r=t[0],i=n[1].sub(r[1]),a=(n[0]-r[0])/1e3;if(0===a||n[1].equals(r[1]))this._fireEvent("moveend",e);else{var o=i.mult(.3/a),s=o.mag();s>1400&&(s=1400,o._unit()._mult(s));var u=s/750,l=o.mult(-u/2);this._map.panBy(l,{duration:1e3*u,easing:yr,noMoveStart:!0},{originalEvent:e})}}},gr.prototype._fireEvent=function(t,n){return this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))},gr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>0&&n-t[0][0]>160;)t.shift()};var br=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onKeyDown"],this)};function _r(e){return e*(2-e)}br.prototype.isEnabled=function(){return!!this._enabled},br.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},br.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},br.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,r=0,i=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?r=-1:(a=1,e.preventDefault());break;default:return}var o=this._map,s=o.getZoom(),u={duration:300,delayEndEvents:500,easing:_r,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+15*n,pitch:o.getPitch()+10*r,offset:[100*-i,100*-a],center:o.getCenter()};o.easeTo(u,{originalEvent:e})}};var xr=function(t){this._map=t,e.bindAll(["_onDblClick","_onZoomEnd"],this)};xr.prototype.isEnabled=function(){return!!this._enabled},xr.prototype.isActive=function(){return!!this._active},xr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},xr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xr.prototype.onTouchStart=function(e){var t=this;this.isEnabled()&&(e.points.length>1||(this._tapped?(clearTimeout(this._tapped),this._tapped=null,this._zoom(e)):this._tapped=setTimeout((function(){t._tapped=null}),300)))},xr.prototype.onDblClick=function(e){this.isEnabled()&&(e.originalEvent.preventDefault(),this._zoom(e))},xr.prototype._zoom=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},xr.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var wr=e.bezier(0,0,.15,1),kr=function(t){this._map=t,this._el=t.getCanvasContainer(),e.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};kr.prototype.isEnabled=function(){return!!this._enabled},kr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)},kr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},kr.prototype.disableRotation=function(){this._rotationDisabled=!0},kr.prototype.enableRotation=function(){this._rotationDisabled=!1},kr.prototype.onStart=function(t){if(this.isEnabled()&&2===t.touches.length){var r=n.mousePos(this._el,t.touches[0]),i=n.mousePos(this._el,t.touches[1]),a=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(a),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(e.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(e.window.document,"touchend",this._onEnd)}},kr.prototype._getTouchEventData=function(e){var t=n.mousePos(this._el,e.touches[0]),r=n.mousePos(this._el,e.touches[1]),i=t.sub(r);return{vec:i,center:t.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},kr.prototype._onMove=function(t){if(2===t.touches.length){var n=this._getTouchEventData(t),r=n.vec,i=n.scale,a=n.bearing;if(!this._gestureIntent){var o=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(a)>10?this._gestureIntent="rotate":o&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new e.Event(this._gestureIntent+"start",{originalEvent:t})),this._map.fire(new e.Event("movestart",{originalEvent:t})),this._startVec=r)}this._lastTouchEvent=t,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),t.preventDefault()}},kr.prototype._onTouchFrame=function(){this._frameId=null;var t=this._gestureIntent;if(t){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,a=r.bearing,o=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===t&&(n.bearing=this._startBearing+a),n.zoom=n.scaleZoom(this._startScale*o),n.setLocationAtPoint(this._startAround,u),this._map.fire(new e.Event(t,{originalEvent:this._lastTouchEvent})),this._map.fire(new e.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([e.browser.now(),o,i])}},kr.prototype._onEnd=function(t){n.removeEventListener(e.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(e.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new e.Event(r+"end",{originalEvent:t})),this._drainInertiaBuffer();var a=this._inertia,o=this._map;if(a.length<2)o.snapToNorth({},{originalEvent:t});else{var s=a[a.length-1],u=a[0],l=o.transform.scaleZoom(i*s[1]),c=o.transform.scaleZoom(i*u[1]),h=l-c,p=(s[0]-u[0])/1e3,f=s[2];if(0!==p&&l!==c){var d=.15*h/p;Math.abs(d)>2.5&&(d=d>0?2.5:-2.5);var v=1e3*Math.abs(d/(12*.15)),m=l+d*v/2e3;m<0&&(m=0),o.easeTo({zoom:m,duration:v,easing:wr,around:this._aroundCenter?o.getCenter():o.unproject(f),noMoveStart:!0},{originalEvent:t})}else o.snapToNorth({},{originalEvent:t})}}},kr.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,n=e.browser.now();t.length>2&&n-t[0][0]>160;)t.shift()};var Or={scrollZoom:fr,boxZoom:dr,dragRotate:mr,dragPan:gr,keyboard:br,doubleClickZoom:xr,touchZoomRotate:kr},Er=function(t){function n(n,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},n.prototype.panBy=function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)},n.prototype.panTo=function(t,n,r){return this.easeTo(e.extend({center:t},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},n.prototype.zoomTo=function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)},n.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},n.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},n.prototype.rotateTo=function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)},n.prototype.resetNorth=function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this},n.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},n.prototype.cameraForBounds=function(t,n){return t=e.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(t,n,r,i){if("number"==typeof(i=e.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}if(e.deepEqual(Object.keys(i.padding).sort((function(e,t){return e<t?-1:e>t?1:0})),["bottom","left","right","top"])){var o=this.transform,s=o.project(e.LngLat.convert(t)),u=o.project(e.LngLat.convert(n)),l=s.rotate(-r*Math.PI/180),c=u.rotate(-r*Math.PI/180),h=new e.Point(Math.max(l.x,c.x),Math.max(l.y,c.y)),p=new e.Point(Math.min(l.x,c.x),Math.min(l.y,c.y)),f=h.sub(p),d=(o.width-i.padding.left-i.padding.right)/f.x,v=(o.height-i.padding.top-i.padding.bottom)/f.y;if(!(v<0||d<0)){var m=Math.min(o.scaleZoom(o.scale*Math.min(d,v)),i.maxZoom),y=e.Point.convert(i.offset),g=(i.padding.left-i.padding.right)/2,b=(i.padding.top-i.padding.bottom)/2,_=new e.Point(y.x+g,y.y+b).mult(o.scale/o.zoomScale(m));return{center:o.unproject(s.add(u).div(2).sub(_)),zoom:m,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}else e.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'")},n.prototype.fitBounds=function(e,t,n){return this._fitInternal(this.cameraForBounds(e,t),t,n)},n.prototype.fitScreenCoordinates=function(t,n,r,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(n)),r,i),i,a)},n.prototype._fitInternal=function(t,n,r){return t?(n=e.extend(t,n)).linear?this.easeTo(n,r):this.flyTo(n,r):this},n.prototype.jumpTo=function(t,n){this.stop();var r=this.transform,i=!1,a=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n))},n.prototype.easeTo=function(t,n){var r=this;this.stop(),!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate&&(t.duration=0);var i=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),u="zoom"in t?+t.zoom:a,l="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:s,h=i.centerPoint.add(e.Point.convert(t.offset)),p=i.pointLocation(h),f=e.LngLat.convert(t.center||p);this._normalizeCenter(f);var d,v,m=i.project(p),y=i.project(f).sub(m),g=i.zoomScale(u-a);return t.around&&(d=e.LngLat.convert(t.around),v=i.locationPoint(d)),this._zooming=u!==a,this._rotating=o!==l,this._pitching=c!==s,this._prepareEase(n,t.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(t){if(r._zooming&&(i.zoom=e.number(a,u,t)),r._rotating&&(i.bearing=e.number(o,l,t)),r._pitching&&(i.pitch=e.number(s,c,t)),d)i.setLocationAtPoint(d,v);else{var p=i.zoomScale(i.zoom-a),f=u>a?Math.min(2,g):Math.max(.5,g),b=Math.pow(f,1-t),_=i.unproject(m.add(y.mult(t*b)).mult(p));i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,h)}r._fireMoveEvents(n)}),(function(){t.delayEndEvents?r._easeEndTimeoutID=setTimeout((function(){return r._afterEase(n)}),t.delayEndEvents):r._afterEase(n)}),t),this},n.prototype._prepareEase=function(t,n){this._moving=!0,n||this.fire(new e.Event("movestart",t)),this._zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&this.fire(new e.Event("pitchstart",t))},n.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},n.prototype._afterEase=function(t){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,n&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),i&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))},n.prototype.flyTo=function(t,n){var r=this;this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var i=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),u="zoom"in t?e.clamp(+t.zoom,i.minZoom,i.maxZoom):a,l="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:s,h=i.zoomScale(u-a),p=i.centerPoint.add(e.Point.convert(t.offset)),f=i.pointLocation(p),d=e.LngLat.convert(t.center||f);this._normalizeCenter(d);var v=i.project(f),m=i.project(d).sub(v),y=t.curve,g=Math.max(i.width,i.height),b=g/h,_=m.mag();if("minZoom"in t){var x=e.clamp(Math.min(t.minZoom,a,u),i.minZoom,i.maxZoom),w=g/i.zoomScale(x-a);y=Math.sqrt(w/_*2)}var k=y*y;function O(e){var t=(b*b-g*g+(e?-1:1)*k*k*_*_)/(2*(e?b:g)*k*_);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function S(e){return(Math.exp(e)+Math.exp(-e))/2}var T=O(0),P=function(e){return S(T)/S(T+y*e)},j=function(e){return g*((S(T)*(E(t=T+y*e)/S(t))-E(T))/k)/_;var t},C=(O(1)-T)/y;if(Math.abs(_)<1e-6||!isFinite(C)){if(Math.abs(g-b)<1e-6)return this.easeTo(t,n);var A=b<g?-1:1;C=Math.abs(Math.log(b/g))/y,j=function(){return 0},P=function(e){return Math.exp(A*y*e)}}if("duration"in t)t.duration=+t.duration;else{var M="screenSpeed"in t?+t.screenSpeed/y:+t.speed;t.duration=1e3*C/M}return t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==l,this._pitching=c!==s,this._prepareEase(n,!1),this._ease((function(t){var h=t*C,f=1/P(h);i.zoom=1===t?u:a+i.scaleZoom(f),r._rotating&&(i.bearing=e.number(o,l,t)),r._pitching&&(i.pitch=e.number(s,c,t));var y=1===t?d:i.unproject(v.add(m.mult(j(h))).mult(f));i.setLocationAtPoint(i.renderWorldCopies?y.wrap():y,p),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),t),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var e=this._onEaseEnd;delete this._onEaseEnd,e.call(this)}return this},n.prototype._ease=function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t},n.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},n}(e.Evented),Sr=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Sr.prototype.getDefaultPosition=function(){return"bottom-right"},Sr.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Sr.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},Sr.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<n.length-1?"&":"")),e}),"?");t.href=e.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener"}},Sr.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},Sr.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),(e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).length?(this._innerContainer.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},Sr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Tr=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Tr.prototype.onAdd=function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),t.setAttribute("rel","noopener"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Tr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Tr.prototype.getDefaultPosition=function(){return"bottom-left"},Tr.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},Tr.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},Tr.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var Pr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Pr.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},Pr.prototype.remove=function(e){for(var t=this._currentlyRunning,n=0,r=t?this._queue.concat(t):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===e)return void(i.cancelled=!0)}},Pr.prototype.run=function(){var e=this._currentlyRunning=this._queue;this._queue=[];for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Pr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var jr=e.window.HTMLImageElement,Cr=e.window.HTMLElement,Ar={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Mr=function(r){function i(t){var i=this;if(null!=(t=e.extend({},Ar,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var a=new sr(t.minZoom,t.maxZoom,t.renderWorldCopies);r.call(this,a,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new Pr,this._controls=[],this._mapId=e.uniqueId();var o=t.transformRequest;if(this._transformRequest=o?function(e,t){return o(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Cr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),function(e,t){var r=e.getCanvasContainer(),i=null,a=!1,o=null;for(var s in Or)e[s]=new Or[s](e,t),t.interactive&&t[s]&&e[s].enable(t[s]);n.addEventListener(r,"mouseout",(function(t){e.fire(new cr("mouseout",e,t))})),n.addEventListener(r,"mousedown",(function(i){a=!0,o=n.mousePos(r,i);var s=new cr("mousedown",e,i);e.fire(s),s.defaultPrevented||(t.interactive&&!e.doubleClickZoom.isActive()&&e.stop(),e.boxZoom.onMouseDown(i),e.boxZoom.isActive()||e.dragPan.isActive()||e.dragRotate.onMouseDown(i),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onMouseDown(i))})),n.addEventListener(r,"mouseup",(function(t){var n=e.dragRotate.isActive();i&&!n&&e.fire(new cr("contextmenu",e,i)),i=null,a=!1,e.fire(new cr("mouseup",e,t))})),n.addEventListener(r,"mousemove",(function(t){if(!e.dragPan.isActive()&&!e.dragRotate.isActive()){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new cr("mousemove",e,t))}})),n.addEventListener(r,"mouseover",(function(t){for(var n=t.target;n&&n!==r;)n=n.parentNode;n===r&&e.fire(new cr("mouseover",e,t))})),n.addEventListener(r,"touchstart",(function(n){var r=new hr("touchstart",e,n);e.fire(r),r.defaultPrevented||(t.interactive&&e.stop(),e.boxZoom.isActive()||e.dragRotate.isActive()||e.dragPan.onTouchStart(n),e.touchZoomRotate.onStart(n),e.doubleClickZoom.onTouchStart(r))}),{passive:!1}),n.addEventListener(r,"touchmove",(function(t){e.fire(new hr("touchmove",e,t))}),{passive:!1}),n.addEventListener(r,"touchend",(function(t){e.fire(new hr("touchend",e,t))})),n.addEventListener(r,"touchcancel",(function(t){e.fire(new hr("touchcancel",e,t))})),n.addEventListener(r,"click",(function(i){var a=n.mousePos(r,i);(a.equals(o)||a.dist(o)<t.clickTolerance)&&e.fire(new cr("click",e,i))})),n.addEventListener(r,"dblclick",(function(t){var n=new cr("dblclick",e,t);e.fire(n),n.defaultPrevented||e.doubleClickZoom.onDblClick(n)})),n.addEventListener(r,"contextmenu",(function(t){var n=e.dragRotate.isActive();a||n?a&&(i=t):e.fire(new cr("contextmenu",e,t)),(e.dragRotate.isEnabled()||e.listens("contextmenu"))&&t.preventDefault()})),n.addEventListener(r,"wheel",(function(n){t.interactive&&e.stop();var r=new pr("wheel",e,n);e.fire(r),r.defaultPrevented||e.scrollZoom.onWheel(n)}),{passive:!1})}(this,t),this._hash=t.hash&&(new lr).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Sr({customAttribution:t.customAttribution})),this.addControl(new Tr,t.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(t){i._update("style"===t.dataType),i.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){i.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(i.__proto__=r),i.prototype=Object.create(r&&r.prototype),i.prototype.constructor=i;var a={showTileBoundaries:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(t,n){if(void 0===n&&t.getDefaultPosition&&(n=t.getDefaultPosition()),void 0===n&&(n="top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this},i.prototype.resize=function(t){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)).fire(new e.Event("resize",t)).fire(new e.Event("moveend",t)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},i.prototype.setMinZoom=function(e){if((e=null==e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},i.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype.on=function(e,t,n){var i=this;if(void 0===n)return r.prototype.on.call(this,e,t);var a=function(){var r;if("mouseenter"===e||"mouseover"===e){var a=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){var o=i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?a||(a=!0,n.call(i,new cr(e,i,r.originalEvent,{features:o}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:n,delegates:{mousemove:function(r){(i.getLayer(t)?i.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,n.call(i,new cr(e,i,r.originalEvent)))},mouseout:function(t){o&&(o=!1,n.call(i,new cr(e,i,t.originalEvent)))}}}}return{layer:t,listener:n,delegates:(r={},r[e]=function(e){var r=i.getLayer(t)?i.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,n.call(i,e),delete e.features)},r)}}();for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)this.on(o,a.delegates[o]);return this},i.prototype.off=function(e,t,n){if(void 0===n)return r.prototype.off.call(this,e,t);if(this._delegatedListeners&&this._delegatedListeners[e])for(var i=this._delegatedListeners[e],a=0;a<i.length;a++){var o=i[a];if(o.layer===t&&o.listener===n){for(var s in o.delegates)this.off(s,o.delegates[s]);return i.splice(a,1),this}}return this},i.prototype.queryRenderedFeatures=function(t,n){if(!this.style)return[];var r;if(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),n=n||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var i=e.Point.convert(t[0]),a=e.Point.convert(t[1]);r=[i,new e.Point(a.x,i.y),a,new e.Point(i.x,a.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},i.prototype.setStyle=function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:Ar.localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(t,n))},i.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new Lt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},i.prototype._diffStyle=function(t,n){var r=this;if("string"==typeof t){var i=e.normalizeStyleURL(t),a=this._transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)},i.prototype._updateDiff=function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0)},i.prototype.isSourceLoaded=function(t){var n=this.style&&this.style.sourceCaches[t];if(void 0!==n)return n.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},i.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},i.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},i.prototype.getSource=function(e){return this.style.getSource(e)},i.prototype.addImage=function(t,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var a=r.sdf;if(void 0===a&&(a=!1),n instanceof jr){var o=e.browser.getImageData(n),s=o.width,u=o.height,l=o.data;this.style.addImage(t,{data:new e.RGBAImage({width:s,height:u},l),pixelRatio:i,sdf:a,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n.width,h=n.height,p=n.data,f=n;this.style.addImage(t,{data:new e.RGBAImage({width:c,height:h},new Uint8Array(p)),pixelRatio:i,sdf:a,version:0,userImage:f}),f.onAdd&&f.onAdd(this,t)}},i.prototype.updateImage=function(t,n){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof jr?e.browser.getImageData(n):n,a=i.width,o=i.height,s=i.data;if(void 0===a||void 0===o)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==r.data.width||o!==r.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var u=!(n instanceof jr);r.data.replace(s,u),this.style.updateImage(t,r)},i.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(e){this.style.removeImage(e)},i.prototype.loadImage=function(t,n){e.getImage(this._transformRequest(t,e.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0)},i.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},i.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},i.prototype.getLayer=function(e){return this.style.getLayer(e)},i.prototype.setFilter=function(e,t,n){return void 0===n&&(n={}),this.style.setFilter(e,t,n),this._update(!0)},i.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)},i.prototype.getFilter=function(e){return this.style.getFilter(e)},i.prototype.setPaintProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,n,r),this._update(!0)},i.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},i.prototype.setLayoutProperty=function(e,t,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},i.prototype.setLight=function(e,t){return void 0===t&&(t={}),this.style.setLight(e,t),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},i.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},i.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=n.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){a[e]=n.create("div","mapboxgl-ctrl-"+e,i)}))},i.prototype._resizeCanvas=function(t,n){var r=e.window.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*n,this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new rr(r,this.transform),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},i.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},i.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},i.prototype._render=function(){this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var t=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var n=this.transform.zoom,r=e.browser.now();this.style.zoomHistory.update(n,r);var i=new e.EvaluationParameters(n,{now:r,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),a=i.crossFadingFactor();1===a&&a===this._crossFadingFactor||(t=!0,this._crossFadingFactor=a),this.style.update(i)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||t)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,n=this._controls;t<n.length;t+=1)n[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ir(this._canvasContainer),Ir(this._controlContainer),Ir(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new e.Event("remove"))},i.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(){t._frame=null,t._render()})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(){this._trackResize&&this.resize()._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(e){this._vertices=e,this._update()},Object.defineProperties(i.prototype,a),i}(Er);function Ir(e){e.parentNode&&e.parentNode.removeChild(e)}var Rr={showCompass:!0,showZoom:!0},Lr=function(t){var r=this;this.options=e.extend({},Rr,t),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom in",(function(){return r._map.zoomIn()})),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom out",(function(){return r._map.zoomOut()}))),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset bearing to north",(function(){return r._map.resetNorth()})),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};function zr(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(n);r.locationPoint(i).distSqr(n)<o?t=i:r.locationPoint(a).distSqr(n)<o&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Lr.prototype._updateZoomButtons=function(){var e=this._map.getZoom();this._zoomInButton.classList.toggle("mapboxgl-ctrl-icon-disabled",e===this._map.getMaxZoom()),this._zoomOutButton.classList.toggle("mapboxgl-ctrl-icon-disabled",e===this._map.getMinZoom())},Lr.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},Lr.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new mr(e,{button:"left",element:this._compass}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.enable()),this._container},Lr.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),this._handler.disable(),delete this._handler),delete this._map},Lr.prototype._createButton=function(e,t,r){var i=n.create("button",e,this._container);return i.type="button",i.title=t,i.setAttribute("aria-label",t),i.addEventListener("click",r),i};var Dr={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Fr(e,t,n){var r=e.classList;for(var i in Dr)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+t)}var Br,Nr=function(t){function r(r,i){if(t.call(this),(r instanceof e.window.HTMLElement||i)&&(r=e.extend({element:r},i)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var l=0,c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];l<c.length;l+=1){var h=c[l],p=n.createNS("http://www.w3.org/2000/svg","ellipse");p.setAttributeNS(null,"opacity","0.04"),p.setAttributeNS(null,"cx","10.5"),p.setAttributeNS(null,"cy","5.80029008"),p.setAttributeNS(null,"rx",h.rx),p.setAttributeNS(null,"ry",h.ry),u.appendChild(p)}var f=n.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var d=n.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(d);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"opacity","0.25"),v.setAttributeNS(null,"fill","#000000");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),v.appendChild(m);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var _=n.createNS("http://www.w3.org/2000/svg","circle");_.setAttributeNS(null,"fill","#FFFFFF"),_.setAttributeNS(null,"cx","5.5"),_.setAttributeNS(null,"cy","5.5"),_.setAttributeNS(null,"r","5.4999962"),g.appendChild(b),g.appendChild(_),s.appendChild(u),s.appendChild(f),s.appendChild(v),s.appendChild(y),s.appendChild(g),a.appendChild(s),this._element.appendChild(a),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),Fr(this._element,this._anchor,"marker"),this._popup=null}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)}return this},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=zr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,Dr[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px)"))},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r}(e.Evented),Ur={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},Vr=function(t){function r(n){t.call(this),this.options=e.extend({},Ur,n),e.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Br?r(Br):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){Br="denied"!==e.state,r(Br)})):(Br=!!e.window.navigator.geolocation,r(Br)),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),n.remove(this._container),this._map=void 0},r.prototype._onSuccess=function(t){if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()},r.prototype._updateCamera=function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})},r.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},r.prototype._onError=function(t){if(this.options.trackUserLocation)if(1===t.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;!1!==t?(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Nr(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))):e.warnOnce("Geolocation support is not available, the GeolocateControl will not be visible.")},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),Wr={maxWidth:100,unit:"metric"},qr=function(t){this.options=e.extend({},Wr,t),e.bindAll(["_onMove","setUnit"],this)};function Gr(e,t,n){var r,i,a,o,s,u,l=n&&n.maxWidth||100,c=e._container.clientHeight/2,h=(r=e.unproject([0,c]),i=e.unproject([l,c]),a=Math.PI/180,o=r.lat*a,s=i.lat*a,u=Math.sin(o)*Math.sin(s)+Math.cos(o)*Math.cos(s)*Math.cos((i.lng-r.lng)*a),6371e3*Math.acos(Math.min(u,1)));if(n&&"imperial"===n.unit){var p=3.2808*h;p>5280?Hr(t,l,p/5280,"mi"):Hr(t,l,p,"ft")}else n&&"nautical"===n.unit?Hr(t,l,h/1852,"nm"):Hr(t,l,h,"m")}function Hr(e,t,n,r){var i,a,o,s=(i=n,(a=Math.pow(10,(""+Math.floor(i)).length-1))*(o=(o=i/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o))),u=s/n;"m"===r&&s>=1e3&&(s/=1e3,r="km"),e.style.width=t*u+"px",e.innerHTML=s+r}qr.prototype.getDefaultPosition=function(){return"bottom-left"},qr.prototype._onMove=function(){Gr(this._map,this._container,this.options)},qr.prototype.onAdd=function(e){return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qr.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qr.prototype.setUnit=function(e){this.options.unit=e,Gr(this._map,this._container,this.options)};var Zr=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};Zr.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Zr.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Zr.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Zr.prototype._setupUI=function(){(this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._controlContainer)).type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Zr.prototype._updateTitle=function(){var e=this._isFullscreen()?"Exit fullscreen":"Enter fullscreen";this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},Zr.prototype._isFullscreen=function(){return this._fullscreen},Zr.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"),this._updateTitle())},Zr.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Xr={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Yr=function(t){function r(n){t.call(this),this.options=e.extend(Object.create(Xr),n),e.bindAll(["_update","_onClickClose","remove"],this)}return t&&(r.__proto__=t),r.prototype=Object.create(t&&t.prototype),r.prototype.constructor=r,r.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._map.on("remove",this.remove),this._update(),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),this._map.off("remove",this.remove),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._update(),this},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container.style.maxWidth},r.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},r.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},r.prototype._update=function(){var t=this;if(this._map&&this._lngLat&&this._content){this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return t._container.classList.add(e)}))),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&(this._lngLat=zr(this._lngLat,this._pos,this._map.transform));var r=this._pos=this._map.project(this._lngLat),i=this.options.anchor,a=function t(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new e.Point(0,0),top:new e.Point(0,n),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-n),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(n,0),right:new e.Point(-n,0)}}if(n instanceof e.Point||Array.isArray(n)){var i=e.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:e.Point.convert(n.center||[0,0]),top:e.Point.convert(n.top||[0,0]),"top-left":e.Point.convert(n["top-left"]||[0,0]),"top-right":e.Point.convert(n["top-right"]||[0,0]),bottom:e.Point.convert(n.bottom||[0,0]),"bottom-left":e.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(n["bottom-right"]||[0,0]),left:e.Point.convert(n.left||[0,0]),right:e.Point.convert(n.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!i){var o,s=this._container.offsetWidth,u=this._container.offsetHeight;o=r.y+a.bottom.y<u?["top"]:r.y>this._map.transform.height-u?["bottom"]:[],r.x<s/2?o.push("left"):r.x>this._map.transform.width-s/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}var l=r.add(a[i]).round();n.setTransform(this._container,Dr[i]+" translate("+l.x+"px,"+l.y+"px)"),Fr(this._container,i,"popup")}},r.prototype._onClickClose=function(){this.remove()},r}(e.Evented),Kr={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,Map:Mr,NavigationControl:Lr,GeolocateControl:Vr,AttributionControl:Sr,ScaleControl:qr,FullscreenControl:Zr,Popup:Yr,Marker:Nr,Style:Lt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Me.workerCount},set workerCount(e){Me.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},workerUrl:""};return Kr})),n}()},function(e,t,n){"use strict";(function(e){var t=n(14),r=n(41);function i(e,n){var i=n.extension,a=n.target,o=n.target2,s=r.b[i];Object(t.a)(s);for(var u=s.meta,l=(void 0===u?{}:u).suffix,c=void 0===l?"":l,h=e.getExtension(i),p=function(){var t=d[f],n="".concat(t).concat(c),r=null;"meta"===t||"function"==typeof e[t]||(h&&"function"==typeof h[n]?r=function(){return h[n].apply(h,arguments)}:"function"==typeof s[t]&&(r=s[t].bind(a))),r&&(a[t]=r,o[t]=r)},f=0,d=Object.keys(s);f<d.length;f++)p()}(void 0!==e?e:window).polyfillContext=function(e){return e.luma=e.luma||{},function(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e.luma[s]=e.getExtension(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}(e),e.luma.polyfilled||(!function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,s=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value;"overrides"!==u&&i(e,{extension:u,target:e.luma,target2:e})}}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}}(e,r.b),function(e,t){var n=t.target,i=t.target2;Object.keys(r.a).forEach((function(t){if("function"==typeof r.a[t]){var a=e[t]?e[t].bind(e):function(){},o=r.a[t].bind(null,e,a);n[t]=o,i[t]=o}}))}(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}}).call(this,n(30))},function(e,t,n){"use strict";(function(e,r){var i=n(44);Object.defineProperty(t,"__esModule",{value:!0}),t.console=t.process=t.document=t.global=t.window=t.self=void 0;var a=i(n(49)),o={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e,document:"undefined"!=typeof document&&document,process:"object"===(void 0===r?"undefined":(0,a.default)(r))&&r},s=o.self||o.window||o.global;t.self=s;var u=o.window||o.self||o.global;t.window=u;var l=o.global||o.self||o.window;t.global=l;var c=o.document||{};t.document=c;var h=o.process||{};t.process=h;var p=console;t.console=p}).call(this,n(30),n(31))},function(e,t,n){"use strict";(function(e){var r=n(44);Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,t.isBrowserMainThread=function(){return o()&&"undefined"!=typeof document};var i=r(n(49)),a=r(n(58));function o(){return!("object"===(void 0===e?"undefined":(0,i.default)(e))&&"[object process]"===String(e)&&!e.browser)||(0,a.default)()}}).call(this,n(31))},function(e,t,n){"use strict";(function(e){var r=n(16),i=n(67);n.d(t,"b",(function(){return i.a}));var a=n(68);n.d(t,"a",(function(){return a.a}));var o=n(17);n.d(t,"d",(function(){return o.b})),n.d(t,"e",(function(){return o.c})),n.d(t,"c",(function(){return o.a})),n.d(t,"f",(function(){return o.f}));var s={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==e&&e};(s.global||s.self||s.window).mathgl={config:r.d}}).call(this,n(30))},function(e,t,n){"use strict";var r=n(2),i=n(1),a=n(6),o=n(4),s=n(7),u=n(53),l=n(20),c=n(34),h=function(e){function t(){return Object(r.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"len",value:function(){return Math.sqrt(this.lengthSquared())}},{key:"magnitude",value:function(){return this.len()}},{key:"lengthSquared",value:function(){for(var e=0,t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}},{key:"magnitudeSquared",value:function(){return this.lengthSquared()}},{key:"distance",value:function(e){return Math.sqrt(this.distanceSquared(e))}},{key:"distanceSquared",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n){var r=this[n]-e[n];t+=r*r}return Object(l.a)(t)}},{key:"dot",value:function(e){for(var t=0,n=0;n<this.ELEMENTS;++n)t+=this[n]*e[n];return Object(l.a)(t)}},{key:"normalize",value:function(){var e=this.magnitude();if(0!==e)for(var t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}},{key:"multiply",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]*=a[o];return this.check()}},{key:"divide",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++)for(var a=i[r],o=0;o<this.ELEMENTS;++o)this[o]/=a[o];return this.check()}},{key:"lengthSq",value:function(){return this.lengthSquared()}},{key:"distanceTo",value:function(e){return this.distance(e)}},{key:"distanceToSquared",value:function(e){return this.distanceSquared(e)}},{key:"getComponent",value:function(e){return Object(c.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),Object(l.a)(this[e])}},{key:"setComponent",value:function(e,t){return Object(c.a)(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}},{key:"addVectors",value:function(e,t){return this.copy(e).add(t)}},{key:"subVectors",value:function(e,t){return this.copy(e).subtract(t)}},{key:"multiplyVectors",value:function(e,t){return this.copy(e).multiply(t)}},{key:"addScaledVector",value:function(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=Object(l.a)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=Object(l.a)(e)}}]),t}(u.a),p=n(17),f=n(23),d=n(39);n.d(t,"a",(function(){return m}));var v=[0,0,0],m=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(r.a)(this,t),e=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0)),1===arguments.length&&Object(p.e)(n)?e.copy(n):(p.b.debug&&(Object(l.a)(n),Object(l.a)(i),Object(l.a)(s)),e[0]=n,e[1]=i,e[2]=s),e}return Object(s.a)(t,e),Object(i.a)(t,[{key:"set",value:function(e,t,n){return this[0]=e,this[1]=t,this[2]=n,this.check()}},{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}},{key:"fromObject",value:function(e){return p.b.debug&&(Object(l.a)(e.x),Object(l.a)(e.y),Object(l.a)(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}},{key:"toObject",value:function(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}},{key:"angle",value:function(e){return f.a(this,e)}},{key:"cross",value:function(e){return f.b(this,this,e),this.check()}},{key:"rotateX",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?v:n;return f.d(this,this,r,t),this.check()}},{key:"rotateY",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?v:n;return f.e(this,this,r,t),this.check()}},{key:"rotateZ",value:function(e){var t=e.radians,n=e.origin,r=void 0===n?v:n;return f.f(this,this,r,t),this.check()}},{key:"transform",value:function(e){return this.transformAsPoint(e)}},{key:"transformAsPoint",value:function(e){return f.i(this,this,e),this.check()}},{key:"transformAsVector",value:function(e){return Object(d.c)(this,this,e),this.check()}},{key:"transformByMatrix3",value:function(e){return f.h(this,this,e),this.check()}},{key:"transformByMatrix2",value:function(e){return Object(d.b)(this,this,e),this.check()}},{key:"transformByQuaternion",value:function(e){return f.j(this,this,e),this.check()}},{key:"ELEMENTS",get:function(){return 3}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=Object(l.a)(e)}}]),t}(h)},function(e,t,n){"use strict";var r=n(8),i=n(2),a=n(6),o=n(4),s=n(1),u=n(7),l=n(20),c=n(53),h=n(17),p=function(e){function t(){return Object(i.a)(this,t),Object(a.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"toString",value:function(){var e="[";if(h.b.printRowMajor){e+="row-major:";for(var t=0;t<this.RANK;++t)for(var n=0;n<this.RANK;++n)e+=" ".concat(this[n*this.RANK+t])}else{e+="column-major:";for(var r=0;r<this.ELEMENTS;++r)e+=" ".concat(this[r])}return e+="]"}},{key:"getElementIndex",value:function(e,t){return t*this.RANK+e}},{key:"getElement",value:function(e,t){return this[t*this.RANK+e]}},{key:"setElement",value:function(e,t,n){return this[t*this.RANK+e]=Object(l.a)(n),this}},{key:"getColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Array(this.RANK).fill(-0),n=e*this.RANK,r=0;r<this.RANK;++r)t[r]=this[n+r];return t}},{key:"setColumn",value:function(e,t){for(var n=e*this.RANK,r=0;r<this.RANK;++r)this[n+r]=t[r];return this}}]),t}(c.a),f=n(39),d=n(11),v=n(18),m=n(23),y=n(27);n.d(t,"a",(function(){return w}));var g=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),b=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),x={},w=function(e){function t(e){var n;return Object(i.a)(this,t),n=Object(a.a)(this,Object(o.a)(t).call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0)),1===arguments.length&&Array.isArray(e)?n.copy(e):n.identity(),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"INDICES",get:function(){return _}},{key:"ELEMENTS",get:function(){return 16}},{key:"RANK",get:function(){return 4}}],[{key:"IDENTITY",get:function(){return x.IDENTITY=x.IDENTITY||Object.freeze(new t(g)),x.IDENTITY}},{key:"ZERO",get:function(){return x.ZERO=x.ZERO||Object.freeze(new t(b)),x.ZERO}}]),Object(s.a)(t,[{key:"copy",value:function(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}},{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v){return this[0]=e,this[1]=t,this[2]=n,this[3]=r,this[4]=i,this[5]=a,this[6]=o,this[7]=s,this[8]=u,this[9]=l,this[10]=c,this[11]=h,this[12]=p,this[13]=f,this[14]=d,this[15]=v,this.check()}},{key:"setRowMajor",value:function(e,t,n,r,i,a,o,s,u,l,c,h,p,f,d,v){return this[0]=e,this[1]=i,this[2]=u,this[3]=p,this[4]=t,this[5]=a,this[6]=l,this[7]=f,this[8]=n,this[9]=o,this[10]=c,this[11]=d,this[12]=r,this[13]=s,this[14]=h,this[15]=v,this.check()}},{key:"toRowMajor",value:function(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}},{key:"identity",value:function(){return this.copy(g)}},{key:"fromQuaternion",value:function(e){return d.c(this,e),this.check()}},{key:"frustum",value:function(e){var n=e.left,r=e.right,i=e.bottom,a=e.top,o=e.near,s=e.far;return s===1/0?t._computeInfinitePerspectiveOffCenter(this,n,r,i,a,o):d.d(this,n,r,i,a,o,s),this.check()}},{key:"lookAt",value:function(e,t,n){if(1===arguments.length){var r=e;e=r.eye,t=r.center,n=r.up}return t=t||[0,0,0],n=n||[0,1,0],d.f(this,e,t,n),this.check()}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,i=e.top,a=e.near,o=void 0===a?.1:a,s=e.far,u=void 0===s?500:s;return d.h(this,t,n,r,i,o,u),this.check()}},{key:"orthographic",value:function(e){var n=e.fovy,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.focalDistance,s=void 0===o?1:o,u=e.near,l=void 0===u?.1:u,c=e.far,h=void 0===c?500:c;if(r>2*Math.PI)throw Error("radians");var p=r/2,f=s*Math.tan(p),d=f*a;return(new t).ortho({left:-d,right:d,bottom:-f,top:f,near:l,far:h})}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fovy,n=e.fov,r=void 0===n?45*Math.PI/180:n,i=e.aspect,a=void 0===i?1:i,o=e.near,s=void 0===o?.1:o,u=e.far,l=void 0===u?500:u;if((t=t||r)>2*Math.PI)throw Error("radians");return d.i(this,t,a,s,l),this.check()}},{key:"determinant",value:function(){return d.a(this)}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}},{key:"getTranslation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0];return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}},{key:"getRotation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*i,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*i,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{key:"getRotationMatrix3",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[-0,-0,-0,-0,-0,-0,-0,-0,-0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.getScale(t||[-0,-0,-0]),r=1/n[0],i=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*i,e[2]=this[2]*a,e[3]=this[4]*r,e[4]=this[5]*i,e[5]=this[6]*a,e[6]=this[8]*r,e[7]=this[9]*i,e[8]=this[10]*a,e}},{key:"transpose",value:function(){return d.p(this,this),this.check()}},{key:"invert",value:function(){return d.e(this,this),this.check()}},{key:"multiplyLeft",value:function(e){return d.g(this,e,this),this.check()}},{key:"multiplyRight",value:function(e){return d.g(this,this,e),this.check()}},{key:"rotateX",value:function(e){return d.k(this,this,e),this.check()}},{key:"rotateY",value:function(e){return d.l(this,this,e),this.check()}},{key:"rotateZ",value:function(e){return d.m(this,this,e),this.check()}},{key:"rotateXYZ",value:function(e){var t=Object(r.a)(e,3),n=t[0],i=t[1],a=t[2];return this.rotateX(n).rotateY(i).rotateZ(a)}},{key:"rotateAxis",value:function(e,t){return d.j(this,this,e,t),this.check()}},{key:"scale",value:function(e){return Array.isArray(e)?d.n(this,this,e):d.n(this,this,[e,e,e]),this.check()}},{key:"translate",value:function(e){return d.o(this,this,e),this.check()}},{key:"transform",value:function(e,t){return 4===e.length?(t=y.b(t||[-0,-0,-0,-0],e,this),Object(l.b)(t,4),t):this.transformAsPoint(e,t)}},{key:"transformAsPoint",value:function(e,t){switch(e.length){case 2:t=v.g(t||[-0,-0],e,this);break;case 3:t=m.i(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(l.b)(t,e.length),t}},{key:"transformAsVector",value:function(e,t){switch(e.length){case 2:t=Object(f.a)(t||[-0,-0],e,this);break;case 3:t=Object(f.c)(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Object(l.b)(t,e.length),t}},{key:"makeRotationX",value:function(e){return this.identity().rotateX(e)}},{key:"makeTranslation",value:function(e,t,n){return this.identity().translate([e,t,n])}},{key:"transformPoint",value:function(e,t){return Object(l.c)("Matrix4.transformPoint","3.0"),this.transformAsPoint(e,t)}},{key:"transformVector",value:function(e,t){return Object(l.c)("Matrix4.transformVector","3.0"),this.transformAsPoint(e,t)}},{key:"transformDirection",value:function(e,t){return Object(l.c)("Matrix4.transformDirection","3.0"),this.transformAsVector(e,t)}}],[{key:"_computeInfinitePerspectiveOffCenter",value:function(e,t,n,r,i,a){var o=2*a/(n-t),s=2*a/(i-r),u=(n+t)/(n-t),l=(i+r)/(i-r),c=-2*a;return e[0]=o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=u,e[9]=l,e[10]=-1,e[11]=-1,e[12]=0,e[13]=0,e[14]=c,e[15]=0,e}}]),t}(p)},function(e,t,n){"use strict";(function(e){var r=n(9);function i(t){var n;n="undefined"!=typeof window?window:"undefined"!=typeof self?self:e;var r,i,a="undefined"!=typeof document&&document.attachEvent;if(!a){var o=(i=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)},function(e){return i(e)}),s=(r=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout,function(e){return r(e)}),u=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},l=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;u(this),this.__resizeRAF__&&s(this.__resizeRAF__),this.__resizeRAF__=o((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(n){n.call(t,e)})))}))}},c=!1,h="",p="animationstart",f="Webkit Moz O ms".split(" "),d="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(void 0!==v.style.animationName&&(c=!0),!1===c)for(var m=0;m<f.length;m++)if(void 0!==v.style[f[m]+"AnimationName"]){h="-"+f[m].toLowerCase()+"-",p=d[m],c=!0;break}var y="resizeanim",g="@"+h+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",b=h+"animation: 1ms "+y+"; "}return{addResizeListener:function(e,r){if(a)e.attachEvent("onresize",r);else{if(!e.__resizeTriggers__){var i=e.ownerDocument,o=n.getComputedStyle(e);o&&"static"==o.position&&(e.style.position="relative"),function(e){if(!e.getElementById("detectElementResize")){var n=(g||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.id="detectElementResize",i.type="text/css",null!=t&&i.setAttribute("nonce",t),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(e.createTextNode(n)),r.appendChild(i)}}(i),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=i.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),u(e),e.addEventListener("scroll",l,!0),p&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==y&&u(e)},e.__resizeTriggers__.addEventListener(p,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(a)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(p,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},l=function(e){function t(){var e,n,r;a(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(r._parentNode){var a=r._parentNode.offsetHeight||0,o=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},u=parseInt(s.paddingLeft,10)||0,l=parseInt(s.paddingRight,10)||0,c=parseInt(s.paddingTop,10)||0,h=parseInt(s.paddingBottom,10)||0,p=a-c-h,f=o-u-l;(!t&&r.state.height!==p||!n&&r.state.width!==f)&&(r.setState({height:a-c-h,width:o-u-l}),i({height:a,width:o}))}},r._setRef=function(e){r._autoSizer=e},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=i(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=e.disableHeight,a=e.disableWidth,o=e.style,u=this.state,l=u.height,c=u.width,h={overflow:"visible"},p={},f=!1;return i||(0===l&&(f=!0),h.height=0,p.height=l),a||(0===c&&(f=!0),h.width=0,p.width=c),Object(r.createElement)("div",{className:n,ref:this._setRef,style:s({},h,o)},!f&&t(p))}}]),t}(r.PureComponent);l.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},t.a=l}).call(this,n(30))},,,,,,,,,,,,,function(e,t,n){"use strict";
/** @license React v16.13.0
 * react.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=n(56),r=n(57),i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,_=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119,w="function"==typeof Symbol&&Symbol.iterator;function k(e){if(null===e||"object"!=typeof e)return null;var t=w&&e[w]||e["@@iterator"];return"function"==typeof t?t:null}var O={current:null},E={current:null},S=/^(.*)[\\\/]/;function T(e){if(null==e)return null;if("number"==typeof e.tag&&I("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case s:return"Fragment";case o:return"Portal";case l:return"Profiler";case u:return"StrictMode";case d:return"Suspense";case v:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case h:return"Context.Consumer";case c:return"Context.Provider";case f:return r=e,i=e.render,a="ForwardRef",p=i.displayName||i.name||"",r.displayName||(""!==p?a+"("+p+")":a);case m:return T(e.type);case g:return T(e.render);case y:var t=1===(n=e)._status?n._result:null;if(t)return T(t)}var n,r,i,a,p;return null}var P={},j=null;function C(e){j=e}P.getCurrentStack=null,P.getStackAddendum=function(){var e="";if(j){var t=T(j.type),n=j._owner;e+=function(e,t,n){var r="";if(t){var i=t.fileName,a=i.replace(S,"");if(/^index\./.test(a)){var o=i.match(S);if(o){var s=o[1];if(s)a=s.replace(S,"")+"/"+a}}r=" (at "+a+":"+t.lineNumber+")"}else n&&(r=" (created by "+n+")");return"\n    in "+(e||"Unknown")+r}(t,j._source,n&&T(n.type))}var r=P.getCurrentStack;return r&&(e+=r()||""),e};var A={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:e};function M(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];R("warn",e,n)}function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];R("error",e,n)}function R(e,t,n){if(!(n.length>0&&"string"==typeof n[n.length-1]&&0===n[n.length-1].indexOf("\n    in"))){var r=A.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]))}var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i);try{var a=0,o="Warning: "+t.replace(/%s/g,(function(){return n[a++]}));throw new Error(o)}catch(e){}}e(A,{ReactDebugCurrentFrame:P,ReactComponentTreeHook:{}});var L={};function z(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+t;L[i]||(I("Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),L[i]=!0)}var D={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){z(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){z(e,"replaceState")},enqueueSetState:function(e,t,n,r){z(e,"setState")}},F={};function B(e,t,n){this.props=e,this.context=t,this.refs=F,this.updater=n||D}Object.freeze(F),B.prototype.isReactComponent={},B.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},B.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var N={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},U=function(e,t){Object.defineProperty(B.prototype,e,{get:function(){M("%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var V in N)N.hasOwnProperty(V)&&U(V,N[V]);function W(){}function q(e,t,n){this.props=e,this.context=t,this.refs=F,this.updater=n||D}W.prototype=B.prototype;var G=q.prototype=new W;G.constructor=q,e(G,B.prototype),G.isPureReactComponent=!0;var H,Z,X,Y=Object.prototype.hasOwnProperty,K={key:!0,ref:!0,__self:!0,__source:!0};function J(e){if(Y.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function $(e){if(Y.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}function Q(e,t){var n=function(){H||(H=!0,I("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}function ee(e,t){var n=function(){Z||(Z=!0,I("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}function te(e){if("string"==typeof e.ref&&E.current&&e.__self&&E.current.stateNode!==e.__self){var t=T(E.current.type);X[t]||(I('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://fb.me/react-strict-mode-string-ref',T(E.current.type),e.ref),X[t]=!0)}}X={};var ne=function(e,t,n,r,i,o,s){var u={$$typeof:a,type:e,key:t,ref:n,props:s,_owner:o,_store:{}};return Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u};function re(e,t,n){var r,i={},a=null,o=null,s=null,u=null;if(null!=t)for(r in J(t)&&(o=t.ref,te(t)),$(t)&&(a=""+t.key),s=void 0===t.__self?null:t.__self,u=void 0===t.__source?null:t.__source,t)Y.call(t,r)&&!K.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(l>1){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];Object.freeze&&Object.freeze(c),i.children=c}if(e&&e.defaultProps){var p=e.defaultProps;for(r in p)void 0===i[r]&&(i[r]=p[r])}if(a||o){var f="function"==typeof e?e.displayName||e.name||"Unknown":e;a&&Q(i,f),o&&ee(i,f)}return ne(e,a,o,s,u,E.current,i)}function ie(t,n,r){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i,a,o=e({},t.props),s=t.key,u=t.ref,l=t._self,c=t._source,h=t._owner;if(null!=n)for(i in J(n)&&(u=n.ref,h=E.current),$(n)&&(s=""+n.key),t.type&&t.type.defaultProps&&(a=t.type.defaultProps),n)Y.call(n,i)&&!K.hasOwnProperty(i)&&(void 0===n[i]&&void 0!==a?o[i]=a[i]:o[i]=n[i]);var p=arguments.length-2;if(1===p)o.children=r;else if(p>1){for(var f=Array(p),d=0;d<p;d++)f[d]=arguments[d+2];o.children=f}return ne(t.type,s,u,l,c,h,o)}function ae(e){return"object"==typeof e&&null!==e&&e.$$typeof===a}var oe=!1,se=/\/+/g;function ue(e){return(""+e).replace(se,"$&/")}var le,ce=[];function he(e,t,n,r){if(ce.length){var i=ce.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function pe(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,ce.length<10&&ce.push(e)}function fe(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u,l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case a:case o:l=!0}}if(l)return r(i,t,""===n?"."+de(t,0):n),1;var c=0,h=""===n?".":n+":";if(Array.isArray(t))for(var p=0;p<t.length;p++)c+=e(u=t[p],h+de(u,p),r,i);else{var f=k(t);if("function"==typeof f){f===t.entries&&(oe||M("Using Maps as children is deprecated and will be removed in a future major release. Consider converting children to an array of keyed ReactElements instead."),oe=!0);for(var d,v=f.call(t),m=0;!(d=v.next()).done;)c+=e(u=d.value,h+de(u,m++),r,i)}else if("object"===s){var y;y=" If you meant to render a collection of children, use an array instead."+P.getStackAddendum();var g=""+t;throw Error("Objects are not valid as a React child (found: "+("[object Object]"===g?"object with keys {"+Object.keys(t).join(", ")+"}":g)+")."+y)}}return c}(e,"",t,n)}function de(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function ve(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function me(e,t,n){var r,i,a=e.result,o=e.keyPrefix,s=e.func,u=e.context,l=s.call(u,t,e.count++);Array.isArray(l)?ye(l,a,n,(function(e){return e})):null!=l&&(ae(l)&&(r=l,i=o+(!l.key||t&&t.key===l.key?"":ue(l.key)+"/")+n,l=ne(r.type,i,r.ref,r._self,r._source,r._owner,r.props)),a.push(l))}function ye(e,t,n,r,i){var a="";null!=n&&(a=ue(n)+"/");var o=he(t,a,r,i);fe(e,me,o),pe(o)}function ge(e){return"string"==typeof e||"function"==typeof e||e===s||e===p||e===l||e===u||e===d||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===c||e.$$typeof===h||e.$$typeof===f||e.$$typeof===b||e.$$typeof===_||e.$$typeof===x||e.$$typeof===g)}function be(){var e=O.current;if(null===e)throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.");return e}function _e(){if(E.current){var e=T(E.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}function xe(e){return null!=e&&void 0!==(t=e.__source)?"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+".":"";var t}le=!1;var we={};function ke(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=_e();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!we[n]){we[n]=!0;var r="";e&&e._owner&&e._owner!==E.current&&(r=" It was passed a child from "+T(e._owner.type)+"."),C(e),I('Each child in a list should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.',n,r),C(null)}}}function Oe(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];ae(r)&&ke(r,t)}else if(ae(e))e._store&&(e._store.validated=!0);else if(e){var i=k(e);if("function"==typeof i&&i!==e.entries)for(var a,o=i.call(e);!(a=o.next()).done;)ae(a.value)&&ke(a.value,t)}}function Ee(e){var t=e.type;if(null!=t&&"string"!=typeof t){var n,i=T(t);if("function"==typeof t)n=t.propTypes;else{if("object"!=typeof t||t.$$typeof!==f&&t.$$typeof!==m)return;n=t.propTypes}n?(C(e),r(n,e.props,"prop",i,P.getStackAddendum),C(null)):void 0===t.PropTypes||le||(le=!0,I("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",i||"Unknown")),"function"!=typeof t.getDefaultProps||t.getDefaultProps.isReactClassApproved||I("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Se(e){C(e);for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){I("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r);break}}null!==e.ref&&I("Invalid attribute `ref` supplied to `React.Fragment`."),C(null)}function Te(e,t,n){var r=ge(e);if(!r){var i="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(i+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var o,u=xe(t);i+=u||_e(),null===e?o="null":Array.isArray(e)?o="array":void 0!==e&&e.$$typeof===a?(o="<"+(T(e.type)||"Unknown")+" />",i=" Did you accidentally export a JSX literal instead of a component?"):o=typeof e,I("React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",o,i)}var l=re.apply(this,arguments);if(null==l)return l;if(r)for(var c=2;c<arguments.length;c++)Oe(arguments[c],e);return e===s?Se(l):Ee(l),l}var Pe=!1;try{var je=Object.freeze({}),Ce=new Map([[je,null]]),Ae=new Set([je]);Ce.set(0,0),Ae.add(0)}catch(e){}var Me=Te,Ie=function(e,t,n){for(var r=ie.apply(this,arguments),i=2;i<arguments.length;i++)Oe(arguments[i],r.type);return Ee(r),r},Re=function(e){var t=Te.bind(null,e);return t.type=e,Pe||(Pe=!0,M("React.createFactory() is deprecated and will be removed in a future major release. Consider using JSX or use React.createElement() directly instead.")),Object.defineProperty(t,"type",{enumerable:!1,get:function(){return M("Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},Le={map:function(e,t,n){if(null==e)return e;var r=[];return ye(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;var r=he(null,null,t,n);fe(e,ve,r),pe(r)},count:function(e){return fe(e,(function(){return null}),null)},toArray:function(e){var t=[];return ye(e,t,null,(function(e){return e})),t},only:function(e){if(!ae(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Children=Le,t.Component=B,t.Fragment=s,t.Profiler=l,t.PureComponent=q,t.StrictMode=u,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A,t.cloneElement=Ie,t.createContext=function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&I("createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null};n.Provider={$$typeof:c,_context:n};var r=!1,i=!1,a={$$typeof:h,_context:n,_calculateChangedBits:n._calculateChangedBits};return Object.defineProperties(a,{Provider:{get:function(){return i||(i=!0,I("Rendering <Context.Consumer.Provider> is not supported and will be removed in a future major release. Did you mean to render <Context.Provider> instead?")),n.Provider},set:function(e){n.Provider=e}},_currentValue:{get:function(){return n._currentValue},set:function(e){n._currentValue=e}},_currentValue2:{get:function(){return n._currentValue2},set:function(e){n._currentValue2=e}},_threadCount:{get:function(){return n._threadCount},set:function(e){n._threadCount=e}},Consumer:{get:function(){return r||(r=!0,I("Rendering <Context.Consumer.Consumer> is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?")),n.Consumer}}}),n.Consumer=a,n._currentRenderer=null,n._currentRenderer2=null,n},t.createElement=Me,t.createFactory=Re,t.createRef=function(){var e={current:null};return Object.seal(e),e},t.forwardRef=function(e){return null!=e&&e.$$typeof===m?I("forwardRef requires a render function but received a `memo` component. Instead of forwardRef(memo(...)), use memo(forwardRef(...))."):"function"!=typeof e?I("forwardRef requires a render function but was given %s.",null===e?"null":typeof e):0!==e.length&&2!==e.length&&I("forwardRef render functions accept exactly two parameters: props and ref. %s",1===e.length?"Did you forget to use the ref parameter?":"Any additional parameter will be undefined."),null!=e&&(null==e.defaultProps&&null==e.propTypes||I("forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?")),{$$typeof:f,render:e}},t.isValidElement=ae,t.lazy=function(e){var t,n,r={$$typeof:y,_ctor:e,_status:-1,_result:null};return Object.defineProperties(r,{defaultProps:{configurable:!0,get:function(){return t},set:function(e){I("React.lazy(...): It is not supported to assign `defaultProps` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),t=e,Object.defineProperty(r,"defaultProps",{enumerable:!0})}},propTypes:{configurable:!0,get:function(){return n},set:function(e){I("React.lazy(...): It is not supported to assign `propTypes` to a lazy component import. Either specify them where the component is defined, or create a wrapping component around it."),n=e,Object.defineProperty(r,"propTypes",{enumerable:!0})}}}),r},t.memo=function(e,t){return ge(e)||I("memo: The first argument must be a component. Instead received: %s",null===e?"null":typeof e),{$$typeof:m,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return be().useCallback(e,t)},t.useContext=function(e,t){var n=be();if(void 0!==t&&I("useContext() second argument is reserved for future use in React. Passing it is not supported. You passed: %s.%s",t,"number"==typeof t&&Array.isArray(arguments[2])?"\n\nDid you call array.map(useContext)? Calling Hooks inside a loop is not supported. Learn more at https://fb.me/rules-of-hooks":""),void 0!==e._context){var r=e._context;r.Consumer===e?I("Calling useContext(Context.Consumer) is not supported, may cause bugs, and will be removed in a future major release. Did you mean to call useContext(Context) instead?"):r.Provider===e&&I("Calling useContext(Context.Provider) is not supported. Did you mean to call useContext(Context) instead?")}return n.useContext(e,t)},t.useDebugValue=function(e,t){return be().useDebugValue(e,t)},t.useEffect=function(e,t){return be().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return be().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return be().useLayoutEffect(e,t)},t.useMemo=function(e,t){return be().useMemo(e,t)},t.useReducer=function(e,t,n){return be().useReducer(e,t,n)},t.useRef=function(e){return be().useRef(e)},t.useState=function(e){return be().useState(e)},t.version="16.13.0"})()},function(e,t,n){"use strict";
/** @license React v16.13.0
 * react-dom.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=n(9),r=n(56),i=n(84),a=n(57),o=n(86),s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function u(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];c("warn",e,n)}function l(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];c("error",e,n)}function c(e,t,n){if(!(n.length>0&&"string"==typeof n[n.length-1]&&0===n[n.length-1].indexOf("\n    in"))){var r=s.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]))}var i=n.map((function(e){return""+e}));i.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,i);try{var a=0,o="Warning: "+t.replace(/%s/g,(function(){return n[a++]}));throw new Error(o)}catch(e){}}if(s.hasOwnProperty("ReactCurrentDispatcher")||(s.ReactCurrentDispatcher={current:null}),s.hasOwnProperty("ReactCurrentBatchConfig")||(s.ReactCurrentBatchConfig={suspense:null}),!e)throw Error("ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var h=function(e,t,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var p=document.createElement("react");h=function(e,t,n,r,i,a,o,s,u){if("undefined"==typeof document)throw Error("The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var l,c=document.createEvent("Event"),h=!0,f=window.event,d=Object.getOwnPropertyDescriptor(window,"event"),v=Array.prototype.slice.call(arguments,3);function m(){p.removeEventListener(_,m,!1),void 0!==window.event&&window.hasOwnProperty("event")&&(window.event=f),t.apply(n,v),h=!1}var y=!1,g=!1;function b(e){if(l=e.error,y=!0,null===l&&0===e.colno&&0===e.lineno&&(g=!0),e.defaultPrevented&&null!=l&&"object"==typeof l)try{l._suppressLogging=!0}catch(e){}}var _="react-"+(e||"invokeguardedcallback");window.addEventListener("error",b),p.addEventListener(_,m,!1),c.initEvent(_,!1,!1),p.dispatchEvent(c),d&&Object.defineProperty(window,"event",d),h&&(y?g&&(l=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://fb.me/react-crossorigin-error for more information.")):l=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this.onError(l)),window.removeEventListener("error",b)}}var f=h,d=!1,v=null,m=!1,y=null,g={onError:function(e){d=!0,v=e}};function b(e,t,n,r,i,a,o,s,u){d=!1,v=null,f.apply(g,arguments)}function _(){return d}function x(){if(d){var e=v;return d=!1,v=null,e}throw Error("clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}var w,k=null,O=null,E=null;function S(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,a,o,s,u){if(b.apply(this,arguments),d){var l=x();m||(m=!0,y=l)}}(r,t,void 0,e),e.currentTarget=null}w=function(e){var t=e._dispatchListeners,n=e._dispatchInstances,r=Array.isArray(t),i=r?t.length:t?1:0,a=Array.isArray(n),o=a?n.length:n?1:0;a===r&&o===i||l("EventPluginUtils: Invalid `event`.")};var T=/^(.*)[\\\/]/;var P="function"==typeof Symbol&&Symbol.for,j=P?Symbol.for("react.element"):60103,C=P?Symbol.for("react.portal"):60106,A=P?Symbol.for("react.fragment"):60107,M=P?Symbol.for("react.strict_mode"):60108,I=P?Symbol.for("react.profiler"):60114,R=P?Symbol.for("react.provider"):60109,L=P?Symbol.for("react.context"):60110,z=P?Symbol.for("react.concurrent_mode"):60111,D=P?Symbol.for("react.forward_ref"):60112,F=P?Symbol.for("react.suspense"):60113,B=P?Symbol.for("react.suspense_list"):60120,N=P?Symbol.for("react.memo"):60115,U=P?Symbol.for("react.lazy"):60116,V=P?Symbol.for("react.block"):60121,W="function"==typeof Symbol&&Symbol.iterator;function q(e){if(null===e||"object"!=typeof e)return null;var t=W&&e[W]||e["@@iterator"];return"function"==typeof t?t:null}function G(e){return 1===e._status?e._result:null}function H(e){if(null==e)return null;if("number"==typeof e.tag&&l("Received an unexpected object in getComponentName(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case A:return"Fragment";case C:return"Portal";case I:return"Profiler";case M:return"StrictMode";case F:return"Suspense";case B:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case L:return"Context.Consumer";case R:return"Context.Provider";case D:return n=e,r=e.render,i="ForwardRef",a=r.displayName||r.name||"",n.displayName||(""!==a?i+"("+a+")":i);case N:return H(e.type);case V:return H(e.render);case U:var t=G(e);if(t)return H(t)}var n,r,i,a;return null}var Z=s.ReactDebugCurrentFrame;function X(e){switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:return"";default:var t=e._debugOwner,n=e._debugSource,r=H(e.type),i=null;return t&&(i=H(t.type)),function(e,t,n){var r="";if(t){var i=t.fileName,a=i.replace(T,"");if(/^index\./.test(a)){var o=i.match(T);if(o){var s=o[1];if(s)a=s.replace(T,"")+"/"+a}}r=" (at "+a+":"+t.lineNumber+")"}else n&&(r=" (created by "+n+")");return"\n    in "+(e||"Unknown")+r}(r,n,i)}}function Y(e){var t="",n=e;do{t+=X(n),n=n.return}while(n);return t}var K=null,J=null;function $(){if(null===K)return null;var e=K._debugOwner;return null!=e?H(e.type):null}function Q(){return null===K?"":Y(K)}function ee(){Z.getCurrentStack=null,K=null,J=null}function te(e){Z.getCurrentStack=Q,K=e,J=null}function ne(e){J=e}var re=null,ie={};function ae(){if(re)for(var e in ie){var t=ie[e],n=re.indexOf(e);if(!(n>-1))throw Error("EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `"+e+"`.");if(!ue[n]){if(!t.extractEvents)throw Error("EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `"+e+"` does not.");ue[n]=t;var r=t.eventTypes;for(var i in r)if(!oe(r[i],t,i))throw Error("EventPluginRegistry: Failed to publish event `"+i+"` for plugin `"+e+"`.")}}}function oe(e,t,n){if(le.hasOwnProperty(n))throw Error("EventPluginRegistry: More than one plugin attempted to publish the same event name, `"+n+"`.");le[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r){if(r.hasOwnProperty(i))se(r[i],t,n)}return!0}return!!e.registrationName&&(se(e.registrationName,t,n),!0)}function se(e,t,n){if(ce[e])throw Error("EventPluginRegistry: More than one plugin attempted to publish the same registration name, `"+e+"`.");ce[e]=t,he[e]=t.eventTypes[n].dependencies;var r=e.toLowerCase();pe[r]=e,"onDoubleClick"===e&&(pe.ondblclick=e)}var ue=[],le={},ce={},he={},pe={};function fe(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(!ie.hasOwnProperty(n)||ie[n]!==r){if(ie[n])throw Error("EventPluginRegistry: Cannot inject two different event plugins using the same name, `"+n+"`.");ie[n]=r,t=!0}}t&&ae()}var de=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ve=null,me=null,ye=null;function ge(e){var t=O(e);if(t){if("function"!=typeof ve)throw Error("setRestoreImplementation() needs to be called to handle a target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var n=t.stateNode;if(n){var r=k(n);ve(t.stateNode,t.type,r)}}}function be(e){me?ye?ye.push(e):ye=[e]:me=e}function _e(){if(me){var e=me,t=ye;if(me=null,ye=null,ge(e),t)for(var n=0;n<t.length;n++)ge(t[n])}}var xe=function(e,t){return e(t)},we=function(e,t,n,r,i){return e(t,n,r,i)},ke=function(){},Oe=xe,Ee=!1,Se=!1;function Te(){(null!==me||null!==ye)&&(ke(),_e())}var Pe=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",je=Pe+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Ce=new RegExp("^["+Pe+"]["+je+"]*$"),Ae=Object.prototype.hasOwnProperty,Me={},Ie={};function Re(e){return!!Ae.call(Ie,e)||!Ae.call(Me,e)&&(Ce.test(e)?(Ie[e]=!0,!0):(Me[e]=!0,l("Invalid attribute name: `%s`",e),!1))}function Le(e,t,n){return null!==t?0===t.type:!n&&(e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))}function ze(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var i=e.toLowerCase().slice(0,5);return"data-"!==i&&"aria-"!==i;default:return!1}}function De(e,t,n,r){if(null==t)return!0;if(ze(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}function Fe(e){return Ne.hasOwnProperty(e)?Ne[e]:null}function Be(e,t,n,r,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var Ne={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((function(e){Ne[e]=new Be(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0],n=e[1];Ne[t]=new Be(t,1,!1,n,null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Ne[e]=new Be(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Ne[e]=new Be(e,2,!1,e,null,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((function(e){Ne[e]=new Be(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Ne[e]=new Be(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){Ne[e]=new Be(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){Ne[e]=new Be(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){Ne[e]=new Be(e,5,!1,e.toLowerCase(),null,!1)}));var Ue=/[\-\:]([a-z])/g,Ve=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((function(e){var t=e.replace(Ue,Ve);Ne[t]=new Be(t,1,!1,e,null,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((function(e){var t=e.replace(Ue,Ve);Ne[t]=new Be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Ue,Ve);Ne[t]=new Be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){Ne[e]=new Be(e,1,!1,e.toLowerCase(),null,!1)}));Ne.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){Ne[e]=new Be(e,1,!1,e.toLowerCase(),null,!0)}));s.ReactDebugCurrentFrame;var We=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*\:/i,qe=!1;function Ge(e){!qe&&We.test(e)&&(qe=!0,l("A future version of React will block javascript: URLs as a security precaution. Use event handlers instead if you can. If you need to generate unsafe HTML try using dangerouslySetInnerHTML instead. React was passed %s.",JSON.stringify(e)))}function He(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];r.sanitizeURL&&Ge(""+n);var i=r.attributeName,a=null;if(4===r.type){if(e.hasAttribute(i)){var o=e.getAttribute(i);return""===o||(De(t,n,r,!1)?o:o===""+n?n:o)}}else if(e.hasAttribute(i)){if(De(t,n,r,!1))return e.getAttribute(i);if(3===r.type)return n;a=e.getAttribute(i)}return De(t,n,r,!1)?null===a?n:a:a===""+n?n:a}function Ze(e,t,n){if(Re(t)){if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function Xe(e,t,n,r){var i=Fe(t);if(!Le(t,i,r))if(De(t,n,i,r)&&(n=null),r||null===i){if(Re(t)){var a=t;null===n?e.removeAttribute(a):e.setAttribute(a,""+n)}}else if(i.mustUseProperty){var o=i.propertyName;if(null===n){var s=i.type;e[o]=3!==s&&""}else e[o]=n}else{var u=i.attributeName,l=i.attributeNamespace;if(null===n)e.removeAttribute(u);else{var c,h=i.type;3===h||4===h&&!0===n?c="":(c=""+n,i.sanitizeURL&&Ge(c.toString())),l?e.setAttributeNS(l,u,c):e.setAttribute(u,c)}}}function Ye(e){return""+e}function Ke(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var Je,$e={checkPropTypes:null};Je=s.ReactDebugCurrentFrame;var Qe={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},et={value:function(e,t,n){return Qe[e.type]||e.onChange||e.readOnly||e.disabled||null==e[t]?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return e.onChange||e.readOnly||e.disabled||null==e[t]?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}};function tt(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function nt(e){return e._valueTracker}function rt(e){nt(e)||(e._valueTracker=function(e){var t=tt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}}}}(e))}function it(e){if(!e)return!1;var t=nt(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=tt(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}$e.checkPropTypes=function(e,t){a(et,t,"prop",e,Je.getStackAddendum)};var at=!1,ot=!1,st=!1,ut=!1;function lt(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function ct(e,t){var n=e,i=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:n._wrapperState.initialChecked})}function ht(e,t){$e.checkPropTypes("input",t),void 0===t.checked||void 0===t.defaultChecked||ot||(l("%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",$()||"A component",t.type),ot=!0),void 0===t.value||void 0===t.defaultValue||at||(l("%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",$()||"A component",t.type),at=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Ke(null!=t.value?t.value:r),controlled:lt(t)}}function pt(e,t){var n=e,r=t.checked;null!=r&&Xe(n,"checked",r,!1)}function ft(e,t){var n=e,r=lt(t);n._wrapperState.controlled||!r||ut||(l("A component is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",t.type),ut=!0),!n._wrapperState.controlled||r||st||(l("A component is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",t.type),st=!0),pt(e,t);var i=Ke(t.value),a=t.type;if(null!=i)"number"===a?(0===i&&""===n.value||n.value!=i)&&(n.value=Ye(i)):n.value!==Ye(i)&&(n.value=Ye(i));else if("submit"===a||"reset"===a)return void n.removeAttribute("value");t.hasOwnProperty("value")?mt(n,t.type,i):t.hasOwnProperty("defaultValue")&&mt(n,t.type,Ke(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function dt(e,t,n){var r=e;if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(("submit"===i||"reset"===i)&&(void 0===t.value||null===t.value))return;var a=Ye(r._wrapperState.initialValue);n||a!==r.value&&(r.value=a),r.defaultValue=a}var o=r.name;""!==o&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!!r._wrapperState.initialChecked,""!==o&&(r.name=o)}function vt(e,t){var n=e;ft(n,t),function(e,t){var n=t.name;if("radio"===t.type&&null!=n){for(var r=e;r.parentNode;)r=r.parentNode;for(var i=r.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==e&&o.form===e.form){var s=xa(o);if(!s)throw Error("ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");it(o),ft(o,s)}}}}(n,t)}function mt(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=Ye(e._wrapperState.initialValue):e.defaultValue!==Ye(n)&&(e.defaultValue=Ye(n)))}var yt,gt=!1,bt=!1;function _t(t,n){"object"==typeof n.children&&null!==n.children&&e.Children.forEach(n.children,(function(e){null!=e&&"string"!=typeof e&&"number"!=typeof e&&"string"==typeof e.type&&(bt||(bt=!0,l("Only strings and numbers are supported as <option> children.")))})),null==n.selected||gt||(l("Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),gt=!0)}function xt(t,n){var i=r({children:void 0},n),a=function(t){var n="";return e.Children.forEach(t,(function(e){null!=e&&(n+=e)})),n}(n.children);return a&&(i.children=a),i}function wt(){var e=$();return e?"\n\nCheck the render method of `"+e+"`.":""}yt=!1;var kt=["value","defaultValue"];function Ot(e,t,n,r){var i=e.options;if(t){for(var a=n,o={},s=0;s<a.length;s++)o["$"+a[s]]=!0;for(var u=0;u<i.length;u++){var l=o.hasOwnProperty("$"+i[u].value);i[u].selected!==l&&(i[u].selected=l),l&&r&&(i[u].defaultSelected=!0)}}else{for(var c=Ye(Ke(n)),h=null,p=0;p<i.length;p++){if(i[p].value===c)return i[p].selected=!0,void(r&&(i[p].defaultSelected=!0));null!==h||i[p].disabled||(h=i[p])}null!==h&&(h.selected=!0)}}function Et(e,t){return r({},t,{value:void 0})}function St(e,t){var n=e;!function(e){$e.checkPropTypes("select",e);for(var t=0;t<kt.length;t++){var n=kt[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?l("The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,wt()):!e.multiple&&r&&l("The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,wt())}}}(t),n._wrapperState={wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||yt||(l("Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),yt=!0)}var Tt=!1;function Pt(e,t){var n=e;if(null!=t.dangerouslySetInnerHTML)throw Error("`dangerouslySetInnerHTML` does not make sense on <textarea>.");return r({},t,{value:void 0,defaultValue:void 0,children:Ye(n._wrapperState.initialValue)})}function jt(e,t){var n=e;$e.checkPropTypes("textarea",t),void 0===t.value||void 0===t.defaultValue||Tt||(l("%s contains a textarea with both value and defaultValue props. Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components",$()||"A component"),Tt=!0);var r=t.value;if(null==r){var i=t.children,a=t.defaultValue;if(null!=i){if(l("Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=a)throw Error("If you supply `defaultValue` on a <textarea>, do not pass children.");if(Array.isArray(i)){if(!(i.length<=1))throw Error("<textarea> can only have at most one child.");i=i[0]}a=i}null==a&&(a=""),r=a}n._wrapperState={initialValue:Ke(r)}}function Ct(e,t){var n=e,r=Ke(t.value),i=Ke(t.defaultValue);if(null!=r){var a=Ye(r);a!==n.value&&(n.value=a),null==t.defaultValue&&n.defaultValue!==a&&(n.defaultValue=a)}null!=i&&(n.defaultValue=Ye(i))}function At(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&""!==r&&null!==r&&(n.value=r)}var Mt="http://www.w3.org/1999/xhtml",It="http://www.w3.org/2000/svg",Rt=Mt,Lt=It;function zt(e){switch(e){case"svg":return It;case"math":return"http://www.w3.org/1998/Math/MathML";default:return Mt}}function Dt(e,t){return null==e||e===Mt?zt(t):e===It&&"foreignObject"===t?Mt:e}var Ft,Bt,Nt=(Bt=function(e,t){if(e.namespaceURI!==Lt||"innerHTML"in e)e.innerHTML=t;else{(Ft=Ft||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>";for(var n=Ft.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return Bt(e,t,n,r)}))}:Bt),Ut=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};function Vt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Wt={animationend:Vt("Animation","AnimationEnd"),animationiteration:Vt("Animation","AnimationIteration"),animationstart:Vt("Animation","AnimationStart"),transitionend:Vt("Transition","TransitionEnd")},qt={},Gt={};function Ht(e){if(qt[e])return qt[e];if(!Wt[e])return e;var t=Wt[e];for(var n in t)if(t.hasOwnProperty(n)&&n in Gt)return qt[e]=t[n];return e}de&&(Gt=document.createElement("div").style,"AnimationEvent"in window||(delete Wt.animationend.animation,delete Wt.animationiteration.animation,delete Wt.animationstart.animation),"TransitionEvent"in window||delete Wt.transitionend.transition);var Zt=Ht("animationend"),Xt=Ht("animationiteration"),Yt=Ht("animationstart"),Kt=Ht("transitionend"),Jt=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];var $t=new("function"==typeof WeakMap?WeakMap:Map);function Qt(e){var t=$t.get(e);return void 0===t&&(t=new Map,$t.set(e,t)),t}function en(e){return e._reactInternalFiber}var tn=s.ReactCurrentOwner;function nn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{var r=t;do{0!=(1026&(t=r).effectTag)&&(n=t.return),r=t.return}while(r)}return 3===t.tag?n:null}function rn(e){if(13===e.tag){var t=e.memoizedState;if(null===t){var n=e.alternate;null!==n&&(t=n.memoizedState)}if(null!==t)return t.dehydrated}return null}function an(e){return 3===e.tag?e.stateNode.containerInfo:null}function on(e){if(nn(e)!==e)throw Error("Unable to find node on an unmounted component.")}function sn(e){var t=e.alternate;if(!t){var n=nn(e);if(null===n)throw Error("Unable to find node on an unmounted component.");return n!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(null===a)break;var o=a.alternate;if(null===o){var s=a.return;if(null!==s){r=i=s;continue}break}if(a.child===o.child){for(var u=a.child;u;){if(u===r)return on(a),e;if(u===i)return on(a),t;u=u.sibling}throw Error("Unable to find node on an unmounted component.")}if(r.return!==i.return)r=a,i=o;else{for(var l=!1,c=a.child;c;){if(c===r){l=!0,r=a,i=o;break}if(c===i){l=!0,i=a,r=o;break}c=c.sibling}if(!l){for(c=o.child;c;){if(c===r){l=!0,r=o,i=a;break}if(c===i){l=!0,i=o,r=a;break}c=c.sibling}if(!l)throw Error("Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}if(r.alternate!==i)throw Error("Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}if(3!==r.tag)throw Error("Unable to find node on an unmounted component.");return r.stateNode.current===r?e:t}function un(e){var t=sn(e);if(!t)return null;for(var n=t;;){if(5===n.tag||6===n.tag)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}function ln(e,t){if(null==t)throw Error("accumulateInto(...): Accumulated items must not be null or undefined.");return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function cn(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var hn=null,pn=function(e){e&&(!function(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(w(e),Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)S(e,t[r],n[r]);else t&&S(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null}(e),e.isPersistent()||e.constructor.release(e))},fn=function(e){return pn(e)};function dn(e){null!==e&&(hn=ln(hn,e));var t=hn;if(hn=null,t){if(cn(t,fn),hn)throw Error("processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.");!function(){if(m){var e=y;throw m=!1,y=null,e}}()}}function vn(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function mn(e){if(!de)return!1;var t="on"+e,n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"==typeof r[t]}return n}var yn,gn,bn,_n=[];function xn(e){if(3===e.tag)return e.stateNode.containerInfo;for(;e.return;)e=e.return;return 3!==e.tag?null:e.stateNode.containerInfo}function wn(e,t,n,r,i){dn(function(e,t,n,r,i){for(var a=null,o=0;o<ue.length;o++){var s=ue[o];if(s){var u=s.extractEvents(e,t,n,r,i);u&&(a=ln(a,u))}}return a}(e,t,n,r,i))}function kn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=xn(n);if(!r)break;var i=n.tag;5!==i&&6!==i||e.ancestors.push(n),n=ga(r)}while(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=vn(e.nativeEvent),s=e.topLevelType,u=e.nativeEvent,l=e.eventSystemFlags;0===a&&(l|=64),wn(s,t,u,o,l)}}function On(e,t,n,r){var i,a=function(e,t,n,r){if(_n.length){var i=_n.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}(e,n,r,t);try{!function(e,t,n){if(Se)return e(t,n);Se=!0;try{Oe(e,t,n)}finally{Se=!1,Te()}}(kn,a)}finally{(i=a).topLevelType=null,i.nativeEvent=null,i.targetInst=null,i.ancestors.length=0,_n.length<10&&_n.push(i)}}function En(e,t,n){if(!n.has(e)){switch(e){case"scroll":or("scroll",t);break;case"focus":case"blur":or("focus",t),or("blur",t),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":mn(e)&&or(e,t);break;case"invalid":case"submit":case"reset":break;default:-1!==Jt.indexOf(e)||ar(e,t)}n.set(e,null)}}var Sn=!1,Tn=[],Pn=null,jn=null,Cn=null,An=new Map,Mn=new Map,In=[];var Rn=["mousedown","mouseup","touchcancel","touchend","touchstart","auxclick","dblclick","pointercancel","pointerdown","pointerup","dragend","dragstart","drop","compositionend","compositionstart","keydown","keypress","keyup","input","textInput","close","cancel","copy","cut","paste","click","change","contextmenu","reset","submit"],Ln=["focus","blur","dragenter","dragleave","mouseover","mouseout","pointerover","pointerout","gotpointercapture","lostpointercapture"];function zn(e){return Rn.indexOf(e)>-1}function Dn(e,t,n){En(e,t,n)}function Fn(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Bn(e,t,n,r,i){var a=Fn(e,t,n,r,i);Tn.push(a)}function Nn(e,t){switch(e){case"focus":case"blur":Pn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":var n=t.pointerId;An.delete(n);break;case"gotpointercapture":case"lostpointercapture":var r=t.pointerId;Mn.delete(r)}}function Un(e,t,n,r,i,a){if(null===e||e.nativeEvent!==a){var o=Fn(t,n,r,i,a);if(null!==t){var s=ba(t);null!==s&&gn(s)}return o}return e.eventSystemFlags|=r,e}function Vn(e){var t=ga(e.target);if(null!==t){var n=nn(t);if(null!==n){var r=n.tag;if(13===r){var a=rn(n);if(null!==a)return e.blockedOn=a,void i.unstable_runWithPriority(e.priority,(function(){bn(n)}))}else if(3===r){if(n.stateNode.hydrate)return void(e.blockedOn=an(n))}}}e.blockedOn=null}function Wn(e){if(null!==e.blockedOn)return!1;var t=hr(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=ba(t);return null!==n&&gn(n),e.blockedOn=t,!1}return!0}function qn(e,t,n){Wn(e)&&n.delete(t)}function Gn(){for(Sn=!1;Tn.length>0;){var e=Tn[0];if(null!==e.blockedOn){var t=ba(e.blockedOn);null!==t&&yn(t);break}var n=hr(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==n?e.blockedOn=n:Tn.shift()}null!==Pn&&Wn(Pn)&&(Pn=null),null!==jn&&Wn(jn)&&(jn=null),null!==Cn&&Wn(Cn)&&(Cn=null),An.forEach(qn),Mn.forEach(qn)}function Hn(e,t){e.blockedOn===t&&(e.blockedOn=null,Sn||(Sn=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gn)))}function Zn(e){if(Tn.length>0){Hn(Tn[0],e);for(var t=1;t<Tn.length;t++){var n=Tn[t];n.blockedOn===e&&(n.blockedOn=null)}}null!==Pn&&Hn(Pn,e),null!==jn&&Hn(jn,e),null!==Cn&&Hn(Cn,e);var r=function(t){return Hn(t,e)};An.forEach(r),Mn.forEach(r);for(var i=0;i<In.length;i++){var a=In[i];a.blockedOn===e&&(a.blockedOn=null)}for(;In.length>0;){var o=In[0];if(null!==o.blockedOn)break;Vn(o),null===o.blockedOn&&In.shift()}}var Xn={},Yn=new Map,Kn=new Map,Jn=["change","selectionchange","textInput","compositionstart","compositionend","compositionupdate"],$n=["drag","drag","dragenter","dragEnter","dragexit","dragExit","dragleave","dragLeave","dragover","dragOver","mousemove","mouseMove","mouseout","mouseOut","mouseover","mouseOver","pointermove","pointerMove","pointerout","pointerOut","pointerover","pointerOver","scroll","scroll","toggle","toggle","touchmove","touchMove","wheel","wheel"],Qn=["abort","abort",Zt,"animationEnd",Xt,"animationIteration",Yt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Kt,"transitionEnd","waiting","waiting"];function er(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],a="on"+(i[0].toUpperCase()+i.slice(1)),o={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[r],eventPriority:t};Kn.set(r,t),Yn.set(r,o),Xn[i]=o}}er(["blur","blur","cancel","cancel","click","click","close","close","contextmenu","contextMenu","copy","copy","cut","cut","auxclick","auxClick","dblclick","doubleClick","dragend","dragEnd","dragstart","dragStart","drop","drop","focus","focus","input","input","invalid","invalid","keydown","keyDown","keypress","keyPress","keyup","keyUp","mousedown","mouseDown","mouseup","mouseUp","paste","paste","pause","pause","play","play","pointercancel","pointerCancel","pointerdown","pointerDown","pointerup","pointerUp","ratechange","rateChange","reset","reset","seeked","seeked","submit","submit","touchcancel","touchCancel","touchend","touchEnd","touchstart","touchStart","volumechange","volumeChange"],0),er($n,1),er(Qn,2),function(e,t){for(var n=0;n<e.length;n++)Kn.set(e[n],t)}(Jn,0);var tr=i.unstable_UserBlockingPriority,nr=i.unstable_runWithPriority,rr=!0;function ir(e){rr=!!e}function ar(e,t){sr(t,e,!1)}function or(e,t){sr(t,e,!0)}function sr(e,t,n){var r;switch(function(e){var t=Kn.get(e);return void 0===t?2:t}(t)){case 0:r=ur.bind(null,t,1,e);break;case 1:r=lr.bind(null,t,1,e);break;case 2:default:r=cr.bind(null,t,1,e)}var i=t;n?function(e,t,n){e.addEventListener(t,n,!0)}(e,i,r):function(e,t,n){e.addEventListener(t,n,!1)}(e,i,r)}function ur(e,t,n,r){r.timeStamp,Ee||ke(),function(e,t,n,r,i){var a=Ee;Ee=!0;try{we(e,t,n,r,i)}finally{(Ee=a)||Te()}}(cr,e,t,n,r)}function lr(e,t,n,r){nr(tr,cr.bind(null,e,t,n,r))}function cr(e,t,n,r){if(rr)if(Tn.length>0&&zn(e))Bn(null,e,t,n,r);else{var i=hr(e,t,n,r);null!==i?zn(e)?Bn(i,e,t,n,r):function(e,t,n,r,i){switch(t){case"focus":return Pn=Un(Pn,e,t,n,r,i),!0;case"dragenter":return jn=Un(jn,e,t,n,r,i),!0;case"mouseover":return Cn=Un(Cn,e,t,n,r,i),!0;case"pointerover":var a=i,o=a.pointerId;return An.set(o,Un(An.get(o)||null,e,t,n,r,a)),!0;case"gotpointercapture":var s=i,u=s.pointerId;return Mn.set(u,Un(Mn.get(u)||null,e,t,n,r,s)),!0}return!1}(i,e,t,n,r)||(Nn(e,r),On(e,t,r,null)):Nn(e,r)}}function hr(e,t,n,r){var i=ga(vn(r));if(null!==i){var a=nn(i);if(null===a)i=null;else{var o=a.tag;if(13===o){var s=rn(a);if(null!==s)return s;i=null}else if(3===o){if(a.stateNode.hydrate)return an(a);i=null}else a!==i&&(i=null)}}return On(e,t,r,i),null}var pr={animation:["animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction"],background:["backgroundAttachment","backgroundClip","backgroundColor","backgroundImage","backgroundOrigin","backgroundPositionX","backgroundPositionY","backgroundRepeat","backgroundSize"],backgroundPosition:["backgroundPositionX","backgroundPositionY"],border:["borderBottomColor","borderBottomStyle","borderBottomWidth","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"],borderBlockEnd:["borderBlockEndColor","borderBlockEndStyle","borderBlockEndWidth"],borderBlockStart:["borderBlockStartColor","borderBlockStartStyle","borderBlockStartWidth"],borderBottom:["borderBottomColor","borderBottomStyle","borderBottomWidth"],borderColor:["borderBottomColor","borderLeftColor","borderRightColor","borderTopColor"],borderImage:["borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth"],borderInlineEnd:["borderInlineEndColor","borderInlineEndStyle","borderInlineEndWidth"],borderInlineStart:["borderInlineStartColor","borderInlineStartStyle","borderInlineStartWidth"],borderLeft:["borderLeftColor","borderLeftStyle","borderLeftWidth"],borderRadius:["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"],borderRight:["borderRightColor","borderRightStyle","borderRightWidth"],borderStyle:["borderBottomStyle","borderLeftStyle","borderRightStyle","borderTopStyle"],borderTop:["borderTopColor","borderTopStyle","borderTopWidth"],borderWidth:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],columnRule:["columnRuleColor","columnRuleStyle","columnRuleWidth"],columns:["columnCount","columnWidth"],flex:["flexBasis","flexGrow","flexShrink"],flexFlow:["flexDirection","flexWrap"],font:["fontFamily","fontFeatureSettings","fontKerning","fontLanguageOverride","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","lineHeight"],fontVariant:["fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition"],gap:["columnGap","rowGap"],grid:["gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],gridArea:["gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart"],gridColumn:["gridColumnEnd","gridColumnStart"],gridColumnGap:["columnGap"],gridGap:["columnGap","rowGap"],gridRow:["gridRowEnd","gridRowStart"],gridRowGap:["rowGap"],gridTemplate:["gridTemplateAreas","gridTemplateColumns","gridTemplateRows"],listStyle:["listStyleImage","listStylePosition","listStyleType"],margin:["marginBottom","marginLeft","marginRight","marginTop"],marker:["markerEnd","markerMid","markerStart"],mask:["maskClip","maskComposite","maskImage","maskMode","maskOrigin","maskPositionX","maskPositionY","maskRepeat","maskSize"],maskPosition:["maskPositionX","maskPositionY"],outline:["outlineColor","outlineStyle","outlineWidth"],overflow:["overflowX","overflowY"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"],placeContent:["alignContent","justifyContent"],placeItems:["alignItems","justifyItems"],placeSelf:["alignSelf","justifySelf"],textDecoration:["textDecorationColor","textDecorationLine","textDecorationStyle"],textEmphasis:["textEmphasisColor","textEmphasisStyle"],transition:["transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction"],wordWrap:["overflowWrap"]},fr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var dr=["Webkit","ms","Moz","O"];function vr(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fr.hasOwnProperty(e)&&fr[e]?(""+t).trim():t+"px"}Object.keys(fr).forEach((function(e){dr.forEach((function(t){fr[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=fr[e]}))}));var mr=/([A-Z])/g,yr=/^ms-/;var gr=/^(?:webkit|moz|o)[A-Z]/,br=/^-ms-/,_r=/-(.)/g,xr=/;\s*$/,wr={},kr={},Or=!1,Er=!1,Sr=function(e){wr.hasOwnProperty(e)&&wr[e]||(wr[e]=!0,l("Unsupported style property %s. Did you mean %s?",e,e.replace(br,"ms-").replace(_r,(function(e,t){return t.toUpperCase()}))))},Tr=function(e,t){e.indexOf("-")>-1?Sr(e):gr.test(e)?function(e){wr.hasOwnProperty(e)&&wr[e]||(wr[e]=!0,l("Unsupported vendor-prefixed style property %s. Did you mean %s?",e,e.charAt(0).toUpperCase()+e.slice(1)))}(e):xr.test(t)&&function(e,t){kr.hasOwnProperty(t)&&kr[t]||(kr[t]=!0,l('Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.',e,t.replace(xr,"")))}(e,t),"number"==typeof t&&(isNaN(t)?function(e,t){Or||(Or=!0,l("`NaN` is an invalid value for the `%s` css style property.",e))}(e):isFinite(t)||function(e,t){Er||(Er=!0,l("`Infinity` is an invalid value for the `%s` css style property.",e))}(e))};function Pr(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i){var a=0===r.indexOf("--");t+=n+(a?r:r.replace(mr,"-$1").toLowerCase().replace(yr,"-ms-"))+":",t+=vr(r,i,a),n=";"}}return t||null}function jr(e,t){var n=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--");i||Tr(r,t[r]);var a=vr(r,t[r],i);"float"===r&&(r="cssFloat"),i?n.setProperty(r,a):n[r]=a}}function Cr(e){var t={};for(var n in e)for(var r=pr[n]||[n],i=0;i<r.length;i++)t[r[i]]=n;return t}var Ar=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Mr=null;function Ir(e,t){if(t){if(Ar[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(e+" is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`."+Mr.getStackAddendum());if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error("`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")}if(!t.suppressContentEditableWarning&&t.contentEditable&&null!=t.children&&l("A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),null!=t.style&&"object"!=typeof t.style)throw Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX."+Mr.getStackAddendum())}}function Rr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}Mr=s.ReactDebugCurrentFrame;var Lr={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",download:"download",draggable:"draggable",enctype:"encType",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},zr={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Dr={},Fr=new RegExp("^(aria)-["+je+"]*$"),Br=new RegExp("^(aria)[A-Z]["+je+"]*$"),Nr=Object.prototype.hasOwnProperty;function Ur(e,t){if(Nr.call(Dr,t)&&Dr[t])return!0;if(Br.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=zr.hasOwnProperty(n)?n:null;if(null==r)return l("Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.",t),Dr[t]=!0,!0;if(t!==r)return l("Invalid ARIA attribute `%s`. Did you mean `%s`?",t,r),Dr[t]=!0,!0}if(Fr.test(t)){var i=t.toLowerCase(),a=zr.hasOwnProperty(i)?i:null;if(null==a)return Dr[t]=!0,!1;if(t!==a)return l("Unknown ARIA attribute `%s`. Did you mean `%s`?",t,a),Dr[t]=!0,!0}return!0}function Vr(e,t){Rr(e,t)||function(e,t){var n=[];for(var r in t){Ur(0,r)||n.push(r)}var i=n.map((function(e){return"`"+e+"`"})).join(", ");1===n.length?l("Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop",i,e):n.length>1&&l("Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop",i,e)}(e,t)}var Wr=!1;var qr,Gr={},Hr=Object.prototype.hasOwnProperty,Zr=/^on./,Xr=/^on[^A-Z]/,Yr=new RegExp("^(aria)-["+je+"]*$"),Kr=new RegExp("^(aria)[A-Z]["+je+"]*$");qr=function(e,t,n,r){if(Hr.call(Gr,t)&&Gr[t])return!0;var i=t.toLowerCase();if("onfocusin"===i||"onfocusout"===i)return l("React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),Gr[t]=!0,!0;if(r){if(ce.hasOwnProperty(t))return!0;var a=pe.hasOwnProperty(i)?pe[i]:null;if(null!=a)return l("Invalid event handler property `%s`. Did you mean `%s`?",t,a),Gr[t]=!0,!0;if(Zr.test(t))return l("Unknown event handler property `%s`. It will be ignored.",t),Gr[t]=!0,!0}else if(Zr.test(t))return Xr.test(t)&&l("Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.",t),Gr[t]=!0,!0;if(Yr.test(t)||Kr.test(t))return!0;if("innerhtml"===i)return l("Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),Gr[t]=!0,!0;if("aria"===i)return l("The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),Gr[t]=!0,!0;if("is"===i&&null!=n&&"string"!=typeof n)return l("Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.",typeof n),Gr[t]=!0,!0;if("number"==typeof n&&isNaN(n))return l("Received NaN for the `%s` attribute. If this is expected, cast the value to a string.",t),Gr[t]=!0,!0;var o=Fe(t),s=null!==o&&0===o.type;if(Lr.hasOwnProperty(i)){var u=Lr[i];if(u!==t)return l("Invalid DOM property `%s`. Did you mean `%s`?",t,u),Gr[t]=!0,!0}else if(!s&&t!==i)return l("React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.",t,i),Gr[t]=!0,!0;return"boolean"==typeof n&&ze(t,n,o,!1)?(n?l('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.',n,t,t,n,t):l('Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.',n,t,t,n,t,t,t),Gr[t]=!0,!0):!!s||(ze(t,n,o,!1)?(Gr[t]=!0,!1):("false"!==n&&"true"!==n||null===o||3!==o.type||(l("Received the string `%s` for the boolean attribute `%s`. %s Did you mean %s={%s}?",n,t,"false"===n?"The browser will interpret it as a truthy value.":'Although this works, it will not work as expected if you pass the string "false".',t,n),Gr[t]=!0),!0))};function Jr(e,t,n){Rr(e,t)||function(e,t,n){var r=[];for(var i in t){qr(0,i,t[i],n)||r.push(i)}var a=r.map((function(e){return"`"+e+"`"})).join(", ");1===r.length?l("Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://fb.me/react-attribute-behavior",a,e):r.length>1&&l("Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://fb.me/react-attribute-behavior",a,e)}(e,t,n)}var $r,Qr,ei,ti,ni,ri,ii,ai,oi,si,ui=!1,li=!1,ci=Rt;$r={time:!0,dialog:!0,webview:!0},ei=function(e,t){Vr(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||Wr||(Wr=!0,"select"===e&&t.multiple?l("`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.",e):l("`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.",e))}(e,t),Jr(e,t,!0)},ai=de&&!document.documentMode;var hi=/\r\n?/g,pi=/\u0000|\uFFFD/g;function fi(e,t){!function(e,t){for(var n=Qt(t),r=he[e],i=0;i<r.length;i++){En(r[i],t,n)}}(t,9===e.nodeType||11===e.nodeType?e:e.ownerDocument)}function di(e){return 9===e.nodeType?e:e.ownerDocument}function vi(){}function mi(e){e.onclick=vi}function yi(e,t,n,r){var i,a=Rr(t,n);switch(ei(t,n),a&&!li&&e.shadyRoot&&(l("%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",$()||"A component"),li=!0),t){case"iframe":case"object":case"embed":ar("load",e),i=n;break;case"video":case"audio":for(var o=0;o<Jt.length;o++)ar(Jt[o],e);i=n;break;case"source":ar("error",e),i=n;break;case"img":case"image":case"link":ar("error",e),ar("load",e),i=n;break;case"form":ar("reset",e),ar("submit",e),i=n;break;case"details":ar("toggle",e),i=n;break;case"input":ht(e,n),i=ct(e,n),ar("invalid",e),fi(r,"onChange");break;case"option":_t(0,n),i=xt(0,n);break;case"select":St(e,n),i=Et(0,n),ar("invalid",e),fi(r,"onChange");break;case"textarea":jt(e,n),i=Pt(e,n),ar("invalid",e),fi(r,"onChange");break;default:i=n}switch(Ir(t,i),function(e,t,n,r,i){for(var a in r)if(r.hasOwnProperty(a)){var o=r[a];if("style"===a)o&&Object.freeze(o),jr(t,o);else if("dangerouslySetInnerHTML"===a){var s=o?o.__html:void 0;null!=s&&Nt(t,s)}else if("children"===a){if("string"==typeof o)("textarea"!==e||""!==o)&&Ut(t,o);else"number"==typeof o&&Ut(t,""+o)}else"suppressContentEditableWarning"===a||"suppressHydrationWarning"===a||"autoFocus"===a||(ce.hasOwnProperty(a)?null!=o&&("function"!=typeof o&&ii(a,o),fi(n,a)):null!=o&&Xe(t,a,o,i))}}(t,e,r,i,a),t){case"input":rt(e),dt(e,n,!1);break;case"textarea":rt(e),At(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",Ye(Ke(t.value)))}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?Ot(n,!!t.multiple,r,!1):null!=t.defaultValue&&Ot(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof i.onClick&&mi(e)}}function gi(e,t,n,r,i){ei(t,r);var a,o,s,u,c=null;switch(t){case"input":a=ct(e,n),o=ct(e,r),c=[];break;case"option":a=xt(0,n),o=xt(0,r),c=[];break;case"select":a=Et(0,n),o=Et(0,r),c=[];break;case"textarea":a=Pt(e,n),o=Pt(e,r),c=[];break;default:o=r,"function"!=typeof(a=n).onClick&&"function"==typeof o.onClick&&mi(e)}Ir(t,o);var h=null;for(s in a)if(!o.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s){var p=a[s];for(u in p)p.hasOwnProperty(u)&&(h||(h={}),h[u]="")}else"dangerouslySetInnerHTML"===s||"children"===s||"suppressContentEditableWarning"===s||"suppressHydrationWarning"===s||"autoFocus"===s||(ce.hasOwnProperty(s)?c||(c=[]):(c=c||[]).push(s,null));for(s in o){var f=o[s],d=null!=a?a[s]:void 0;if(o.hasOwnProperty(s)&&f!==d&&(null!=f||null!=d))if("style"===s)if(f&&Object.freeze(f),d){for(u in d)!d.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(h||(h={}),h[u]="");for(u in f)f.hasOwnProperty(u)&&d[u]!==f[u]&&(h||(h={}),h[u]=f[u])}else h||(c||(c=[]),c.push(s,h)),h=f;else if("dangerouslySetInnerHTML"===s){var v=f?f.__html:void 0,m=d?d.__html:void 0;null!=v&&m!==v&&(c=c||[]).push(s,v)}else"children"===s?d===f||"string"!=typeof f&&"number"!=typeof f||(c=c||[]).push(s,""+f):"suppressContentEditableWarning"===s||"suppressHydrationWarning"===s||(ce.hasOwnProperty(s)?(null!=f&&("function"!=typeof f&&ii(s,f),fi(i,s)),c||d===f||(c=[])):(c=c||[]).push(s,f))}return h&&(!function(e,t){if(t){var n,r=Cr(e),i=Cr(t),a={};for(var o in r){var s=r[o],u=i[o];if(u&&s!==u){var c=s+","+u;if(a[c])continue;a[c]=!0,l("%s a style property during rerender (%s) when a conflicting property is set (%s) can lead to styling bugs. To avoid this, don't mix shorthand and non-shorthand properties for the same value; instead, replace the shorthand with separate values.",null==(n=e[s])||"boolean"==typeof n||""===n?"Removing":"Updating",s,u)}}}}(h,o.style),(c=c||[]).push("style",h)),c}function bi(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&pt(e,i);Rr(n,r);switch(function(e,t,n,r){for(var i=0;i<t.length;i+=2){var a=t[i],o=t[i+1];"style"===a?jr(e,o):"dangerouslySetInnerHTML"===a?Nt(e,o):"children"===a?Ut(e,o):Xe(e,a,o,r)}}(e,t,0,Rr(n,i)),n){case"input":ft(e,i);break;case"textarea":Ct(e,i);break;case"select":!function(e,t){var n=e,r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var i=t.value;null!=i?Ot(n,!!t.multiple,i,!1):r!==!!t.multiple&&(null!=t.defaultValue?Ot(n,!!t.multiple,t.defaultValue,!0):Ot(n,!!t.multiple,t.multiple?[]:"",!1))}(e,i)}}function _i(e,t){ti(e.nodeValue,t)}function xi(e,t){ui||(ui=!0,l("Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function wi(e,t){ui||(ui=!0,l('Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function ki(e,t,n){ui||(ui=!0,l("Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function Oi(e,t){""!==t&&(ui||(ui=!0,l('Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}function Ei(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Si(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ti(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function Pi(e,t){for(var n=Si(e),r=0,i=0;n;){if(3===n.nodeType){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}n=Si(Ti(n))}}function ji(e){var t=e.ownerDocument,n=t&&t.defaultView||window,r=n.getSelection&&n.getSelection();if(!r||0===r.rangeCount)return null;var i=r.anchorNode,a=r.anchorOffset,o=r.focusNode,s=r.focusOffset;try{i.nodeType,o.nodeType}catch(e){return null}return function(e,t,n,r,i){var a=0,o=-1,s=-1,u=0,l=0,c=e,h=null;e:for(;;){for(var p=null;c!==t||0!==n&&3!==c.nodeType||(o=a+n),c!==r||0!==i&&3!==c.nodeType||(s=a+i),3===c.nodeType&&(a+=c.nodeValue.length),null!==(p=c.firstChild);)h=c,c=p;for(;;){if(c===e)break e;if(h===t&&++u===n&&(o=a),h===r&&++l===i&&(s=a),null!==(p=c.nextSibling))break;h=(c=h).parentNode}c=p}if(-1===o||-1===s)return null;return{start:o,end:s}}(e,i,a,o,s)}function Ci(e){return e&&3===e.nodeType}function Ai(e){return e&&e.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||!Ci(t)&&(Ci(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(e.ownerDocument.documentElement,e)}function Mi(e){try{return"string"==typeof e.contentWindow.location.href}catch(e){return!1}}function Ii(){for(var e=window,t=Ei();t instanceof e.HTMLIFrameElement;){if(!Mi(t))return t;t=Ei((e=t.contentWindow).document)}return t}function Ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function Li(e){var t=Ii(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&Ai(n)){null!==r&&Ri(n)&&function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n);"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):function(e,t){var n=e.ownerDocument||document,r=n&&n.defaultView||window;if(r.getSelection){var i=r.getSelection(),a=e.textContent.length,o=Math.min(t.start,a),s=void 0===t.end?o:Math.min(t.end,a);if(!i.extend&&o>s){var u=s;s=o,o=u}var l=Pi(e,o),c=Pi(e,s);if(l&&c){if(1===i.rangeCount&&i.anchorNode===l.node&&i.anchorOffset===l.offset&&i.focusNode===c.node&&i.focusOffset===c.offset)return;var h=n.createRange();h.setStart(l.node,l.offset),i.removeAllRanges(),o>s?(i.addRange(h),i.extend(c.node,c.offset)):(h.setEnd(c.node,c.offset),i.addRange(h))}}}(e,t)}(n,r);for(var i=[],a=n;a=a.parentNode;)1===a.nodeType&&i.push({element:a,left:a.scrollLeft,top:a.scrollTop});"function"==typeof n.focus&&n.focus();for(var o=0;o<i.length;o++){var s=i[o];s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}}oi=function(e){return("string"==typeof e?e:""+e).replace(hi,"\n").replace(pi,"")},ti=function(e,t){if(!ui){var n=oi(t),r=oi(e);r!==n&&(ui=!0,l('Text content did not match. Server: "%s" Client: "%s"',r,n))}},ni=function(e,t,n){if(!ui){var r=oi(n),i=oi(t);i!==r&&(ui=!0,l("Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(i),JSON.stringify(r)))}},ri=function(e){if(!ui){ui=!0;var t=[];e.forEach((function(e){t.push(e)})),l("Extra attributes from the server: %s",t)}},ii=function(e,t){!1===t?l("Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.",e,e,e):l("Expected `%s` listener to be a function, instead got a value of `%s` type.",e,typeof t)},si=function(e,t){var n=e.namespaceURI===ci?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var zi,Di,Fi=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Bi=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Ni=Bi.concat(["button"]),Ui=["dd","dt","li","option","optgroup","p","rp","rt"],Vi={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null};Di=function(e,t){var n=r({},e||Vi),i={tag:t};return-1!==Bi.indexOf(t)&&(n.aTagInScope=null,n.buttonTagInScope=null,n.nobrTagInScope=null),-1!==Ni.indexOf(t)&&(n.pTagInButtonScope=null),-1!==Fi.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(n.listItemTagAutoclosing=null,n.dlItemTagAutoclosing=null),n.current=i,"form"===t&&(n.formTag=i),"a"===t&&(n.aTagInScope=i),"button"===t&&(n.buttonTagInScope=i),"nobr"===t&&(n.nobrTagInScope=i),"p"===t&&(n.pTagInButtonScope=i),"li"===t&&(n.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(n.dlItemTagAutoclosing=i),n};var Wi={};zi=function(e,t,n){var r=(n=n||Vi).current,i=r&&r.tag;null!=t&&(null!=e&&l("validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var a=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e||"frameset"===e;case"frameset":return"frame"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===Ui.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frameset":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,i)?null:r,o=a?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),s=a||o;if(s){var u=s.tag,c=!!a+"|"+e+"|"+u+"|"+Q();if(!Wi[c]){Wi[c]=!0;var h=e,p="";if("#text"===e?/\S/.test(t)?h="Text nodes":(h="Whitespace text nodes",p=" Make sure you don't have any extra whitespace between tags on each line of your source code."):h="<"+e+">",a){var f="";"table"===u&&"tr"===e&&(f+=" Add a <tbody>, <thead> or <tfoot> to your code to match the DOM tree generated by the browser."),l("validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s",h,u,p,f)}else l("validateDOMNesting(...): %s cannot appear as a descendant of <%s>.",h,u)}}};var qi=null,Gi=null;function Hi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zi(e){var t,n;qi=rr,n=Ii(),Gi={activeElementDetached:null,focusedElem:n,selectionRange:Ri(n)?(t=n,("selectionStart"in t?{start:t.selectionStart,end:t.selectionEnd}:ji(t))||{start:0,end:0}):null},ir(!1)}function Xi(e,t,n,r,i){var a=r;if(zi(e,null,a.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var o=""+t.children,s=Di(a.ancestorInfo,e);zi(null,o,s)}var u=function(e,t,n,r){var i,a,o=di(n),s=r;if(s===ci&&(s=zt(e)),s===ci){if((i=Rr(e,t))||e===e.toLowerCase()||l("<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var u=o.createElement("div");u.innerHTML="<script><\/script>";var c=u.firstChild;a=u.removeChild(c)}else if("string"==typeof t.is)a=o.createElement(e,{is:t.is});else if(a=o.createElement(e),"select"===e){var h=a;t.multiple?h.multiple=!0:t.size&&(h.size=t.size)}}else a=o.createElementNS(s,e);return s===ci&&(i||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(a)||Object.prototype.hasOwnProperty.call($r,e)||($r[e]=!0,l("The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),a}(e,t,n,a.namespace);return va(i,u),wa(u,t),u}function Yi(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Ki(e,t){return!!t.hidden}function Ji(e,t,n,r){zi(null,e,n.ancestorInfo);var i=function(e,t){return di(t).createTextNode(e)}(e,t);return va(r,i),i}var $i="function"==typeof setTimeout?setTimeout:void 0,Qi="function"==typeof clearTimeout?clearTimeout:void 0;function ea(e){Ut(e,"")}function ta(e,t){e.removeChild(t)}function na(e){var t=(e=e).style;"function"==typeof t.setProperty?t.setProperty("display","none","important"):t.display="none"}function ra(e,t){e=e;var n=t.style,r=null!=n&&n.hasOwnProperty("display")?n.display:null;e.style.display=vr("display",r)}function ia(e,t){e.nodeValue=t}function aa(e){return"$!"===e.data}function oa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function sa(e){return oa(e.nextSibling)}function ua(e){return oa(e.firstChild)}function la(e,t,n,r,i,a){return va(a,e),wa(e,n),function(e,t,n,r,i){var a,o;switch(Qr=!0===n.suppressHydrationWarning,a=Rr(t,n),ei(t,n),a&&!li&&e.shadyRoot&&(l("%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",$()||"A component"),li=!0),t){case"iframe":case"object":case"embed":ar("load",e);break;case"video":case"audio":for(var s=0;s<Jt.length;s++)ar(Jt[s],e);break;case"source":ar("error",e);break;case"img":case"image":case"link":ar("error",e),ar("load",e);break;case"form":ar("reset",e),ar("submit",e);break;case"details":ar("toggle",e);break;case"input":ht(e,n),ar("invalid",e),fi(i,"onChange");break;case"option":_t(0,n);break;case"select":St(e,n),ar("invalid",e),fi(i,"onChange");break;case"textarea":jt(e,n),ar("invalid",e),fi(i,"onChange")}Ir(t,n),o=new Set;for(var u=e.attributes,c=0;c<u.length;c++){switch(u[c].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:o.add(u[c].name)}}var h,p=null;for(var f in n)if(n.hasOwnProperty(f)){var d=n[f];if("children"===f)"string"==typeof d?e.textContent!==d&&(Qr||ti(e.textContent,d),p=["children",d]):"number"==typeof d&&e.textContent!==""+d&&(Qr||ti(e.textContent,d),p=["children",""+d]);else if(ce.hasOwnProperty(f))null!=d&&("function"!=typeof d&&ii(f,d),fi(i,f));else if("boolean"==typeof a){var v=void 0,m=Fe(f);if(Qr);else if("suppressContentEditableWarning"===f||"suppressHydrationWarning"===f||"value"===f||"checked"===f||"selected"===f);else if("dangerouslySetInnerHTML"===f){var y=e.innerHTML,g=d?d.__html:void 0,b=si(e,null!=g?g:"");b!==y&&ni(f,y,b)}else if("style"===f){if(o.delete(f),ai){var _=Pr(d);_!==(v=e.getAttribute("style"))&&ni(f,v,_)}}else if(a)o.delete(f.toLowerCase()),d!==(v=Ze(e,f,d))&&ni(f,v,d);else if(!Le(f,m,a)&&!De(f,d,m,a)){var x=!1;if(null!==m)o.delete(m.attributeName),v=He(e,f,d,m);else{var w=r;if(w===ci&&(w=zt(t)),w===ci)o.delete(f.toLowerCase());else{var k=(h=void 0,h=f.toLowerCase(),Lr.hasOwnProperty(h)&&Lr[h]||null);null!==k&&k!==f&&(x=!0,o.delete(k)),o.delete(f)}v=Ze(e,f,d)}d===v||x||ni(f,v,d)}}}switch(o.size>0&&!Qr&&ri(o),t){case"input":rt(e),dt(e,n,!0);break;case"textarea":rt(e),At(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&mi(e)}return p}(e,t,n,i.namespace,r)}function ca(e){for(var t=e.previousSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===n)return t;n--}else"/$"===r&&n++}t=t.previousSibling}return null}var ha=Math.random().toString(36).slice(2),pa="__reactInternalInstance$"+ha,fa="__reactEventHandlers$"+ha,da="__reactContainere$"+ha;function va(e,t){t[pa]=e}function ma(e){e[da]=null}function ya(e){return!!e[da]}function ga(e){var t=e[pa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[da]||n[pa]){var r=t.alternate;if(null!==t.child||null!==r&&null!==r.child)for(var i=ca(e);null!==i;){var a=i[pa];if(a)return a;i=ca(i)}return t}n=(e=n).parentNode}return null}function ba(e){var t=e[pa]||e[da];return t&&(5===t.tag||6===t.tag||13===t.tag||3===t.tag)?t:null}function _a(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error("getNodeFromInstance: Invalid argument.")}function xa(e){return e[fa]||null}function wa(e,t){e[fa]=t}function ka(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Oa(e,t,n,r,i){for(var a=e&&t?function(e,t){for(var n=0,r=e;r;r=ka(r))n++;for(var i=0,a=t;a;a=ka(a))i++;for(;n-i>0;)e=ka(e),n--;for(;i-n>0;)t=ka(t),i--;for(var o=n;o--;){if(e===t||e===t.alternate)return e;e=ka(e),t=ka(t)}return null}(e,t):null,o=[];e&&e!==a;){var s=e.alternate;if(null!==s&&s===a)break;o.push(e),e=ka(e)}for(var u=[];t&&t!==a;){var l=t.alternate;if(null!==l&&l===a)break;u.push(t),t=ka(t)}for(var c=0;c<o.length;c++)n(o[c],"bubbled",r);for(var h=u.length;h-- >0;)n(u[h],"captured",i)}function Ea(e,t){var n,r=e.stateNode;if(!r)return null;var i=k(r);if(!i)return null;if(n=i[t],function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":return!(!n.disabled||(r=t,"button"!==r&&"input"!==r&&"select"!==r&&"textarea"!==r));default:return!1}var r}(t,e.type,i))return null;if(n&&"function"!=typeof n)throw Error("Expected `"+t+"` listener to be a function, instead got a value of `"+typeof n+"` type.");return n}function Sa(e,t,n){e||l("Dispatching inst must not be null");var r=function(e,t,n){return Ea(e,t.dispatchConfig.phasedRegistrationNames[n])}(e,n,t);r&&(n._dispatchListeners=ln(n._dispatchListeners,r),n._dispatchInstances=ln(n._dispatchInstances,e))}function Ta(e){e&&e.dispatchConfig.phasedRegistrationNames&&function(e,t,n){for(var r,i=[];e;)i.push(e),e=ka(e);for(r=i.length;r-- >0;)t(i[r],"captured",n);for(r=0;r<i.length;r++)t(i[r],"bubbled",n)}(e._targetInst,Sa,e)}function Pa(e,t,n){if(e&&n&&n.dispatchConfig.registrationName){var r=Ea(e,n.dispatchConfig.registrationName);r&&(n._dispatchListeners=ln(n._dispatchListeners,r),n._dispatchInstances=ln(n._dispatchInstances,e))}}function ja(e){e&&e.dispatchConfig.registrationName&&Pa(e._targetInst,0,e)}function Ca(e){cn(e,Ta)}var Aa=null,Ma=null,Ia=null;function Ra(){if(Ia)return Ia;var e,t,n=Ma,r=n.length,i=La(),a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);var s=t>1?1-t:void 0;return Ia=i.slice(e,s)}function La(){return"value"in Aa?Aa.value:Aa.textContent}var za={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function Da(){return!0}function Fa(){return!1}function Ba(e,t,n,r){delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation,delete this.isDefaultPrevented,delete this.isPropagationStopped,this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var a in i)if(i.hasOwnProperty(a)){delete this[a];var o=i[a];o?this[a]=o(n):"target"===a?this.target=r:this[a]=n[a]}var s=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=s?Da:Fa,this.isPropagationStopped=Fa,this}function Na(e,t){var n="function"==typeof t;return{configurable:!0,set:function(e){return r(n?"setting the method":"setting the property","This is effectively a no-op"),e},get:function(){return r(n?"accessing the method":"accessing the property",n?"This is a no-op function":"This is set to null"),t}};function r(t,n){l("This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",t,e,n)}}function Ua(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Va(e){if(!(e instanceof this))throw Error("Trying to release an event instance into a pool of a different type.");e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function Wa(e){e.eventPool=[],e.getPooled=Ua,e.release=Va}r(Ba.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){this.isPersistent=Da},isPersistent:Fa,destructor:function(){var e=this.constructor.Interface;for(var t in e)Object.defineProperty(this,t,Na(t,e[t]));this.dispatchConfig=null,this._targetInst=null,this.nativeEvent=null,this.isDefaultPrevented=Fa,this.isPropagationStopped=Fa,this._dispatchListeners=null,this._dispatchInstances=null,Object.defineProperty(this,"nativeEvent",Na("nativeEvent",null)),Object.defineProperty(this,"isDefaultPrevented",Na("isDefaultPrevented",Fa)),Object.defineProperty(this,"isPropagationStopped",Na("isPropagationStopped",Fa)),Object.defineProperty(this,"preventDefault",Na("preventDefault",(function(){}))),Object.defineProperty(this,"stopPropagation",Na("stopPropagation",(function(){})))}}),Ba.Interface=za,Ba.extend=function(e){var t=this,n=function(){};n.prototype=t.prototype;var i=new n;function a(){return t.apply(this,arguments)}return r(i,a.prototype),a.prototype=i,a.prototype.constructor=a,a.Interface=r({},t.Interface,e),a.extend=t.extend,Wa(a),a},Wa(Ba);var qa=Ba.extend({data:null}),Ga=Ba.extend({data:null}),Ha=[9,13,27,32],Za=de&&"CompositionEvent"in window,Xa=null;de&&"documentMode"in document&&(Xa=document.documentMode);var Ya=de&&"TextEvent"in window&&!Xa,Ka=de&&(!Za||Xa&&Xa>8&&Xa<=11),Ja=String.fromCharCode(32),$a={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["blur","compositionend","keydown","keypress","keyup","mousedown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["blur","compositionstart","keydown","keypress","keyup","mousedown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["blur","compositionupdate","keydown","keypress","keyup","mousedown"]}},Qa=!1;function eo(e,t){switch(e){case"keyup":return-1!==Ha.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function to(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function no(e){return"ko"===e.locale}var ro=!1;function io(e,t,n,r){var i,a;if(Za?i=function(e){switch(e){case"compositionstart":return $a.compositionStart;case"compositionend":return $a.compositionEnd;case"compositionupdate":return $a.compositionUpdate}}(e):ro?eo(e,n)&&(i=$a.compositionEnd):function(e,t){return"keydown"===e&&229===t.keyCode}(e,n)&&(i=$a.compositionStart),!i)return null;Ka&&!no(n)&&(ro||i!==$a.compositionStart?i===$a.compositionEnd&&ro&&(a=Ra()):ro=function(e){return Aa=e,Ma=La(),!0}(r));var o=qa.getPooled(i,t,n,r);if(a)o.data=a;else{var s=to(n);null!==s&&(o.data=s)}return Ca(o),o}function ao(e,t){if(ro){if("compositionend"===e||!Za&&eo(e,t)){var n=Ra();return Aa=null,Ma=null,Ia=null,ro=!1,n}return null}switch(e){case"paste":return null;case"keypress":if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ka&&!no(t)?null:t.data;default:return null}}function oo(e,t,n,r){var i;if(!(i=Ya?function(e,t){switch(e){case"compositionend":return to(t);case"keypress":return 32!==t.which?null:(Qa=!0,Ja);case"textInput":var n=t.data;return n===Ja&&Qa?null:n;default:return null}}(e,n):ao(e,n)))return null;var a=Ga.getPooled($a.beforeInput,t,n,r);return a.data=i,Ca(a),a}var so={eventTypes:$a,extractEvents:function(e,t,n,r,i){var a=io(e,t,n,r),o=oo(e,t,n,r);return null===a?o:null===o?a:[a,o]}},uo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!uo[e.type]:"textarea"===t}var co={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["blur","change","click","focus","input","keydown","keyup","selectionchange"]}};function ho(e,t,n){var r=Ba.getPooled(co.change,e,t,n);return r.type="change",be(n),Ca(r),r}var po=null,fo=null;function vo(e){!function(e,t){if(Ee)return e(t);Ee=!0;try{xe(e,t)}finally{Ee=!1,Te()}}(mo,ho(fo,e,vn(e)))}function mo(e){dn(e)}function yo(e){if(it(_a(e)))return e}function go(e,t){if("change"===e)return t}var bo=!1;function _o(){po&&(po.detachEvent("onpropertychange",xo),po=null,fo=null)}function xo(e){"value"===e.propertyName&&yo(fo)&&vo(e)}function wo(e,t,n){"focus"===e?(_o(),function(e,t){fo=t,(po=e).attachEvent("onpropertychange",xo)}(t,n)):"blur"===e&&_o()}function ko(e,t){if("selectionchange"===e||"keyup"===e||"keydown"===e)return yo(fo)}function Oo(e,t){if("click"===e)return yo(t)}function Eo(e,t){if("input"===e||"change"===e)return yo(t)}de&&(bo=mn("input")&&(!document.documentMode||document.documentMode>9));var So={eventTypes:co,_isInputEventSupported:bo,extractEvents:function(e,t,n,r,i){var a,o,s,u,l,c,h=t?_a(t):window;if("select"===(u=(s=h).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type?a=go:lo(h)?bo?a=Eo:(a=ko,o=wo):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(h)&&(a=Oo),a){var p=a(e,t);if(p)return ho(p,n,r)}o&&o(e,h,t),"blur"===e&&(c=(l=h)._wrapperState)&&c.controlled&&"number"===l.type&&mt(l,"number",l.value)}},To=Ba.extend({view:null,detail:null}),Po={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jo(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=Po[e];return!!n&&!!t[n]}function Co(e){return jo}var Ao=0,Mo=0,Io=!1,Ro=!1,Lo=To.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Co,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ao;return Ao=e.screenX,Io?"mousemove"===e.type?e.screenX-t:0:(Io=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Mo;return Mo=e.screenY,Ro?"mousemove"===e.type?e.screenY-t:0:(Ro=!0,0)}}),zo=Lo.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Do={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Fo={eventTypes:Do,extractEvents:function(e,t,n,r,i){var a,o,s,u,l,c,h,p="mouseover"===e||"pointerover"===e,f="mouseout"===e||"pointerout"===e;if(p&&0==(32&i)&&(n.relatedTarget||n.fromElement))return null;if(!f&&!p)return null;if(r.window===r)a=r;else{var d=r.ownerDocument;a=d?d.defaultView||d.parentWindow:window}if(f){o=t;var v=n.relatedTarget||n.toElement;if(null!==(s=v?ga(v):null))(s!==nn(s)||5!==s.tag&&6!==s.tag)&&(s=null)}else o=null,s=t;if(o===s)return null;"mouseout"===e||"mouseover"===e?(u=Lo,l=Do.mouseLeave,c=Do.mouseEnter,h="mouse"):"pointerout"!==e&&"pointerover"!==e||(u=zo,l=Do.pointerLeave,c=Do.pointerEnter,h="pointer");var m=null==o?a:_a(o),y=null==s?a:_a(s),g=u.getPooled(l,o,n,r);g.type=h+"leave",g.target=m,g.relatedTarget=y;var b=u.getPooled(c,s,n,r);return b.type=h+"enter",b.target=y,b.relatedTarget=m,function(e,t,n,r){Oa(n,r,Pa,e,t)}(g,b,o,s),0==(64&i)?[g]:[g,b]}};var Bo="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},No=Object.prototype.hasOwnProperty;function Uo(e,t){if(Bo(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!No.call(t,n[i])||!Bo(e[n[i]],t[n[i]]))return!1;return!0}var Vo=de&&"documentMode"in document&&document.documentMode<=11,Wo={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["blur","contextmenu","dragend","focus","keydown","keyup","mousedown","mouseup","selectionchange"]}},qo=null,Go=null,Ho=null,Zo=!1;function Xo(e){return e.window===e?e.document:9===e.nodeType?e:e.ownerDocument}function Yo(e,t){var n=Xo(t);if(Zo||null==qo||qo!==Ei(n))return null;var r=function(e){if("selectionStart"in e&&Ri(e))return{start:e.selectionStart,end:e.selectionEnd};var t=(e.ownerDocument&&e.ownerDocument.defaultView||window).getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}(qo);if(!Ho||!Uo(Ho,r)){Ho=r;var i=Ba.getPooled(Wo.select,Go,e,t);return i.type="select",i.target=qo,Ca(i),i}return null}var Ko={eventTypes:Wo,extractEvents:function(e,t,n,r,i,a){var o=a||Xo(r);if(!o||!function(e,t){for(var n=Qt(t),r=he[e],i=0;i<r.length;i++){var a=r[i];if(!n.has(a))return!1}return!0}("onSelect",o))return null;var s=t?_a(t):window;switch(e){case"focus":(lo(s)||"true"===s.contentEditable)&&(qo=s,Go=t,Ho=null);break;case"blur":qo=null,Go=null,Ho=null;break;case"mousedown":Zo=!0;break;case"contextmenu":case"mouseup":case"dragend":return Zo=!1,Yo(n,r);case"selectionchange":if(Vo)break;case"keydown":case"keyup":return Yo(n,r)}return null}},Jo=Ba.extend({animationName:null,elapsedTime:null,pseudoElement:null}),$o=Ba.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qo=To.extend({relatedTarget:null});function es(e){var t,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}var ts={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ns={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};var rs=To.extend({key:function(e){if(e.key){var t=ts[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=es(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?ns[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Co,charCode:function(e){return"keypress"===e.type?es(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?es(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),is=Lo.extend({dataTransfer:null}),as=To.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Co}),os=Ba.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ss=Lo.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),us=["abort","cancel","canplay","canplaythrough","close","durationchange","emptied","encrypted","ended","error","input","invalid","load","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","reset","seeked","seeking","stalled","submit","suspend","timeupdate","toggle","volumechange","waiting"],ls={eventTypes:Xn,extractEvents:function(e,t,n,r,i){var a,o=Yn.get(e);if(!o)return null;switch(e){case"keypress":if(0===es(n))return null;case"keydown":case"keyup":a=rs;break;case"blur":case"focus":a=Qo;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=Lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=is;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=as;break;case Zt:case Xt:case Yt:a=Jo;break;case Kt:a=os;break;case"scroll":a=To;break;case"wheel":a=ss;break;case"copy":case"cut":case"paste":a=$o;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=zo;break;default:-1===us.indexOf(e)&&l("SimpleEventPlugin: Unhandled event type, `%s`. This warning is likely caused by a bug in React. Please file an issue.",e),a=Ba}var s=a.getPooled(o,t,n,r);return Ca(s),s}};!function(e){if(re)throw Error("EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React.");re=Array.prototype.slice.call(e),ae()}(["ResponderEventPlugin","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]),k=xa,O=ba,(E=_a)&&O||l("EventPluginUtils.setComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode."),fe({SimpleEventPlugin:ls,EnterLeaveEventPlugin:Fo,ChangeEventPlugin:So,SelectEventPlugin:Ko,BeforeInputEventPlugin:so});var cs="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,hs=null,ps=null,fs=null,ds=!1,vs=!1,ms=!1,ys=0,gs=0,bs=new Set,_s=function(e){return"⚛ "+e},xs=function(e){performance.mark(_s(e))},ws=function(e,t,n){var r=_s(t),i=function(e,t){return""+(t?"⛔ ":"⚛ ")+e+(t?" Warning: "+t:"")}(e,n);try{performance.measure(i,r)}catch(e){}performance.clearMarks(r),performance.clearMeasures(i)},ks=function(e,t){return e+" (#"+t+")"},Os=function(e,t,n){return null===n?e+" ["+(t?"update":"mount")+"]":e+"."+n},Es=function(e,t){var n=H(e.type)||"Unknown",r=e._debugID,i=null!==e.alternate,a=Os(n,i,t);if(ds&&bs.has(a))return!1;bs.add(a);var o=ks(a,r);return xs(o),!0},Ss=function(e,t){var n=H(e.type)||"Unknown",r=e._debugID,i=null!==e.alternate,a=Os(n,i,t);!function(e){performance.clearMarks(_s(e))}(ks(a,r))},Ts=function(e,t,n){var r=H(e.type)||"Unknown",i=e._debugID,a=null!==e.alternate,o=Os(r,a,t),s=ks(o,i);ws(o,s,n)},Ps=function(e){switch(e.tag){case 3:case 5:case 6:case 4:case 7:case 10:case 9:case 8:return!0;default:return!1}},js=function(e){null!==e.return&&js(e.return),e._debugIsCurrentlyTiming&&Es(e,null)};function Cs(){gs++}function As(e){cs&&!Ps(e)&&(hs=e,Es(e,null)&&(e._debugIsCurrentlyTiming=!0))}function Ms(e){cs&&!Ps(e)&&(e._debugIsCurrentlyTiming=!1,Ss(e,null))}function Is(e){cs&&!Ps(e)&&(hs=e.return,e._debugIsCurrentlyTiming&&(e._debugIsCurrentlyTiming=!1,Ts(e,null,null)))}function Rs(e){if(cs&&!Ps(e)&&(hs=e.return,e._debugIsCurrentlyTiming)){e._debugIsCurrentlyTiming=!1;var t=13===e.tag?"Rendering was suspended":"An error was thrown inside this error boundary";Ts(e,null,t)}}function Ls(e,t){cs&&(null!==ps&&null!==fs&&Ss(fs,ps),fs=null,ps=null,ms=!1,Es(e,t)&&(fs=e,ps=t))}function zs(){cs&&(null!==ps&&null!==fs&&Ts(fs,ps,ms?"Scheduled a cascading update":null),ps=null,fs=null)}function Ds(e){hs=e,cs&&(ys=0,xs("(React Tree Reconciliation)"),null!==hs&&js(hs))}function Fs(e,t){if(cs){var n=null;null!==e?n=3===e.tag?"A top-level update interrupted the previous render":"An update to "+(H(e.type)||"Unknown")+" interrupted the previous render":ys>1&&(n="There were cascading updates"),ys=0;var r=t?"(React Tree Reconciliation: Completed Root)":"(React Tree Reconciliation: Yielded)";!function(){for(var e=hs;e;)e._debugIsCurrentlyTiming&&Ts(e,null,null),e=e.return}(),ws(r,"(React Tree Reconciliation)",n)}}function Bs(){cs&&(gs=0,xs("(Committing Snapshot Effects)"))}function Ns(){if(cs){var e=gs;gs=0,ws("(Committing Snapshot Effects: "+e+" Total)","(Committing Snapshot Effects)",null)}}function Us(){cs&&(gs=0,xs("(Committing Host Effects)"))}function Vs(){if(cs){var e=gs;gs=0,ws("(Committing Host Effects: "+e+" Total)","(Committing Host Effects)",null)}}function Ws(){cs&&(gs=0,xs("(Calling Lifecycle Methods)"))}function qs(){if(cs){var e=gs;gs=0,ws("(Calling Lifecycle Methods: "+e+" Total)","(Calling Lifecycle Methods)",null)}}var Gs,Hs=[];Gs=[];var Zs,Xs=-1;function Ys(e){return{current:e}}function Ks(e,t){Xs<0?l("Unexpected pop."):(t!==Gs[Xs]&&l("Unexpected Fiber popped."),e.current=Hs[Xs],Hs[Xs]=null,Gs[Xs]=null,Xs--)}function Js(e,t,n){Xs++,Hs[Xs]=e.current,Gs[Xs]=n,e.current=t}Zs={};var $s={};Object.freeze($s);var Qs=Ys($s),eu=Ys(!1),tu=$s;function nu(e,t,n){return n&&ou(t)?tu:Qs.current}function ru(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function iu(e,t){var n=e.type,r=n.contextTypes;if(!r)return $s;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var o={};for(var s in r)o[s]=t[s];var u=H(n)||"Unknown";return a(r,o,"context",u,Q),i&&ru(e,t,o),o}function au(){return eu.current}function ou(e){var t=e.childContextTypes;return null!=t}function su(e){Ks(eu,e),Ks(Qs,e)}function uu(e){Ks(eu,e),Ks(Qs,e)}function lu(e,t,n){if(Qs.current!==$s)throw Error("Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue.");Js(Qs,t,e),Js(eu,n,e)}function cu(e,t,n){var i,o=e.stateNode,s=t.childContextTypes;if("function"!=typeof o.getChildContext){var u=H(t)||"Unknown";return Zs[u]||(Zs[u]=!0,l("%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",u,u)),n}for(var c in ne("getChildContext"),Ls(e,"getChildContext"),i=o.getChildContext(),zs(),ne(null),i)if(!(c in s))throw Error((H(t)||"Unknown")+'.getChildContext(): key "'+c+'" is not defined in childContextTypes.');var h=H(t)||"Unknown";return a(s,i,"child context",h,Q),r({},n,{},i)}function hu(e){var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||$s;return tu=Qs.current,Js(Qs,n,e),Js(eu,eu.current,e),!0}function pu(e,t,n){var r=e.stateNode;if(!r)throw Error("Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue.");if(n){var i=cu(e,t,tu);r.__reactInternalMemoizedMergedChildContext=i,Ks(eu,e),Ks(Qs,e),Js(Qs,i,e),Js(eu,n,e)}else Ks(eu,e),Js(eu,n,e)}function fu(e){if(!function(e){return nn(e)===e}(e)||1!==e.tag)throw Error("Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");var t=e;do{switch(t.tag){case 3:return t.stateNode.context;case 1:if(ou(t.type))return t.stateNode.__reactInternalMemoizedMergedChildContext}t=t.return}while(null!==t);throw Error("Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue.")}var du=i.unstable_runWithPriority,vu=i.unstable_scheduleCallback,mu=i.unstable_cancelCallback,yu=i.unstable_shouldYield,gu=i.unstable_requestPaint,bu=i.unstable_now,_u=i.unstable_getCurrentPriorityLevel,xu=i.unstable_ImmediatePriority,wu=i.unstable_UserBlockingPriority,ku=i.unstable_NormalPriority,Ou=i.unstable_LowPriority,Eu=i.unstable_IdlePriority;if(null==o.__interactionsRef||null==o.__interactionsRef.current)throw Error("It is not supported to run the profiling version of a renderer (for example, `react-dom/profiling`) without also replacing the `scheduler/tracing` module with `scheduler/tracing-profiling`. Your bundler might have a setting for aliasing both modules. Learn more at http://fb.me/react-profiling");var Su={},Tu=yu,Pu=void 0!==gu?gu:function(){},ju=null,Cu=null,Au=!1,Mu=bu(),Iu=Mu<1e4?bu:function(){return bu()-Mu};function Ru(){switch(_u()){case xu:return 99;case wu:return 98;case ku:return 97;case Ou:return 96;case Eu:return 95;default:throw Error("Unknown priority level.")}}function Lu(e){switch(e){case 99:return xu;case 98:return wu;case 97:return ku;case 96:return Ou;case 95:return Eu;default:throw Error("Unknown priority level.")}}function zu(e,t){var n=Lu(e);return du(n,t)}function Du(e,t,n){var r=Lu(e);return vu(r,t,n)}function Fu(e){return null===ju?(ju=[e],Cu=vu(xu,Nu)):ju.push(e),Su}function Bu(){if(null!==Cu){var e=Cu;Cu=null,mu(e)}Nu()}function Nu(){if(!Au&&null!==ju){Au=!0;var e=0;try{var t=ju;zu(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ju=null}catch(t){throw null!==ju&&(ju=ju.slice(e+1)),vu(xu,Bu),t}finally{Au=!1}}}var Uu=1073741823;function Vu(e){return 1073741821-(e/10|0)}function Wu(e){return 10*(1073741821-e)}function qu(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(r=n/10)|0))*r;var r}function Gu(e){return qu(e,500,100)}function Hu(e,t){if(t===Uu)return 99;if(1===t||2===t)return 95;var n=Wu(t)-Wu(e);return n<=0?99:n<=600?98:n<=5250?97:95}var Zu={recordUnsafeLifecycleWarnings:function(e,t){},flushPendingUnsafeLifecycleWarnings:function(){},recordLegacyContextWarning:function(e,t){},flushLegacyContextWarning:function(){},discardPendingWarnings:function(){}},Xu=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t.sort().join(", ")},Yu=[],Ku=[],Ju=[],$u=[],Qu=[],el=[],tl=new Set;Zu.recordUnsafeLifecycleWarnings=function(e,t){tl.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Yu.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillMount&&Ku.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Ju.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillReceiveProps&&$u.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Qu.push(e),1&e.mode&&"function"==typeof t.UNSAFE_componentWillUpdate&&el.push(e))},Zu.flushPendingUnsafeLifecycleWarnings=function(){var e=new Set;Yu.length>0&&(Yu.forEach((function(t){e.add(H(t.type)||"Component"),tl.add(t.type)})),Yu=[]);var t=new Set;Ku.length>0&&(Ku.forEach((function(e){t.add(H(e.type)||"Component"),tl.add(e.type)})),Ku=[]);var n=new Set;Ju.length>0&&(Ju.forEach((function(e){n.add(H(e.type)||"Component"),tl.add(e.type)})),Ju=[]);var r=new Set;$u.length>0&&($u.forEach((function(e){r.add(H(e.type)||"Component"),tl.add(e.type)})),$u=[]);var i=new Set;Qu.length>0&&(Qu.forEach((function(e){i.add(H(e.type)||"Component"),tl.add(e.type)})),Qu=[]);var a=new Set;(el.length>0&&(el.forEach((function(e){a.add(H(e.type)||"Component"),tl.add(e.type)})),el=[]),t.size>0)&&l("Using UNSAFE_componentWillMount in strict mode is not recommended and may indicate bugs in your code. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n\nPlease update the following components: %s",Xu(t));r.size>0&&l("Using UNSAFE_componentWillReceiveProps in strict mode is not recommended and may indicate bugs in your code. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://fb.me/react-derived-state\n\nPlease update the following components: %s",Xu(r));a.size>0&&l("Using UNSAFE_componentWillUpdate in strict mode is not recommended and may indicate bugs in your code. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n\nPlease update the following components: %s",Xu(a));e.size>0&&u("componentWillMount has been renamed, and is not recommended for use. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move code with side effects to componentDidMount, and set initial state in the constructor.\n* Rename componentWillMount to UNSAFE_componentWillMount to suppress this warning in non-strict mode. In React 17.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Xu(e));n.size>0&&u("componentWillReceiveProps has been renamed, and is not recommended for use. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* If you're updating state whenever props change, refactor your code to use memoization techniques or move it to static getDerivedStateFromProps. Learn more at: https://fb.me/react-derived-state\n* Rename componentWillReceiveProps to UNSAFE_componentWillReceiveProps to suppress this warning in non-strict mode. In React 17.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Xu(n));i.size>0&&u("componentWillUpdate has been renamed, and is not recommended for use. See https://fb.me/react-unsafe-component-lifecycles for details.\n\n* Move data fetching code or side effects to componentDidUpdate.\n* Rename componentWillUpdate to UNSAFE_componentWillUpdate to suppress this warning in non-strict mode. In React 17.x, only the UNSAFE_ name will work. To rename all deprecated lifecycles to their new names, you can run `npx react-codemod rename-unsafe-lifecycles` in your project source folder.\n\nPlease update the following components: %s",Xu(i))};var nl=new Map,rl=new Set;Zu.recordLegacyContextWarning=function(e,t){var n=function(e){for(var t=null,n=e;null!==n;)1&n.mode&&(t=n),n=n.return;return t}(e);if(null!==n){if(!rl.has(e.type)){var r=nl.get(n);(null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],nl.set(n,r)),r.push(e))}}else l("Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},Zu.flushLegacyContextWarning=function(){nl.forEach((function(e,t){if(0!==e.length){var n=e[0],r=new Set;e.forEach((function(e){r.add(H(e.type)||"Component"),rl.add(e.type)})),l("Legacy context API has been detected within a strict-mode tree.\n\nThe old API will be supported in all 16.x releases, but applications using it should migrate to the new version.\n\nPlease update the following components: %s\n\nLearn more about this warning here: https://fb.me/react-legacy-context%s",Xu(r),Y(n))}}))},Zu.discardPendingWarnings=function(){Yu=[],Ku=[],Ju=[],$u=[],Qu=[],el=[],nl=new Map};var il=null,al=null,ol=function(e){il=e};function sl(e){if(null===il)return e;var t=il(e);return void 0===t?e:t.current}function ul(e){return sl(e)}function ll(e){if(null===il)return e;var t=il(e);if(void 0===t){if(null!=e&&"function"==typeof e.render){var n=sl(e.render);if(e.render!==n){var r={$$typeof:D,render:n};return void 0!==e.displayName&&(r.displayName=e.displayName),r}}return e}return t.current}function cl(e,t){if(null===il)return!1;var n=e.elementType,r=t.type,i=!1,a="object"==typeof r&&null!==r?r.$$typeof:null;switch(e.tag){case 1:"function"==typeof r&&(i=!0);break;case 0:("function"==typeof r||a===U)&&(i=!0);break;case 11:(a===D||a===U)&&(i=!0);break;case 14:case 15:(a===N||a===U)&&(i=!0);break;default:return!1}if(i){var o=il(n);if(void 0!==o&&o===il(r))return!0}return!1}function hl(e){null!==il&&"function"==typeof WeakSet&&(null===al&&(al=new WeakSet),al.add(e))}var pl=function(e,t){if(null!==il){var n=t.staleFamilies,r=t.updatedFamilies;Kd(),Cd((function(){!function e(t,n,r){var i=t.alternate,a=t.child,o=t.sibling,s=t.tag,u=t.type,l=null;switch(s){case 0:case 15:case 1:l=u;break;case 11:l=u.render}if(null===il)throw new Error("Expected resolveFamily to be set during hot reload.");var c=!1,h=!1;if(null!==l){var p=il(l);void 0!==p&&(r.has(p)?h=!0:n.has(p)&&(1===s?h=!0:c=!0))}null!==al&&(al.has(t)||null!==i&&al.has(i))&&(h=!0);h&&(t._debugNeedsRemount=!0);(h||c)&&wd(t,Uu);null===a||h||e(a,n,r);null!==o&&e(o,n,r)}(e.current,r,n)}))}},fl=function(e,t){var n,r,i;e.context===$s&&(Kd(),zu(99,function(){Jv(t,e,null,null)}.bind(null,n,r,i)))};var dl=function(e,t){var n=new Set,r=new Set(t.map((function(e){return e.current})));return function e(t,n,r){var i=t.child,a=t.sibling,o=t.tag,s=t.type,u=null;switch(o){case 0:case 15:case 1:u=s;break;case 11:u=s.render}var l=!1;null!==u&&n.has(u)&&(l=!0);l?function(e,t){if(function(e,t){var n=e,r=!1;for(;;){if(5===n.tag)r=!0,t.add(n.stateNode);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return r;for(;null===n.sibling;){if(null===n.return||n.return===e)return r;n=n.return}n.sibling.return=n.return,n=n.sibling}return!1}(e,t))return;var n=e;for(;;){switch(n.tag){case 5:return void t.add(n.stateNode);case 4:case 3:return void t.add(n.stateNode.containerInfo)}if(null===n.return)throw new Error("Expected to reach root first.");n=n.return}}(t,r):null!==i&&e(i,n,r);null!==a&&e(a,n,r)}(e.current,r,n),n};function vl(e,t){if(e&&e.defaultProps){var n=r({},t),i=e.defaultProps;for(var a in i)void 0===n[a]&&(n[a]=i[a]);return n}return t}function ml(e){if(function(e){if(-1===e._status){e._status=0;var t=(0,e._ctor)();e._result=t,t.then((function(t){if(0===e._status){var n=t.default;void 0===n&&l("lazy: Expected the result of a dynamic import() call. Instead received: %s\n\nYour code should look like: \n  const MyComponent = lazy(() => import('./MyComponent'))",t),e._status=1,e._result=n}}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(e),1!==e._status)throw e._result;return e._result}var yl,gl=Ys(null);yl={};var bl=null,_l=null,xl=null,wl=!1;function kl(){bl=null,_l=null,xl=null,wl=!1}function Ol(){wl=!0}function El(){wl=!1}function Sl(e,t){var n=e.type._context;Js(gl,n._currentValue,e),n._currentValue=t,void 0!==n._currentRenderer&&null!==n._currentRenderer&&n._currentRenderer!==yl&&l("Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),n._currentRenderer=yl}function Tl(e){var t=gl.current;Ks(gl,e),e.type._context._currentValue=t}function Pl(e,t){for(var n=e;null!==n;){var r=n.alternate;if(n.childExpirationTime<t)n.childExpirationTime=t,null!==r&&r.childExpirationTime<t&&(r.childExpirationTime=t);else{if(!(null!==r&&r.childExpirationTime<t))break;r.childExpirationTime=t}n=n.return}}function jl(e,t){bl=e,_l=null,xl=null;var n=e.dependencies;null!==n&&(null!==n.firstContext&&(n.expirationTime>=t&&of(),n.firstContext=null))}function Cl(e,t){if(wl&&l("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo()."),xl===e);else if(!1===t||0===t);else{var n;"number"!=typeof t||1073741823===t?(xl=e,n=1073741823):n=t;var r={context:e,observedBits:n,next:null};if(null===_l){if(null===bl)throw Error("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().");_l=r,bl.dependencies={expirationTime:0,firstContext:r,responders:null}}else _l=_l.next=r}return e._currentValue}var Al,Ml,Il=2,Rl=!1;function Ll(e){var t={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null};e.updateQueue=t}function zl(e,t){var n=t.updateQueue,r=e.updateQueue;if(n===r){var i={baseState:r.baseState,baseQueue:r.baseQueue,shared:r.shared,effects:r.effects};t.updateQueue=i}}function Dl(e,t){var n={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null};return n.next=n,n.priority=Ru(),n}function Fl(e,t){var n=e.updateQueue;if(null!==n){var r=n.shared,i=r.pending;null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ml!==r||Al||(l("An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),Al=!0)}}function Bl(e,t){var n=e.alternate;null!==n&&zl(n,e);var r=e.updateQueue,i=r.baseQueue;null===i?(r.baseQueue=t.next=t,t.next=t):(t.next=i.next,i.next=t)}function Nl(e,t,n,i,a,o){switch(n.tag){case 1:var s=n.payload;if("function"==typeof s){Ol(),1&e.mode&&s.call(o,i,a);var u=s.call(o,i,a);return El(),u}return s;case 3:e.effectTag=-4097&e.effectTag|64;case 0:var l,c=n.payload;return"function"==typeof c?(Ol(),1&e.mode&&c.call(o,i,a),l=c.call(o,i,a),El()):l=c,null==l?i:r({},i,l);case Il:return Rl=!0,i}return i}function Ul(e,t,n,r){var i=e.updateQueue;Rl=!1,Ml=i.shared;var a=i.baseQueue,o=i.shared.pending;if(null!==o){if(null!==a){var s=a.next,u=o.next;a.next=u,o.next=s}a=o,i.shared.pending=null;var l=e.alternate;if(null!==l){var c=l.updateQueue;null!==c&&(c.baseQueue=o)}}if(null!==a){var h=a.next,p=i.baseState,f=0,d=null,v=null,m=null;if(null!==h)for(var y=h;;){var g=y.expirationTime;if(g<r){var b={expirationTime:y.expirationTime,suspenseConfig:y.suspenseConfig,tag:y.tag,payload:y.payload,callback:y.callback,next:null};null===m?(v=m=b,d=p):m=m.next=b,g>f&&(f=g)}else{if(null!==m){var _={expirationTime:Uu,suspenseConfig:y.suspenseConfig,tag:y.tag,payload:y.payload,callback:y.callback,next:null};m=m.next=_}if(Dd(g,y.suspenseConfig),p=Nl(e,0,y,p,t,n),null!==y.callback){e.effectTag|=32;var x=i.effects;null===x?i.effects=[y]:x.push(y)}}if(null===(y=y.next)||y===h){if(null===(o=i.shared.pending))break;y=a.next=o.next,o.next=h,i.baseQueue=a=o,i.shared.pending=null}}null===m?d=p:m.next=v,i.baseState=d,i.baseQueue=m,Fd(f),e.expirationTime=f,e.memoizedState=p}Ml=null}function Vl(e,t){if("function"!=typeof e)throw Error("Invalid argument passed as callback. Expected a function. Instead received: "+e);e.call(t)}function Wl(){Rl=!1}function ql(){return Rl}function Gl(e,t,n){var r=t.effects;if(t.effects=null,null!==r)for(var i=0;i<r.length;i++){var a=r[i],o=a.callback;null!==o&&(a.callback=null,Vl(o,n))}}Al=!1,Ml=null;var Hl=s.ReactCurrentBatchConfig;function Zl(){return Hl.suspense}var Xl,Yl,Kl,Jl,$l,Ql,ec,tc,nc,rc,ic={},ac=Array.isArray,oc=(new e.Component).refs;Xl=new Set,Yl=new Set,Kl=new Set,Jl=new Set,tc=new Set,$l=new Set,nc=new Set,rc=new Set;var sc=new Set;function uc(e,t,n,i){var a=e.memoizedState;1&e.mode&&n(i,a);var o=n(i,a);Ql(t,o);var s=null==o?a:r({},a,o);(e.memoizedState=s,0===e.expirationTime)&&(e.updateQueue.baseState=s)}ec=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;sc.has(n)||(sc.add(n),l("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},Ql=function(e,t){if(void 0===t){var n=H(e)||"Component";$l.has(n)||($l.add(n),l("%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",n))}},Object.defineProperty(ic,"_processChildContext",{enumerable:!1,value:function(){throw Error("_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(ic);var lc,cc,hc,pc,fc,dc={isMounted:function(e){var t=tn.current;if(null!==t&&1===t.tag){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||l("%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",H(n.type)||"A component"),r._warnedAboutRefsInRender=!0}var i=en(e);return!!i&&nn(i)===i},enqueueSetState:function(e,t,n){var r=en(e),i=_d(),a=Zl(),o=xd(i,r,a),s=Dl(o,a);s.payload=t,null!=n&&(ec(n,"setState"),s.callback=n),Fl(r,s),wd(r,o)},enqueueReplaceState:function(e,t,n){var r=en(e),i=_d(),a=Zl(),o=xd(i,r,a),s=Dl(o,a);s.tag=1,s.payload=t,null!=n&&(ec(n,"replaceState"),s.callback=n),Fl(r,s),wd(r,o)},enqueueForceUpdate:function(e,t){var n=en(e),r=_d(),i=Zl(),a=xd(r,n,i),o=Dl(a,i);o.tag=Il,null!=t&&(ec(t,"forceUpdate"),o.callback=t),Fl(n,o),wd(n,a)}};function vc(e,t,n,r,i,a,o){var s=e.stateNode;if("function"==typeof s.shouldComponentUpdate){1&e.mode&&s.shouldComponentUpdate(r,a,o),Ls(e,"shouldComponentUpdate");var u=s.shouldComponentUpdate(r,a,o);return zs(),void 0===u&&l("%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",H(t)||"Component"),u}return!t.prototype||!t.prototype.isPureReactComponent||(!Uo(n,r)||!Uo(i,a))}function mc(e,t){var n;t.updater=dc,e.stateNode=t,n=e,t._reactInternalFiber=n,t._reactInternalInstance=ic}function yc(e,t,n){var r=!1,i=$s,a=$s,o=t.contextType;if("contextType"in t&&(!(null===o||void 0!==o&&o.$$typeof===L&&void 0===o._context)&&!rc.has(t))){rc.add(t);var s="";s=void 0===o?" However, it is set to undefined. This can be caused by a typo or by mixing up named and default imports. This can also happen due to a circular dependency, so try moving the createContext() call to a separate file.":"object"!=typeof o?" However, it is set to a "+typeof o+".":o.$$typeof===R?" Did you accidentally pass the Context.Provider instead?":void 0!==o._context?" Did you accidentally pass the Context.Consumer instead?":" However, it is set to an object with keys {"+Object.keys(o).join(", ")+"}.",l("%s defines an invalid contextType. contextType should point to the Context object returned by React.createContext().%s",H(t)||"Component",s)}if("object"==typeof o&&null!==o)a=Cl(o);else{i=nu(0,t,!0);var u=t.contextTypes;a=(r=null!=u)?iu(e,i):$s}1&e.mode&&new t(n,a);var c=new t(n,a),h=e.memoizedState=null!==c.state&&void 0!==c.state?c.state:null;if(mc(e,c),"function"==typeof t.getDerivedStateFromProps&&null===h){var p=H(t)||"Component";Yl.has(p)||(Yl.add(p),l("`%s` uses `getDerivedStateFromProps` but its initial state is %s. This is not recommended. Instead, define the initial state by assigning an object to `this.state` in the constructor of `%s`. This ensures that `getDerivedStateFromProps` arguments have a consistent shape.",p,null===c.state?"null":"undefined",p))}if("function"==typeof t.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate){var f=null,d=null,v=null;if("function"==typeof c.componentWillMount&&!0!==c.componentWillMount.__suppressDeprecationWarning?f="componentWillMount":"function"==typeof c.UNSAFE_componentWillMount&&(f="UNSAFE_componentWillMount"),"function"==typeof c.componentWillReceiveProps&&!0!==c.componentWillReceiveProps.__suppressDeprecationWarning?d="componentWillReceiveProps":"function"==typeof c.UNSAFE_componentWillReceiveProps&&(d="UNSAFE_componentWillReceiveProps"),"function"==typeof c.componentWillUpdate&&!0!==c.componentWillUpdate.__suppressDeprecationWarning?v="componentWillUpdate":"function"==typeof c.UNSAFE_componentWillUpdate&&(v="UNSAFE_componentWillUpdate"),null!==f||null!==d||null!==v){var m=H(t)||"Component",y="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Jl.has(m)||(Jl.add(m),l("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-unsafe-component-lifecycles",m,y,null!==f?"\n  "+f:"",null!==d?"\n  "+d:"",null!==v?"\n  "+v:""))}}return r&&ru(e,i,a),c}function gc(e,t,n,r){var i=t.state;if(Ls(e,"componentWillReceiveProps"),"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),zs(),t.state!==i){var a=H(e.type)||"Component";Xl.has(a)||(Xl.add(a),l("%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",a)),dc.enqueueReplaceState(t,t.state,null)}}function bc(e,t,n,r){!function(e,t,n){var r=e.stateNode,i=H(t)||"Component";r.render||(t.prototype&&"function"==typeof t.prototype.render?l("%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",i):l("%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",i)),!r.getInitialState||r.getInitialState.isReactClassApproved||r.state||l("getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",i),r.getDefaultProps&&!r.getDefaultProps.isReactClassApproved&&l("getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",i),r.propTypes&&l("propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",i),r.contextType&&l("contextType was defined as an instance property on %s. Use a static property to define contextType instead.",i),r.contextTypes&&l("contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",i),t.contextType&&t.contextTypes&&!nc.has(t)&&(nc.add(t),l("%s declares both contextTypes and contextType static properties. The legacy contextTypes property will be ignored.",i)),"function"==typeof r.componentShouldUpdate&&l("%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",i),t.prototype&&t.prototype.isPureReactComponent&&void 0!==r.shouldComponentUpdate&&l("%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",H(t)||"A pure component"),"function"==typeof r.componentDidUnmount&&l("%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",i),"function"==typeof r.componentDidReceiveProps&&l("%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",i),"function"==typeof r.componentWillRecieveProps&&l("%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",i),"function"==typeof r.UNSAFE_componentWillRecieveProps&&l("%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",i);var a=r.props!==n;void 0!==r.props&&a&&l("%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",i,i),r.defaultProps&&l("Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",i,i),"function"!=typeof r.getSnapshotBeforeUpdate||"function"==typeof r.componentDidUpdate||Kl.has(t)||(Kl.add(t),l("%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",H(t))),"function"==typeof r.getDerivedStateFromProps&&l("%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof r.getDerivedStateFromError&&l("%s: getDerivedStateFromError() is defined as an instance method and will be ignored. Instead, declare it as a static method.",i),"function"==typeof t.getSnapshotBeforeUpdate&&l("%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",i);var o=r.state;o&&("object"!=typeof o||ac(o))&&l("%s.state: must be set to an object or null",i),"function"==typeof r.getChildContext&&"object"!=typeof t.childContextTypes&&l("%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",i)}(e,t,n);var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=oc,Ll(e);var a=t.contextType;if("object"==typeof a&&null!==a)i.context=Cl(a);else{var o=nu(0,t,!0);i.context=iu(e,o)}if(i.state===n){var s=H(t)||"Component";tc.has(s)||(tc.add(s),l("%s: It is not recommended to assign props directly to state because updates to props won't be reflected in state. In most cases, it is better to use props directly.",s))}1&e.mode&&Zu.recordLegacyContextWarning(e,i),Zu.recordUnsafeLifecycleWarnings(e,i),Ul(e,n,i,r),i.state=e.memoizedState;var u=t.getDerivedStateFromProps;"function"==typeof u&&(uc(e,t,u,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(!function(e,t){Ls(e,"componentWillMount");var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),zs(),n!==t.state&&(l("%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",H(e.type)||"Component"),dc.enqueueReplaceState(t,t.state,null))}(e,i),Ul(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var _c;lc=!1,cc=!1,hc={},pc={},fc={},_c=function(e){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){if("object"!=typeof e._store)throw Error("React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue.");e._store.validated=!0;var t='Each child in a list should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.'+Q();pc[t]||(pc[t]=!0,l('Each child in a list should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.'))}};var xc=Array.isArray;function wc(e,t,n){var r=n.ref;if(null!==r&&"function"!=typeof r&&"object"!=typeof r){if(1&e.mode&&(!n._owner||!n._self||n._owner.stateNode===n._self)){var i=H(e.type)||"Component";hc[i]||(l('A string ref, "%s", has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using useRef() or createRef() instead. Learn more about using refs safely here: https://fb.me/react-strict-mode-string-ref%s',r,Y(e)),hc[i]=!0)}if(n._owner){var a,o=n._owner;if(o){var s=o;if(1!==s.tag)throw Error("Function components cannot have string refs. We recommend using useRef() instead. Learn more about using refs safely here: https://fb.me/react-strict-mode-string-ref");a=s.stateNode}if(!a)throw Error("Missing owner for string ref "+r+". This error is likely caused by a bug in React. Please file an issue.");var u=""+r;if(null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===u)return t.ref;var c=function(e){var t=a.refs;t===oc&&(t=a.refs={}),null===e?delete t[u]:t[u]=e};return c._stringRef=u,c}if("string"!=typeof r)throw Error("Expected ref to be a function, a string, an object returned by React.createRef(), or null.");if(!n._owner)throw Error("Element ref was specified as a string ("+r+") but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a function component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.")}return r}function kc(e,t){if("textarea"!==e.type){var n;throw n=" If you meant to render a collection of children, use an array instead."+Q(),Error("Objects are not valid as a React child (found: "+("[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t)+")."+n)}}function Oc(){var e="Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."+Q();fc[e]||(fc[e]=!0,l("Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."))}function Ec(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(var i=r;null!==i;)t(n,i),i=i.sibling;return null}function r(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function i(e,t){var n=Dv(e,t);return n.index=0,n.sibling=null,n}function a(t,n,r){if(t.index=r,!e)return n;var i=t.alternate;if(null!==i){var a=i.index;return a<n?(t.effectTag=2,n):a}return t.effectTag=2,n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){if(null===t||6!==t.tag){var a=Vv(n,e.mode,r);return a.return=e,a}var o=i(t,n);return o.return=e,o}function u(e,t,n,r){if(null!==t&&(t.elementType===n.type||cl(t,n))){var a=i(t,n.props);return a.ref=wc(e,t,n),a.return=e,a._debugSource=n._source,a._debugOwner=n._owner,a}var o=Nv(n,e.mode,r);return o.ref=wc(e,t,n),o.return=e,o}function c(e,t,n,r){if(null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var a=Wv(n,e.mode,r);return a.return=e,a}var o=i(t,n.children||[]);return o.return=e,o}function h(e,t,n,r,a){if(null===t||7!==t.tag){var o=Uv(n,e.mode,r,a);return o.return=e,o}var s=i(t,n);return s.return=e,s}function p(e,t,n){if("string"==typeof t||"number"==typeof t){var r=Vv(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case j:var i=Nv(t,e.mode,n);return i.ref=wc(e,null,t),i.return=e,i;case C:var a=Wv(t,e.mode,n);return a.return=e,a}if(xc(t)||q(t)){var o=Uv(t,e.mode,n,null);return o.return=e,o}kc(e,t)}return"function"==typeof t&&Oc(),null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case j:return n.key===i?n.type===A?h(e,t,n.props.children,r,i):u(e,t,n,r):null;case C:return n.key===i?c(e,t,n,r):null}if(xc(n)||q(n))return null!==i?null:h(e,t,n,r,null);kc(e,n)}return"function"==typeof n&&Oc(),null}function d(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case j:var a=e.get(null===r.key?n:r.key)||null;return r.type===A?h(t,a,r.props.children,i,r.key):u(t,a,r,i);case C:return c(t,e.get(null===r.key?n:r.key)||null,r,i)}if(xc(r)||q(r))return h(t,e.get(n)||null,r,i,null);kc(t,r)}return"function"==typeof r&&Oc(),null}function v(e,t){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case j:case C:_c(e);var n=e.key;if("string"!=typeof n)break;if(null===t){(t=new Set).add(n);break}if(!t.has(n)){t.add(n);break}l("Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.",n)}return t}return function(s,u,c,h){var m="object"==typeof c&&null!==c&&c.type===A&&null===c.key;m&&(c=c.props.children);var y="object"==typeof c&&null!==c;if(y)switch(c.$$typeof){case j:return o(function(e,r,a,o){for(var s=a.key,u=r;null!==u;){if(u.key===s){switch(u.tag){case 7:if(a.type===A){n(e,u.sibling);var l=i(u,a.props.children);return l.return=e,l._debugSource=a._source,l._debugOwner=a._owner,l}break;case 22:default:if(u.elementType===a.type||cl(u,a)){n(e,u.sibling);var c=i(u,a.props);return c.ref=wc(e,u,a),c.return=e,c._debugSource=a._source,c._debugOwner=a._owner,c}}n(e,u);break}t(e,u),u=u.sibling}if(a.type===A){var h=Uv(a.props.children,e.mode,o,a.key);return h.return=e,h}var p=Nv(a,e.mode,o);return p.ref=wc(e,r,a),p.return=e,p}(s,u,c,h));case C:return o(function(e,r,a,o){for(var s=a.key,u=r;null!==u;){if(u.key===s){if(4===u.tag&&u.stateNode.containerInfo===a.containerInfo&&u.stateNode.implementation===a.implementation){n(e,u.sibling);var l=i(u,a.children||[]);return l.return=e,l}n(e,u);break}t(e,u),u=u.sibling}var c=Wv(a,e.mode,o);return c.return=e,c}(s,u,c,h))}if("string"==typeof c||"number"==typeof c)return o(function(e,t,r,a){if(null!==t&&6===t.tag){n(e,t.sibling);var o=i(t,r);return o.return=e,o}n(e,t);var s=Vv(r,e.mode,a);return s.return=e,s}(s,u,""+c,h));if(xc(c))return function(i,o,s,u){for(var l=null,c=0;c<s.length;c++){l=v(s[c],l)}for(var h=null,m=null,y=o,g=0,b=0,_=null;null!==y&&b<s.length;b++){y.index>b?(_=y,y=null):_=y.sibling;var x=f(i,y,s[b],u);if(null===x){null===y&&(y=_);break}e&&y&&null===x.alternate&&t(i,y),g=a(x,g,b),null===m?h=x:m.sibling=x,m=x,y=_}if(b===s.length)return n(i,y),h;if(null===y){for(;b<s.length;b++){var w=p(i,s[b],u);null!==w&&(g=a(w,g,b),null===m?h=w:m.sibling=w,m=w)}return h}for(var k=r(0,y);b<s.length;b++){var O=d(k,i,b,s[b],u);null!==O&&(e&&null!==O.alternate&&k.delete(null===O.key?b:O.key),g=a(O,g,b),null===m?h=O:m.sibling=O,m=O)}return e&&k.forEach((function(e){return t(i,e)})),h}(s,u,c,h);if(q(c))return function(i,o,s,u){var c=q(s);if("function"!=typeof c)throw Error("An object is not an iterable. This error is likely caused by a bug in React. Please file an issue.");"function"==typeof Symbol&&"Generator"===s[Symbol.toStringTag]&&(cc||l("Using Generators as children is unsupported and will likely yield unexpected results because enumerating a generator mutates it. You may convert it to an array with `Array.from()` or the `[...spread]` operator before rendering. Keep in mind you might need to polyfill these features for older browsers."),cc=!0),s.entries===c&&(lc||l("Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead."),lc=!0);var h=c.call(s);if(h)for(var m=null,y=h.next();!y.done;y=h.next()){m=v(y.value,m)}var g=c.call(s);if(null==g)throw Error("An iterable object provided no iterator.");for(var b=null,_=null,x=o,w=0,k=0,O=null,E=g.next();null!==x&&!E.done;k++,E=g.next()){x.index>k?(O=x,x=null):O=x.sibling;var S=f(i,x,E.value,u);if(null===S){null===x&&(x=O);break}e&&x&&null===S.alternate&&t(i,x),w=a(S,w,k),null===_?b=S:_.sibling=S,_=S,x=O}if(E.done)return n(i,x),b;if(null===x){for(;!E.done;k++,E=g.next()){var T=p(i,E.value,u);null!==T&&(w=a(T,w,k),null===_?b=T:_.sibling=T,_=T)}return b}for(var P=r(0,x);!E.done;k++,E=g.next()){var j=d(P,i,k,E.value,u);null!==j&&(e&&null!==j.alternate&&P.delete(null===j.key?k:j.key),w=a(j,w,k),null===_?b=j:_.sibling=j,_=j)}return e&&P.forEach((function(e){return t(i,e)})),b}(s,u,c,h);if(y&&kc(s,c),"function"==typeof c&&Oc(),void 0===c&&!m)switch(s.tag){case 1:if(s.stateNode.render._isMockFunction)break;case 0:var g=s.type;throw Error((g.displayName||g.name||"Component")+"(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.")}return n(s,u)}}var Sc=Ec(!0),Tc=Ec(!1);function Pc(e,t){for(var n=e.child;null!==n;)Fv(n,t),n=n.sibling}var jc={},Cc=Ys(jc),Ac=Ys(jc),Mc=Ys(jc);function Ic(e){if(e===jc)throw Error("Expected host context to exist. This error is likely caused by a bug in React. Please file an issue.");return e}function Rc(){return Ic(Mc.current)}function Lc(e,t){Js(Mc,t,e),Js(Ac,e,e),Js(Cc,jc,e);var n=function(e){var t,n,r=e.nodeType;switch(r){case 9:case 11:t=9===r?"#document":"#fragment";var i=e.documentElement;n=i?i.namespaceURI:Dt(null,"");break;default:var a=8===r?e.parentNode:e;n=Dt(a.namespaceURI||null,t=a.tagName)}var o=t.toLowerCase();return{namespace:n,ancestorInfo:Di(null,o)}}(t);Ks(Cc,e),Js(Cc,n,e)}function zc(e){Ks(Cc,e),Ks(Ac,e),Ks(Mc,e)}function Dc(){return Ic(Cc.current)}function Fc(e){Ic(Mc.current);var t,n,r,i=Ic(Cc.current),a=(t=i,n=e.type,{namespace:Dt((r=t).namespace,n),ancestorInfo:Di(r.ancestorInfo,n)});i!==a&&(Js(Ac,e,e),Js(Cc,a,e))}function Bc(e){Ac.current===e&&(Ks(Cc,e),Ks(Ac,e))}var Nc=Ys(0);function Uc(e,t){return 0!=(e&t)}function Vc(e){return 1&e}function Wc(e,t){return 1&e|t}function qc(e,t){Js(Nc,t,e)}function Gc(e){Ks(Nc,e)}function Hc(e,t){var n=e.memoizedState;if(null!==n)return null!==n.dehydrated;var r=e.memoizedProps;return void 0!==r.fallback&&(!0!==r.unstable_avoidThisFallback||!t)}function Zc(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n){var r=n.dehydrated;if(null===r||"$?"===r.data||aa(r))return t}}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)return null;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Xc(e,t){var n={responder:e,props:t};return Object.freeze(n),n}var Yc,Kc=s.ReactCurrentDispatcher,Jc=s.ReactCurrentBatchConfig;Yc=new Set;var $c=0,Qc=null,eh=null,th=null,nh=!1,rh=null,ih=null,ah=-1,oh=!1;function sh(){var e=rh;null===ih?ih=[e]:ih.push(e)}function uh(){var e=rh;null!==ih&&(ah++,ih[ah]!==e&&function(e){var t=H(Qc.type);if(!Yc.has(t)&&(Yc.add(t),null!==ih)){for(var n="",r=0;r<=ah;r++){for(var i=ih[r],a=r===ah?e:i,o=r+1+". "+i;o.length<30;)o+=" ";n+=o+=a+"\n"}l("React has detected a change in the order of Hooks called by %s. This will lead to bugs and errors if not fixed. For more information, read the Rules of Hooks: https://fb.me/rules-of-hooks\n\n   Previous render            Next render\n   ------------------------------------------------------\n%s   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n",t,n)}}(e))}function lh(e){null==e||Array.isArray(e)||l("%s received a final argument that is not an array (instead, received `%s`). When specified, the final argument must be an array.",rh,typeof e)}function ch(){throw Error("Invalid hook call. Hooks can only be called inside of the body of a function component. This could happen for one of the following reasons:\n1. You might have mismatching versions of React and the renderer (such as React DOM)\n2. You might be breaking the Rules of Hooks\n3. You might have more than one copy of React in the same app\nSee https://fb.me/react-invalid-hook-call for tips about how to debug and fix this problem.")}function hh(e,t){if(oh)return!1;if(null===t)return l("%s received a final argument during this render, but not during the previous render. Even though the final argument is optional, its type cannot change between renders.",rh),!1;e.length!==t.length&&l("The final argument passed to %s changed size between renders. The order and size of this array must remain constant.\n\nPrevious: %s\nIncoming: %s",rh,"["+t.join(", ")+"]","["+e.join(", ")+"]");for(var n=0;n<t.length&&n<e.length;n++)if(!Bo(e[n],t[n]))return!1;return!0}function ph(e,t,n,r,i,a){$c=a,Qc=t,ih=null!==e?e._debugHookTypes:null,ah=-1,oh=null!==e&&e.type!==t.type,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,null!==e&&null!==e.memoizedState?Kc.current=Qh:Kc.current=null!==ih?$h:Jh;var o=n(r,i);if(t.expirationTime===$c){var s=0;do{if(t.expirationTime=0,!(s<25))throw Error("Too many re-renders. React limits the number of renders to prevent an infinite loop.");s+=1,oh=!1,eh=null,th=null,t.updateQueue=null,ah=-1,Kc.current=ep,o=n(r,i)}while(t.expirationTime===$c)}Kc.current=Kh,t._debugHookTypes=ih;var u=null!==eh&&null!==eh.next;if($c=0,Qc=null,eh=null,th=null,rh=null,ih=null,ah=-1,nh=!1,u)throw Error("Rendered fewer hooks than expected. This may be caused by an accidental early return statement.");return o}function fh(e,t,n){t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=n&&(e.expirationTime=0)}function dh(){if(Kc.current=Kh,nh)for(var e=Qc.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}$c=0,Qc=null,eh=null,th=null,ih=null,ah=-1,rh=null,nh=!1}function vh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===th?Qc.memoizedState=th=e:th=th.next=e,th}function mh(){var e,t;if(null===eh){var n=Qc.alternate;e=null!==n?n.memoizedState:null}else e=eh.next;if(null!==(t=null===th?Qc.memoizedState:th.next))t=(th=t).next,eh=e;else{if(null===e)throw Error("Rendered more hooks than during the previous render.");var r={memoizedState:(eh=e).memoizedState,baseState:eh.baseState,baseQueue:eh.baseQueue,queue:eh.queue,next:null};null===th?Qc.memoizedState=th=r:th=th.next=r}return th}function yh(e,t){return"function"==typeof t?t(e):t}function gh(e,t,n){var r,i=vh();r=void 0!==n?n(t):t,i.memoizedState=i.baseState=r;var a=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},o=a.dispatch=Yh.bind(null,Qc,a);return[i.memoizedState,o]}function bh(e,t,n){var r=mh(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var a=eh,o=a.baseQueue,s=i.pending;if(null!==s){if(null!==o){var u=o.next,l=s.next;o.next=l,s.next=u}a.baseQueue=o=s,i.pending=null}if(null!==o){var c=o.next,h=a.baseState,p=null,f=null,d=null,v=c;do{var m=v.expirationTime;if(m<$c){var y={expirationTime:v.expirationTime,suspenseConfig:v.suspenseConfig,action:v.action,eagerReducer:v.eagerReducer,eagerState:v.eagerState,next:null};null===d?(f=d=y,p=h):d=d.next=y,m>Qc.expirationTime&&(Qc.expirationTime=m,Fd(m))}else{if(null!==d){var g={expirationTime:Uu,suspenseConfig:v.suspenseConfig,action:v.action,eagerReducer:v.eagerReducer,eagerState:v.eagerState,next:null};d=d.next=g}if(Dd(m,v.suspenseConfig),v.eagerReducer===e)h=v.eagerState;else h=e(h,v.action)}v=v.next}while(null!==v&&v!==c);null===d?p=h:d.next=f,Bo(h,r.memoizedState)||of(),r.memoizedState=h,r.baseState=p,r.baseQueue=d,i.lastRenderedState=h}var b=i.dispatch;return[r.memoizedState,b]}function _h(e,t,n){var r=mh(),i=r.queue;if(null===i)throw Error("Should have a queue. This is likely a bug in React. Please file an issue.");i.lastRenderedReducer=e;var a=i.dispatch,o=i.pending,s=r.memoizedState;if(null!==o){i.pending=null;var u=o.next,l=u;do{s=e(s,l.action),l=l.next}while(l!==u);Bo(s,r.memoizedState)||of(),r.memoizedState=s,null===r.baseQueue&&(r.baseState=s),i.lastRenderedState=s}return[s,a]}function xh(e){var t=vh();"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e;var n=t.queue={pending:null,dispatch:null,lastRenderedReducer:yh,lastRenderedState:e},r=n.dispatch=Yh.bind(null,Qc,n);return[t.memoizedState,r]}function wh(e){return bh(yh)}function kh(e){return _h(yh)}function Oh(e,t,n,r){var i={tag:e,create:t,destroy:n,deps:r,next:null},a=Qc.updateQueue;if(null===a)a={lastEffect:null},Qc.updateQueue=a,a.lastEffect=i.next=i;else{var o=a.lastEffect;if(null===o)a.lastEffect=i.next=i;else{var s=o.next;o.next=i,i.next=s,a.lastEffect=i}}return i}function Eh(e){var t=vh(),n={current:e};return Object.seal(n),t.memoizedState=n,n}function Sh(e){return mh().memoizedState}function Th(e,t,n,r){var i=vh(),a=void 0===r?null:r;Qc.effectTag|=e,i.memoizedState=Oh(1|t,n,void 0,a)}function Ph(e,t,n,r){var i=mh(),a=void 0===r?null:r,o=void 0;if(null!==eh){var s=eh.memoizedState;if(o=s.destroy,null!==a)if(hh(a,s.deps))return void Oh(t,n,o,a)}Qc.effectTag|=e,i.memoizedState=Oh(1|t,n,o,a)}function jh(e,t){return"undefined"!=typeof jest&&pv(Qc),Th(516,4,e,t)}function Ch(e,t){return"undefined"!=typeof jest&&pv(Qc),Ph(516,4,e,t)}function Ah(e,t){return Th(4,2,e,t)}function Mh(e,t){return Ph(4,2,e,t)}function Ih(e,t){if("function"==typeof t){var n=t,r=e();return n(r),function(){n(null)}}if(null!=t){var i=t;i.hasOwnProperty("current")||l("Expected useImperativeHandle() first argument to either be a ref callback or React.createRef() object. Instead received: %s.","an object with keys {"+Object.keys(i).join(", ")+"}");var a=e();return i.current=a,function(){i.current=null}}}function Rh(e,t,n){"function"!=typeof t&&l("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return Th(4,2,Ih.bind(null,t,e),r)}function Lh(e,t,n){"function"!=typeof t&&l("Expected useImperativeHandle() second argument to be a function that creates a handle. Instead received: %s.",null!==t?typeof t:"null");var r=null!=n?n.concat([e]):null;return Ph(4,2,Ih.bind(null,t,e),r)}function zh(e,t){}var Dh=zh;function Fh(e,t){var n=void 0===t?null:t;return vh().memoizedState=[e,n],e}function Bh(e,t){var n=mh(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&(null!==r&&hh(r,i[1])))return i[0];return n.memoizedState=[e,r],e}function Nh(e,t){var n=vh(),r=void 0===t?null:t,i=e();return n.memoizedState=[i,r],i}function Uh(e,t){var n=mh(),r=void 0===t?null:t,i=n.memoizedState;if(null!==i&&(null!==r&&hh(r,i[1])))return i[0];var a=e();return n.memoizedState=[a,r],a}function Vh(e,t){var n=xh(e),r=n[0],i=n[1];return jh((function(){var n=Jc.suspense;Jc.suspense=void 0===t?null:t;try{i(e)}finally{Jc.suspense=n}}),[e,t]),r}function Wh(e,t){var n=wh(),r=n[0],i=n[1];return Ch((function(){var n=Jc.suspense;Jc.suspense=void 0===t?null:t;try{i(e)}finally{Jc.suspense=n}}),[e,t]),r}function qh(e,t){var n=kh(),r=n[0],i=n[1];return Ch((function(){var n=Jc.suspense;Jc.suspense=void 0===t?null:t;try{i(e)}finally{Jc.suspense=n}}),[e,t]),r}function Gh(e,t,n){var r=Ru();zu(r<98?98:r,(function(){e(!0)})),zu(r>97?97:r,(function(){var r=Jc.suspense;Jc.suspense=void 0===t?null:t;try{e(!1),n()}finally{Jc.suspense=r}}))}function Hh(e){var t=xh(!1),n=t[0],r=t[1];return[Fh(Gh.bind(null,r,e),[r,e]),n]}function Zh(e){var t=wh(),n=t[0],r=t[1];return[Bh(Gh.bind(null,r,e),[r,e]),n]}function Xh(e){var t=kh(),n=t[0],r=t[1];return[Bh(Gh.bind(null,r,e),[r,e]),n]}function Yh(e,t,n){"function"==typeof arguments[3]&&l("State updates from the useState() and useReducer() Hooks don't support the second callback argument. To execute a side effect after rendering, declare it in the component body with useEffect().");var r=_d(),i=Zl(),a=xd(r,e,i),o={expirationTime:a,suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};o.priority=Ru();var s=t.pending;null===s?o.next=o:(o.next=s.next,s.next=o),t.pending=o;var u=e.alternate;if(e===Qc||null!==u&&u===Qc)nh=!0,o.expirationTime=$c,Qc.expirationTime=$c;else{if(0===e.expirationTime&&(null===u||0===u.expirationTime)){var c=t.lastRenderedReducer;if(null!==c){var h;h=Kc.current,Kc.current=np;try{var p=t.lastRenderedState,f=c(p,n);if(o.eagerReducer=c,o.eagerState=f,Bo(f,p))return}catch(e){}finally{Kc.current=h}}}"undefined"!=typeof jest&&(hv(e),fv(e)),wd(e,a)}}var Kh={readContext:Cl,useCallback:ch,useContext:ch,useEffect:ch,useImperativeHandle:ch,useLayoutEffect:ch,useMemo:ch,useReducer:ch,useRef:ch,useState:ch,useDebugValue:ch,useResponder:ch,useDeferredValue:ch,useTransition:ch},Jh=null,$h=null,Qh=null,ep=null,tp=null,np=null,rp=null,ip=function(){l("Context can only be read while React is rendering. In classes, you can read it in the render method or getDerivedStateFromProps. In function components, you can read it directly in the function body, but not inside Hooks like useReducer() or useMemo().")},ap=function(){l("Do not call Hooks inside useEffect(...), useMemo(...), or other built-in Hooks. You can only call Hooks at the top level of your React function. For more information, see https://fb.me/rules-of-hooks")};Jh={readContext:function(e,t){return Cl(e,t)},useCallback:function(e,t){return rh="useCallback",sh(),lh(t),Fh(e,t)},useContext:function(e,t){return rh="useContext",sh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",sh(),lh(t),jh(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",sh(),lh(n),Rh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",sh(),lh(t),Ah(e,t)},useMemo:function(e,t){rh="useMemo",sh(),lh(t);var n=Kc.current;Kc.current=tp;try{return Nh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",sh();var r=Kc.current;Kc.current=tp;try{return gh(e,t,n)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",sh(),Eh(e)},useState:function(e){rh="useState",sh();var t=Kc.current;Kc.current=tp;try{return xh(e)}finally{Kc.current=t}},useDebugValue:function(e,t){rh="useDebugValue",sh()},useResponder:function(e,t){return rh="useResponder",sh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",sh(),Vh(e,t)},useTransition:function(e){return rh="useTransition",sh(),Hh(e)}},$h={readContext:function(e,t){return Cl(e,t)},useCallback:function(e,t){return rh="useCallback",uh(),Fh(e,t)},useContext:function(e,t){return rh="useContext",uh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",uh(),jh(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",uh(),Rh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",uh(),Ah(e,t)},useMemo:function(e,t){rh="useMemo",uh();var n=Kc.current;Kc.current=tp;try{return Nh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",uh();var r=Kc.current;Kc.current=tp;try{return gh(e,t,n)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",uh(),Eh(e)},useState:function(e){rh="useState",uh();var t=Kc.current;Kc.current=tp;try{return xh(e)}finally{Kc.current=t}},useDebugValue:function(e,t){rh="useDebugValue",uh()},useResponder:function(e,t){return rh="useResponder",uh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",uh(),Vh(e,t)},useTransition:function(e){return rh="useTransition",uh(),Hh(e)}},Qh={readContext:function(e,t){return Cl(e,t)},useCallback:function(e,t){return rh="useCallback",uh(),Bh(e,t)},useContext:function(e,t){return rh="useContext",uh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",uh(),Ch(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",uh(),Lh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",uh(),Mh(e,t)},useMemo:function(e,t){rh="useMemo",uh();var n=Kc.current;Kc.current=np;try{return Uh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",uh();var r=Kc.current;Kc.current=np;try{return bh(e)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",uh(),Sh()},useState:function(e){rh="useState",uh();var t=Kc.current;Kc.current=np;try{return wh()}finally{Kc.current=t}},useDebugValue:function(e,t){return rh="useDebugValue",uh(),Dh()},useResponder:function(e,t){return rh="useResponder",uh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",uh(),Wh(e,t)},useTransition:function(e){return rh="useTransition",uh(),Zh(e)}},ep={readContext:function(e,t){return Cl(e,t)},useCallback:function(e,t){return rh="useCallback",uh(),Bh(e,t)},useContext:function(e,t){return rh="useContext",uh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",uh(),Ch(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",uh(),Lh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",uh(),Mh(e,t)},useMemo:function(e,t){rh="useMemo",uh();var n=Kc.current;Kc.current=rp;try{return Uh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",uh();var r=Kc.current;Kc.current=rp;try{return _h(e)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",uh(),Sh()},useState:function(e){rh="useState",uh();var t=Kc.current;Kc.current=rp;try{return kh()}finally{Kc.current=t}},useDebugValue:function(e,t){return rh="useDebugValue",uh(),Dh()},useResponder:function(e,t){return rh="useResponder",uh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",uh(),qh(e,t)},useTransition:function(e){return rh="useTransition",uh(),Xh(e)}},tp={readContext:function(e,t){return ip(),Cl(e,t)},useCallback:function(e,t){return rh="useCallback",ap(),sh(),Fh(e,t)},useContext:function(e,t){return rh="useContext",ap(),sh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",ap(),sh(),jh(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",ap(),sh(),Rh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",ap(),sh(),Ah(e,t)},useMemo:function(e,t){rh="useMemo",ap(),sh();var n=Kc.current;Kc.current=tp;try{return Nh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",ap(),sh();var r=Kc.current;Kc.current=tp;try{return gh(e,t,n)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",ap(),sh(),Eh(e)},useState:function(e){rh="useState",ap(),sh();var t=Kc.current;Kc.current=tp;try{return xh(e)}finally{Kc.current=t}},useDebugValue:function(e,t){rh="useDebugValue",ap(),sh()},useResponder:function(e,t){return rh="useResponder",ap(),sh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",ap(),sh(),Vh(e,t)},useTransition:function(e){return rh="useTransition",ap(),sh(),Hh(e)}},np={readContext:function(e,t){return ip(),Cl(e,t)},useCallback:function(e,t){return rh="useCallback",ap(),uh(),Bh(e,t)},useContext:function(e,t){return rh="useContext",ap(),uh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",ap(),uh(),Ch(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",ap(),uh(),Lh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",ap(),uh(),Mh(e,t)},useMemo:function(e,t){rh="useMemo",ap(),uh();var n=Kc.current;Kc.current=np;try{return Uh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",ap(),uh();var r=Kc.current;Kc.current=np;try{return bh(e)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",ap(),uh(),Sh()},useState:function(e){rh="useState",ap(),uh();var t=Kc.current;Kc.current=np;try{return wh()}finally{Kc.current=t}},useDebugValue:function(e,t){return rh="useDebugValue",ap(),uh(),Dh()},useResponder:function(e,t){return rh="useResponder",ap(),uh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",ap(),uh(),Wh(e,t)},useTransition:function(e){return rh="useTransition",ap(),uh(),Zh(e)}},rp={readContext:function(e,t){return ip(),Cl(e,t)},useCallback:function(e,t){return rh="useCallback",ap(),uh(),Bh(e,t)},useContext:function(e,t){return rh="useContext",ap(),uh(),Cl(e,t)},useEffect:function(e,t){return rh="useEffect",ap(),uh(),Ch(e,t)},useImperativeHandle:function(e,t,n){return rh="useImperativeHandle",ap(),uh(),Lh(e,t,n)},useLayoutEffect:function(e,t){return rh="useLayoutEffect",ap(),uh(),Mh(e,t)},useMemo:function(e,t){rh="useMemo",ap(),uh();var n=Kc.current;Kc.current=np;try{return Uh(e,t)}finally{Kc.current=n}},useReducer:function(e,t,n){rh="useReducer",ap(),uh();var r=Kc.current;Kc.current=np;try{return _h(e)}finally{Kc.current=r}},useRef:function(e){return rh="useRef",ap(),uh(),Sh()},useState:function(e){rh="useState",ap(),uh();var t=Kc.current;Kc.current=np;try{return kh()}finally{Kc.current=t}},useDebugValue:function(e,t){return rh="useDebugValue",ap(),uh(),Dh()},useResponder:function(e,t){return rh="useResponder",ap(),uh(),Xc(e,t)},useDeferredValue:function(e,t){return rh="useDeferredValue",ap(),uh(),qh(e,t)},useTransition:function(e){return rh="useTransition",ap(),uh(),Xh(e)}};var op=i.unstable_now,sp=0,up=-1;function lp(){sp=op()}function cp(e){up=op(),e.actualStartTime<0&&(e.actualStartTime=op())}function hp(e){up=-1}function pp(e,t){if(up>=0){var n=op()-up;e.actualDuration+=n,t&&(e.selfBaseDuration=n),up=-1}}var fp=null,dp=null,vp=!1;function mp(e,t){switch(e.tag){case 3:!function(e,t){1===t.nodeType?xi(e,t):8===t.nodeType||wi(e,t)}(e.stateNode.containerInfo,t);break;case 5:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&(1===r.nodeType?xi(n,r):8===r.nodeType||wi(n,r))}(e.type,e.memoizedProps,e.stateNode,t)}var n,r=((n=Lv(5,null,null,0)).elementType="DELETED",n.type="DELETED",n);r.stateNode=t,r.return=e,r.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function yp(e,t){switch(t.effectTag=-1025&t.effectTag|2,e.tag){case 3:var n=e.stateNode.containerInfo;switch(t.tag){case 5:var r=t.type;t.pendingProps;!function(e,t,n){ki(e,t)}(n,r);break;case 6:!function(e,t){Oi(e,t)}(n,t.pendingProps)}break;case 5:e.type;var i=e.memoizedProps,a=e.stateNode;switch(t.tag){case 5:var o=t.type;t.pendingProps;!function(e,t,n,r,i){!0!==t.suppressHydrationWarning&&ki(n,r)}(0,i,a,o);break;case 6:!function(e,t,n,r){!0!==t.suppressHydrationWarning&&Oi(n,r)}(0,i,a,t.pendingProps);break;case 13:!function(e,t,n){t.suppressHydrationWarning}(0,i)}break;default:return}}function gp(e,t){switch(e.tag){case 5:var n=e.type,r=(e.pendingProps,function(e,t,n){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e}(t,n));return null!==r&&(e.stateNode=r,!0);case 6:var i=function(e,t){return""===t||3!==e.nodeType?null:e}(t,e.pendingProps);return null!==i&&(e.stateNode=i,!0);case 13:default:return!1}}function bp(e){if(vp){var t=dp;if(!t)return yp(fp,e),vp=!1,void(fp=e);var n=t;if(!gp(e,t)){if(!(t=sa(n))||!gp(e,t))return yp(fp,e),vp=!1,void(fp=e);mp(fp,n)}fp=e,dp=ua(t)}}function _p(e){var t=e.stateNode,n=e.memoizedProps,r=function(e,t,n){return va(n,e),function(e,t){return e.nodeValue!==t}(e,t)}(t,n,e);if(r){var i=fp;if(null!==i)switch(i.tag){case 3:i.stateNode.containerInfo;!function(e,t,n){_i(t,n)}(0,t,n);break;case 5:i.type;var a=i.memoizedProps;i.stateNode;!function(e,t,n,r,i){!0!==t.suppressHydrationWarning&&_i(r,i)}(0,a,0,t,n)}}return r}function xp(e){var t=e.memoizedState,n=null!==t?t.dehydrated:null;if(!n)throw Error("Expected to have a hydrated suspense instance. This error is likely caused by a bug in React. Please file an issue.");return function(e){for(var t=e.nextSibling,n=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===n)return sa(t);n--}else"$"!==r&&"$!"!==r&&"$?"!==r||n++}t=t.nextSibling}return null}(n)}function wp(e){for(var t=e.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;fp=t}function kp(e){if(e!==fp)return!1;if(!vp)return wp(e),vp=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Yi(t,e.memoizedProps))for(var n=dp;n;)mp(e,n),n=sa(n);return wp(e),dp=13===e.tag?xp(e):fp?sa(e.stateNode):null,!0}function Op(){fp=null,dp=null,vp=!1}var Ep,Sp,Tp,Pp,jp,Cp,Ap,Mp,Ip,Rp=s.ReactCurrentOwner,Lp=!1;function zp(e,t,n,r){t.child=null===e?Tc(t,null,n,r):Sc(t,e.child,n,r)}function Dp(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&a(o,r,"prop",H(n),Q)}var s,u=n.render,l=t.ref;return jl(t,i),Rp.current=t,ne("render"),s=ph(e,t,u,r,l,i),1&t.mode&&null!==t.memoizedState&&(s=ph(e,t,u,r,l,i)),ne(null),null===e||Lp?(t.effectTag|=1,zp(e,t,s,i),t.child):(fh(e,t,i),sf(e,t,i))}function Fp(e,t,n,r,i,o){if(null===e){var s=n.type;if(function(e){return"function"==typeof e&&!zv(e)&&void 0===e.defaultProps}(s)&&null===n.compare&&void 0===n.defaultProps){var u;return u=sl(s),t.tag=15,t.type=u,Zp(t,s),Bp(e,t,u,r,i,o)}var l=s.propTypes;l&&a(l,r,"prop",H(s),Q);var c=Bv(n.type,null,r,null,t.mode,o);return c.ref=t.ref,c.return=t,t.child=c,c}var h=n.type,p=h.propTypes;p&&a(p,r,"prop",H(h),Q);var f=e.child;if(i<o){var d=f.memoizedProps,v=n.compare;if((v=null!==v?v:Uo)(d,r)&&e.ref===t.ref)return sf(e,t,o)}t.effectTag|=1;var m=Dv(f,r);return m.ref=t.ref,m.return=t,t.child=m,m}function Bp(e,t,n,r,i,o){if(t.type!==t.elementType){var s=t.elementType;s.$$typeof===U&&(s=G(s));var u=s&&s.propTypes;u&&a(u,r,"prop",H(s),Q)}if(null!==e&&(Uo(e.memoizedProps,r)&&e.ref===t.ref&&t.type===e.type&&(Lp=!1,i<o)))return t.expirationTime=e.expirationTime,sf(e,t,o);return Up(e,t,n,r,o)}function Np(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Up(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&a(o,r,"prop",H(n),Q)}var s,u;return s=iu(t,nu(0,n,!0)),jl(t,i),Rp.current=t,ne("render"),u=ph(e,t,n,r,s,i),1&t.mode&&null!==t.memoizedState&&(u=ph(e,t,n,r,s,i)),ne(null),null===e||Lp?(t.effectTag|=1,zp(e,t,u,i),t.child):(fh(e,t,i),sf(e,t,i))}function Vp(e,t,n,r,i){if(t.type!==t.elementType){var o=n.propTypes;o&&a(o,r,"prop",H(n),Q)}var s,u;ou(n)?(s=!0,hu(t)):s=!1,jl(t,i),null===t.stateNode?(null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),yc(t,n,r),bc(t,n,r,i),u=!0):u=null===e?function(e,t,n,r){var i=e.stateNode,a=e.memoizedProps;i.props=a;var o=i.context,s=t.contextType,u=$s;u="object"==typeof s&&null!==s?Cl(s):iu(e,nu(0,t,!0));var l=t.getDerivedStateFromProps,c="function"==typeof l||"function"==typeof i.getSnapshotBeforeUpdate;c||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||a===n&&o===u||gc(e,i,n,u),Wl();var h=e.memoizedState,p=i.state=h;if(Ul(e,n,i,r),p=e.memoizedState,a===n&&h===p&&!au()&&!ql())return"function"==typeof i.componentDidMount&&(e.effectTag|=4),!1;"function"==typeof l&&(uc(e,t,l,n),p=e.memoizedState);var f=ql()||vc(e,t,a,n,h,p,u);return f?(c||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(Ls(e,"componentWillMount"),"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),zs()),"function"==typeof i.componentDidMount&&(e.effectTag|=4)):("function"==typeof i.componentDidMount&&(e.effectTag|=4),e.memoizedProps=n,e.memoizedState=p),i.props=n,i.state=p,i.context=u,f}(t,n,r,i):function(e,t,n,r,i){var a=t.stateNode;zl(e,t);var o=t.memoizedProps;a.props=t.type===t.elementType?o:vl(t.type,o);var s=a.context,u=n.contextType,l=$s;l="object"==typeof u&&null!==u?Cl(u):iu(t,nu(0,n,!0));var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||o===r&&s===l||gc(t,a,r,l),Wl();var p=t.memoizedState,f=a.state=p;if(Ul(t,r,a,i),f=t.memoizedState,o===r&&p===f&&!au()&&!ql())return"function"==typeof a.componentDidUpdate&&(o===e.memoizedProps&&p===e.memoizedState||(t.effectTag|=4)),"function"==typeof a.getSnapshotBeforeUpdate&&(o===e.memoizedProps&&p===e.memoizedState||(t.effectTag|=256)),!1;"function"==typeof c&&(uc(t,n,c,r),f=t.memoizedState);var d=ql()||vc(t,n,o,r,p,f,l);return d?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||(Ls(t,"componentWillUpdate"),"function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l),zs()),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"==typeof a.componentDidUpdate&&(o===e.memoizedProps&&p===e.memoizedState||(t.effectTag|=4)),"function"==typeof a.getSnapshotBeforeUpdate&&(o===e.memoizedProps&&p===e.memoizedState||(t.effectTag|=256)),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,d}(e,t,n,r,i);var c=Wp(e,t,n,u,s,i);return t.stateNode.props!==r&&(Cp||l("It looks like %s is reassigning its own `this.props` while rendering. This is not supported and can lead to confusing bugs.",H(t.type)||"a component"),Cp=!0),c}function Wp(e,t,n,r,i,a){Np(e,t);var o=0!=(64&t.effectTag);if(!r&&!o)return i&&pu(t,n,!1),sf(e,t,a);var s,u=t.stateNode;return Rp.current=t,o&&"function"!=typeof n.getDerivedStateFromError?(s=null,hp()):(ne("render"),s=u.render(),1&t.mode&&u.render(),ne(null)),t.effectTag|=1,null!==e&&o?function(e,t,n,r){t.child=Sc(t,e.child,null,r),t.child=Sc(t,null,n,r)}(e,t,s,a):zp(e,t,s,a),t.memoizedState=u.state,i&&pu(t,n,!0),t.child}function qp(e){var t=e.stateNode;t.pendingContext?lu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lu(e,t.context,!1),Lc(e,t.containerInfo)}function Gp(e,t,n){qp(t);var r=t.updateQueue;if(null===e||null===r)throw Error("If the root does not have an updateQueue, we should have already bailed out. This error is likely caused by a bug in React. Please file an issue.");var i=t.pendingProps,a=t.memoizedState,o=null!==a?a.element:null;zl(e,t),Ul(t,i,null,n);var s,u,l=t.memoizedState.element;if(l===o)return Op(),sf(e,t,n);if(t.stateNode.hydrate&&(u=(s=t).stateNode.containerInfo,dp=ua(u),fp=s,vp=!0,1)){var c=Tc(t,null,l,n);t.child=c;for(var h=c;h;)h.effectTag=-3&h.effectTag|1024,h=h.sibling}else zp(e,t,l,n),Op();return t.child}function Hp(e,t,n,r,i){null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2);var o=t.pendingProps;Ms(t);var s=ml(n);t.type=s;var u=t.tag=function(e){if("function"==typeof e)return zv(e)?1:0;if(null!=e){var t=e.$$typeof;if(t===D)return 11;if(t===N)return 14}return 2}(s);As(t);var l=vl(s,o);switch(u){case 0:return Zp(t,s),t.type=s=sl(s),Up(null,t,s,l,i);case 1:return t.type=s=ul(s),Vp(null,t,s,l,i);case 11:return t.type=s=ll(s),Dp(null,t,s,l,i);case 14:if(t.type!==t.elementType){var c=s.propTypes;c&&a(c,l,"prop",H(s),Q)}return Fp(null,t,s,vl(s.type,l),r,i)}var h="";throw null!==s&&"object"==typeof s&&s.$$typeof===U&&(h=" Did you wrap a component in React.lazy() more than once?"),Error("Element type is invalid. Received a promise that resolves to: "+s+". Lazy element type must resolve to a class or function."+h)}function Zp(e,t){if(t&&t.childContextTypes&&l("%s(...): childContextTypes cannot be defined on a function component.",t.displayName||t.name||"Component"),null!==e.ref){var n="",r=$();r&&(n+="\n\nCheck the render method of `"+r+"`.");var i=r||e._debugID||"",a=e._debugSource;a&&(i=a.fileName+":"+a.lineNumber),jp[i]||(jp[i]=!0,l("Function components cannot be given refs. Attempts to access this ref will fail. Did you mean to use React.forwardRef()?%s",n))}if("function"==typeof t.getDerivedStateFromProps){var o=H(t)||"Unknown";Pp[o]||(l("%s: Function components do not support getDerivedStateFromProps.",o),Pp[o]=!0)}if("object"==typeof t.contextType&&null!==t.contextType){var s=H(t)||"Unknown";Tp[s]||(l("%s: Function components do not support contextType.",s),Tp[s]=!0)}}Ep={},Sp={},Tp={},Pp={},jp={},Cp=!1,Ap=!1,Mp={},Ip={};var Xp={dehydrated:null,retryTime:0};function Yp(e,t,n){var r=t.mode,i=t.pendingProps;nm(t)&&(t.effectTag|=64);var a=Nc.current,o=!1;if(0!=(64&t.effectTag)||function(e,t,n){return Uc(e,2)&&(null===t||null!==t.memoizedState)}(a,e)?(o=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0!==i.fallback&&!0!==i.unstable_avoidThisFallback&&(a=a|1),qc(t,a=Vc(a)),"maxDuration"in i&&(Ap||(Ap=!0,l("maxDuration has been removed from React. Remove the maxDuration prop."))),null===e){if(void 0!==i.fallback&&bp(t),o){var s=i.fallback,u=Uv(null,r,0,null);if(u.return=t,0==(2&t.mode)){var c=null!==t.memoizedState?t.child.child:t.child;u.child=c;for(var h=c;null!==h;)h.return=u,h=h.sibling}var p=Uv(s,r,n,null);return p.return=t,u.sibling=p,t.memoizedState=Xp,t.child=u,p}var f=i.children;return t.memoizedState=null,t.child=Tc(t,null,f,n)}if(null!==e.memoizedState){var d=e.child,v=d.sibling;if(o){var m=i.fallback,y=Dv(d,d.pendingProps);if(y.return=t,0==(2&t.mode)){var g=null!==t.memoizedState?t.child.child:t.child;if(g!==d.child){y.child=g;for(var b=g;null!==b;)b.return=y,b=b.sibling}}if(8&t.mode){for(var _=0,x=y.child;null!==x;)_+=x.treeBaseDuration,x=x.sibling;y.treeBaseDuration=_}var w=Dv(v,m);return w.return=t,y.sibling=w,y.childExpirationTime=0,t.memoizedState=Xp,t.child=y,w}var k=i.children,O=d.child,E=Sc(t,O,k,n);return t.memoizedState=null,t.child=E}var S=e.child;if(o){var T=i.fallback,P=Uv(null,r,0,null);if(P.return=t,P.child=S,null!==S&&(S.return=P),0==(2&t.mode)){var j=null!==t.memoizedState?t.child.child:t.child;P.child=j;for(var C=j;null!==C;)C.return=P,C=C.sibling}if(8&t.mode){for(var A=0,M=P.child;null!==M;)A+=M.treeBaseDuration,M=M.sibling;P.treeBaseDuration=A}var I=Uv(T,r,n,null);return I.return=t,P.sibling=I,I.effectTag|=2,P.childExpirationTime=0,t.memoizedState=Xp,t.child=P,I}t.memoizedState=null;var R=i.children;return t.child=Sc(t,S,R,n)}function Kp(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),Pl(e.return,t)}function Jp(e,t){var n=Array.isArray(e),r=!n&&"function"==typeof q(e);if(n||r){var i=n?"array":"iterable";return l("A nested %s was passed to row #%s in <SuspenseList />. Wrap it in an additional SuspenseList to configure its revealOrder: <SuspenseList revealOrder=...> ... <SuspenseList revealOrder=...>{%s}</SuspenseList> ... </SuspenseList>",i,t,i),!1}return!0}function $p(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailExpiration=0,o.tailMode=i,o.lastEffect=a)}function Qp(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail,o=r.children;!function(e){if(void 0!==e&&"forwards"!==e&&"backwards"!==e&&"together"!==e&&!Mp[e])if(Mp[e]=!0,"string"==typeof e)switch(e.toLowerCase()){case"together":case"forwards":case"backwards":l('"%s" is not a valid value for revealOrder on <SuspenseList />. Use lowercase "%s" instead.',e,e.toLowerCase());break;case"forward":case"backward":l('"%s" is not a valid value for revealOrder on <SuspenseList />. React uses the -s suffix in the spelling. Use "%ss" instead.',e,e.toLowerCase());break;default:l('"%s" is not a supported revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}else l('%s is not a supported value for revealOrder on <SuspenseList />. Did you mean "together", "forwards" or "backwards"?',e)}(i),function(e,t){void 0===e||Ip[e]||("collapsed"!==e&&"hidden"!==e?(Ip[e]=!0,l('"%s" is not a supported value for tail on <SuspenseList />. Did you mean "collapsed" or "hidden"?',e)):"forwards"!==t&&"backwards"!==t&&(Ip[e]=!0,l('<SuspenseList tail="%s" /> is only valid if revealOrder is "forwards" or "backwards". Did you mean to specify revealOrder="forwards"?',e)))}(a,i),function(e,t){if(("forwards"===t||"backwards"===t)&&null!=e&&!1!==e)if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(!Jp(e[n],n))return}else{var r=q(e);if("function"==typeof r){var i=r.call(e);if(i)for(var a=i.next(),o=0;!a.done;a=i.next()){if(!Jp(a.value,o))return;o++}}else l('A single row was passed to a <SuspenseList revealOrder="%s" />. This is not useful since it needs multiple rows. Did you mean to pass multiple children or an array?',t)}}(o,i),zp(e,t,o,n);var s=Nc.current;Uc(s,2)?(s=Wc(s,2),t.effectTag|=64):(null!==e&&0!=(64&e.effectTag)&&function(e,t,n){for(var r=t;null!==r;){if(13===r.tag)null!==r.memoizedState&&Kp(r,n);else if(19===r.tag)Kp(r,n);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)return;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}(t,t.child,n),s=Vc(s));if(qc(t,s),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":var u,c=function(e){for(var t=e,n=null;null!==t;){var r=t.alternate;null!==r&&null===Zc(r)&&(n=t),t=t.sibling}return n}(t.child);null===c?(u=t.child,t.child=null):(u=c.sibling,c.sibling=null),$p(t,!1,u,c,a,t.lastEffect);break;case"backwards":var h=null,p=t.child;for(t.child=null;null!==p;){var f=p.alternate;if(null!==f&&null===Zc(f)){t.child=p;break}var d=p.sibling;p.sibling=h,h=p,p=d}$p(t,!0,h,null,a,t.lastEffect);break;case"together":$p(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ef(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,u=t.type.propTypes;if(u&&a(u,i,"prop","Context.Provider",Q),Sl(t,s),null!==o){var c=function(e,t,n){if(Bo(n,t))return 0;var r="function"==typeof e._calculateChangedBits?e._calculateChangedBits(n,t):1073741823;return(1073741823&r)!==r&&l("calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",r),0|r}(r,s,o.value);if(0===c){if(o.children===i.children&&!au())return sf(e,t,n)}else!function(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=void 0,o=i.dependencies;if(null!==o){a=i.child;for(var s=o.firstContext;null!==s;){if(s.context===t&&0!=(s.observedBits&n)){if(1===i.tag){var u=Dl(r,null);u.tag=Il,Fl(i,u)}i.expirationTime<r&&(i.expirationTime=r);var l=i.alternate;null!==l&&l.expirationTime<r&&(l.expirationTime=r),Pl(i.return,r),o.expirationTime<r&&(o.expirationTime=r);break}s=s.next}}else a=10===i.tag&&i.type===e.type?null:i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}var c=a.sibling;if(null!==c){c.return=a.return,a=c;break}a=a.return}i=a}}(t,r,c,n)}return zp(e,t,i.children,n),t.child}var tf,nf,rf,af=!1;function of(){Lp=!0}function sf(e,t,n){Ms(t),null!==e&&(t.dependencies=e.dependencies),hp();var r=t.expirationTime;return 0!==r&&Fd(r),t.childExpirationTime<n?null:(function(e,t){if(null!==e&&t.child!==e.child)throw Error("Resuming work not yet implemented.");if(null!==t.child){var n=t.child,r=Dv(n,n.pendingProps);for(t.child=r,r.return=t;null!==n.sibling;)n=n.sibling,(r=r.sibling=Dv(n,n.pendingProps)).return=t;r.sibling=null}}(e,t),t.child)}function uf(e,t,n){var r=t.expirationTime;if(t._debugNeedsRemount&&null!==e)return function(e,t,n){var r=t.return;if(null===r)throw new Error("Cannot swap the root fiber.");if(e.alternate=null,t.alternate=null,n.index=t.index,n.sibling=t.sibling,n.return=t.return,n.ref=t.ref,t===r.child)r.child=n;else{var i=r.child;if(null===i)throw new Error("Expected parent to have a child.");for(;i.sibling!==t;)if(null===(i=i.sibling))throw new Error("Expected to find the previous sibling.");i.sibling=n}var a=r.lastEffect;return null!==a?(a.nextEffect=e,r.lastEffect=e):r.firstEffect=r.lastEffect=e,e.nextEffect=null,e.effectTag=8,n.effectTag|=2,n}(e,t,Bv(t.type,t.key,t.pendingProps,t._debugOwner||null,t.mode,t.expirationTime));if(null!==e){var i=e.memoizedProps,o=t.pendingProps;if(i!==o||au()||t.type!==e.type)Lp=!0;else{if(r<n){switch(Lp=!1,t.tag){case 3:qp(t),Op();break;case 5:if(Fc(t),4&t.mode&&1!==n&&Ki(t.type,o))return mv(1),t.expirationTime=t.childExpirationTime=1,null;break;case 1:ou(t.type)&&hu(t);break;case 4:Lc(t,t.stateNode.containerInfo);break;case 10:Sl(t,t.memoizedProps.value);break;case 12:t.childExpirationTime>=n&&(t.effectTag|=4);break;case 13:if(null!==t.memoizedState){var s=t.child.childExpirationTime;if(0!==s&&s>=n)return Yp(e,t,n);qc(t,Vc(Nc.current));var u=sf(e,t,n);return null!==u?u.sibling:null}qc(t,Vc(Nc.current));break;case 19:var c=0!=(64&e.effectTag),h=t.childExpirationTime>=n;if(c){if(h)return Qp(e,t,n);t.effectTag|=64}var p=t.memoizedState;if(null!==p&&(p.rendering=null,p.tail=null),qc(t,Nc.current),h)break;return null}return sf(e,t,n)}Lp=!1}}else Lp=!1;switch(t.expirationTime=0,t.tag){case 2:return function(e,t,n,r){null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2);var i,a,o=t.pendingProps;if(i=iu(t,nu(0,n,!1)),jl(t,r),n.prototype&&"function"==typeof n.prototype.render){var s=H(n)||"Unknown";Ep[s]||(l("The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",s,s),Ep[s]=!0)}if(1&t.mode&&Zu.recordLegacyContextWarning(t,null),Rp.current=t,a=ph(null,t,n,o,i,r),t.effectTag|=1,"object"==typeof a&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){var u=H(n)||"Unknown";Sp[u]||(l("The <%s /> component appears to be a function component that returns a class instance. Change %s to a class that extends React.Component instead. If you can't use a class try assigning the prototype on the function as a workaround. `%s.prototype = React.Component.prototype`. Don't use an arrow function since it cannot be called with `new` by React.",u,u,u),Sp[u]=!0),t.tag=1,t.memoizedState=null,t.updateQueue=null;var c=!1;ou(n)?(c=!0,hu(t)):c=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ll(t);var h=n.getDerivedStateFromProps;return"function"==typeof h&&uc(t,n,h,o),mc(t,a),bc(t,n,o,r),Wp(null,t,n,!0,c,r)}return t.tag=0,1&t.mode&&null!==t.memoizedState&&(a=ph(null,t,n,o,i,r)),zp(null,t,a,r),Zp(t,n),t.child}(e,t,t.type,n);case 16:return Hp(e,t,t.elementType,r,n);case 0:var f=t.type,d=t.pendingProps;return Up(e,t,f,t.elementType===f?d:vl(f,d),n);case 1:var v=t.type,m=t.pendingProps;return Vp(e,t,v,t.elementType===v?m:vl(v,m),n);case 3:return Gp(e,t,n);case 5:return function(e,t,n){Fc(t),null===e&&bp(t);var r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children;return Yi(r,i)?o=null:null!==a&&Yi(r,a)&&(t.effectTag|=16),Np(e,t),4&t.mode&&1!==n&&Ki(0,i)?(mv(1),t.expirationTime=t.childExpirationTime=1,null):(zp(e,t,o,n),t.child)}(e,t,n);case 6:return function(e,t){return null===e&&bp(t),null}(e,t);case 13:return Yp(e,t,n);case 4:return function(e,t,n){Lc(t,t.stateNode.containerInfo);var r=t.pendingProps;return null===e?t.child=Sc(t,null,r,n):zp(e,t,r,n),t.child}(e,t,n);case 11:var y=t.type,g=t.pendingProps;return Dp(e,t,y,t.elementType===y?g:vl(y,g),n);case 7:return function(e,t,n){return zp(e,t,t.pendingProps,n),t.child}(e,t,n);case 8:return function(e,t,n){return zp(e,t,t.pendingProps.children,n),t.child}(e,t,n);case 12:return function(e,t,n){return t.effectTag|=4,zp(e,t,t.pendingProps.children,n),t.child}(e,t,n);case 10:return ef(e,t,n);case 9:return function(e,t,n){var r=t.type;void 0===r._context?r!==r.Consumer&&(af||(af=!0,l("Rendering <Context> directly is not supported and will be removed in a future major release. Did you mean to render <Context.Consumer> instead?"))):r=r._context;var i=t.pendingProps,a=i.children;"function"!=typeof a&&l("A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it."),jl(t,n);var o,s=Cl(r,i.unstable_observedBits);return Rp.current=t,ne("render"),o=a(s),ne(null),t.effectTag|=1,zp(e,t,o,n),t.child}(e,t,n);case 14:var b=t.type,_=vl(b,t.pendingProps);if(t.type!==t.elementType){var x=b.propTypes;x&&a(x,_,"prop",H(b),Q)}return Fp(e,t,b,_=vl(b.type,_),r,n);case 15:return Bp(e,t,t.type,t.pendingProps,r,n);case 17:var w=t.type,k=t.pendingProps;return function(e,t,n,r,i){var a;return null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,ou(n)?(a=!0,hu(t)):a=!1,jl(t,i),yc(t,n,r),bc(t,n,r,i),Wp(null,t,n,!0,a,i)}(e,t,w,t.elementType===w?k:vl(w,k),n);case 19:return Qp(e,t,n)}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function lf(e){e.effectTag|=4}function cf(e){e.effectTag|=128}function hf(e,t){switch(e.tailMode){case"hidden":for(var n=e.tail,r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":for(var i=e.tail,a=null;null!==i;)null!==i.alternate&&(a=i),i=i.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function pf(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return ou(t.type)&&su(t),null;case 3:zc(t),uu(t);var i=t.stateNode;if(i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null===e||null===e.child)kp(t)&&lf(t);return null;case 5:Bc(t);var a=Rc(),o=t.type;if(null!==e&&null!=t.stateNode)nf(e,t,o,r,a),e.ref!==t.ref&&cf(t);else{if(!r){if(null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");return null}var s=Dc();if(kp(t))(function(e,t,n){var r=la(e.stateNode,e.type,e.memoizedProps,t,n,e);return e.updateQueue=r,null!==r})(t,a,s)&&lf(t);else{var u=Xi(o,r,a,s,t);tf(u,t),t.stateNode=u,function(e,t,n,r,i){return yi(e,t,n,r),Hi(t,n)}(u,o,r,a)&&lf(t)}null!==t.ref&&cf(t)}return null;case 6:var l=r;if(e&&null!=t.stateNode){var c=e.memoizedProps;rf(0,t,c,l)}else{if("string"!=typeof l&&null===t.stateNode)throw Error("We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue.");var h=Rc(),p=Dc();kp(t)?_p(t)&&lf(t):t.stateNode=Ji(l,h,p,t)}return null;case 13:Gc(t);var f=t.memoizedState;if(0!=(64&t.effectTag))return t.expirationTime=n,t;var d=null!==f,v=!1;if(null===e)void 0!==t.memoizedProps.fallback&&kp(t);else{var m=e.memoizedState;if(v=null!==m,!d&&null!==m){var y=e.child.sibling;if(null!==y){var g=t.firstEffect;null!==g?(t.firstEffect=y,y.nextEffect=g):(t.firstEffect=t.lastEffect=y,y.nextEffect=null),y.effectTag=8}}}if(d&&!v)if(0!=(2&t.mode))null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||Uc(Nc.current,1)?0===Jf&&(Jf=3):function(){0!==Jf&&3!==Jf||(Jf=4);0!==nd&&null!==Xf&&(Xv(Xf,Kf),Yv(Xf,nd))}();return(d||v)&&(t.effectTag|=4),null;case 4:return zc(t),null;case 10:return Tl(t),null;case 17:return ou(t.type)&&su(t),null;case 19:Gc(t);var b=t.memoizedState;if(null===b)return null;var _=0!=(64&t.effectTag),x=b.rendering;if(null===x){if(_)hf(b,!1);else if(!(0===Jf&&(null===e||0==(64&e.effectTag))))for(var w=t.child;null!==w;){var k=Zc(w);if(null!==k){_=!0,t.effectTag|=64,hf(b,!1);var O=k.updateQueue;return null!==O&&(t.updateQueue=O,t.effectTag|=4),null===b.lastEffect&&(t.firstEffect=null),t.lastEffect=b.lastEffect,Pc(t,n),qc(t,Wc(Nc.current,2)),t.child}w=w.sibling}}else{if(!_){var E=Zc(x);if(null!==E){t.effectTag|=64,_=!0;var S=E.updateQueue;if(null!==S&&(t.updateQueue=S,t.effectTag|=4),hf(b,!0),null===b.tail&&"hidden"===b.tailMode&&!x.alternate){var T=t.lastEffect=b.lastEffect;return null!==T&&(T.nextEffect=null),null}}else if(2*Iu()-b.renderingStartTime>b.tailExpiration&&n>1){t.effectTag|=64,_=!0,hf(b,!1);var P=n-1;t.expirationTime=t.childExpirationTime=P,mv(P)}}if(b.isBackwards)x.sibling=t.child,t.child=x;else{var j=b.last;null!==j?j.sibling=x:t.child=x,b.last=x}}if(null!==b.tail){if(0===b.tailExpiration){b.tailExpiration=Iu()+500}var C=b.tail;b.rendering=C,b.tail=C.sibling,b.lastEffect=t.lastEffect,b.renderingStartTime=Iu(),C.sibling=null;var A=Nc.current;return qc(t,A=_?Wc(A,2):Vc(A)),C}return null}throw Error("Unknown unit of work tag ("+t.tag+"). This error is likely caused by a bug in React. Please file an issue.")}function ff(e,t){switch(e.tag){case 1:ou(e.type)&&su(e);var n=e.effectTag;return 4096&n?(e.effectTag=-4097&n|64,e):null;case 3:zc(e),uu(e);var r=e.effectTag;if(0!=(64&r))throw Error("The root failed to unmount after an error. This is likely a bug in React. Please file an issue.");return e.effectTag=-4097&r|64,e;case 5:return Bc(e),null;case 13:Gc(e);var i=e.effectTag;return 4096&i?(e.effectTag=-4097&i|64,e):null;case 19:return Gc(e),null;case 4:return zc(e),null;case 10:return Tl(e),null;default:return null}}function df(e){switch(e.tag){case 1:var t=e.type.childContextTypes;null!=t&&su(e);break;case 3:zc(e),uu(e);break;case 5:Bc(e);break;case 4:zc(e);break;case 13:case 19:Gc(e);break;case 10:Tl(e)}}function vf(e,t){return{value:e,source:t,stack:Y(t)}}tf=function(e,t,n,r){for(var i,a,o=t.child;null!==o;){if(5===o.tag||6===o.tag)i=e,a=o.stateNode,i.appendChild(a);else if(4===o.tag);else if(null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)return;for(;null===o.sibling;){if(null===o.return||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},nf=function(e,t,n,r,i){var a=e.memoizedProps;if(a!==r){var o=function(e,t,n,r,i,a){var o=a;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var s=""+r.children,u=Di(o.ancestorInfo,t);zi(null,s,u)}return gi(e,t,n,r,i)}(t.stateNode,n,a,r,i,Dc());t.updateQueue=o,o&&lf(t)}},rf=function(e,t,n,r){n!==r&&lf(t)};var mf;mf=new Set;var yf="function"==typeof WeakSet?WeakSet:Set;function gf(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Y(n));var i={componentName:null!==n?H(n.type):null,componentStack:null!==r?r:"",error:t.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1};null!==e&&1===e.tag&&(i.errorBoundary=e.stateNode,i.errorBoundaryName=H(e.type),i.errorBoundaryFound=!0,i.willRetry=!0);try{!function(e){var t=e.error,n=e.componentName,r=e.componentStack,i=e.errorBoundaryName,a=e.errorBoundaryFound,o=e.willRetry;if(null!=t&&t._suppressLogging){if(a&&o)return;console.error(t)}var s=""+(n?"The above error occurred in the <"+n+"> component:":"The above error occurred in one of your React components:")+r+"\n\n"+(a&&i?o?"React will try to recreate this component tree from scratch using the error boundary you provided, "+i+".":"This error was initially handled by the error boundary "+i+".\nRecreating the tree from scratch failed so React will unmount the tree.":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://fb.me/react-error-boundaries to learn more about error boundaries.");console.error(s)}(i)}catch(e){setTimeout((function(){throw e}))}}var bf=function(e,t){Ls(e,"componentWillUnmount"),t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount(),zs()};function _f(e){var t=e.ref;null!==t&&("function"==typeof t?(b(null,t,null,null),_()&&tv(e,x())):t.current=null)}function xf(e,t){(b(null,t,null),_())&&tv(e,x())}function wf(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;Ls(t,"getSnapshotBeforeUpdate");var i=t.stateNode;t.type!==t.elementType||Cp||(i.props!==t.memoizedProps&&l("Expected %s props to match memoized props before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(t.type)||"instance"),i.state!==t.memoizedState&&l("Expected %s state to match memoized state before getSnapshotBeforeUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(t.type)||"instance"));var a=i.getSnapshotBeforeUpdate(t.elementType===t.type?n:vl(t.type,n),r),o=mf;void 0!==a||o.has(t.type)||(o.add(t.type),l("%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",H(t.type))),i.__reactInternalSnapshotBeforeUpdate=a,zs()}return;case 3:case 5:case 6:case 4:case 17:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function kf(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,a=i;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&o()}a=a.next}while(a!==i)}}function Of(e,t){var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next,a=i;do{if((a.tag&e)===e){var o=a.create;a.destroy=o();var s=a.destroy;if(void 0!==s&&"function"!=typeof s){l("An effect function must not return anything besides a function, which is used for clean-up.%s%s",null===s?" You returned null. If your effect does not require clean up, return undefined (or nothing).":"function"==typeof s.then?"\n\nIt looks like you wrote useEffect(async () => ...) or returned a Promise. Instead, write the async function inside your effect and call it immediately:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://fb.me/react-hooks-data-fetching":" You returned: "+s,Y(t))}}a=a.next}while(a!==i)}}function Ef(e){if(0!=(512&e.effectTag))switch(e.tag){case 0:case 11:case 15:case 22:kf(5,e),Of(5,e)}}function Sf(e,t,n,r){switch(n.tag){case 0:case 11:case 15:case 22:return void Of(3,n);case 1:var i=n.stateNode;if(4&n.effectTag)if(null===t)Ls(n,"componentDidMount"),n.type!==n.elementType||Cp||(i.props!==n.memoizedProps&&l("Expected %s props to match memoized props before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance"),i.state!==n.memoizedState&&l("Expected %s state to match memoized state before componentDidMount. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance")),i.componentDidMount(),zs();else{var a=n.elementType===n.type?t.memoizedProps:vl(n.type,t.memoizedProps),o=t.memoizedState;Ls(n,"componentDidUpdate"),n.type!==n.elementType||Cp||(i.props!==n.memoizedProps&&l("Expected %s props to match memoized props before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance"),i.state!==n.memoizedState&&l("Expected %s state to match memoized state before componentDidUpdate. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance")),i.componentDidUpdate(a,o,i.__reactInternalSnapshotBeforeUpdate),zs()}var s=n.updateQueue;return void(null!==s&&(n.type!==n.elementType||Cp||(i.props!==n.memoizedProps&&l("Expected %s props to match memoized props before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance"),i.state!==n.memoizedState&&l("Expected %s state to match memoized state before processing the update queue. This might either be because of a bug in React, or because a component reassigns its own `this.props`. Please file an issue.",H(n.type)||"instance")),Gl(0,s,i)));case 3:var u=n.updateQueue;if(null!==u){var c=null;if(null!==n.child)switch(n.child.tag){case 5:case 1:c=n.child.stateNode}Gl(0,u,c)}return;case 5:var h=n.stateNode;if(null===t&&4&n.effectTag)!function(e,t,n,r){Hi(t,n)&&e.focus()}(h,n.type,n.memoizedProps);return;case 6:case 4:return;case 12:var p=n.memoizedProps.onRender;return void("function"==typeof p&&p(n.memoizedProps.id,null===t?"mount":"update",n.actualDuration,n.treeBaseDuration,n.actualStartTime,sp,e.memoizedInteractions));case 13:return void function(e,t){if(null===t.memoizedState){var n=t.alternate;if(null!==n){var r=n.memoizedState;if(null!==r){var i=r.dehydrated;null!==i&&function(e){Zn(e)}(i)}}}}(0,n);case 19:case 17:case 20:case 21:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function Tf(e){var t=e.ref;if(null!==t){var n,r=e.stateNode;switch(e.tag){case 5:n=r;break;default:n=r}"function"==typeof t?t(n):(t.hasOwnProperty("current")||l("Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().%s",H(e.type),Y(e)),t.current=n)}}function Pf(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function jf(e,t,n){var r;switch(r=t,"function"==typeof Ov&&Ov(r),t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(null!==i){var a=i.lastEffect;if(null!==a){var o=a.next;zu(n>97?97:n,(function(){var e=o;do{var n=e.destroy;void 0!==n&&xf(t,n),e=e.next}while(e!==o)}))}}return;case 1:_f(t);var s=t.stateNode;return void("function"==typeof s.componentWillUnmount&&function(e,t){b(null,bf,null,e,t),_()&&tv(e,x())}(t,s));case 5:return void _f(t);case 4:return void If(e,t,n);case 20:case 18:case 21:return}}function Cf(e,t,n){for(var r=t;;)if(jf(e,r,n),null===r.child||4===r.tag){if(r===t)return;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Af(e){return 5===e.tag||3===e.tag||4===e.tag}function Mf(e){var t,n,r=function(e){for(var t=e.return;null!==t;){if(Af(t))return t;t=t.return}throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),i=r.stateNode;switch(r.tag){case 5:t=i,n=!1;break;case 3:case 4:t=i.containerInfo,n=!0;break;case 20:default:throw Error("Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}16&r.effectTag&&(ea(t),r.effectTag&=-17);var a=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||Af(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.effectTag)continue e;if(null===t.child||4===t.tag)continue e;t.child.return=t,t=t.child}if(!(2&t.effectTag))return t.stateNode}}(e);n?function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a){var o=a?t.stateNode:t.stateNode.instance;n?function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)}(r,o,n):function(e,t){var n;8===e.nodeType?(n=e.parentNode).insertBefore(t,e):(n=e).appendChild(t);var r=e._reactRootContainer;null==r&&null===n.onclick&&mi(n)}(r,o)}else if(4===i);else{var s=t.child;if(null!==s){e(s,n,r);for(var u=s.sibling;null!==u;)e(u,n,r),u=u.sibling}}}(e,a,t):function e(t,n,r){var i=t.tag,a=5===i||6===i;if(a){var o=a?t.stateNode:t.stateNode.instance;n?function(e,t,n){e.insertBefore(t,n)}(r,o,n):function(e,t){e.appendChild(t)}(r,o)}else if(4===i);else{var s=t.child;if(null!==s){e(s,n,r);for(var u=s.sibling;null!==u;)e(u,n,r),u=u.sibling}}}(e,a,t)}function If(e,t,n){for(var r,i,a,o,s=t,u=!1;;){if(!u){var l=s.return;e:for(;;){if(null===l)throw Error("Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.");var c=l.stateNode;switch(l.tag){case 5:r=c,i=!1;break e;case 3:case 4:r=c.containerInfo,i=!0;break e}l=l.return}u=!0}if(5===s.tag||6===s.tag)Cf(e,s,n),i?(a=r,o=s.stateNode,8===a.nodeType?a.parentNode.removeChild(o):a.removeChild(o)):ta(r,s.stateNode);else if(4===s.tag){if(null!==s.child){r=s.stateNode.containerInfo,i=!0,s.child.return=s,s=s.child;continue}}else if(jf(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)return;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(u=!1)}s.sibling.return=s.return,s=s.sibling}}function Rf(e,t,n){If(e,t,n),function e(t){var n=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==n&&e(n)}(t)}function Lf(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void kf(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r,a=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&function(e,t,n,r,i,a){wa(e,i),bi(e,t,n,r,i)}(n,o,a,i,r)}return;case 6:if(null===t.stateNode)throw Error("This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var s=t.stateNode,u=t.memoizedProps;null!==e&&e.memoizedProps;return void function(e,t,n){e.nodeValue=n}(s,0,u);case 3:var l=t.stateNode;return void(l.hydrate&&(l.hydrate=!1,Zn(l.containerInfo)));case 12:return;case 13:return function(e){var t,n=e.memoizedState,r=e;null===n?t=!1:(t=!0,r=e.child,id=Iu());null!==r&&function(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;t?na(r):ra(n.stateNode,n.memoizedProps)}else if(6===n.tag){var i=n.stateNode;t?i.nodeValue="":ia(i,n.memoizedProps)}else{if(13===n.tag&&null!==n.memoizedState&&null===n.memoizedState.dehydrated){var a=n.child.sibling;a.return=n,n=a;continue}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===e)return;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(r,t)}(t),void zf(t);case 19:return void zf(t);case 17:return}throw Error("This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}function zf(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new yf),t.forEach((function(t){var r=rv.bind(null,e,t);n.has(t)||(!0!==t.__reactDoNotTraceInteractions&&(r=o.unstable_wrap(r)),n.add(t),t.then(r,r))}))}}function Df(e){ea(e.stateNode)}var Ff="function"==typeof WeakMap?WeakMap:Map;function Bf(e,t,n){var r=Dl(n,null);r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Qd(i),gf(e,t)},r}function Nf(e,t,n){var r=Dl(n,null);r.tag=3;var i=e.type.getDerivedStateFromError;if("function"==typeof i){var a=t.value;r.payload=function(){return gf(e,t),i(a)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch?r.callback=function(){var n;hl(e),"function"!=typeof i&&(n=this,null===ud?ud=new Set([n]):ud.add(n),gf(e,t));var r=t.value,a=t.stack;this.componentDidCatch(r,{componentStack:null!==a?a:""}),"function"!=typeof i&&e.expirationTime!==Uu&&l("%s: Error boundaries should implement getDerivedStateFromError(). In that method, return a state update to display an error message or fallback UI.",H(e.type)||"Unknown")}:r.callback=function(){hl(e)},r}function Uf(e,t,n){var r,i=e.pingCache;if(null===i?(i=e.pingCache=new Ff,r=new Set,i.set(n,r)):void 0===(r=i.get(n))&&(r=new Set,i.set(n,r)),!r.has(t)){r.add(t);var a=nv.bind(null,e,n,t);n.then(a,a)}}function Vf(e,t,n,r,i){if(n.effectTag|=2048,n.firstEffect=n.lastEffect=null,null!==r&&"object"==typeof r&&"function"==typeof r.then){var a=r;if(0==(2&n.mode)){var o=n.alternate;o?(n.memoizedState=o.memoizedState,n.expirationTime=o.expirationTime):n.memoizedState=null}var s=Uc(Nc.current,1),u=t;do{if(13===u.tag&&Hc(u,s)){var l=u.updateQueue;if(null===l){var c=new Set;c.add(a),u.updateQueue=c}else l.add(a);if(0==(2&u.mode)){if(u.effectTag|=64,n.effectTag&=-2981,1===n.tag)if(null===n.alternate)n.tag=17;else{var h=Dl(Uu,null);h.tag=Il,Fl(n,h)}return void(n.expirationTime=Uu)}return Uf(e,i,a),u.effectTag|=4096,void(u.expirationTime=i)}u=u.return}while(null!==u);r=new Error((H(n.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Y(n))}5!==Jf&&(Jf=2),r=vf(r,n);var p=t;do{switch(p.tag){case 3:var f=r;return p.effectTag|=4096,p.expirationTime=i,void Bl(p,Bf(p,f,i));case 1:var d=r,v=p.type,m=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof v.getDerivedStateFromError||null!==m&&"function"==typeof m.componentDidCatch&&!$d(m)))return p.effectTag|=4096,p.expirationTime=i,void Bl(p,Nf(p,d,i))}p=p.return}while(null!==p)}var Wf=Math.ceil,qf=s.ReactCurrentDispatcher,Gf=s.ReactCurrentOwner,Hf=s.IsSomeRendererActing,Zf=0,Xf=null,Yf=null,Kf=0,Jf=0,$f=null,Qf=Uu,ed=Uu,td=null,nd=0,rd=!1,id=0,ad=null,od=!1,sd=null,ud=null,ld=!1,cd=null,hd=90,pd=0,fd=null,dd=0,vd=null,md=0,yd=null,gd=null,bd=0;function _d(){return 0!=(48&Zf)?Vu(Iu()):0!==bd?bd:bd=Vu(Iu())}function xd(e,t,n){var r=t.mode;if(0==(2&r))return Uu;var i,a=Ru();if(0==(4&r))return 99===a?Uu:1073741822;if(0!=(16&Zf))return Kf;if(null!==n)i=function(e,t){return qu(e,t,250)}(e,0|n.timeoutMs||5e3);else switch(a){case 99:i=Uu;break;case 98:i=Gu(e);break;case 97:case 96:i=function(e){return qu(e,5e3,250)}(e);break;case 95:i=2;break;default:throw Error("Expected a valid priority level")}return null!==Xf&&i===Kf&&(i-=1),i}var wd=function(e,t){!function(){if(dd>50)throw dd=0,vd=null,Error("Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.");md>50&&(md=0,l("Maximum update depth exceeded. This can happen when a component calls setState inside useEffect, but useEffect either doesn't have a dependency array, or one of the dependencies changes on every render."))}(),function(e){if(0!=(16&Zf))switch(e.tag){case 0:case 11:case 15:l("Cannot update a component from inside the function body of a different component.");break;case 1:switch(J){case"getChildContext":if(lv)return;l("setState(...): Cannot call setState() inside getChildContext()"),lv=!0;break;case"render":if(uv)return;l("Cannot update during an existing state transition (such as within `render`). Render methods should be a pure function of props and state."),uv=!0}}}(e);var n=kd(e,t);if(null!==n){var r,i;r=e,i=t,null!==Xf&&i>Kf&&(yd=r),ds&&(vs=!0),null!==ps&&"componentWillMount"!==ps&&"componentWillReceiveProps"!==ps&&(ms=!0);var a=Ru();if(t===Uu?0!=(8&Zf)&&0==(48&Zf)?(gv(n,t),Td(n)):(Ed(n),gv(n,t),0===Zf&&Bu()):(Ed(n),gv(n,t)),0!=(4&Zf)&&(98===a||99===a))if(null===fd)fd=new Map([[n,t]]);else{var o=fd.get(n);(void 0===o||o>t)&&fd.set(n,t)}}else!function(e){var t=e.tag;if(3!==t&&1!==t&&0!==t&&11!==t&&14!==t&&15!==t&&22!==t)return;var n=H(e.type)||"ReactComponent";if(null!==sv){if(sv.has(n))return;sv.add(n)}else sv=new Set([n]);l("Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in %s.%s",1===t?"the componentWillUnmount method":"a useEffect cleanup function",Y(e))}(e)};function kd(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t?(r.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t)):null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Xf===i&&(Fd(t),4===Jf&&Xv(i,Kf)),Yv(i,t)),i}function Od(e){var t=e.lastExpiredTime;if(0!==t)return t;var n=e.firstPendingTime;if(!Zv(e,n))return n;var r=e.lastPingedTime,i=e.nextKnownPendingLevel,a=r>i?r:i;return a<=2&&n!==a?0:a}function Ed(e){if(0!==e.lastExpiredTime)return e.callbackExpirationTime=Uu,e.callbackPriority=99,void(e.callbackNode=Fu(Td.bind(null,e)));var t=Od(e),n=e.callbackNode;if(0!==t){var r,i=Hu(_d(),t);if(null!==n){var a=e.callbackPriority;if(e.callbackExpirationTime===t&&a>=i)return;!function(e){e!==Su&&mu(e)}(n)}e.callbackExpirationTime=t,e.callbackPriority=i,r=t===Uu?Fu(Td.bind(null,e)):Du(i,Sd.bind(null,e),{timeout:Wu(t)-Iu()}),e.callbackNode=r}else null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90)}function Sd(e,t){if(bd=0,t)return Kv(e,_d()),Ed(e),null;var n=Od(e);if(0!==n){var r=e.callbackNode;if(0!=(48&Zf))throw Error("Should not already be working.");if(Kd(),e===Xf&&n===Kf||(Ad(e,n),bv(e,n)),null!==Yf){var i=Zf;Zf|=16;var a=Id(),o=Ld(e);for(Ds(Yf);;)try{Nd();break}catch(t){Md(e,t)}if(kl(),Zf=i,Rd(a),zd(o),1===Jf){var s=$f;throw av(),Ad(e,n),Xv(e,n),Ed(e),s}if(null!==Yf)av();else{iv();var u=e.finishedWork=e.current.alternate;e.finishedExpirationTime=n,function(e,t,n,r){switch(Xf=null,n){case 0:case 1:throw Error("Root did not complete. This is a bug in React.");case 2:Kv(e,r>2?2:r);break;case 3:Xv(e,r);var i=e.lastSuspendedTime;if(r===i&&(e.nextKnownPendingLevel=Wd(t)),Qf===Uu&&!cv.current){var a=id+500-Iu();if(a>10){if(rd){var o=e.lastPingedTime;if(0===o||o>=r){e.lastPingedTime=r,Ad(e,r);break}}var s=Od(e);if(0!==s&&s!==r)break;if(0!==i&&i!==r){e.lastPingedTime=i;break}e.timeoutHandle=$i(Gd.bind(null,e),a);break}}Gd(e);break;case 4:Xv(e,r);var u=e.lastSuspendedTime;if(r===u&&(e.nextKnownPendingLevel=Wd(t)),!cv.current){if(rd){var l=e.lastPingedTime;if(0===l||l>=r){e.lastPingedTime=r,Ad(e,r);break}}var c,h=Od(e);if(0!==h&&h!==r)break;if(0!==u&&u!==r){e.lastPingedTime=u;break}if(ed!==Uu)c=Wu(ed)-Iu();else if(Qf===Uu)c=0;else{var p=function(e){return Wu(e)-5e3}(Qf),f=Iu(),d=Wu(r)-f,v=f-p;v<0&&(v=0),c=function(e){return e<120?120:e<480?480:e<1080?1080:e<1920?1920:e<3e3?3e3:e<4320?4320:1960*Wf(e/1960)}(v)-v,d<c&&(c=d)}if(c>10){e.timeoutHandle=$i(Gd.bind(null,e),c);break}}Gd(e);break;case 5:if(!cv.current&&Qf!==Uu&&null!==td){var m=function(e,t,n){var r=0|n.busyMinDurationMs;if(r<=0)return 0;var i=0|n.busyDelayMs,a=Iu(),o=function(e,t){return Wu(e)-(0|t.timeoutMs||5e3)}(e,n),s=a-o;if(s<=i)return 0;return i+r-s}(Qf,0,td);if(m>10){Xv(e,r),e.timeoutHandle=$i(Gd.bind(null,e),m);break}}Gd(e);break;default:throw Error("Unknown root exit status.")}}(e,u,Jf,n)}if(Ed(e),e.callbackNode===r)return Sd.bind(null,e)}}return null}function Td(e){var t=e.lastExpiredTime,n=0!==t?t:Uu;if(0!=(48&Zf))throw Error("Should not already be working.");if(Kd(),e===Xf&&n===Kf||(Ad(e,n),bv(e,n)),null!==Yf){var r=Zf;Zf|=16;var i=Id(),a=Ld(e);for(Ds(Yf);;)try{Bd();break}catch(t){Md(e,t)}if(kl(),Zf=r,Rd(i),zd(a),1===Jf){var o=$f;throw av(),Ad(e,n),Xv(e,n),Ed(e),o}if(null!==Yf)throw Error("Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue.");iv(),e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,function(e){Xf=null,Gd(e)}(e),Ed(e)}return null}function Pd(e,t){var n=Zf;Zf|=1;try{return e(t)}finally{0===(Zf=n)&&Bu()}}function jd(e,t){var n=Zf;Zf&=-2,Zf|=8;try{return e(t)}finally{0===(Zf=n)&&Bu()}}function Cd(e,t){if(0!=(48&Zf))throw Error("flushSync was called from inside a lifecycle method. It cannot be called when React is already rendering.");var n=Zf;Zf|=1;try{return zu(99,e.bind(null,t))}finally{Zf=n,Bu()}}function Ad(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Qi(n)),null!==Yf)for(var r=Yf.return;null!==r;)df(r),r=r.return;Xf=e,Yf=Dv(e.current,null),Kf=t,Jf=0,$f=null,Qf=Uu,ed=Uu,td=null,nd=0,rd=!1,gd=null,Zu.discardPendingWarnings()}function Md(e,t){for(;;){try{if(kl(),dh(),ee(),null===Yf||null===Yf.return)return Jf=1,$f=t,Yf=null,null;8&Yf.mode&&pp(Yf,!0),Vf(e,Yf.return,Yf,t,Kf),Yf=Vd(Yf)}catch(e){t=e;continue}return}}function Id(e){var t=qf.current;return qf.current=Kh,null===t?Kh:t}function Rd(e){qf.current=e}function Ld(e){var t=o.__interactionsRef.current;return o.__interactionsRef.current=e.memoizedInteractions,t}function zd(e){o.__interactionsRef.current=e}function Dd(e,t){e<Qf&&e>2&&(Qf=e),null!==t&&e<ed&&e>2&&(ed=e,td=t)}function Fd(e){e>nd&&(nd=e)}function Bd(){for(;null!==Yf;)Yf=Ud(Yf)}function Nd(){for(;null!==Yf&&!Tu();)Yf=Ud(Yf)}function Ud(e){var t,n=e.alternate;return As(e),te(e),0!=(8&e.mode)?(cp(e),t=ov(n,e,Kf),pp(e,!0)):t=ov(n,e,Kf),ee(),e.memoizedProps=e.pendingProps,null===t&&(t=Vd(e)),Gf.current=null,t}function Vd(e){Yf=e;do{var t=Yf.alternate,n=Yf.return;if(0==(2048&Yf.effectTag)){te(Yf);var r=void 0;if(0==(8&Yf.mode)?r=pf(t,Yf,Kf):(cp(Yf),r=pf(t,Yf,Kf),pp(Yf,!1)),Is(Yf),ee(),qd(Yf),null!==r)return r;if(null!==n&&0==(2048&n.effectTag))null===n.firstEffect&&(n.firstEffect=Yf.firstEffect),null!==Yf.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=Yf.firstEffect),n.lastEffect=Yf.lastEffect),Yf.effectTag>1&&(null!==n.lastEffect?n.lastEffect.nextEffect=Yf:n.firstEffect=Yf,n.lastEffect=Yf)}else{var i=ff(Yf);if(0!=(8&Yf.mode)){pp(Yf,!1);for(var a=Yf.actualDuration,o=Yf.child;null!==o;)a+=o.actualDuration,o=o.sibling;Yf.actualDuration=a}if(null!==i)return Rs(Yf),i.effectTag&=2047,i;Is(Yf),null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=2048)}var s=Yf.sibling;if(null!==s)return s;Yf=n}while(null!==Yf);return 0===Jf&&(Jf=5),null}function Wd(e){var t=e.expirationTime,n=e.childExpirationTime;return t>n?t:n}function qd(e){if(1===Kf||1!==e.childExpirationTime){var t=0;if(0!=(8&e.mode)){for(var n=e.actualDuration,r=e.selfBaseDuration,i=null===e.alternate||e.child!==e.alternate.child,a=e.child;null!==a;){var o=a.expirationTime,s=a.childExpirationTime;o>t&&(t=o),s>t&&(t=s),i&&(n+=a.actualDuration),r+=a.treeBaseDuration,a=a.sibling}e.actualDuration=n,e.treeBaseDuration=r}else for(var u=e.child;null!==u;){var l=u.expirationTime,c=u.childExpirationTime;l>t&&(t=l),c>t&&(t=c),u=u.sibling}e.childExpirationTime=t}}function Gd(e){var t=Ru();return zu(99,Hd.bind(null,e,t)),null}function Hd(e,t){do{Kd()}while(null!==cd);if(Zu.flushLegacyContextWarning(),Zu.flushPendingUnsafeLifecycleWarnings(),0!=(48&Zf))throw Error("Should not already be working.");var n,r=e.finishedWork,i=e.finishedExpirationTime;if(null===r)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error("Cannot commit the same tree as before. This error is likely caused by a bug in React. Please file an issue.");if(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0,cs&&(ds=!0,vs=!1,bs.clear(),xs("(Committing Changes)")),function(e,t,n){e.firstPendingTime=n,t<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t<=e.firstSuspendedTime&&(e.firstSuspendedTime=t-1);t<=e.lastPingedTime&&(e.lastPingedTime=0);t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}(e,i,Wd(r)),e===Xf&&(Xf=null,Yf=null,Kf=0),r.effectTag>1?null!==r.lastEffect?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,null!==n){var a=Zf;Zf|=32;var o=Ld(e);Gf.current=null,Bs(),Zi(e.containerInfo),ad=n;do{if(b(null,Zd,null),_()){if(null===ad)throw Error("Should be working on an effect.");var s=x();tv(ad,s),ad=ad.nextEffect}}while(null!==ad);Ns(),lp(),Us(),ad=n;do{if(b(null,Xd,null,e,t),_()){if(null===ad)throw Error("Should be working on an effect.");var u=x();tv(ad,u),ad=ad.nextEffect}}while(null!==ad);Vs(),e.containerInfo,Li(Gi),ir(qi),qi=null,Gi=null,e.current=r,Ws(),ad=n;do{if(b(null,Yd,null,e,i),_()){if(null===ad)throw Error("Should be working on an effect.");var l=x();tv(ad,l),ad=ad.nextEffect}}while(null!==ad);qs(),ad=null,Pu(),zd(o),Zf=a}else e.current=r,Bs(),Ns(),lp(),Us(),Vs(),Ws(),qs();!function(){if(cs){var e=null;vs?e="Lifecycle hook scheduled a cascading update":ys>0&&(e="Caused by a cascading update in earlier commit"),vs=!1,ys++,ds=!1,bs.clear(),ws("(Committing Changes)","(Committing Changes)",e)}}();var c=ld;if(ld)ld=!1,cd=e,pd=i,hd=t;else for(ad=n;null!==ad;){var h=ad.nextEffect;ad.nextEffect=null,ad=h}var p=e.firstPendingTime;if(0!==p){if(null!==gd){var f=gd;gd=null;for(var d=0;d<f.length;d++)yv(e,f[d],e.memoizedInteractions)}gv(e,p)}else ud=null;if(c||_v(e,i),p===Uu?e===vd?dd++:(dd=0,vd=e):dd=0,function(e,t){"function"==typeof kv&&kv(e,t)}(r.stateNode,i),Ed(e),od){od=!1;var v=sd;throw sd=null,v}return 0!=(8&Zf)||Bu(),null}function Zd(){for(;null!==ad;){var e=ad.effectTag;if(0!=(256&e))te(ad),Cs(),wf(ad.alternate,ad),ee();0!=(512&e)&&(ld||(ld=!0,Du(97,(function(){return Kd(),null})))),ad=ad.nextEffect}}function Xd(e,t){for(;null!==ad;){te(ad);var n=ad.effectTag;if(16&n&&Df(ad),128&n){var r=ad.alternate;null!==r&&Pf(r)}switch(1038&n){case 2:Mf(ad),ad.effectTag&=-3;break;case 6:Mf(ad),ad.effectTag&=-3,Lf(ad.alternate,ad);break;case 1024:ad.effectTag&=-1025;break;case 1028:ad.effectTag&=-1025,Lf(ad.alternate,ad);break;case 4:Lf(ad.alternate,ad);break;case 8:Rf(e,ad,t)}Cs(),ee(),ad=ad.nextEffect}}function Yd(e,t){for(;null!==ad;){te(ad);var n=ad.effectTag;if(36&n)Cs(),Sf(e,ad.alternate,ad);128&n&&(Cs(),Tf(ad)),ee(),ad=ad.nextEffect}}function Kd(){if(90!==hd){var e=hd>97?97:hd;return hd=90,zu(e,Jd)}}function Jd(){if(null===cd)return!1;var e=cd,t=pd;if(cd=null,pd=0,0!=(48&Zf))throw Error("Cannot flush passive effects while already rendering.");var n=Zf;Zf|=32;for(var r=Ld(e),i=e.current.firstEffect;null!==i;){if(te(i),b(null,Ef,null,i),_()){if(null===i)throw Error("Should be working on an effect.");tv(i,x())}ee();var a=i.nextEffect;i.nextEffect=null,i=a}return zd(r),_v(e,t),Zf=n,Bu(),md=null===cd?0:md+1,!0}function $d(e){return null!==ud&&ud.has(e)}var Qd=function(e){od||(od=!0,sd=e)};function ev(e,t,n){Fl(e,Bf(e,vf(n,t),Uu));var r=kd(e,Uu);null!==r&&(Ed(r),gv(r,Uu))}function tv(e,t){if(3!==e.tag)for(var n=e.return;null!==n;){if(3===n.tag)return void ev(n,e,t);if(1===n.tag){var r=n.type,i=n.stateNode;if("function"==typeof r.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&!$d(i)){Fl(n,Nf(n,vf(t,e),Uu));var a=kd(n,Uu);return void(null!==a&&(Ed(a),gv(a,Uu)))}}n=n.return}else ev(e,e,t)}function nv(e,t,n){var r=e.pingCache;if(null!==r&&r.delete(t),Xf!==e||Kf!==n){if(Zv(e,n)){var i=e.lastPingedTime;0!==i&&i<n||(e.lastPingedTime=n,Ed(e),gv(e,n))}}else 4===Jf||3===Jf&&Qf===Uu&&Iu()-id<500?Ad(e,Kf):rd=!0}function rv(e,t){var n;null!==(n=e.stateNode)&&n.delete(t),function(e,t){if(0===t){t=xd(_d(),e,null)}var n=kd(e,t);null!==n&&(Ed(n),gv(n,t))}(e,0)}function iv(){Fs(yd,!0),yd=null}function av(){Fs(yd,!1),yd=null}var ov,sv=null;ov=function(e,t,n){var r=qv(null,t);try{return uf(e,t,n)}catch(i){if(null!==i&&"object"==typeof i&&"function"==typeof i.then)throw i;if(kl(),dh(),df(t),qv(t,r),8&t.mode&&cp(t),b(null,uf,null,e,t,n),_())throw x();throw i}};var uv=!1,lv=!1;var cv={current:!1};function hv(e){!0===Hf.current&&!0!==cv.current&&l("It looks like you're using the wrong act() around your test interactions.\nBe sure to use the matching version of act() corresponding to your renderer:\n\n// for react-dom:\nimport {act} from 'react-dom/test-utils';\n// ...\nact(() => ...);\n\n// for react-test-renderer:\nimport TestRenderer from 'react-test-renderer';\nconst {act} = TestRenderer;\n// ...\nact(() => ...);%s",Y(e))}function pv(e){0!=(1&e.mode)&&!1===Hf.current&&!1===cv.current&&l("An update to %s ran an effect, but was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://fb.me/react-wrap-tests-with-act%s",H(e.type),Y(e))}var fv=function(e){0===Zf&&!1===Hf.current&&!1===cv.current&&l("An update to %s inside a test was not wrapped in act(...).\n\nWhen testing, code that causes React state updates should be wrapped into act(...):\n\nact(() => {\n  /* fire events that update state */\n});\n/* assert on the output */\n\nThis ensures that you're testing the behavior the user would see in the browser. Learn more at https://fb.me/react-wrap-tests-with-act%s",H(e.type),Y(e))},dv=!1;function vv(e,t){return 1e3*t+e.interactionThreadID}function mv(e){null===gd?gd=[e]:gd.push(e)}function yv(e,t,n){if(n.size>0){var r=e.pendingInteractionMap,i=r.get(t);null!=i?n.forEach((function(e){i.has(e)||e.__count++,i.add(e)})):(r.set(t,new Set(n)),n.forEach((function(e){e.__count++})));var a=o.__subscriberRef.current;if(null!==a){var s=vv(e,t);a.onWorkScheduled(n,s)}}}function gv(e,t){yv(e,t,o.__interactionsRef.current)}function bv(e,t){var n=new Set;if(e.pendingInteractionMap.forEach((function(e,r){r>=t&&e.forEach((function(e){return n.add(e)}))})),e.memoizedInteractions=n,n.size>0){var r=o.__subscriberRef.current;if(null!==r){var i=vv(e,t);try{r.onWorkStarted(n,i)}catch(e){Du(99,(function(){throw e}))}}}}function _v(e,t){var n,r=e.firstPendingTime;try{if(null!==(n=o.__subscriberRef.current)&&e.memoizedInteractions.size>0){var i=vv(e,t);n.onWorkStopped(e.memoizedInteractions,i)}}catch(e){Du(99,(function(){throw e}))}finally{var a=e.pendingInteractionMap;a.forEach((function(e,t){t>r&&(a.delete(t),e.forEach((function(e){if(e.__count--,null!==n&&0===e.__count)try{n.onInteractionScheduledWorkCompleted(e)}catch(e){Du(99,(function(){throw e}))}})))}))}}var xv,wv=null,kv=null,Ov=null,Ev=!1,Sv="undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__;function Tv(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return l("The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://fb.me/react-devtools"),!0;try{var n=t.inject(e);"function"==typeof t.onScheduleFiberRoot&&(wv=function(e,r){try{t.onScheduleFiberRoot(n,e,r)}catch(e){Ev||(Ev=!0,l("React instrumentation encountered an error: %s",e))}}),kv=function(e,r){try{var i=64==(64&e.current.effectTag),a=Hu(Vu(Iu()),r);t.onCommitFiberRoot(n,e,a,i)}catch(e){Ev||(Ev=!0,l("React instrumentation encountered an error: %s",e))}},Ov=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){Ev||(Ev=!0,l("React instrumentation encountered an error: %s",e))}}}catch(e){l("React instrumentation encountered an error: %s.",e)}return!0}xv=!1;try{var Pv=Object.preventExtensions({}),jv=new Map([[Pv,null]]),Cv=new Set([Pv]);jv.set(0,0),Cv.add(0)}catch(e){xv=!0}var Av=1;function Mv(e,t,n,r){this.tag=e,this.key=n,this.elementType=null,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.dependencies=null,this.mode=r,this.effectTag=0,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.expirationTime=0,this.childExpirationTime=0,this.alternate=null,this.actualDuration=Number.NaN,this.actualStartTime=Number.NaN,this.selfBaseDuration=Number.NaN,this.treeBaseDuration=Number.NaN,this.actualDuration=0,this.actualStartTime=-1,this.selfBaseDuration=0,this.treeBaseDuration=0,this._debugID=Av++,this._debugIsCurrentlyTiming=!1,this._debugSource=null,this._debugOwner=null,this._debugNeedsRemount=!1,this._debugHookTypes=null,xv||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}var Iv,Rv,Lv=function(e,t,n,r){return new Mv(e,t,n,r)};function zv(e){var t=e.prototype;return!(!t||!t.isReactComponent)}function Dv(e,t){var n=e.alternate;null===n?((n=Lv(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n._debugID=e._debugID,n._debugSource=e._debugSource,n._debugOwner=e._debugOwner,n._debugHookTypes=e._debugHookTypes,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null,n.actualDuration=0,n.actualStartTime=-1),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue;var r=e.dependencies;switch(n.dependencies=null===r?null:{expirationTime:r.expirationTime,firstContext:r.firstContext,responders:r.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.selfBaseDuration=e.selfBaseDuration,n.treeBaseDuration=e.treeBaseDuration,n._debugNeedsRemount=e._debugNeedsRemount,n.tag){case 2:case 0:case 15:n.type=sl(e.type);break;case 1:n.type=ul(e.type);break;case 11:n.type=ll(e.type)}return n}function Fv(e,t){e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null;var n=e.alternate;if(null===n)e.childExpirationTime=0,e.expirationTime=t,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.selfBaseDuration=0,e.treeBaseDuration=0;else{e.childExpirationTime=n.childExpirationTime,e.expirationTime=n.expirationTime,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue;var r=n.dependencies;e.dependencies=null===r?null:{expirationTime:r.expirationTime,firstContext:r.firstContext,responders:r.responders},e.selfBaseDuration=n.selfBaseDuration,e.treeBaseDuration=n.treeBaseDuration}return e}function Bv(e,t,n,r,i,a){var o,s=2,u=e;if("function"==typeof e)zv(e)?(s=1,u=ul(u)):u=sl(u);else if("string"==typeof e)s=5;else e:switch(e){case A:return Uv(n.children,i,a,t);case z:s=8,i|=7;break;case M:s=8,i|=1;break;case I:return function(e,t,n,r){"string"==typeof e.id&&"function"==typeof e.onRender||l('Profiler must specify an "id" string and "onRender" function as props');var i=Lv(12,e,r,8|t);return i.elementType=I,i.type=I,i.expirationTime=n,i}(n,i,a,t);case F:return function(e,t,n,r){var i=Lv(13,e,r,t);return i.type=F,i.elementType=F,i.expirationTime=n,i}(n,i,a,t);case B:return function(e,t,n,r){var i=Lv(19,e,r,t);return i.type=B,i.elementType=B,i.expirationTime=n,i}(n,i,a,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case R:s=10;break e;case L:s=9;break e;case D:s=11,u=ll(u);break e;case N:s=14;break e;case U:s=16,u=null;break e;case V:s=22;break e}var c="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(c+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var h=r?H(r.type):null;throw h&&(c+="\n\nCheck the render method of `"+h+"`."),Error("Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: "+(null==e?e:typeof e)+"."+c)}return(o=Lv(s,n,t,i)).elementType=e,o.type=u,o.expirationTime=a,o}function Nv(e,t,n){var r;r=e._owner;var i=Bv(e.type,e.key,e.props,r,t,n);return i._debugSource=e._source,i._debugOwner=e._owner,i}function Uv(e,t,n,r){var i=Lv(7,e,r,t);return i.expirationTime=n,i}function Vv(e,t,n){var r=Lv(6,e,null,t);return r.expirationTime=n,r}function Wv(e,t,n){var r=null!==e.children?e.children:[],i=Lv(4,r,e.key,t);return i.expirationTime=n,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function qv(e,t){return null===e&&(e=Lv(2,null,null,0)),e.tag=t.tag,e.key=t.key,e.elementType=t.elementType,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.dependencies=t.dependencies,e.mode=t.mode,e.effectTag=t.effectTag,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.expirationTime=t.expirationTime,e.childExpirationTime=t.childExpirationTime,e.alternate=t.alternate,e.actualDuration=t.actualDuration,e.actualStartTime=t.actualStartTime,e.selfBaseDuration=t.selfBaseDuration,e.treeBaseDuration=t.treeBaseDuration,e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugIsCurrentlyTiming=t._debugIsCurrentlyTiming,e._debugNeedsRemount=t._debugNeedsRemount,e._debugHookTypes=t._debugHookTypes,e}function Gv(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pendingChildren=null,this.pingCache=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.context=null,this.pendingContext=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.firstPendingTime=0,this.firstSuspendedTime=0,this.lastSuspendedTime=0,this.nextKnownPendingLevel=0,this.lastPingedTime=0,this.lastExpiredTime=0,this.interactionThreadID=o.unstable_getThreadID(),this.memoizedInteractions=new Set,this.pendingInteractionMap=new Map}function Hv(e,t,n,r){var i=new Gv(e,t,n),a=function(e){var t;return t=2===e?7:1===e?3:0,Sv&&(t|=8),Lv(3,null,null,t)}(t);return i.current=a,a.stateNode=i,Ll(a),i}function Zv(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;return 0!==n&&n>=t&&r<=t}function Xv(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Yv(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Kv(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Jv(e,t,n,r){!function(e,t){"function"==typeof wv&&wv(e,t)}(t,e);var a,o=t.current,s=_d();"undefined"!=typeof jest&&(a=o,!1===dv&&void 0===i.unstable_flushAllWithoutAsserting&&(2&a.mode||4&a.mode)&&(dv=!0,l("In Concurrent or Sync modes, the \"scheduler\" module needs to be mocked to guarantee consistent behaviour across tests and browsers. For example, with jest: \njest.mock('scheduler', () => require('scheduler/unstable_mock'));\n\nFor more info, visit https://fb.me/react-mock-scheduler")),hv(o));var u=Zl(),c=xd(s,o,u),h=function(e){if(!e)return $s;var t=en(e),n=fu(t);if(1===t.tag){var r=t.type;if(ou(r))return cu(t,r,n)}return n}(n);null===t.context?t.context=h:t.pendingContext=h,"render"!==J||null===K||Iv||(Iv=!0,l("Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",H(K.type)||"Unknown"));var p=Dl(c,u);return p.payload={element:e},null!==(r=void 0===r?null:r)&&("function"!=typeof r&&l("render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",r),p.callback=r),Fl(o,p),wd(o,c),c}function $v(e){var t=e.current;if(!t.child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Qv(e,t){var n=e.memoizedState;null!==n&&null!==n.dehydrated&&n.retryTime<t&&(n.retryTime=t)}function em(e,t){Qv(e,t);var n=e.alternate;n&&Qv(n,t)}function tm(e){var t=function(e){var t=sn(e);if(!t)return null;for(var n=t;;){if(5===n.tag||6===n.tag)return n;if(n.child&&4!==n.tag)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:20===t.tag?t.stateNode.instance:t.stateNode}Iv=!1,Rv={};var nm=function(e){return!1};var rm,im,am,om,sm=function(e,t,n,i){if(n>=t.length)return i;var a=t[n],o=Array.isArray(e)?e.slice():r({},e);return o[a]=sm(e[a],t,n+1,i),o},um=function(e,t,n){return sm(e,t,0,n)};rm=function(e,t,n,i){for(var a=e.memoizedState;null!==a&&t>0;)a=a.next,t--;if(null!==a){var o=um(a.memoizedState,n,i);a.memoizedState=o,a.baseState=o,e.memoizedProps=r({},e.memoizedProps),wd(e,Uu)}},im=function(e,t,n){e.pendingProps=um(e.memoizedProps,t,n),e.alternate&&(e.alternate.pendingProps=e.pendingProps),wd(e,Uu)},am=function(e){wd(e,Uu)},om=function(e){nm=e};s.IsSomeRendererActing;function lm(e,t){this._internalRoot=hm(e,2,t)}function cm(e,t,n){this._internalRoot=hm(e,t,n)}function hm(e,t,n){var r,i=null!=n&&!0===n.hydrate,a=(null!=n&&n.hydrationOptions,function(e,t,n,r){return Hv(e,t,n)}(e,t,i));(r=a.current,e[da]=r,i&&0!==t)&&function(e,t){var n=Qt(t);Rn.forEach((function(e){Dn(e,t,n)})),Ln.forEach((function(e){Dn(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument);return a}function pm(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}lm.prototype.render=cm.prototype.render=function(e){var t=this._internalRoot;"function"==typeof arguments[1]&&l("render(...): does not support the second callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var n=t.containerInfo;if(8!==n.nodeType){var r=tm(t.current);r&&r.parentNode!==n&&l("render(...): It looks like the React-rendered content of the root container was removed without using React. This is not supported and will cause errors. Instead, call root.unmount() to empty a root's container.")}Jv(e,t,null,null)},lm.prototype.unmount=cm.prototype.unmount=function(){"function"==typeof arguments[0]&&l("unmount(...): does not support a callback argument. To execute a side effect after rendering, declare it in a component body with useEffect().");var e=this._internalRoot,t=e.containerInfo;Jv(null,e,null,(function(){ma(t)}))};var fm,dm=s.ReactCurrentOwner,vm=!1;function mm(e){return e?9===e.nodeType?e.documentElement:e.firstChild:null}function ym(e,t){var n=t||function(e){var t=mm(e);return!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))}(e);if(!n)for(var r,i=!1;r=e.lastChild;)!i&&1===r.nodeType&&r.hasAttribute("data-reactroot")&&(i=!0,l("render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.")),e.removeChild(r);return!n||t||vm||(vm=!0,u("render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v17. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML.")),function(e,t){return new cm(e,0,t)}(e,n?{hydrate:!0}:void 0)}function gm(e,t,n,r,i){fm(n),function(e,t){null!==e&&"function"!=typeof e&&l("%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e)}(void 0===i?null:i,"render");var a,o=n._reactRootContainer;if(o){if(a=o._internalRoot,"function"==typeof i){var s=i;i=function(){var e=$v(a);s.call(e)}}Jv(t,a,e,i)}else{if(o=n._reactRootContainer=ym(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=$v(a);u.call(e)}}jd((function(){Jv(t,a,e,i)}))}return $v(a)}function bm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}fm=function(e){if(e._reactRootContainer&&8!==e.nodeType){var t=tm(e._reactRootContainer._internalRoot.current);t&&t.parentNode!==e&&l("render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=mm(e);!(!r||!ba(r))&&!n&&l("render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),1===e.nodeType&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&l("render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")};yn=function(e){if(13===e.tag){var t=Gu(_d());wd(e,t),em(e,t)}},function(e){gn=e}((function(e){13===e.tag&&(wd(e,3),em(e,3))})),function(e){bn=e}((function(e){if(13===e.tag){var t=xd(_d(),e,null);wd(e,t),em(e,t)}}));var _m=!1;function xm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!pm(t))throw Error("Target container is not a DOM element.");return bm(e,t,null,n)}"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||l("React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),ve=function(e,t,n){switch(t){case"input":return void vt(e,n);case"textarea":return void function(e,t){Ct(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&Ot(n,!!t.multiple,r,!1)}(e,n)}},xe=Pd,we=function(e,t,n,r,i){var a=Zf;Zf|=4;try{return zu(98,e.bind(null,t,n,r,i))}finally{0===(Zf=a)&&Bu()}},ke=function(){0==(49&Zf)?(function(){if(null!==fd){var e=fd;fd=null,e.forEach((function(e,t){Kv(t,e),Ed(t)})),Bu()}}(),Kd()):0!=(16&Zf)&&l("unstable_flushDiscreteUpdates: Cannot flush updates when React is already rendering.")},Oe=function(e,t){var n=Zf;Zf|=2;try{return e(t)}finally{0===(Zf=n)&&Bu()}};var wm={Events:[ba,_a,xa,fe,le,Ca,function(e){cn(e,ja)},be,_e,cr,dn,Kd,cv]};if(!function(e){var t=e.findFiberByHostInstance,n=s.ReactCurrentDispatcher;return Tv(r({},e,{overrideHookState:rm,overrideProps:im,setSuspenseHandler:om,scheduleUpdate:am,currentDispatcherRef:n,findHostInstanceByFiber:function(e){var t=un(e);return null===t?null:t.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:dl,scheduleRefresh:pl,scheduleRoot:fl,setRefreshHandler:ol,getCurrentFiber:function(){return K}}))}({findFiberByHostInstance:ga,bundleType:1,version:"16.13.0",rendererPackageName:"react-dom"})&&de&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var km=window.location.protocol;/^(https?|file):$/.test(km)&&console.info("%cDownload the React DevTools for a better development experience: https://fb.me/react-devtools"+("file:"===km?"\nYou might need to use a local HTTP server (instead of file://): https://fb.me/react-devtools-faq":""),"font-weight:bold")}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wm,t.createPortal=xm,t.findDOMNode=function(e){var t=dm.current;return null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||l("%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",H(t.type)||"A component"),t.stateNode._warnedAboutRefsInRender=!0),null==e?null:1===e.nodeType?e:function(e,t){var n=en(e);if(void 0===n)throw"function"==typeof e.render?Error("Unable to find node on an unmounted component."):Error("Argument appears to not be a ReactComponent. Keys: "+Object.keys(e));var r=un(n);if(null===r)return null;if(1&r.mode){var i=H(n.type)||"Component";Rv[i]||(Rv[i]=!0,1&n.mode?l("%s is deprecated in StrictMode. %s was passed an instance of %s which is inside StrictMode. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://fb.me/react-strict-mode-find-node%s",t,t,i,Y(r)):l("%s is deprecated in StrictMode. %s was passed an instance of %s which renders StrictMode children. Instead, add a ref directly to the element you want to reference. Learn more about using refs safely here: https://fb.me/react-strict-mode-find-node%s",t,t,i,Y(r)))}return r.stateNode}(e,"findDOMNode")},t.flushSync=Cd,t.hydrate=function(e,t,n){if(!pm(t))throw Error("Target container is not a DOM element.");return ya(t)&&void 0===t._reactRootContainer&&l("You are calling ReactDOM.hydrate() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call createRoot(container, {hydrate: true}).render(element)?"),gm(null,e,t,!0,n)},t.render=function(e,t,n){if(!pm(t))throw Error("Target container is not a DOM element.");return ya(t)&&void 0===t._reactRootContainer&&l("You are calling ReactDOM.render() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.render(element)?"),gm(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!pm(e))throw Error("unmountComponentAtNode(...): Target container is not a DOM element.");if(ya(e)&&void 0===e._reactRootContainer&&l("You are calling ReactDOM.unmountComponentAtNode() on a container that was previously passed to ReactDOM.createRoot(). This is not supported. Did you mean to call root.unmount()?"),e._reactRootContainer){var t=mm(e);return t&&!ba(t)&&l("unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),jd((function(){gm(null,null,e,!1,(function(){e._reactRootContainer=null,ma(e)}))})),!0}var n=mm(e),r=!(!n||!ba(n)),i=1===e.nodeType&&pm(e.parentNode)&&!!e.parentNode._reactRootContainer;return r&&l("unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},t.unstable_batchedUpdates=Pd,t.unstable_createPortal=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _m||(_m=!0,u('The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.')),xm(e,t,n)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){return function(e,t,n,r){if(!pm(n))throw Error("Target container is not a DOM element.");if(null==e||void 0===e._reactInternalFiber)throw Error("parentComponent must be a valid React Component");return gm(e,t,n,!1,r)}(e,t,n,r)},t.version="16.13.0"})()},function(e,t,n){"use strict";e.exports=n(85)},function(e,t,n){"use strict";
/** @license React v0.19.0
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e,n,r,i,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var o=null,s=null,u=function(){if(null!==o)try{var e=t.unstable_now();o(!0,e),o=null}catch(e){throw setTimeout(u,0),e}},l=Date.now();t.unstable_now=function(){return Date.now()-l},e=function(t){null!==o?setTimeout(e,0,t):(o=t,setTimeout(u,0))},n=function(e,t){s=setTimeout(e,t)},r=function(){clearTimeout(s)},i=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var c=window.performance,h=window.Date,p=window.setTimeout,f=window.clearTimeout;if("undefined"!=typeof console){var d=window.requestAnimationFrame,v=window.cancelAnimationFrame;"function"!=typeof d&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof c&&"function"==typeof c.now)t.unstable_now=function(){return c.now()};else{var m=h.now();t.unstable_now=function(){return h.now()-m}}var y=!1,g=null,b=-1,_=5,x=0;i=function(){return t.unstable_now()>=x},a=function(){},t.unstable_forceFrameRate=function(e){e<0||e>125?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=e>0?Math.floor(1e3/e):5};var w=new MessageChannel,k=w.port2;w.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();x=e+_;try{g(!0,e)?k.postMessage(null):(y=!1,g=null)}catch(e){throw k.postMessage(null),e}}else y=!1},e=function(e){g=e,y||(y=!0,k.postMessage(null))},n=function(e,n){b=p((function(){e(t.unstable_now())}),n)},r=function(){f(b),b=-1}}function O(e,t){var n=e.length;e.push(t),function(e,t,n){var r=n;for(;;){var i=r-1>>>1,a=e[i];if(!(void 0!==a&&T(a,t)>0))return;e[i]=t,e[r]=a,r=i}}(e,t,n)}function E(e){var t=e[0];return void 0===t?null:t}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();return n!==t&&(e[0]=n,function(e,t,n){var r=n,i=e.length;for(;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&T(o,t)<0)void 0!==u&&T(u,o)<0?(e[r]=u,e[s]=t,r=s):(e[r]=o,e[a]=t,r=a);else{if(!(void 0!==u&&T(u,t)<0))return;e[r]=u,e[s]=t,r=s}}}(e,n,0)),t}return null}function T(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=0,j=0,C="function"==typeof SharedArrayBuffer?new SharedArrayBuffer(4*Int32Array.BYTES_PER_ELEMENT):"function"==typeof ArrayBuffer?new ArrayBuffer(4*Int32Array.BYTES_PER_ELEMENT):null,A=null!==C?new Int32Array(C):[];A[0]=0,A[3]=0,A[1]=0;var M=0,I=null,R=null,L=0;function z(e){if(null!==R){var t=L;if((L+=e.length)+1>M){if((M*=2)>524288)return console.error("Scheduler Profiling: Event log exceeded maximum size. Don't forget to call `stopLoggingProfilingEvents()`."),void D();var n=new Int32Array(4*M);n.set(R),I=n.buffer,R=n}R.set(e,t)}}function D(){var e=I;return M=0,I=null,R=null,L=0,e}function F(e,t){A[3]++,null!==R&&z([1,1e3*t,e.id,e.priorityLevel])}function B(e,t){A[0]=0,A[1]=0,A[3]--,null!==R&&z([2,1e3*t,e.id])}function N(e,t){A[0]=0,A[1]=0,A[2]=0,null!==R&&z([6,1e3*t,e.id,P])}var U=[],V=[],W=1,q=null,G=3,H=!1,Z=!1,X=!1;function Y(e){for(var t=E(V);null!==t;){if(null===t.callback)S(V);else{if(!(t.startTime<=e))return;S(V),t.sortIndex=t.expirationTime,O(U,t),F(t,e),t.isQueued=!0}t=E(V)}}function K(t){if(X=!1,Y(t),!Z)if(null!==E(U))Z=!0,e(J);else{var r=E(V);null!==r&&n(K,r.startTime-t)}}function J(e,n){var i;i=n,null!==R&&z([8,1e3*i,j]),Z=!1,X&&(X=!1,r()),H=!0;var a=G;try{try{return $(e,n)}catch(e){if(null!==q){var o=t.unstable_now();!function(e,t){A[0]=0,A[1]=0,A[3]--,null!==R&&z([3,1e3*t,e.id])}(q,o),q.isQueued=!1}throw e}}finally{q=null,G=a,H=!1,function(e){j++,null!==R&&z([7,1e3*e,j])}(t.unstable_now())}}function $(e,r){var a,o,s=r;for(Y(s),q=E(U);null!==q&&(!(q.expirationTime>s)||e&&!i());){var u=q.callback;if(null!==u){q.callback=null,G=q.priorityLevel;var l=q.expirationTime<=s;a=q,o=s,P++,A[0]=a.priorityLevel,A[1]=a.id,A[2]=P,null!==R&&z([5,1e3*o,a.id,P]);var c=u(l);s=t.unstable_now(),"function"==typeof c?(q.callback=c,N(q,s)):(B(q,s),q.isQueued=!1,q===E(U)&&S(U)),Y(s)}else S(U);q=E(U)}if(null!==q)return!0;var h=E(V);return null!==h&&n(K,h.startTime-s),!1}function Q(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;case 3:default:return 5e3}}var ee=a,te={startLoggingProfilingEvents:function(){M=131072,I=new ArrayBuffer(4*M),R=new Int32Array(I),L=0},stopLoggingProfilingEvents:D,sharedProfilingBuffer:C};t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=te,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.isQueued&&(!function(e,t){A[3]--,null!==R&&z([4,1e3*t,e.id])}(e,t.unstable_now()),e.isQueued=!1),e.callback=null},t.unstable_continueExecution=function(){Z||H||(Z=!0,e(J))},t.unstable_getCurrentPriorityLevel=function(){return G},t.unstable_getFirstCallbackNode=function(){return E(U)},t.unstable_next=function(e){var t;switch(G){case 1:case 2:case 3:t=3;break;default:t=G}var n=G;G=t;try{return e()}finally{G=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=ee,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=G;G=e;try{return t()}finally{G=n}},t.unstable_scheduleCallback=function(i,a,o){var s,u,l=t.unstable_now();if("object"==typeof o&&null!==o){var c=o.delay;s="number"==typeof c&&c>0?l+c:l,u="number"==typeof o.timeout?o.timeout:Q(i)}else u=Q(i),s=l;var h=s+u,p={id:W++,callback:a,priorityLevel:i,startTime:s,expirationTime:h,sortIndex:-1,isQueued:!1};return s>l?(p.sortIndex=s,O(V,p),null===E(U)&&p===E(V)&&(X?r():X=!0,n(K,s-l))):(p.sortIndex=h,O(U,p),F(p,l),p.isQueued=!0,Z||H||(Z=!0,e(J))),p},t.unstable_shouldYield=function(){var e=t.unstable_now();Y(e);var n=E(U);return n!==q&&null!==q&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<q.expirationTime||i()},t.unstable_wrapCallback=function(e){var t=G;return function(){var n=G;G=t;try{return e.apply(this,arguments)}finally{G=n}}}})()},function(e,t,n){"use strict";e.exports=n(87)},function(e,t,n){"use strict";
/** @license React v0.19.0
 * scheduler-tracing.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=0,n=0;t.__interactionsRef=null,t.__subscriberRef=null,t.__interactionsRef={current:new Set},t.__subscriberRef={current:null};var r=null;function i(e){var t=!1,n=null;if(r.forEach((function(r){try{r.onInteractionTraced(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function a(e){var t=!1,n=null;if(r.forEach((function(r){try{r.onInteractionScheduledWorkCompleted(e)}catch(e){t||(t=!0,n=e)}})),t)throw n}function o(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkScheduled(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function s(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkStarted(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function u(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkStopped(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}function l(e,t){var n=!1,i=null;if(r.forEach((function(r){try{r.onWorkCanceled(e,t)}catch(e){n||(n=!0,i=e)}})),n)throw i}r=new Set,t.unstable_clear=function(e){var n=t.__interactionsRef.current;t.__interactionsRef.current=new Set;try{return e()}finally{t.__interactionsRef.current=n}},t.unstable_getCurrent=function(){return t.__interactionsRef.current},t.unstable_getThreadID=function(){return++n},t.unstable_subscribe=function(e){r.add(e),1===r.size&&(t.__subscriberRef.current={onInteractionScheduledWorkCompleted:a,onInteractionTraced:i,onWorkCanceled:l,onWorkScheduled:o,onWorkStarted:s,onWorkStopped:u})},t.unstable_trace=function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o={__count:1,id:e++,name:n,timestamp:r},s=t.__interactionsRef.current,u=new Set(s);u.add(o),t.__interactionsRef.current=u;var l,c=t.__subscriberRef.current;try{null!==c&&c.onInteractionTraced(o)}finally{try{null!==c&&c.onWorkStarted(u,a)}finally{try{l=i()}finally{t.__interactionsRef.current=s;try{null!==c&&c.onWorkStopped(u,a)}finally{o.__count--,null!==c&&0===o.__count&&c.onInteractionScheduledWorkCompleted(o)}}}}return l},t.unstable_unsubscribe=function(e){r.delete(e),0===r.size&&(t.__subscriberRef.current=null)},t.unstable_wrap=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.__interactionsRef.current,i=t.__subscriberRef.current;null!==i&&i.onWorkScheduled(r,n),r.forEach((function(e){e.__count++}));var a=!1;function o(){var o=t.__interactionsRef.current;t.__interactionsRef.current=r,i=t.__subscriberRef.current;try{var s;try{null!==i&&i.onWorkStarted(r,n)}finally{try{s=e.apply(void 0,arguments)}finally{t.__interactionsRef.current=o,null!==i&&i.onWorkStopped(r,n)}}return s}finally{a||(a=!0,r.forEach((function(e){e.__count--,null!==i&&0===e.__count&&i.onInteractionScheduledWorkCompleted(e)})))}}return o.cancel=function(){i=t.__subscriberRef.current;try{null!==i&&i.onWorkCanceled(r,n)}finally{r.forEach((function(e){e.__count--,i&&0===e.__count&&i.onInteractionScheduledWorkCompleted(e)}))}},o}})()},function(e,t,n){"use strict";
/** @license React v16.13.0
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,h=e?Symbol.for("react.forward_ref"):60112,p=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,g=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var f=e.type;switch(f){case l:case c:case i:case o:case a:case p:return f;default:var m=f&&f.$$typeof;switch(m){case u:case h:case v:case d:case s:return m;default:return t}}case r:return t}}}var x=l,w=c,k=u,O=s,E=n,S=h,T=i,P=v,j=d,C=r,A=o,M=a,I=p,R=!1;function L(e){return _(e)===c}t.AsyncMode=x,t.ConcurrentMode=w,t.ContextConsumer=k,t.ContextProvider=O,t.Element=E,t.ForwardRef=S,t.Fragment=T,t.Lazy=P,t.Memo=j,t.Portal=C,t.Profiler=A,t.StrictMode=M,t.Suspense=I,t.isAsyncMode=function(e){return R||(R=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),L(e)||_(e)===l},t.isConcurrentMode=L,t.isContextConsumer=function(e){return _(e)===u},t.isContextProvider=function(e){return _(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===d},t.isPortal=function(e){return _(e)===r},t.isProfiler=function(e){return _(e)===o},t.isStrictMode=function(e){return _(e)===a},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===c||e===o||e===a||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===d||e.$$typeof===s||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===g||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_})()},function(e,t,n){"use strict";var r=n(61),i=n(56),a=n(60),o=n(57),s=Function.call.bind(Object.prototype.hasOwnProperty),u=function(){};function l(){return null}u=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator;var c={array:d("array"),bool:d("boolean"),func:d("function"),number:d("number"),object:d("object"),string:d("string"),symbol:d("symbol"),any:f(l),arrayOf:function(e){return f((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new p("Invalid "+i+" `"+o+"` of type `"+m(s)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<s.length;u++){var l=e(s,u,r,i,o+"["+u+"]",a);if(l instanceof Error)return l}return null}))},element:f((function(t,n,r,i,a){var o=t[n];return e(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+m(o)+"` supplied to `"+r+"`, expected a single ReactElement.")})),elementType:f((function(e,t,n,i,a){var o=e[t];return r.isValidElementType(o)?null:new p("Invalid "+i+" `"+a+"` of type `"+m(o)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return f((function(t,n,r,i,a){if(!(t[n]instanceof e)){var o=e.name||"<<anonymous>>";return new p("Invalid "+i+" `"+a+"` of type `"+function(e){if(!e.constructor||!e.constructor.name)return"<<anonymous>>";return e.constructor.name}(t[n])+"` supplied to `"+r+"`, expected instance of `"+o+"`.")}return null}))},node:f((function(e,t,n,r,i){return v(e[t])?null:new p("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return f((function(t,n,r,i,o){if("function"!=typeof e)return new p("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var u=t[n],l=m(u);if("object"!==l)return new p("Invalid "+i+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in u)if(s(u,c)){var h=e(u,c,r,i,o+"."+c,a);if(h instanceof Error)return h}return null}))},oneOf:function(e){if(!Array.isArray(e))return arguments.length>1?u("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):u("Invalid argument supplied to oneOf, expected an array."),l;function t(t,n,r,i,a){for(var o=t[n],s=0;s<e.length;s++)if(h(o,e[s]))return null;var u=JSON.stringify(e,(function(e,t){return"symbol"===y(t)?String(t):t}));return new p("Invalid "+i+" `"+a+"` of value `"+String(o)+"` supplied to `"+r+"`, expected one of "+u+".")}return f(t)},oneOfType:function(e){if(!Array.isArray(e))return u("Invalid argument supplied to oneOfType, expected an instance of array."),l;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return u("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+g(n)+" at index "+t+"."),l}return f((function(t,n,r,i,o){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,n,r,i,o,a))return null}return new p("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")}))},shape:function(e){return f((function(t,n,r,i,o){var s=t[n],u=m(s);if("object"!==u)return new p("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var c=e[l];if(c){var h=c(s,l,r,i,o+"."+l,a);if(h)return h}}return null}))},exact:function(e){return f((function(t,n,r,o,s){var u=t[n],l=m(u);if("object"!==l)return new p("Invalid "+o+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var c=i({},t[n],e);for(var h in c){var f=e[h];if(!f)return new p("Invalid "+o+" `"+s+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var d=f(u,h,r,o,s+"."+h,a);if(d)return d}return null}))}};function h(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e){this.message=e,this.stack=""}function f(e){var n={},r=0;function i(i,o,s,l,c,h,f){if(l=l||"<<anonymous>>",h=h||s,f!==a){if(t){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}if("undefined"!=typeof console){var v=l+":"+s;!n[v]&&r<3&&(u("You are manually calling a React.PropTypes validation function for the `"+h+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[v]=!0,r++)}}return null==o[s]?i?null===o[s]?new p("The "+c+" `"+h+"` is marked as required in `"+l+"`, but its value is `null`."):new p("The "+c+" `"+h+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:e(o,s,l,c,h)}var o=i.bind(null,!1);return o.isRequired=i.bind(null,!0),o}function d(e){return f((function(t,n,r,i,a,o){var s=t[n];return m(s)!==e?new p("Invalid "+i+" `"+a+"` of type `"+y(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null}))}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e["@@iterator"]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,a=r.call(t);if(r!==t.entries){for(;!(i=a.next()).done;)if(!v(i.value))return!1}else for(;!(i=a.next()).done;){var o=i.value;if(o&&!v(o[1]))return!1}return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function y(e){if(null==e)return""+e;var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function g(e){var t=y(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return p.prototype=Error.prototype,c.checkPropTypes=o,c.resetWarningCache=o.resetWarningCache,c.PropTypes=c,c}},function(e,t){},function(e,t,n){"use strict";var r=n(44),i=n(92);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"self",{enumerable:!0,get:function(){return a.self}}),Object.defineProperty(t,"window",{enumerable:!0,get:function(){return a.window}}),Object.defineProperty(t,"global",{enumerable:!0,get:function(){return a.global}}),Object.defineProperty(t,"document",{enumerable:!0,get:function(){return a.document}}),Object.defineProperty(t,"process",{enumerable:!0,get:function(){return a.process}}),Object.defineProperty(t,"console",{enumerable:!0,get:function(){return a.console}}),Object.defineProperty(t,"isBrowser",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"isBrowserMainThread",{enumerable:!0,get:function(){return o.isBrowserMainThread}}),Object.defineProperty(t,"getBrowser",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return s.isMobile}}),Object.defineProperty(t,"isElectron",{enumerable:!0,get:function(){return u.default}});var a=n(64),o=i(n(65)),s=i(n(93)),u=r(n(58))},function(e,t,n){var r=n(49);function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}},function(e,t,n){"use strict";var r=n(44);Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=function(){return void 0!==i.window.orientation},t.default=function(e){if(!e&&!(0,a.default)())return"Node";if((0,o.default)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),s=-1!==n.indexOf("Trident/");if(r||s)return"IE";if(i.window.chrome)return"Chrome";if(i.window.safari)return"Safari";if(i.window.mozInnerScreenX)return"Firefox";return"Unknown"};var i=n(64),a=r(n(65)),o=r(n(58))},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var i=t&&t.prototype instanceof c?t:c,a=Object.create(i.prototype),o=new w(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return O()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=u(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var l={};function c(){}function h(){}function p(){}var f={};f[i]=function(){return this};var d=Object.getPrototypeOf,v=d&&d(d(k([])));v&&v!==t&&n.call(v,i)&&(f=v);var m=p.prototype=c.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function g(e){var t;this._invoke=function(r,i){function a(){return new Promise((function(t,a){!function t(r,i,a,o){var s=u(e[r],e,i);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return t("throw",e,a,o)}))}o(s.arg)}(r,i,t,a)}))}return t=t?t.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return h.prototype=m.constructor=p,p.constructor=h,p[o]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},y(g.prototype),g.prototype[a]=function(){return this},e.AsyncIterator=g,e.async=function(t,n,r,i){var a=new g(s(t,n,r,i));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(m),m[o]="Generator",m[i]=function(){return this},m.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t);var r=n(9),i=n.n(r),a=n(50),o=n.n(a);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var u=n(2),l=n(6),c=n(4),h=n(5),p=n(1),f=n(7),d=n(0),v=n(3),m=n.n(v);function y(e){if(!e)return null;if("string"==typeof e)return e;e.toJS&&(e=e.toJS());var t=e.layers.reduce((function(e,t){return Object.assign(e,Object(d.a)({},t.id,t))}),{});return e.layers=e.layers.map((function(e){delete(e=Object.assign({},e)).interactive;var n=t[e.ref];return n&&(delete e.ref,void 0!==n.type&&(e.type=n.type),void 0!==n.source&&(e.source=n.source),void 0!==n["source-layer"]&&(e["source-layer"]=n["source-layer"]),void 0!==n.minzoom&&(e.minzoom=n.minzoom),void 0!==n.maxzoom&&(e.maxzoom=n.maxzoom),void 0!==n.filter&&(e.filter=n.filter),void 0!==n.layout&&(e.layout=e.layout||{},e.layout=Object.assign({},e.layout,n.layout))),e})),e}var g=n(8),b=n(27);function _(e,t){var n=b.b([],t,e);return b.a(n,n,1/n[3]),n}function x(e,t){var n=e%t;return n<0?t+n:n}function w(e,t,n){return n*t+(1-n)*e}var k=n(11),O=n(18),E=n(23);function S(e,t){if(!e)throw new Error(t||"viewport-mercator-project: assertion failed.")}var T=Math.PI,P=T/4,j=T/180,C=180/T;function A(e){return Math.pow(2,e)}function M(e){return Math.log2(e)}function I(e,t){var n=Object(g.a)(e,2),r=n[0],i=n[1];S(Number.isFinite(r)&&Number.isFinite(t)),S(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");var a=i*j;return[(t*=512)*(r*j+T)/(2*T),t*(T-Math.log(Math.tan(P+.5*a)))/(2*T)]}function R(e,t){var n=Object(g.a)(e,2),r=n[0],i=n[1],a=r/(t*=512)*(2*T)-T,o=2*(Math.atan(Math.exp(T-i/t*(2*T)))-P);return[a*C,o*C]}function L(e){var t=e.latitude,n=e.longitude,r=e.zoom,i=e.scale,a=e.highPrecision,o=void 0!==a&&a;i=void 0!==i?i:A(r),S(Number.isFinite(t)&&Number.isFinite(n)&&Number.isFinite(i));var s={},u=512*i,l=Math.cos(t*j),c=u/360,h=c/l,p=u/4003e4/l;if(s.pixelsPerMeter=[p,-p,p],s.metersPerPixel=[1/p,-1/p,1/p],s.pixelsPerDegree=[c,-h,p],s.degreesPerPixel=[1/c,-1/h,1/p],o){var f=j*Math.tan(t*j)/l,d=c*f/2,v=u/4003e4*f,m=v/h*p;s.pixelsPerDegree2=[0,-d,v],s.pixelsPerMeter2=[m,0,m]}return s}function z(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,a=e.center,o=void 0===a?null:a,s=e.flipY,u=void 0!==s&&s,l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return k.o(l,l,[0,0,-i]),k.n(l,l,[1,1,1/t]),k.k(l,l,-n*j),k.m(l,l,r*j),u&&k.n(l,l,[1,-1,1]),o&&k.o(l,l,E.c([],o)),l}function D(e){var t=e.width,n=e.height,r=e.pitch,i=function(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?1.5:r,a=e.pitch,o=void 0===a?0:a,s=e.nearZMultiplier,u=void 0===s?1:s,l=e.farZMultiplier,c=void 0===l?1:l,h=o*j,p=Math.atan(.5/i),f=Math.sin(p)*i/Math.sin(Math.PI/2-h-p),d=Math.cos(Math.PI/2-h)*f+i;return{fov:2*Math.atan(n/2/i),aspect:t/n,focalDistance:i,near:u,far:d*c}}({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,u=i.far;return k.i([],a,o,s,u)}function F(e,t){var n=Object(g.a)(e,3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a;return S(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),_(t,[r,i,o,1])}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(g.a)(e,3),i=r[0],a=r[1],o=r[2];if(S(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=_(t,[i,a,o,1]);return s}var u=_(t,[i,a,0,1]),l=_(t,[i,a,1,1]),c=u[2],h=l[2],p=c===h?0:((n||0)-c)/(h-c);return O.c([],u,l,p)}var N=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function U(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,a=void 0===i?0:i,o=e.maxZoom,s=void 0===o?24:o,u=e.padding,l=void 0===u?0:u,c=e.offset,h=void 0===c?[0,0]:c,p=Object(g.a)(r,2),f=Object(g.a)(p[0],2),d=f[0],v=f[1],m=Object(g.a)(p[1],2),y=m[0],b=m[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else S(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var _=new V({width:t,height:n,longitude:0,latitude:0,zoom:0}),x=_.project([d,b]),w=_.project([y,v]),k=[Math.max(Math.abs(w[0]-x[0]),a),Math.max(Math.abs(w[1]-x[1]),a)],O=[t-l.left-l.right-2*Math.abs(h[0]),n-l.top-l.bottom-2*Math.abs(h[1])];S(O[0]>0&&O[1]>0);var E=O[0]/k[0],T=O[1]/k[1],P=(l.right-l.left)/2/E,j=(l.bottom-l.top)/2/T,C=[(w[0]+x[0])/2+P,(w[1]+x[1])/2+j],A=_.unproject(C),M=_.zoom+Math.log2(Math.abs(Math.min(E,T)));return{longitude:A[0],latitude:A[1],zoom:Math.min(M,s)}}var V=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,o=void 0===a?0:a,s=n.longitude,p=void 0===s?0:s,f=n.zoom,d=void 0===f?0:f,v=n.pitch,m=void 0===v?0:v,y=n.bearing,g=void 0===y?0:y,b=n.altitude,_=void 0===b?1.5:b,x=n.nearZMultiplier,w=n.farZMultiplier;Object(u.a)(this,t),r=r||1,i=i||1;var k=A(d);_=Math.max(.75,_);var O=I([p,o],k);O[2]=0;var E=D({width:r,height:i,pitch:m,bearing:g,altitude:_,nearZMultiplier:x||1/i,farZMultiplier:w||1.01}),S=z({height:i,center:O,pitch:m,bearing:g,altitude:_,flipY:!0});return(e=Object(l.a)(this,Object(c.a)(t).call(this,{width:r,height:i,viewMatrix:S,projectionMatrix:E}))).latitude=o,e.longitude=p,e.zoom=d,e.pitch=m,e.bearing=g,e.altitude=_,e.scale=k,e.center=O,e.pixelsPerMeter=L(Object(h.a)(Object(h.a)(e))).pixelsPerMeter[2],Object.freeze(Object(h.a)(Object(h.a)(e))),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"projectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return I(e,t)}},{key:"unprojectFlat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return R(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=B(e.pos,this.pixelUnprojectionMatrix),r=I(t,this.scale),i=O.a([],r,O.d([],n));return R(O.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=U(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:u})}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.viewMatrix,a=void 0===i?N:i,o=t.projectionMatrix,s=void 0===o?N:o;Object(u.a)(this,e),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=s;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.g(l,l,this.projectionMatrix),k.g(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.n(c,c,[this.width/2,-this.height/2,1]),k.o(c,c,[1,-1,0]),k.g(c,c,this.viewProjectionMatrix);var h=k.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c);if(!h)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=h,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(p.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&k.b(t.projectionMatrix,this.projectionMatrix)&&k.b(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),a=F(i,this.pixelProjectionMatrix),o=Object(g.a)(a,2),s=o[0],u=o[1],l=r?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,a=Object(g.a)(e,3),o=a[0],s=a[1],u=a[2],l=r?s:this.height-s,c=i&&i*this.pixelsPerMeter,h=B([o,l,u],this.pixelUnprojectionMatrix,c),p=this.unprojectPosition(h),f=Object(g.a)(p,3),d=f[0],v=f[1],m=f[2];return Number.isFinite(u)?[d,v,m]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)*this.pixelsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)/this.pixelsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}()),W=n(69),q=n(54),G=n(62),H=n.n(G);function Z(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function X(e,t){if(e===t)return!0;if(Z(e)&&Z(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!X(e[n],t[n]))return!1;return!0}return Math.abs(e-t)<=1e-7}function Y(e,t,n){return Math.max(t,Math.min(n,e))}function K(e,t,n){return Z(e)?e.map((function(e,r){return K(e,t[r],n)})):n*t+(1-n)*e}function J(e,t){if(!e)throw new Error(t||"react-map-gl: assertion failed.")}var $=function(){function e(){Object(u.a)(this,e),Object(d.a)(this,"propNames",[])}return Object(p.a)(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=(this.propNames||[])[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!X(e[s],t[s]))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(e,t){return{start:e,end:t}}},{key:"interpolateProps",value:function(e,t,n){J(!1,"interpolateProps is not implemented")}},{key:"getDuration",value:function(e,t){return t.transitionDuration}}]),e}(),Q=["longitude","latitude","zoom"],ee={curve:1.414,speed:1.2};function te(e,t,n){var r=(n=Object.assign({},ee,n)).curve,i=e.zoom,a=[e.longitude,e.latitude],o=A(i),s=t.zoom,u=[t.longitude,t.latitude],l=A(s-i),c=I(a,o),h=I(u,o),p=O.f([],h,c),f=Math.max(e.width,e.height),d=f/l,v=O.b(p),m=Math.max(v,.01),y=r*r,g=(d*d-f*f+y*y*m*m)/(2*f*y*m),b=(d*d-f*f-y*y*m*m)/(2*d*y*m),_=Math.log(Math.sqrt(g*g+1)-g),x=Math.log(Math.sqrt(b*b+1)-b);return{startZoom:i,startCenterXY:c,uDelta:p,w0:f,u1:v,S:(x-_)/r,rho:r,rho2:y,r0:_,r1:x}}var ne={longitude:1,bearing:1};function re(e){return Number.isFinite(e)||Array.isArray(e)}function ie(e,t,n){return function(e){return e in ne}(e)&&Math.abs(n-t)>180&&(n=n<0?n+360:n-360),n}var ae=["longitude","latitude","zoom","bearing","pitch"],oe=["latitude","longitude","zoom","width","height"],se=["bearing","pitch"],ue={speed:1.2,curve:1.414},le=(function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this)),Object(d.a)(Object(h.a)(e),"speed",void 0),Object(d.a)(Object(h.a)(e),"propNames",ae),Object(d.a)(Object(h.a)(e),"props",void 0),e.props=Object.assign({},ue,n),e}Object(f.a)(t,e),Object(p.a)(t,[{key:"initializeProps",value:function(e,t){var n={},r={},i=!0,a=!1,o=void 0;try{for(var s,u=oe[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=e[l],h=t[l];J(re(c)&&re(h),"".concat(l," must be supplied for transition")),n[l]=c,r[l]=ie(l,c,h)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}var p=!0,f=!1,d=void 0;try{for(var v,m=se[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=v.value,g=e[y]||0,b=t[y]||0;n[y]=g,r[y]=ie(y,g,b)}}catch(e){f=!0,d=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw d}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={},a=te(e,t,r),o=a.startZoom,s=a.startCenterXY,u=a.uDelta,l=a.w0,c=a.u1,h=a.S,p=a.rho,f=a.rho2,d=a.r0;if(c<.01){for(var v=0;v<Q.length;v++){var m=Q[v],y=e[m],g=t[m];i[m]=w(y,g,n)}return i}var b=n*h,_=Math.cosh(d)/Math.cosh(d+p*b),x=l*((Math.cosh(d)*Math.tanh(d+p*b)-Math.sinh(d))/f)/c,k=1/_,E=o+M(k),S=O.e([],u,x);O.a(S,S,s),O.e(S,S,k);var T=R(S,A(E));return i.longitude=T[0],i.latitude=T[1],i.zoom=E,i}(e,t,n,this.props),i=!0,a=!1,o=void 0;try{for(var s,u=se[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=K(e[l],t[l],n)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"getDuration",value:function(e,t){var n=t.transitionDuration;return"auto"===n&&(n=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r=Object.assign({},ee,r),a=i.screenSpeed,o=i.speed,s=i.maxDuration,u=te(e,t,r),l=u.S,c=u.rho,h=1e3*l;return n=Number.isFinite(a)?h/(a/c):h/o,Number.isFinite(s)&&n>s?0:n}(e,t,this.props)),n}}])}($),["longitude","latitude","zoom","bearing","pitch"]),ce=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,t),e=Object(l.a)(this,Object(c.a)(t).call(this)),Object(d.a)(Object(h.a)(e),"around",void 0),Array.isArray(n)&&(n={transitionProps:n}),e.propNames=n.transitionProps||le,n.around&&(e.around=n.around),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initializeProps",value:function(e,t){var n={},r={};if(this.around){n.around=this.around;var i=new V(e).unproject(this.around);Object.assign(r,t,{around:new V(t).project(i),aroundLngLat:i})}var a=!0,o=!1,s=void 0;try{for(var u,l=this.propNames[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value,h=e[c],p=t[c];J(re(h)&&re(p),"".concat(c," must be supplied for transition")),n[c]=h,r[c]=ie(c,h,p)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return{start:n,end:r}}},{key:"interpolateProps",value:function(e,t,n){var r={},i=!0,a=!1,o=void 0;try{for(var s,u=this.propNames[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;r[l]=K(e[l],t[l],n)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}if(t.around){var c=new V(Object.assign({},t,r)).getMapCenterByLngLatPosition({lngLat:t.aroundLngLat,pos:K(e.around,t.around,n)}),h=Object(g.a)(c,2),p=h[0],f=h[1];r.longitude=p,r.latitude=f}return r}}]),t}($),he={minZoom:0,maxZoom:24,minPitch:0,maxPitch:60},pe=0,fe=0,de=1.5,ve=function(){function e(t){var n=t.width,r=t.height,i=t.latitude,a=t.longitude,o=t.zoom,s=t.bearing,l=void 0===s?fe:s,c=t.pitch,h=void 0===c?pe:c,p=t.altitude,f=void 0===p?de:p,v=t.maxZoom,m=void 0===v?he.maxZoom:v,y=t.minZoom,g=void 0===y?he.minZoom:y,b=t.maxPitch,_=void 0===b?he.maxPitch:b,x=t.minPitch,w=void 0===x?he.minPitch:x,k=t.transitionDuration,O=t.transitionEasing,E=t.transitionInterpolator,S=t.transitionInterruption,T=t.startPanLngLat,P=t.startZoomLngLat,j=t.startBearing,C=t.startPitch,A=t.startZoom;Object(u.a)(this,e),Object(d.a)(this,"_viewportProps",void 0),Object(d.a)(this,"_interactiveState",void 0),J(Number.isFinite(n),"`width` must be supplied"),J(Number.isFinite(r),"`height` must be supplied"),J(Number.isFinite(a),"`longitude` must be supplied"),J(Number.isFinite(i),"`latitude` must be supplied"),J(Number.isFinite(o),"`zoom` must be supplied"),this._viewportProps=this._applyConstraints({width:n,height:r,latitude:i,longitude:a,zoom:o,bearing:l,pitch:h,altitude:f,maxZoom:m,minZoom:g,maxPitch:_,minPitch:w,transitionDuration:k,transitionEasing:O,transitionInterpolator:E,transitionInterruption:S}),this._interactiveState={startPanLngLat:T,startZoomLngLat:P,startBearing:j,startPitch:C,startZoom:A}}return Object(p.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),a=Object(g.a)(i,2),o=a[0],s=a[1];return this._getUpdatedMapState({longitude:o,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedMapState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedMapState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:o||0,startPitch:s||0}),l=u.pitch,c=u.bearing;return this._getUpdatedMapState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedMapState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedMapState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale;J(r>0,"`scale` must be a positive number");var i=this._interactiveState,a=i.startZoom,o=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(t)),J(o,"`startZoomLngLat` prop is required for zoom behavior to calculate where to position the map.");var s=this._calculateNewZoom({scale:r,startZoom:a||0}),u=new V(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:o,pos:t}),l=Object(g.a)(u,2),c=l[0],h=l[1];return this._getUpdatedMapState({zoom:s,longitude:c,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedMapState({startZoomLngLat:null,startZoom:null})}},{key:"_getUpdatedMapState",value:function(t){return new e(Object.assign({},this._viewportProps,this._interactiveState,t))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Y(r,n,t);var i=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=Y(o,a,i),Object.assign(e,function(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,a=e.zoom,o=e.pitch,s=void 0===o?0:o,u=e.bearing,l=void 0===u?0:u;(r<-180||r>180)&&(r=x(r+180,360)-180),(l<-180||l>180)&&(l=x(l+180,360)-180);var c=new V({width:t,height:n,longitude:r,latitude:i,zoom:a}),h=c.project([r,85.05113])[1],p=c.project([r,-85.05113])[1],f=0;return p-h<n&&(a+=Math.log2(n/(p-h)),h=(c=new V({width:t,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],p=c.project([r,-85.05113])[1]),h>0?f=h:p<n&&(f=p-n),f&&(i=c.unproject([t/2,n/2+f])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:a,pitch:s,bearing:l}}(e)),e}},{key:"_unproject",value:function(e){var t=new V(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new V(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom;return Y(n+Math.log2(t),a,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=Y(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(o-i)),{pitch:u,bearing:r+180*t}}}]),e}();function me(e){return e[0].toLowerCase()+e.slice(1)}var ye=Object(r.createContext)({viewport:null,map:null,mapContainer:null,onViewportChange:null,onViewStateChange:null,eventManager:null,isDragging:!1});function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e="A valid API access token is required to use Mapbox data";var xe={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},we=Object.assign({},q.a.propTypes,{width:m.a.oneOfType([m.a.number,m.a.string]),height:m.a.oneOfType([m.a.number,m.a.string]),onResize:m.a.func,preventStyleDiffing:m.a.bool,disableTokenWarning:m.a.bool,visible:m.a.bool,className:m.a.string,style:m.a.object,visibilityConstraints:m.a.object}),ke=Object.assign({},q.a.defaultProps,{preventStyleDiffing:!1,disableTokenWarning:!1,visible:!0,onResize:function(){},className:"",style:null,visibilityConstraints:he}),Oe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a))),Object(d.a)(Object(h.a)(n),"state",{accessTokenInvalid:!1}),Object(d.a)(Object(h.a)(n),"_mapbox",null),Object(d.a)(Object(h.a)(n),"_map",null),Object(d.a)(Object(h.a)(n),"_mapboxMapRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_mapContainerRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_queryParams",{}),Object(d.a)(Object(h.a)(n),"_width",0),Object(d.a)(Object(h.a)(n),"_height",0),Object(d.a)(Object(h.a)(n),"getMap",(function(){return n._map})),Object(d.a)(Object(h.a)(n),"queryRenderedFeatures",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n._map.queryRenderedFeatures(e,t)})),Object(d.a)(Object(h.a)(n),"_mapboxMapError",(function(e){401!==(e.error&&e.error.status||e.status)||n.state.accessTokenInvalid||(console.error(_e),n.setState({accessTokenInvalid:!0})),n.props.onError(e)})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){if(t.supported()){var e=this.props.mapStyle;this._mapbox=new q.a(Object.assign({},this.props,{mapboxgl:H.a,width:this._width,height:this._height,container:this._mapboxMapRef.current,onError:this._mapboxMapError,mapStyle:y(e)})),this._map=this._mapbox.getMap()}}},{key:"componentDidUpdate",value:function(e){this._mapbox&&(this._updateMapStyle(e,this.props),this._updateMapProps(this.props))}},{key:"componentWillUnmount",value:function(){this._mapbox&&(this._mapbox.finalize(),this._mapbox=null,this._map=null)}},{key:"_updateMapSize",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this._updateMapProps(this.props))}},{key:"_updateMapStyle",value:function(e,t){var n=t.mapStyle;n!==e.mapStyle&&this._map.setStyle(y(n),{diff:!this.props.preventStyleDiffing})}},{key:"_updateMapProps",value:function(e){this._mapbox&&this._mapbox.setProps(Object.assign({},e,{width:this._width,height:this._height}))}},{key:"_renderNoTokenWarning",value:function(){if(this.state.accessTokenInvalid&&!this.props.disableTokenWarning){return i.a.createElement("div",{key:"warning",id:"no-token-warning",style:{position:"absolute",left:0,top:0}},i.a.createElement("h3",{key:"header"},"NO_TOKEN_WARNING"),i.a.createElement("div",{key:"text"},"For information on setting up your basemap, read"),i.a.createElement("a",{key:"link",href:"https://uber.github.io/react-map-gl/#/Documentation/getting-started/about-mapbox-tokens"},"Note on Map Tokens"))}return null}},{key:"_renderOverlays",value:function(e){var t=this,n=e.width,r=void 0===n?Number(this.props.width):n,a=e.height,o=void 0===a?Number(this.props.height):a;return this._updateMapSize(r,o),i.a.createElement(ye.Consumer,null,(function(e){var n=be({},e,{viewport:new V(be({},t.props,{},t.props.viewState,{width:r,height:o})),map:t._map,mapContainer:e.mapContainer||t._mapContainerRef.current});return i.a.createElement(ye.Provider,{value:n},i.a.createElement("div",{key:"map-overlays",className:"overlays",style:xe},t.props.children))}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,r=e.height,a=e.style,o=e.visibilityConstraints,s=Object.assign({position:"relative"},a,{width:n,height:r}),u=this.props.visible&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;for(var n in t){var r=n.slice(0,3),i=me(n.slice(3));if("min"===r&&e[i]<t[n])return!1;if("max"===r&&e[i]>t[n])return!1}return!0}(this.props.viewState||this.props,o),l=Object.assign({},xe,{visibility:u?"inherit":"hidden"});return i.a.createElement("div",{key:"map-container",style:s,ref:this._mapContainerRef},i.a.createElement("div",{key:"map-mapbox",ref:this._mapboxMapRef,style:l,className:t}),i.a.createElement(W.a,{key:"autosizer",disableWidth:Number.isFinite(n),disableHeight:Number.isFinite(r),onResize:this.props.onResize},this._renderOverlays.bind(this)),this._renderNoTokenWarning())}}],[{key:"supported",value:function(){return H.a&&H.a.supported()}}]),t}(r.PureComponent);Object(d.a)(Oe,"propTypes",we),Object(d.a)(Oe,"defaultProps",ke);var Ee=function(){};var Se=1,Te=2,Pe=3,je=4,Ce={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new ce,transitionInterruption:Se,onTransitionStart:Ee,onTransitionInterrupt:Ee,onTransitionEnd:Ee,onViewportChange:Ee,onStateChange:Ee},Ae=function(){function e(t,n){var r=this;Object(u.a)(this,e),Object(d.a)(this,"props",void 0),Object(d.a)(this,"state",void 0),Object(d.a)(this,"time",void 0),Object(d.a)(this,"time",void 0),Object(d.a)(this,"_animationFrame",null),Object(d.a)(this,"_onTransitionFrame",(function(){r._animationFrame=requestAnimationFrame(r._onTransitionFrame),r._updateViewport()})),t&&(this.props=t),this.time=n||Date.now}return Object(p.a)(e,[{key:"getViewportInTransition",value:function(){return this._animationFrame?this.state.propsInTransition:null}},{key:"processViewportChange",value:function(e){var t=this.props;if(this.props=e,this._shouldIgnoreViewportChange(t,e))return!1;if(this._isTransitionEnabled(e)){var n=Object.assign({},t),r=Object.assign({},e);if(this._isTransitionInProgress()&&(t.onTransitionInterrupt(),this.state.interruption===Te?Object.assign(n,this.state.endProps):Object.assign(n,this.state.propsInTransition),this.state.interruption===je)){var i=this.time(),a=(i-this.state.startTime)/this.state.duration;r.transitionDuration=this.state.duration-(i-this.state.startTime),r.transitionEasing=function(e,t){var n=e(t);return function(r){return 1/(1-n)*(e(r*(1-t)+t)-n)}}(this.state.easing,a),r.transitionInterpolator=n.transitionInterpolator}return r.onTransitionStart(),this._triggerTransition(n,r),!0}return this._isTransitionInProgress()&&(t.onTransitionInterrupt(),this._endTransition()),!1}},{key:"_isTransitionInProgress",value:function(){return Boolean(this._animationFrame)}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.state.propsInTransition&&this.state.interpolator.arePropsEqual(e,this.state.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return!e||(this._isTransitionInProgress()?this.state.interruption===Pe||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t))}},{key:"_triggerTransition",value:function(e,t){J(this._isTransitionEnabled(t),"Transition is not enabled"),this._animationFrame&&cancelAnimationFrame(this._animationFrame);var n=t.transitionInterpolator.getDuration(e,t),r=t.transitionInterpolator.initializeProps(e,t),i={inTransition:!0,isZooming:e.zoom!==t.zoom,isPanning:e.longitude!==t.longitude||e.latitude!==t.latitude,isRotating:e.bearing!==t.bearing||e.pitch!==t.pitch};this.state={duration:n,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startTime:this.time(),startProps:r.start,endProps:r.end,animation:null,propsInTransition:{},interactionState:i},this._onTransitionFrame(),this.props.onStateChange(i)}},{key:"_endTransition",value:function(){this._animationFrame&&(cancelAnimationFrame(this._animationFrame),this._animationFrame=null),this.props.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1})}},{key:"_updateViewport",value:function(){var e=this.time(),t=this.state,n=t.startTime,r=t.duration,i=t.easing,a=t.interpolator,o=t.startProps,s=t.endProps,u=!1,l=(e-n)/r;l>=1&&(l=1,u=!0),l=i(l);var c=a.interpolateProps(o,s,l),h=new ve(Object.assign({},this.props,c));this.state.propsInTransition=h.getViewportProps(),this.props.onViewportChange(this.state.propsInTransition,this.state.interactionState,this.props),u&&(this._endTransition(),this.props.onTransitionEnd())}}]),e}();Object(d.a)(Ae,"defaultProps",Ce);var Me,Ie,Re=n(46),Le=n.n(Re),ze={mousedown:1,mousemove:2,mouseup:4};Me=Le.a.PointerEventInput,Ie=Me.prototype.handler,Me.prototype.handler=function(e){var t=this.store;e.button>0&&(function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!0;return!1}(t,(function(t){return t.pointerId===e.pointerId}))||t.push(e)),Ie.call(this,e)},Le.a.MouseInput.prototype.handler=function(e){var t=ze[e.type];1&t&&e.button>=0&&(this.pressed=!0),2&t&&0===e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))};var De=Le.a.Manager,Fe=Le.a,Be=Fe?[[Fe.Rotate,{enable:!1}],[Fe.Pinch,{enable:!1}],[Fe.Swipe,{enable:!1}],[Fe.Pan,{threshold:0,enable:!1}],[Fe.Press,{enable:!1}],[Fe.Tap,{event:"doubletap",taps:2,enable:!1}],[Fe.Tap,{event:"anytap",enable:!1}],[Fe.Tap,{enable:!1}]]:null,Ne={rotate:["pinch"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ue={doubletap:["tap"]},Ve={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},We=["keydown","keyup"],qe=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],Ge=["wheel","mousewheel","DOMMouseScroll"],He={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Ze={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Xe=n(35),Ye=-1!==Xe.b.indexOf("firefox"),Ke=Ge,Je=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.events=Ke.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent,!!Xe.a&&{passive:!1})}))}return Object(p.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"wheel"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){if(this.options.enable){var t=e.deltaY;Xe.c.WheelEvent&&(Ye&&e.deltaMode===Xe.c.WheelEvent.DOM_DELTA_PIXEL&&(t/=Xe.c.devicePixelRatio),e.deltaMode===Xe.c.WheelEvent.DOM_DELTA_LINE&&(t*=40));var n={x:e.clientX,y:e.clientY};0!==t&&t%4.000244140625==0&&(t=Math.floor(t/4.000244140625)),e.shiftKey&&t&&(t*=.25),this._onWheel(e,-t,n)}}},{key:"_onWheel",value:function(e,t,n){this.callback({type:"wheel",center:n,delta:t,srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),$e=qe,Qe=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.a)(this,e),this.element=t,this.callback=n,this.pressed=!1,this.options=Object.assign({enable:!0},i),this.enableMoveEvent=this.options.enable,this.enableLeaveEvent=this.options.enable,this.enableOutEvent=this.options.enable,this.enableOverEvent=this.options.enable,this.events=$e.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(p.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"pointermove"===e&&(this.enableMoveEvent=t),"pointerover"===e&&(this.enableOverEvent=t),"pointerout"===e&&(this.enableOutEvent=t),"pointerleave"===e&&(this.enableLeaveEvent=t)}},{key:"handleEvent",value:function(e){this.handleOverEvent(e),this.handleOutEvent(e),this.handleLeaveEvent(e),this.handleMoveEvent(e)}},{key:"handleOverEvent",value:function(e){this.enableOverEvent&&"mouseover"===e.type&&this.callback({type:"pointerover",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleOutEvent",value:function(e){this.enableOutEvent&&"mouseout"===e.type&&this.callback({type:"pointerout",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleLeaveEvent",value:function(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this.callback({type:"pointerleave",srcEvent:e,pointerType:"mouse",target:e.target})}},{key:"handleMoveEvent",value:function(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this.callback({type:"pointermove",srcEvent:e,pointerType:"mouse",target:e.target});break;case"mouseup":this.pressed=!1}}}]),e}(),et=We,tt=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},i),this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=et.concat(i.events||[]),this.handleEvent=this.handleEvent.bind(this),t.tabIndex=i.tabIndex||0,t.style.outline="none",this.events.forEach((function(e){return t.addEventListener(e,r.handleEvent)}))}return Object(p.a)(e,[{key:"destroy",value:function(){var e=this;this.events.forEach((function(t){return e.element.removeEventListener(t,e.handleEvent)}))}},{key:"enableEventType",value:function(e,t){"keydown"===e&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}},{key:"handleEvent",value:function(e){var t=e.target||e.srcElement;"INPUT"===t.tagName&&"text"===t.type||"TEXTAREA"===t.tagName||(this.enableDownEvent&&"keydown"===e.type&&this.callback({type:"keydown",srcEvent:e,key:e.key,target:e.target}),this.enableUpEvent&&"keyup"===e.type&&this.callback({type:"keyup",srcEvent:e,key:e.key,target:e.target}))}}]),e}(),nt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(u.a)(this,e),this.element=t,this.callback=n,this.options=Object.assign({enable:!0},r),this.handleEvent=this.handleEvent.bind(this),t.addEventListener("contextmenu",this.handleEvent)}return Object(p.a)(e,[{key:"destroy",value:function(){this.element.removeEventListener("contextmenu",this.handleEvent)}},{key:"enableEventType",value:function(e,t){"contextmenu"===e&&(this.options.enable=t)}},{key:"handleEvent",value:function(e){this.options.enable&&this.callback({type:"contextmenu",center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}}]),e}(),rt=n(13),it={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};var at={srcElement:"root",priority:0},ot=function(){function e(t){Object(u.a)(this,e),this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this.handleEvent=this.handleEvent.bind(this),this._active=!1}return Object(p.a)(e,[{key:"isEmpty",value:function(){return!this._active}},{key:"add",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.handlers,o=this.handlersByElement;n&&("object"!==Object(rt.a)(n)||n.addEventListener)&&(n={srcElement:n}),n=n?Object.assign({},at,n):at;var s=o.get(n.srcElement);s||(s=[],o.set(n.srcElement,s));var u={type:e,handler:t,srcElement:n.srcElement,priority:n.priority};r&&(u.once=!0),i&&(u.passive=!0),a.push(u),this._active=this._active||!u.passive;for(var l=s.length-1;l>=0&&!(s[l].priority>=u.priority);)l--;s.splice(l+1,0,u)}},{key:"remove",value:function(e,t){for(var n=this.handlers,r=this.handlersByElement,i=n.length-1;i>=0;i--){var a=n[i];if(a.type===e&&a.handler===t){n.splice(i,1);var o=r.get(a.srcElement);o.splice(o.indexOf(a),1),0===o.length&&r.delete(a.srcElement)}}this._active=n.some((function(e){return!e.passive}))}},{key:"handleEvent",value:function(e){if(!this.isEmpty()){for(var t=this._normalizeEvent(e),n=e.srcEvent.target;n&&n!==t.rootElement;){if(this._emit(t,n),t.handled)return;n=n.parentNode}this._emit(t,"root")}}},{key:"_emit",value:function(e,t){var n=this.handlersByElement.get(t);if(n){for(var r=!1,i=function(){e.handled=!0},a=function(){e.handled=!0,r=!0},o=[],s=0;s<n.length;s++){var u=n[s],l=u.type,c=u.handler,h=u.once;if(c(Object.assign({},e,{type:l,stopPropagation:i,stopImmediatePropagation:a})),h&&o.push(n[s]),r)break}for(var p=0;p<o.length;p++){var f=o[p];l=f.type,c=f.handler;this.remove(l,c)}}}},{key:"_normalizeEvent",value:function(e){var t=this.eventManager.element;return Object.assign({},e,function(e){var t=it[e.srcEvent.type];if(!t)return null;var n=e.srcEvent,r=n.buttons,i=n.button,a=n.which,o=!1,s=!1,u=!1;return 4===t||2===t&&!Number.isFinite(r)?(o=1===a,s=2===a,u=3===a):2===t?(o=Boolean(1&r),s=Boolean(4&r),u=Boolean(2&r)):1===t&&(o=0===i,s=1===i,u=2===i),{leftButton:o,middleButton:s,rightButton:u}}(e),function(e,t){var n=e.srcEvent;if(!e.center&&!Number.isFinite(n.clientX))return null;var r=e.center||{x:n.clientX,y:n.clientY},i=t.getBoundingClientRect(),a=i.width/t.offsetWidth,o=i.height/t.offsetHeight;return{center:r,offsetCenter:{x:(r.x-i.left-t.clientLeft)/a,y:(r.y-i.top-t.clientTop)/o}}}(e,t),{handled:!1,rootElement:t})}}]),e}(),st={events:null,recognizers:null,recognizerOptions:{},Manager:De,touchAction:"none",tabIndex:0},ut=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.options=Object.assign({},st,n),this.events=new Map,this._onBasicInput=this._onBasicInput.bind(this),this._onOtherEvent=this._onOtherEvent.bind(this),this.setElement(t);var r=n.events;r&&this.on(r)}return Object(p.a)(e,[{key:"setElement",value:function(e){var t=this;if(this.element&&this.destroy(),this.element=e,e){var n=this.options,r=n.Manager;for(var i in this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||Be}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Ne).forEach((function(e){var n=t.manager.get(e);n&&Ne[e].forEach((function(e){n.recognizeWith(e)}))})),n.recognizerOptions){var a=this.manager.get(i);if(a){var o=n.recognizerOptions[i];delete o.enable,a.set(o)}}this.wheelInput=new Je(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Qe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tt(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new nt(e,this._onOtherEvent,{enable:!1});var s=!0,u=!1,l=void 0;try{for(var c,h=this.events[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var p=Object(g.a)(c.value,2),f=p[0],d=p[1];d.isEmpty()||(this._toggleRecognizer(d.recognizerName,!0),this.manager.on(f,d.handleEvent))}}catch(e){u=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}}}},{key:"destroy",value:function(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}},{key:"on",value:function(e,t,n){this._addEventHandler(e,t,n,!1)}},{key:"once",value:function(e,t,n){this._addEventHandler(e,t,n,!0)}},{key:"watch",value:function(e,t,n){this._addEventHandler(e,t,n,!1,!0)}},{key:"off",value:function(e,t){this._removeEventHandler(e,t)}},{key:"_toggleRecognizer",value:function(e,t){var n=this.manager;if(n){var r=n.get(e);if(r&&r.options.enable!==t){r.set({enable:t});var i=Ue[e];i&&!this.options.recognizers&&i.forEach((function(i){var a=n.get(i);t?(a.requireFailure(e),r.dropRequireFailure(i)):a.dropRequireFailure(e)}))}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}}},{key:"_addEventHandler",value:function(e,t,n,r,i){if("string"==typeof e){var a=this.manager,o=this.events,s=Ze[e]||e,u=o.get(s);u||(u=new ot(this),o.set(s,u),u.recognizerName=He[s]||s,a&&a.on(s,u.handleEvent)),u.add(e,t,n,r,i),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}else for(var l in n=t,e)this._addEventHandler(l,e[l],n,r,i)}},{key:"_removeEventHandler",value:function(e,t){if("string"==typeof e){var n=this.events,r=Ze[e]||e,i=n.get(r);if(i&&(i.remove(e,t),i.isEmpty())){var a=i.recognizerName,o=!1,s=!0,u=!1,l=void 0;try{for(var c,h=n.values()[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var p=c.value;if(p.recognizerName===a&&!p.isEmpty()){o=!0;break}}}catch(e){u=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw l}}o||this._toggleRecognizer(a,!1)}}else for(var f in e)this._removeEventHandler(f,e[f])}},{key:"_onBasicInput",value:function(e){var t=e.srcEvent,n=Ve[t.type];n&&this.manager.emit(n,e)}},{key:"_onOtherEvent",value:function(e){this.manager.emit(e.type,e)}}]),e}();var lt={transitionDuration:0},ct={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new ce,transitionInterruption:Se},ht=["wheel"],pt=["panstart","panmove","panend"],ft=["pinchstart","pinchmove","pinchend","pinchcancel"],dt=["doubletap"],vt=["keydown"],mt=function(){function e(){var t=this;Object(u.a)(this,e),Object(d.a)(this,"events",[]),Object(d.a)(this,"mapState",void 0),Object(d.a)(this,"onViewportChange",void 0),Object(d.a)(this,"onStateChange",void 0),Object(d.a)(this,"mapStateProps",void 0),Object(d.a)(this,"eventManager",void 0),Object(d.a)(this,"scrollZoom",!0),Object(d.a)(this,"dragPan",!0),Object(d.a)(this,"dragRotate",!0),Object(d.a)(this,"doubleClickZoom",!0),Object(d.a)(this,"touchZoom",!0),Object(d.a)(this,"touchRotate",!1),Object(d.a)(this,"keyboard",!0),Object(d.a)(this,"_state",{isDragging:!1}),Object(d.a)(this,"_events",{}),Object(d.a)(this,"_transitionManager",new Ae),Object(d.a)(this,"setState",(function(e){Object.assign(t._state,e),t.onStateChange&&t.onStateChange(t._state)})),this.handleEvent=this.handleEvent.bind(this),this._onWheelEnd=function(e,t){var n,r,i,a=function(){return i=null,e.apply(n,r)};return function(){n=this,r=arguments,i&&clearTimeout(i),i=setTimeout(a,t)}}(this._onWheelEnd,100)}return Object(p.a)(e,[{key:"handleEvent",value:function(e){switch(this.mapState=this.getMapState(),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchcancel":case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.mapState?this.mapState.getViewportProps():{},i=Object.assign({},e.getViewportProps(),t),a=Object.keys(i).some((function(e){return r[e]!==i[e]}));a&&this.onViewportChange(i,n,r),this.setState(Object.assign({},e.getInteractiveState(),n))}},{key:"getMapState",value:function(e){return new ve(Object.assign({},this.mapStateProps,this._state,e))}},{key:"setOptions",value:function(e){var t=e.onViewportChange,n=e.onStateChange,r=e.eventManager,i=void 0===r?this.eventManager:r,a=e.isInteractive,o=void 0===a||a,s=e.scrollZoom,u=void 0===s?this.scrollZoom:s,l=e.dragPan,c=void 0===l?this.dragPan:l,h=e.dragRotate,p=void 0===h?this.dragRotate:h,f=e.doubleClickZoom,d=void 0===f?this.doubleClickZoom:f,v=e.touchZoom,m=void 0===v?this.touchZoom:v,y=e.touchRotate,g=void 0===y?this.touchRotate:y,b=e.keyboard,_=void 0===b?this.keyboard:b;this.onViewportChange=t,this.onStateChange=n,this.mapStateProps&&this.mapStateProps.height===e.height||this.updateViewport(new ve(e)),this.mapStateProps=e,this._transitionManager.processViewportChange(Object.assign({},e,{onStateChange:this.setState})),this.eventManager!==i&&(this.eventManager=i,this._events={},this.toggleEvents(this.events,!0)),this.toggleEvents(ht,o&&u),this.toggleEvents(pt,o&&(c||p)),this.toggleEvents(ft,o&&(m||g)),this.toggleEvents(dt,o&&d),this.toggleEvents(vt,o&&_),this.scrollZoom=u,this.dragPan=c,this.dragRotate=p,this.doubleClickZoom=d,this.touchZoom=m,this.touchRotate=g,this.keyboard=_}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e),n=this.mapState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,lt,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){return this.isFunctionKeyPressed(e)||e.rightButton?this._onPanRotate(e):this._onPanMove(e)}},{key:"_onPanEnd",value:function(e){var t=this.mapState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.mapState.pan({pos:t});return this.updateViewport(n,lt,{isPanning:!0}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=Object(g.a)(r,2)[1],a=i-n,o=this.mapState.getViewportProps(),s=o.width,u=o.height,l=t/s,c=0;n>0?Math.abs(u-a)>5&&(c=n/(a-u)*1.2):n<0&&a>5&&(c=1-i/a),c=Math.min(1,Math.max(-1,c));var h=this.mapState.rotate({deltaScaleX:l,deltaScaleY:c});return this.updateViewport(h,lt,{isRotating:!0}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e),n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.mapState.zoom({pos:t,scale:r});return this.updateViewport(i,lt,{isZooming:!0}),this._onWheelEnd(),!0}},{key:"_onWheelEnd",value:function(){this.setState({isZooming:!1})}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e),n=this.mapState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,lt,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;var t=this.mapState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,a=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(t,lt,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(e){var t=this.mapState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e),n=this.isFunctionKeyPressed(e),r=this.mapState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,Object.assign({},ct,{transitionInterpolator:new ce({around:t})})),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.mapStateProps;switch(e.srcEvent.keyCode){case 189:t=n?this.getMapState({zoom:r.zoom-2}):this.getMapState({zoom:r.zoom-1});break;case 187:t=n?this.getMapState({zoom:r.zoom+2}):this.getMapState({zoom:r.zoom+1});break;case 37:t=n?this.getMapState({bearing:r.bearing-15}):this.mapState.pan({pos:[100,0],startPos:[0,0]});break;case 39:t=n?this.getMapState({bearing:r.bearing+15}):this.mapState.pan({pos:[-100,0],startPos:[0,0]});break;case 38:t=n?this.getMapState({pitch:r.pitch+10}):this.mapState.pan({pos:[0,100],startPos:[0,0]});break;case 40:t=n?this.getMapState({pitch:r.pitch-10}):this.mapState.pan({pos:[0,-100],startPos:[0,0]});break;default:return!1}return this.updateViewport(t,ct)}}]),e}(),yt=[{old:"onChangeViewport",new:"onViewportChange"},{old:"perspectiveEnabled",new:"dragRotate"},{old:"onHoverFeatures",new:"onHover"},{old:"onClickFeatures",new:"onClick"},{old:"touchZoomRotate",new:"touchZoom, touchRotate"},{old:"mapControls",new:"controller"}];function gt(e){return"react-map-gl: `".concat(e,"` is removed.")}function bt(e){return"Use `".concat(e,"` instead.")}function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yt.forEach((function(t){if(e.hasOwnProperty(t.old)){var n=gt(t.old);t.new&&(n="".concat(n," ").concat(bt(t.new))),console.warn(n)}}))}var xt=Object.assign({},Oe.propTypes,{maxZoom:m.a.number,minZoom:m.a.number,maxPitch:m.a.number,minPitch:m.a.number,onViewStateChange:m.a.func,onViewportChange:m.a.func,onInteractionStateChange:m.a.func,transitionDuration:m.a.oneOfType([m.a.number,m.a.string]),transitionInterpolator:m.a.object,transitionInterruption:m.a.number,transitionEasing:m.a.func,onTransitionStart:m.a.func,onTransitionInterrupt:m.a.func,onTransitionEnd:m.a.func,scrollZoom:m.a.bool,dragPan:m.a.bool,dragRotate:m.a.bool,doubleClickZoom:m.a.bool,touchZoom:m.a.bool,touchRotate:m.a.bool,keyboard:m.a.bool,onHover:m.a.func,onClick:m.a.func,onDblClick:m.a.func,onContextMenu:m.a.func,onMouseDown:m.a.func,onMouseMove:m.a.func,onMouseUp:m.a.func,onTouchStart:m.a.func,onTouchMove:m.a.func,onTouchEnd:m.a.func,onMouseEnter:m.a.func,onMouseLeave:m.a.func,onMouseOut:m.a.func,onWheel:m.a.func,touchAction:m.a.string,clickRadius:m.a.number,interactiveLayerIds:m.a.array,getCursor:m.a.func,controller:m.a.instanceOf(mt)}),wt=Object.assign({},Oe.defaultProps,he,Ae.defaultProps,{onViewStateChange:null,onViewportChange:null,onClick:null,onNativeClick:null,onHover:null,onContextMenu:function(e){return e.preventDefault()},scrollZoom:!0,dragPan:!0,dragRotate:!0,doubleClickZoom:!0,touchZoom:!0,touchRotate:!1,keyboard:!0,touchAction:"none",clickRadius:0,getCursor:function(e){var t=e.isDragging,n=e.isHovering;return t?"grabbing":n?"pointer":"grab"}}),kt=function(e){function t(e){var n;return Object(u.a)(this,t),n=Object(l.a)(this,Object(c.a)(t).call(this,e)),Object(d.a)(Object(h.a)(n),"state",{isLoaded:!1,isDragging:!1,isHovering:!1}),Object(d.a)(Object(h.a)(n),"_controller",void 0),Object(d.a)(Object(h.a)(n),"_eventManager",void 0),Object(d.a)(Object(h.a)(n),"_interactiveContext",void 0),Object(d.a)(Object(h.a)(n),"_width",0),Object(d.a)(Object(h.a)(n),"_height",0),Object(d.a)(Object(h.a)(n),"_eventCanvasRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_staticMapRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"getMap",(function(){return n._staticMapRef.current?n._staticMapRef.current.getMap():null})),Object(d.a)(Object(h.a)(n),"queryRenderedFeatures",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.getMap();return r&&r.queryRenderedFeatures(e,t)})),Object(d.a)(Object(h.a)(n),"_onInteractionStateChange",(function(e){var t=e.isDragging,r=void 0!==t&&t;r!==n.state.isDragging&&(n._updateInteractiveContext({isDragging:r}),n.setState({isDragging:r}));var i=n.props.onInteractionStateChange;i&&i(e)})),Object(d.a)(Object(h.a)(n),"_onResize",(function(e){var t=e.width,r=e.height;n._width=t,n._height=r,n._setControllerProps(n.props),n.props.onResize({width:t,height:r})})),Object(d.a)(Object(h.a)(n),"_onViewportChange",(function(e,t,r){var i=n.props,a=i.onViewStateChange,o=i.onViewportChange;a&&a({viewState:e,interactionState:t,oldViewState:r}),o&&o(e,t,r)})),Object(d.a)(Object(h.a)(n),"_onLoad",(function(e){n.setState({isLoaded:!0}),n.props.onLoad(e)})),Object(d.a)(Object(h.a)(n),"_onEvent",(function(e,t){var r=n.props[e];r&&r(n._normalizeEvent(t))})),Object(d.a)(Object(h.a)(n),"_onPointerDown",(function(e){switch(e.pointerType){case"touch":n._onEvent("onTouchStart",e);break;default:n._onEvent("onMouseDown",e)}})),Object(d.a)(Object(h.a)(n),"_onPointerUp",(function(e){switch(e.pointerType){case"touch":n._onEvent("onTouchEnd",e);break;default:n._onEvent("onMouseUp",e)}})),Object(d.a)(Object(h.a)(n),"_onPointerMove",(function(e){switch(e.pointerType){case"touch":n._onEvent("onTouchMove",e);break;default:n._onEvent("onMouseMove",e)}if(!n.state.isDragging){var t,r=n.props,i=r.onHover,a=r.interactiveLayerIds;e=n._normalizeEvent(e),n.state.isLoaded&&(a||i)&&(t=n._getFeatures({pos:e.point,radius:n.props.clickRadius})),i&&(e.features=t,i(e));var o=Boolean(a&&t&&t.length>0),s=o&&!n.state.isHovering,u=!o&&n.state.isHovering;s&&n._onEvent("onMouseEnter",e),u&&n._onEvent("onMouseLeave",e),(s||u)&&n.setState({isHovering:o})}})),Object(d.a)(Object(h.a)(n),"_onClick",(function(e){var t=n.props,r=t.onClick,i=t.onNativeClick,a=t.onDblClick,o=t.doubleClickZoom,s=[],u=a||o;switch(e.type){case"anyclick":s.push(i),u||s.push(r);break;case"click":u&&s.push(r)}(s=s.filter(Boolean)).length&&((e=n._normalizeEvent(e)).features=n._getFeatures({pos:e.point,radius:n.props.clickRadius}),s.forEach((function(t){return t(e)})))})),_t(e),n._controller=e.controller||new mt,n._eventManager=new ut(null,{touchAction:e.touchAction}),n._updateInteractiveContext({isDragging:!1,eventManager:n._eventManager}),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"supported",value:function(){return Oe.supported()}}]),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this._eventManager,t=this._eventCanvasRef.current;e.setElement(t),e.on({pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerup:this._onPointerUp,pointerleave:this._onEvent.bind(this,"onMouseOut"),click:this._onClick,anyclick:this._onClick,dblclick:this._onEvent.bind(this,"onDblClick"),wheel:this._onEvent.bind(this,"onWheel"),contextmenu:this._onEvent.bind(this,"onContextMenu")}),this._setControllerProps(this.props),this._updateInteractiveContext({mapContainer:t})}},{key:"componentWillUnmount",value:function(){this._eventManager.destroy()}},{key:"_setControllerProps",value:function(e){e=Object.assign({},e,e.viewState,{isInteractive:Boolean(e.onViewStateChange||e.onViewportChange),onViewportChange:this._onViewportChange,onStateChange:this._onInteractionStateChange,eventManager:this._eventManager,width:this._width,height:this._height}),this._controller.setOptions(e);var t=this._interactiveContext;t.onViewportChange=e.onViewportChange,t.onViewStateChange=e.onViewStateChange}},{key:"_getFeatures",value:function(e){var t,n=e.pos,r=e.radius,i={},a=this.getMap();if(this.props.interactiveLayerIds&&(i.layers=this.props.interactiveLayerIds),r){var o=r,s=[[n[0]-o,n[1]+o],[n[0]+o,n[1]-o]];t=a&&a.queryRenderedFeatures(s,i)}else t=a&&a.queryRenderedFeatures(n,i);return t}},{key:"_updateInteractiveContext",value:function(e){this._interactiveContext=Object.assign({},this._interactiveContext,e)}},{key:"_normalizeEvent",value:function(e){if(e.lngLat)return e;var t=e.offsetCenter,n=[t.x,t.y],r=new V(Object.assign({},this.props,{width:this._width,height:this._height}));return e.point=n,e.lngLat=r.unproject(n),e}},{key:"render",value:function(){this._setControllerProps(this.props);var e=this.props,t=e.width,n=e.height,r=e.style,a=e.getCursor,o=Object.assign({position:"relative"},r,{width:t,height:n,cursor:a(this.state)});return i.a.createElement(ye.Provider,{value:this._interactiveContext},i.a.createElement("div",{key:"event-canvas",ref:this._eventCanvasRef,style:o},i.a.createElement(Oe,s({},this.props,{width:"100%",height:"100%",style:null,onResize:this._onResize,onLoad:this._onLoad,ref:this._staticMapRef}),this.props.children)))}}]),t}(r.PureComponent);Object(d.a)(kt,"propTypes",xt),Object(d.a)(kt,"defaultProps",wt);var Ot={type:m.a.string.isRequired,id:m.a.string},Et=0,St=function(e){function t(e){var n;return Object(u.a)(this,t),n=Object(l.a)(this,Object(c.a)(t).call(this,e)),Object(d.a)(Object(h.a)(n),"id",void 0),Object(d.a)(Object(h.a)(n),"type",void 0),Object(d.a)(Object(h.a)(n),"_map",null),Object(d.a)(Object(h.a)(n),"_sourceOptions",{}),n.id=e.id||"jsx-source-".concat(Et++),n.type=e.type,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){this._map.removeSource(this.id)}},{key:"getSource",value:function(){return this._map.getSource(this.id)}},{key:"_createSource",value:function(){var e=this,t=this._map;t.style._loaded?t.addSource(this.id,this._sourceOptions):t.once("styledata",(function(){return e.forceUpdate()}))}},{key:"_updateSource",value:function(){var e=this._sourceOptions,t=this.props;J(!t.id||t.id===this.id,"source id changed"),J(t.type===this.type,"source type changed");var n=null,r=0;for(var i in t)"children"!==i&&"id"!==i&&e[i]!==t[i]&&(e[i]=t[i],n=i,r++);var a=this.type,o=this._map,s=this.getSource();s?r&&("geojson"===a?s.setData(e.data):"image"===a?s.updateImage({url:e.url,coordinates:e.coordinates}):"canvas"!==a&&"video"!==a||1!==r||"coordinates"!==n?(o.removeSource(this.id),o.addSource(e)):s.setCoordinates(e.coordinates)):this._createSource()}},{key:"_render",value:function(e){var t=this;return this._map=e.map,this._updateSource(),i.a.Children.map(this.props.children,(function(e){return Object(r.cloneElement)(e,{source:t.id})}))}},{key:"render",value:function(){return i.a.createElement(ye.Consumer,null,this._render.bind(this))}}]),t}(r.PureComponent);function Tt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pt(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Pt(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===Object(rt.a)(e)&&"object"===Object(rt.a)(t)){var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!Pt(e[s],t[s]))return!1}return!0}return!1}Object(d.a)(St,"propTypes",Ot);var jt={type:m.a.string.isRequired,id:m.a.string,source:m.a.string,beforeId:m.a.string};var Ct=0,At=function(e){function t(e){var n;return Object(u.a)(this,t),n=Object(l.a)(this,Object(c.a)(t).call(this,e)),Object(d.a)(Object(h.a)(n),"id",void 0),Object(d.a)(Object(h.a)(n),"type",void 0),Object(d.a)(Object(h.a)(n),"_map",null),n.id=e.id||"jsx-layer-".concat(Ct++),n.type=e.type,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._createLayer()}},{key:"componentDidUpdate",value:function(e){this._updateLayer(e)}},{key:"componentWillUnmount",value:function(){this._map.removeLayer(this.id)}},{key:"_createLayer",value:function(){var e=this,t=this._map,n=Object.assign({},this.props);n.id=this.id,delete n.beforeId,t.style._loaded?t.addLayer(n,this.props.beforeId):t.once("styledata",(function(){return e.forceUpdate()}))}},{key:"_updateLayer",value:function(e){var t=this.props;J(!t.id||t.id===this.id,"layer id changed"),J(t.type===this.type,"layer type changed");var n=this._map;if(n.getLayer(this.id))try{!function(e,t,n,r){var i=n.layout,a=void 0===i?{}:i,o=n.paint,s=void 0===o?{}:o,u=n.filter,l=n.minzoom,c=n.maxzoom,h=n.beforeId,p=Tt(n,["layout","paint","filter","minzoom","maxzoom","beforeId"]);if(h!==r.beforeId&&e.moveLayer(t,h),a!==r.layout)for(var f in a)Pt(a[f],r.layout[f])||e.setLayoutProperty(t,f,a[f]);if(s!==r.paint)for(var d in s)Pt(s[d],r.paint[d])||e.setPaintProperty(t,d,s[d]);for(var v in Pt(u,r.filter)||e.setFilter(t,u),l===r.minzoom&&c===r.maxzoom||e.setLayerZoomRange(t,l,c),p)Pt(p[v],r[v])||e.setLayerProperty(t,v,p[v])}(n,this.id,t,e)}catch(e){console.warn(e)}else this._createLayer()}},{key:"_render",value:function(e){return this._map=e.map,null}},{key:"render",value:function(){return i.a.createElement(ye.Consumer,null,this._render.bind(this))}}]),t}(r.PureComponent);Object(d.a)(At,"propTypes",jt);var Mt={captureScroll:m.a.bool,captureDrag:m.a.bool,captureClick:m.a.bool,captureDoubleClick:m.a.bool},It=function(e){function t(){var e,n;Object(u.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a))),Object(d.a)(Object(h.a)(n),"_context",{}),Object(d.a)(Object(h.a)(n),"_events",null),Object(d.a)(Object(h.a)(n),"_containerRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_onScroll",(function(e){n.props.captureScroll&&e.stopPropagation()})),Object(d.a)(Object(h.a)(n),"_onDragStart",(function(e){n.props.captureDrag&&e.stopPropagation()})),Object(d.a)(Object(h.a)(n),"_onDblClick",(function(e){n.props.captureDoubleClick&&e.stopPropagation()})),Object(d.a)(Object(h.a)(n),"_onClick",(function(e){n.props.captureClick&&e.stopPropagation()})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this._containerRef.current;if(e){var t=this._context.eventManager;t&&(this._events={wheel:this._onScroll,panstart:this._onDragStart,anyclick:this._onClick,click:this._onClick,dblclick:this._onDblClick},t.on(this._events,e))}}},{key:"componentWillUnmount",value:function(){var e=this._context.eventManager;e&&this._events&&e.off(this._events)}},{key:"_render",value:function(){throw new Error("_render() not implemented")}},{key:"render",value:function(){var e=this;return i.a.createElement(ye.Consumer,null,(function(t){return e._context=t,e._render()}))}}]),t}(r.PureComponent);function Rt(e,t,n){return(Rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(c.a)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}Object(d.a)(It,"propTypes",Mt),Object(d.a)(It,"defaultProps",{captureScroll:!1,captureDrag:!0,captureClick:!0,captureDoubleClick:!0});var Lt=Object.assign({},It.propTypes,{draggable:m.a.bool,onDrag:m.a.func,onDragEnd:m.a.func,onDragStart:m.a.func,offsetLeft:m.a.number,offsetTop:m.a.number}),zt=Object.assign({},It.defaultProps,{draggable:!1,offsetLeft:0,offsetTop:0}),Dt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i))),Object(d.a)(Object(h.a)(n),"state",{dragPos:null,dragOffset:null}),Object(d.a)(Object(h.a)(n),"_dragEvents",null),Object(d.a)(Object(h.a)(n),"_onDragStart",(function(e){var t=n.props,r=t.draggable,i=t.captureDrag;if((r||i)&&e.stopPropagation(),r){var a=n._getDragEventPosition(e),o=n._getDragEventOffset(e);n.setState({dragPos:a,dragOffset:o}),n._setupDragEvents();var s=n.props.onDragStart;if(s&&o){var u=Object.assign({},e);u.lngLat=n._getDragLngLat(a,o),s(u)}}})),Object(d.a)(Object(h.a)(n),"_onDrag",(function(e){e.stopPropagation();var t=n._getDragEventPosition(e);n.setState({dragPos:t});var r=n.props.onDrag,i=n.state.dragOffset;if(r&&i){var a=Object.assign({},e);a.lngLat=n._getDragLngLat(t,i),r(a)}})),Object(d.a)(Object(h.a)(n),"_onDragEnd",(function(e){var t=n.state,r=t.dragPos,i=t.dragOffset;e.stopPropagation(),n.setState({dragPos:null,dragOffset:null}),n._removeDragEvents();var a=n.props.onDragEnd;if(a&&r&&i){var o=Object.assign({},e);o.lngLat=n._getDragLngLat(r,i),a(o)}})),Object(d.a)(Object(h.a)(n),"_onDragCancel",(function(e){e.stopPropagation(),n.setState({dragPos:null,dragOffset:null}),n._removeDragEvents()})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillUnmount",value:function(){Rt(Object(c.a)(t.prototype),"componentWillUnmount",this).call(this),this._removeDragEvents()}},{key:"_setupDragEvents",value:function(){var e=this._context.eventManager;e&&(this._dragEvents={panmove:this._onDrag,panend:this._onDragEnd,pancancel:this._onDragCancel},e.on(this._dragEvents))}},{key:"_removeDragEvents",value:function(){var e=this._context.eventManager;e&&this._dragEvents&&(e.off(this._dragEvents),this._dragEvents=null)}},{key:"_getDragEventPosition",value:function(e){var t=e.offsetCenter;return[t.x,t.y]}},{key:"_getDragEventOffset",value:function(e){var t=e.center,n=t.x,r=t.y,i=this._containerRef.current;if(i){var a=i.getBoundingClientRect();return[a.left-n,a.top-r]}return null}},{key:"_getDraggedPosition",value:function(e,t){return[e[0]+t[0],e[1]+t[1]]}},{key:"_getDragLngLat",value:function(e,t){var n=this.props,r=n.offsetLeft,i=n.offsetTop,a=this._getDraggedPosition(e,t),o=Object(g.a)(a,2),s=o[0],u=o[1];return this._context.viewport.unproject([s-r,u-i])}}]),t}(It);Object(d.a)(Dt,"propTypes",Lt),Object(d.a)(Dt,"defaultProps",zt);var Ft=Object.assign({},Dt.propTypes,{className:m.a.string,longitude:m.a.number.isRequired,latitude:m.a.number.isRequired}),Bt=Object.assign({},Dt.defaultProps,{className:""}),Nt=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_getPosition",value:function(){var e=this.props,t=e.longitude,n=e.latitude,r=e.offsetLeft,i=e.offsetTop,a=this.state,o=a.dragPos,s=a.dragOffset;if(o&&s)return this._getDraggedPosition(o,s);var u=this._context.viewport.project([t,n]),l=Object(g.a)(u,2),c=l[0],h=l[1];return[c+=r,h+=i]}},{key:"_render",value:function(){var e=this.props,t=e.className,n=e.draggable,r=this.state.dragPos,a=this._getPosition(),o=Object(g.a)(a,2),s={position:"absolute",left:o[0],top:o[1],cursor:n?r?"grabbing":"grab":"auto"};return i.a.createElement("div",{className:"mapboxgl-marker ".concat(t),ref:this._containerRef,style:s},this.props.children)}}]),t}(Dt);Object(d.a)(Nt,"propTypes",Ft),Object(d.a)(Nt,"defaultProps",Bt);var Ut={top:{x:.5,y:0},"top-left":{x:0,y:0},"top-right":{x:1,y:0},bottom:{x:.5,y:1},"bottom-left":{x:0,y:1},"bottom-right":{x:1,y:1},left:{x:0,y:.5},right:{x:1,y:.5}},Vt=Object.keys(Ut);var Wt=Object.assign({},It.propTypes,{className:m.a.string,longitude:m.a.number.isRequired,latitude:m.a.number.isRequired,altitude:m.a.number,offsetLeft:m.a.number,offsetTop:m.a.number,tipSize:m.a.number,closeButton:m.a.bool,closeOnClick:m.a.bool,anchor:m.a.oneOf(Object.keys(Ut)),dynamicPosition:m.a.bool,sortByDepth:m.a.bool,onClose:m.a.func}),qt=Object.assign({},It.defaultProps,{className:"",altitude:0,offsetLeft:0,offsetTop:0,tipSize:10,anchor:"bottom",dynamicPosition:!0,sortByDepth:!1,closeButton:!0,closeOnClick:!0,onClose:function(){}}),Gt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a))),Object(d.a)(Object(h.a)(n),"_closeOnClick",!1),Object(d.a)(Object(h.a)(n),"_contentRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_onClick",(function(e){if(n.props.captureClick&&e.stopPropagation(),n.props.closeOnClick||"mapboxgl-popup-close-button"===e.target.className){n.props.onClose();var t=n._context.eventManager;t&&t.once("click",(function(e){return e.stopPropagation()}),e.target)}})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){Rt(Object(c.a)(t.prototype),"componentDidMount",this).call(this),this.forceUpdate()}},{key:"_getPosition",value:function(e,t){var n=this._context.viewport,r=this.props,i=r.anchor,a=r.dynamicPosition,o=r.tipSize,s=this._contentRef.current;return s&&a?function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a=e.selfWidth,o=e.selfHeight,s=e.anchor,u=e.padding,l=void 0===u?0:u,c=Ut[s],h=c.x,p=c.y,f=n-p*o,d=f+o;if(f<l)for(;f<l&&p>=.5;)p-=.5,f+=.5*o;else if(d>i-l)for(;d>i-l&&p<=.5;)p+=.5,d-=.5*o;var v=t-h*a,m=v+a,y=.5;if(.5===p&&(h=Math.floor(h),y=1),v<l)for(;v<l&&h>=y;)h-=y,v+=y*a;else if(m>r-l)for(;m>r-l&&h<=1-y;)h+=y,m-=y*a;return Vt.find((function(e){var t=Ut[e];return t.x===h&&t.y===p}))||s}({x:e,y:t,anchor:i,padding:o,width:n.width,height:n.height,selfWidth:s.clientWidth,selfHeight:s.clientHeight}):i}},{key:"_getContainerStyle",value:function(e,t,n,r){var i=this._context.viewport,a=this.props,o=a.offsetLeft,s=a.offsetTop,u=a.sortByDepth,l=Ut[r],c=e+o,h=t+s,p={position:"absolute",transform:"\n        translate(".concat(100*-l.x,"%, ").concat(100*-l.y,"%)\n        translate(").concat(c,"px, ").concat(h,"px)\n      "),display:void 0,zIndex:void 0};return u?(n>1||n<-1||e<0||e>i.width||t<0||t>i.height?p.display="none":p.zIndex=Math.floor((1-n)/2*1e5),p):p}},{key:"_renderTip",value:function(e){var t=this.props.tipSize;return i.a.createElement("div",{key:"tip",className:"mapboxgl-popup-tip",style:{borderWidth:t}})}},{key:"_renderContent",value:function(){var e=this.props,t=e.closeButton,n=e.children,r=this._context.eventManager?null:this._onClick;return i.a.createElement("div",{key:"content",ref:this._contentRef,className:"mapboxgl-popup-content",onClick:r},t&&i.a.createElement("button",{key:"close-button",className:"mapboxgl-popup-close-button",type:"button"},"×"),n)}},{key:"_render",value:function(){var e=this.props,t=e.className,n=e.longitude,r=e.latitude,a=e.altitude,o=this._context.viewport.project([n,r,a]),s=Object(g.a)(o,3),u=s[0],l=s[1],c=s[2],h=this._getPosition(u,l),p=this._getContainerStyle(u,l,c,h);return i.a.createElement("div",{className:"mapboxgl-popup mapboxgl-popup-anchor-".concat(h," ").concat(t),style:p,ref:this._containerRef},this._renderTip(h),this._renderContent())}}]),t}(It);Object(d.a)(Gt,"propTypes",Wt),Object(d.a)(Gt,"defaultProps",qt);var Ht,Zt=n(25),Xt=Object.assign({},It.propTypes,{className:m.a.string,container:m.a.object}),Yt=Object.assign({},It.defaultProps,{className:"",container:null}),Kt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i))),Object(d.a)(Object(h.a)(n),"state",{isFullscreen:!1,showButton:!1}),Object(d.a)(Object(h.a)(n),"_mapboxFullscreenControl",null),Object(d.a)(Object(h.a)(n),"_onFullscreenChange",(function(){var e=!n._mapboxFullscreenControl._fullscreen;n._mapboxFullscreenControl._fullscreen=e,n.setState({isFullscreen:e})})),Object(d.a)(Object(h.a)(n),"_onClickFullscreen",(function(){n._mapboxFullscreenControl._onClickFullscreen()})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.container||this._context.mapContainer;this._mapboxFullscreenControl=new H.a.FullscreenControl({container:e}),this.setState({showButton:this._mapboxFullscreenControl._checkFullscreenSupport()}),Zt.a.addEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"componentWillUnmount",value:function(){Zt.a.removeEventListener(this._mapboxFullscreenControl._fullscreenchange,this._onFullscreenChange)}},{key:"_renderButton",value:function(e,t,n){return i.a.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),type:"button",title:t,onClick:n})}},{key:"_render",value:function(){if(!this.state.showButton)return null;var e=this.props.className,t=this.state.isFullscreen?"shrink":"fullscreen";return i.a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(e),ref:this._containerRef},this._renderButton(t,"Toggle fullscreen",this._onClickFullscreen))}}]),t}(It);Object(d.a)(Kt,"propTypes",Xt),Object(d.a)(Kt,"defaultProps",Yt);var Jt=Object.assign({},Ae.defaultProps,{transitionDuration:500}),$t=function(){},Qt=Object.assign({},It.propTypes,{className:m.a.string,style:m.a.object,positionOptions:m.a.object,fitBoundsOptions:m.a.object,trackUserLocation:m.a.bool,showUserLocation:m.a.bool,onViewStateChange:m.a.func,onViewportChange:m.a.func}),en=Object.assign({},It.defaultProps,{className:"",style:{},positionOptions:null,fitBoundsOptions:null,trackUserLocation:!1,showUserLocation:!0}),tn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o))),Object(d.a)(Object(h.a)(n),"state",{supportsGeolocation:!1,markerPosition:null}),Object(d.a)(Object(h.a)(n),"_mapboxGeolocateControl",null),Object(d.a)(Object(h.a)(n),"_geolocateButtonRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_markerRef",Object(r.createRef)()),Object(d.a)(Object(h.a)(n),"_setupMapboxGeolocateControl",(function(e){if(e){var t={};["positionOptions","fitBoundsOptions","trackUserLocation","showUserLocation"].forEach((function(e){e in n.props&&null!==n.props[e]&&(t[e]=n.props[e])})),n._mapboxGeolocateControl=new H.a.GeolocateControl(t),n._mapboxGeolocateControl._watchState="OFF",n._mapboxGeolocateControl._geolocateButton=n._geolocateButtonRef.current,n._mapboxGeolocateControl._updateMarker=n._updateMarker,n._mapboxGeolocateControl._updateCamera=n._updateCamera,n._mapboxGeolocateControl._setup=!0}else console.warn("Geolocation support is not available, the GeolocateControl will not be visible.")})),Object(d.a)(Object(h.a)(n),"_onClickGeolocate",(function(){return n._mapboxGeolocateControl.trigger()})),Object(d.a)(Object(h.a)(n),"_updateMarker",(function(e){e&&n.setState({markerPosition:e.coords})})),Object(d.a)(Object(h.a)(n),"_getBounds",(function(e){var t=new H.a.LngLat(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy,r=t.toBounds(n);return[[r._ne.lng,r._ne.lat],[r._sw.lng,r._sw.lat]]})),Object(d.a)(Object(h.a)(n),"_updateCamera",(function(e){var t=n._context.viewport,r=n._getBounds(e),i=new V(t).fitBounds(r),a=i.longitude,o=i.latitude,s=i.zoom,u=Object.assign({},t,{longitude:a,latitude:o,zoom:s}),l=new ve(u),c=Object.assign({},l.getViewportProps(),Jt),h=n.props.onViewportChange||n._context.onViewportChange||$t;(n.props.onViewStateChange||n._context.onViewStateChange||$t)({viewState:c}),h(c)})),Object(d.a)(Object(h.a)(n),"_renderButton",(function(e,t,r){return i.a.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),ref:n._geolocateButtonRef,type:"button",title:t,onClick:r})})),Object(d.a)(Object(h.a)(n),"_renderMarker",(function(){var e=n.props.showUserLocation,t=n.state.markerPosition;return e&&t?i.a.createElement(Nt,{key:"location-maker",ref:n._markerRef,className:"mapboxgl-user-location-dot",longitude:t.longitude,latitude:t.latitude,onContextMenu:function(e){return e.preventDefault()},captureDrag:!1,captureDoubleClick:!1}):null})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;(void 0!==Ht?Promise.resolve(Ht):void 0!==window.navigator.permissions?window.navigator.permissions.query({name:"geolocation"}).then((function(e){return Ht="denied"!==e.state})):(Ht=Boolean(window.navigator.geolocation),Promise.resolve(Ht))).then((function(t){e.setState({supportsGeolocation:t}),e._setupMapboxGeolocateControl(t)}))}},{key:"componentDidUpdate",value:function(){var e=this._markerRef.current;this._mapboxGeolocateControl&&e&&(this._mapboxGeolocateControl._dotElement=e._containerRef.current)}},{key:"componentWillUnmount",value:function(){var e=this._mapboxGeolocateControl._geolocationWatchID;void 0!==e&&(window.navigator.geolocation.clearWatch(e),this._mapboxGeolocateControl._geolocationWatchID=void 0)}},{key:"_render",value:function(){if(!this.state.supportsGeolocation)return null;var e=this.props,t=e.className,n=e.style;return i.a.createElement("div",null,this._renderMarker(),i.a.createElement("div",{key:"geolocate-control",className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(t),ref:this._containerRef,style:n,onContextMenu:function(e){return e.preventDefault()}},this._renderButton("geolocate","Geolocate",this._onClickGeolocate)))}}]),t}(It);Object(d.a)(tn,"propTypes",Qt),Object(d.a)(tn,"defaultProps",en);var nn=function(){},rn=Object.assign({},It.propTypes,{className:m.a.string,onViewStateChange:m.a.func,onViewportChange:m.a.func,showCompass:m.a.bool,showZoom:m.a.bool}),an=Object.assign({},It.defaultProps,{className:"",showCompass:!0,showZoom:!0}),on=function(e){function t(e){var n;return Object(u.a)(this,t),n=Object(l.a)(this,Object(c.a)(t).call(this,e)),Object(d.a)(Object(h.a)(n),"_onZoomIn",(function(){n._updateViewport({zoom:n._context.viewport.zoom+1})})),Object(d.a)(Object(h.a)(n),"_onZoomOut",(function(){n._updateViewport({zoom:n._context.viewport.zoom-1})})),Object(d.a)(Object(h.a)(n),"_onResetNorth",(function(){n._updateViewport({bearing:0,pitch:0})})),_t(e),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_updateViewport",value:function(e){var t=this._context.viewport,n=new ve(Object.assign({},t,e)),r=Object.assign({},n.getViewportProps(),ct),i=this.props.onViewportChange||this._context.onViewportChange||nn;(this.props.onViewStateChange||this._context.onViewStateChange||nn)({viewState:r}),i(r)}},{key:"_renderCompass",value:function(){var e=this._context.viewport.bearing;return i.a.createElement("span",{className:"mapboxgl-ctrl-compass-arrow",style:{transform:"rotate(".concat(-e,"deg)")}})}},{key:"_renderButton",value:function(e,t,n,r){return i.a.createElement("button",{key:e,className:"mapboxgl-ctrl-icon mapboxgl-ctrl-".concat(e),type:"button",title:t,onClick:n},r)}},{key:"_render",value:function(){var e=this.props,t=e.className,n=e.showCompass,r=e.showZoom;return i.a.createElement("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group ".concat(t),ref:this._containerRef},r&&this._renderButton("zoom-in","Zoom In",this._onZoomIn),r&&this._renderButton("zoom-out","Zoom Out",this._onZoomOut),n&&this._renderButton("compass","Reset North",this._onResetNorth,this._renderCompass()))}}]),t}(It);Object(d.a)(on,"propTypes",rn),Object(d.a)(on,"defaultProps",an);var sn=Object.assign({},It.propTypes,{redraw:m.a.func.isRequired}),un=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i))),Object(d.a)(Object(h.a)(n),"_canvas",void 0),Object(d.a)(Object(h.a)(n),"_ctx",void 0),Object(d.a)(Object(h.a)(n),"_redraw",(function(){var e=n._ctx;if(e){var t=Zt.b.devicePixelRatio||1;e.save(),e.scale(t,t);var r=n._context,i=r.viewport,a=r.isDragging;n.props.redraw({width:i.width,height:i.height,ctx:e,isDragging:a,project:i.project.bind(i),unproject:i.unproject.bind(i)}),e.restore()}})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this._containerRef.current;e&&(this._canvas=e,this._ctx=e.getContext("2d")),this._redraw()}},{key:"_render",value:function(){var e=Zt.b.devicePixelRatio||1,t=this._context.viewport,n=t.width,r=t.height;return this._redraw(),i.a.createElement("canvas",{ref:this._containerRef,width:n*e,height:r*e,style:{width:"".concat(n,"px"),height:"".concat(r,"px"),position:"absolute",left:0,top:0}})}}]),t}(It);Object(d.a)(un,"propTypes",sn),Object(d.a)(un,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var ln=Object.assign({},It.propTypes,{redraw:m.a.func.isRequired,style:m.a.object}),cn=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_render",value:function(){var e=this._context,t=e.viewport,n=e.isDragging,r=Object.assign({position:"absolute",left:0,top:0,width:t.width,height:t.height},this.props.style);return i.a.createElement("div",{ref:this._containerRef,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(It);Object(d.a)(cn,"propTypes",ln),Object(d.a)(cn,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var hn=Object.assign({},It.propTypes,{redraw:m.a.func.isRequired,style:m.a.object}),pn=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_render",value:function(){var e=this._context,t=e.viewport,n=e.isDragging,r=Object.assign({position:"absolute",left:0,top:0},this.props.style);return i.a.createElement("svg",{width:t.width,height:t.height,ref:this._containerRef,style:r},this.props.redraw({width:t.width,height:t.height,isDragging:n,project:t.project.bind(t),unproject:t.unproject.bind(t)}))}}]),t}(It);function fn(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}Object(d.a)(pn,"propTypes",hn),Object(d.a)(pn,"defaultProps",{captureScroll:!1,captureDrag:!1,captureClick:!1,captureDoubleClick:!1});var dn=1,vn=1,mn=function(){function e(){Object(u.a)(this,e),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(p.a)(e,[{key:"addChannel",value:function(e){var t=e.delay,n=void 0===t?0:t,r=e.duration,i=void 0===r?Number.POSITIVE_INFINITY:r,a=e.rate,o=void 0===a?1:a,s=e.repeat,u=dn++,l={time:0,delay:n,duration:i,rate:o,repeat:void 0===s?1:s};return this._setChannelTime(l,this.time),this.channels.set(u,l),u}},{key:"removeChannel",value:function(e){this.channels.delete(e);var t=!0,n=!1,r=void 0;try{for(var i,a=this.animations[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=Object(g.a)(i.value,2),s=o[0];o[1].channel===e&&this.detachAnimation(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"isFinished",value:function(e){var t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}},{key:"getTime",value:function(e){if(void 0===e)return this.time;var t=this.channels.get(e);return void 0===t?-1:t.time}},{key:"setTime",value:function(e){this.time=Math.max(0,e);var t=this.channels.values(),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;this._setChannelTime(s,this.time)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=this.animations.values(),l=!0,c=!1,h=void 0;try{for(var p,f=u[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var d=p.value,v=d.animation,m=d.channel;v.setTime(this.getTime(m))}}catch(e){c=!0,h=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw h}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(e,t){var n=vn++;return this.animations.set(n,{animation:e,channel:t}),e.setTime(this.getTime(t)),n}},{key:"detachAnimation",value:function(e){this.animations.delete(e)}},{key:"update",value:function(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}},{key:"_setChannelTime",value:function(e,t){var n=t-e.delay;n>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}]),e}(),yn=new(n(101).a)({id:"deck"}),gn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(gn,"IDENTITY",{get:function(){return yn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")()||0}});var bn={WEB_MERCATOR:1,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},_n={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},xn=(n(63),n(33)),wn=n(32),kn=n(19),On=n(14),En=Object(kn.isBrowser)(),Sn=En&&"undefined"!=typeof document,Tn={webgl2:!0,webgl1:!0,throwOnError:!1,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Pn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(On.a)(En,"createGLContext on available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils");var t,n=e=Object.assign({},Tn,e),r=n.width,i=n.height;function a(t){if(e.throwOnError)throw new Error(t);return null}var o=e,s=o.canvas,u=An({canvas:s,width:r,height:i,onError:a});return(t=Cn(u,e))?(Mn(t=jn(t,e)),t):null}function jn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||In(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var n=t=Object.assign({},Tn,t),r=n.manageState,i=n.debug;return r&&Object(wn.a)(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return On.i.log.apply(On.i,[1].concat(t))()}}),En&&i&&(kn.global.makeDebugContext?(e=kn.global.makeDebugContext(e,t),On.i.level=Math.max(On.i.level,1)):On.i.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function Cn(e,t){var n=t.onError,r=void 0===n?function(e){return null}:n,i=function(e){return r("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",i,!1);var a=t.webgl1,o=void 0===a||a,s=t.webgl2,u=void 0===s||s,l=null;return u&&(l=(l=l||e.getContext("webgl2",t))||e.getContext("experimental-webgl2",t)),o&&(l=(l=l||e.getContext("webgl",t))||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),l||r("Failed to create ".concat(u&&!o?"WebGL2":"WebGL"," context"))}function An(e){var t,n=e.canvas,r=e.width,i=void 0===r?800:r,a=e.height,o=void 0===a?600:a,s=e.onError,u=void 0===s?function(){}:s;"string"==typeof n?(Sn&&"complete"===document.readyState||u("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):n?t=n:((t=document.createElement("canvas")).id="lumagl-canvas",t.style.width=Number.isFinite(i)?"".concat(i,"px"):"100%",t.style.height=Number.isFinite(o)?"".concat(o,"px"):"100%",document.body.insertBefore(t,document.body.firstChild));return t}function Mn(e){var t=Object(On.h)(e)?"WebGL2":"WebGL1",n=function(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info");return{vendor:r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936)||t,renderer:r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=e.debug?" debug":"";On.i.info(1,"".concat(t).concat(i," context ").concat(r))()}function In(e){return"undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?2:1}function Rn(e,t,n){var r="width"in n?n.width:e.canvas.clientWidth,i="height"in n?n.height:e.canvas.clientHeight;r&&i||(On.i.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,r=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var a=e.luma.canvasSizeInfo;if(a.clientWidth!==r||a.clientHeight!==i||a.devicePixelRatio!==t){var o=t,s=Math.floor(r*o),u=Math.floor(i*o);e.canvas.width=s,e.canvas.height=u,e.drawingBufferWidth===s&&e.drawingBufferHeight===u||(On.i.warn("Device pixel ratio clamped")(),o=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/i),e.canvas.width=Math.floor(r*o),e.canvas.height=Math.floor(i*o)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:t})}}var Ln=n(45),zn=function(){function e(t,n){Object(u.a)(this,e),this.name=t,this.type=n,this.sampleSize=1,this.reset()}return Object(p.a)(e,[{key:"setSampleSize",value:function(e){return this.sampleSize=e,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(e){return this._count+=e,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(e){return this._count-=e,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(Ln.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(Ln.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),e}(),Dn=function(){function e(t){var n=t.id,r=t.stats;Object(u.a)(this,e),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return Object(p.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:e,type:t})}},{key:"reset",value:function(){for(var e in this.stats)this.stats[e].reset();return this}},{key:"forEach",value:function(e){for(var t in this.stats)e(this.stats[t])}},{key:"getTable",value:function(){var e={};return this.forEach((function(t){e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}})),e}},{key:"_initializeStats",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach((function(t){return e._getOrCreate(t)}))}},{key:"_getOrCreate",value:function(e){if(!e||!e.name)return null;var t=e.name,n=e.type;return this.stats[t]||(this.stats[t]=e instanceof zn?e:new zn(t,n)),this.stats[t]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),e}(),Fn=new(function(){function e(){Object(u.a)(this,e),this.stats=new Map}return Object(p.a)(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new Dn({id:e})),this.stats.get(e)}}]),e}());if(kn.global.luma&&"8.0.5"!==kn.global.luma.VERSION)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(kn.global.luma.VERSION," vs ").concat("8.0.5"));kn.global.luma||(Object(kn.isBrowser)()&&On.i.log(1,"luma.gl ".concat("8.0.5"," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),kn.global.luma=kn.global.luma||{VERSION:"8.0.5",version:"8.0.5",log:On.i,stats:Fn,globals:{modules:{},nodeIO:{}}});kn.global.luma;function Bn(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function Nn(e){Bn(Object(On.g)(e),"Invalid WebGLRenderingContext")}function Un(e){Bn(Object(On.h)(e),"Requires WebGL2")}function Vn(e,t){if("string"!=typeof t)return t;var n=Number(t);if(!isNaN(n))return n;var r=e[t=t.replace(/^.*\./,"")];return Bn(void 0!==r,"Accessing undefined constant GL.".concat(t)),r}function Wn(e,t){for(var n in t=Number(t),e)if(e[n]===t)return"GL.".concat(n);return String(t)}var qn={};function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";qn[e]=qn[e]||1;var t=qn[e]++;return"".concat(e,"-").concat(t)}function Hn(e){return Bn("number"==typeof e,"Input must be a number"),e&&0==(e&e-1)}function Zn(e){var t=!0;for(var n in e){t=!1;break}return t}function Xn(e,t,n,r){var i="See luma.gl ".concat(n," Upgrade Guide at http://uber.github.io/luma.gl/#/documentation/overview/upgrade-guide"),a=Object.getPrototypeOf(e);r.forEach((function(e){a.methodName||(a[e]=function(){throw On.i.removed("Calling removed method ".concat(t,".").concat(e,": "),i)(),new Error(e)})}))}var Yn="Resource subclass must define virtual methods",Kn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),Nn(t);var r=n.id,i=n.userData,a=void 0===i?{}:i;this.gl=t,this.id=r||Gn(this.constructor.name),this.userData=a,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(p.a)(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(e){e.delete()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bn(e=Vn(this.gl,e));var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var i=Object(On.h)(this.gl),a=(!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!a){var o=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1,u=i?s:o;return u}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,i=this.constructor.PARAMETERS||{},a=Object(On.h)(this.gl),o={},s=n||Object.keys(i),u=!0,l=!1,c=void 0;try{for(var h,p=s[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value,d=i[f],v=d&&(!("webgl2"in d)||a)&&(!("extension"in d)||this.gl.getExtension(d.extension));if(v){var m=r?Wn(this.gl,f):f;o[m]=this.getParameter(f,e),r&&"GLenum"===d.type&&(o[m]=Wn(this.gl,o[m]))}}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return o}},{key:"setParameter",value:function(e,t){Bn(e=Vn(this.gl,e));var n=(this.constructor.PARAMETERS||{})[e];if(n){var r=Object(On.h)(this.gl);if(!((!("webgl2"in n)||r)&&(!("extension"in n)||this.gl.getExtension(n.extension))))throw new Error("Parameter not available on this platform");"GLenum"===n.type&&(t=Vn(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Xn(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(Yn)}},{key:"_deleteHandle",value:function(){throw new Error(Yn)}},{key:"_bindHandle",value:function(){throw new Error(Yn)}},{key:"_getOptsFromHandle",value:function(){throw new Error(Yn)}},{key:"_getParameter",value:function(e,t){throw new Error(Yn)}},{key:"_setParameter",value:function(e,t){throw new Error(Yn)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=Fn.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name;Fn.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=Fn.get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=Fn.get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}(),Jn=n(38);function $n(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error("Failed to deduce GL constant from typed array")}}function Qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return r?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function er(e){var t=e.data,n=e.width,r=e.height,i=e.bytesPerPixel,a=void 0===i?4:i,o=e.temp,s=n*a;o=o||new Uint8Array(s);for(var u=0;u<r/2;++u){var l=u*s,c=(r-u-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,c,c+s),t.set(o,c)}}function tr(e){for(var t=e.data,n=e.width,r=e.height,i=Math.round(n/2),a=Math.round(r/2),o=new Uint8Array(i*a*4),s=0;s<a;s++)for(var u=0;u<i;u++)for(var l=0;l<4;l++)o[4*(s*i+u)+l]=t[4*(2*s*n+2*u)+l];return{data:o,width:i,height:a}}function nr(e,t,n){var r=n.removedProps,i=void 0===r?{}:r,a=n.deprecatedProps,o=void 0===a?{}:a,s=n.replacedProps,u=void 0===s?{}:s;for(var l in i)if(l in t){var c=i[l]?"".concat(e,".").concat(i[l]):"N/A";On.i.removed("".concat(e,".").concat(l),c)()}for(var h in o)if(h in t){var p=o[h];On.i.deprecated("".concat(e,".").concat(h),"".concat(e,".").concat(p))()}var f=null;for(var d in u)if(d in t){var v=u[d];On.i.deprecated("".concat(e,".").concat(d),"".concat(e,".").concat(v))(),(f=f||Object.assign({},t))[v]=t[d],delete f[d]}return f||t}var rr,ir,ar,or={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},sr={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},ur=function(){function e(){var t=this;Object(u.a)(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(p.a)(e,null,[{key:"getBytesPerElement",value:function(e){return Qn(e.type||5126).BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){return Bn(e.size),Qn(e.type||5126).BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(Jn.a)(e,[or].concat(n))}}]),Object(p.a)(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0!==(e=nr("Accessor",e,sr)).type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"==typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}(),lr={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},cr={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:lr},hr={removedProps:lr},pr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=r.target||(n.gl.webgl2?36662:34962),n.initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/ur.getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/ur.getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=nr("Buffer",e,cr),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return"accessor"in(e=nr("Buffer",e,hr))&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ur(e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,i=void 0===r?0:r,a=t.srcOffset,o=void 0===a?0:a,s=e.byteLength||e.length;Bn(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==s?(Un(this.gl),this.gl.bufferSubData(this.target,i,n,o,s)):this.gl.bufferSubData(u,i,n),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,i=e.writeOffset,a=void 0===i?0:i,o=e.size,s=this.gl;return Un(s),s.bindBuffer(36662,t.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,a,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,i=void 0===r?0:r,a=e.dstOffset,o=void 0===a?0:a,s=e.length,u=void 0===s?0:s;Un(this.gl);var l,c,h=Qn(this.accessor.type||5126,{clamped:!1}),p=this._getAvailableElementCount(i),f=o;n?l=(c=n.length)-f:c=f+(l=Math.min(p,u||p));var d=Math.min(p,l);return Bn((u=u||d)<=d),n=n||new h(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=e.offset,o=void 0===a?0:a,s=e.size;return 35345===n||35982===n?void 0!==s?this.gl.bindBufferRange(n,i,this.handle,o,s):(Bn(0===o),this.gl.bindBufferBase(n,i,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,i=void 0===r?this.accessor&&this.accessor.index:r,a=35345===n||35982===n;return a?this.gl.bindBufferBase(n,i,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Bn(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,10),this.bytesUsed=e.byteLength,this._trackAllocatedMemory(e.byteLength);var r=$n(e);return Bn(r),this.setAccessor(new ur(this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Bn(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=e/Qn(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-t}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new ur(this.accessor,{type:$n(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return On.i.deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return On.i.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ur(this.accessor,e),this}},{key:"type",get:function(){return On.i.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return On.i.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(Kn),fr=(rr={},Object(d.a)(rr,6407,{dataFormat:6407,types:[5121,33635]}),Object(d.a)(rr,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(d.a)(rr,6406,{dataFormat:6406,types:[5121]}),Object(d.a)(rr,6409,{dataFormat:6409,types:[5121]}),Object(d.a)(rr,6410,{dataFormat:6410,types:[5121]}),Object(d.a)(rr,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(d.a)(rr,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(d.a)(rr,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(d.a)(rr,34836,{dataFormat:6408,types:[5126],gl2:!0}),rr),dr=(ir={},Object(d.a)(ir,6403,1),Object(d.a)(ir,36244,1),Object(d.a)(ir,33319,2),Object(d.a)(ir,33320,2),Object(d.a)(ir,6407,3),Object(d.a)(ir,36248,3),Object(d.a)(ir,6408,4),Object(d.a)(ir,36249,4),Object(d.a)(ir,6402,1),Object(d.a)(ir,34041,1),Object(d.a)(ir,6406,1),Object(d.a)(ir,6409,1),Object(d.a)(ir,6410,2),ir),vr=(ar={},Object(d.a)(ar,5126,4),Object(d.a)(ar,5125,4),Object(d.a)(ar,5124,4),Object(d.a)(ar,5123,2),Object(d.a)(ar,5122,2),Object(d.a)(ar,5131,2),Object(d.a)(ar,5120,1),Object(d.a)(ar,5121,1),ar);function mr(e,t){var n=fr[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(On.h)(e)&&n.gl2||n.gl1;return"string"==typeof r?e.getExtension(r):r}function yr(e,t){var n=fr[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}var gr=[9729,9728],br=kn.global.WebGLBuffer||function(){},_r=function(e){function t(e,n){var r;Object(u.a)(this,t);var i=n.id,a=void 0===i?Gn("texture"):i,o=n.handle,s=n.target;return(r=Object(l.a)(this,Object(c.a)(t).call(this,e,{id:a,handle:o}))).target=s,r.textureUnit=void 0,r.loaded=!1,r.width=void 0,r.height=void 0,r.depth=void 0,r.format=void 0,r.type=void 0,r.dataFormat=void 0,r.border=void 0,r.textureUnit=void 0,r.mipmaps=void 0,r}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,i=!0;return n&&(i=(i=i&&mr(e,n))&&(!r||yr(e,n))),i}}]),Object(p.a)(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then((function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))})),this;var r=t.pixels,i=void 0===r?null:r,a=t.format,o=void 0===a?6408:a,s=t.border,u=void 0===s?0:s,l=t.recreate,c=void 0!==l&&l,h=t.parameters,p=void 0===h?{}:h,f=t.pixelStore,d=void 0===f?{}:f,v=t.textureUnit,m=void 0===v?void 0:v,y=t.mipmaps,g=void 0===y||y;n||(n=i);var b=t.width,_=t.height,x=t.dataFormat,w=t.type,k=t.depth,O=void 0===k?0:k,E=this._deduceParameters({format:o,type:w,dataFormat:x,compressed:!1,data:n,width:b,height:_});return b=E.width,_=E.height,x=E.dataFormat,w=E.type,this.width=b,this.height=_,this.depth=O,this.format=o,this.type=w,this.dataFormat=x,this.border=u,this.textureUnit=m,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(On.i.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(p)),this.mipmaps=g,this.setImageData({data:n,width:b,height:_,depth:O,format:o,type:w,dataFormat:x,border:u,mipmaps:g,parameters:d}),g&&this.generateMipmap(),this.setParameters(p),c&&(this.data=n),this}},{key:"resize",value:function(e){var t=e.height,n=e.width,r=e.mipmaps,i=void 0!==r&&r;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(On.i.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(xn.d)(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,r=e.pixels,i=void 0===r?null:r,a=e.level,o=void 0===a?0:a,s=e.format,u=void 0===s?this.format:s,l=e.border,c=void 0===l?this.border:l,h=e.offset,p=void 0===h?0:h,f=e.parameters,d=void 0===f?{}:f,v=e.data,m=void 0===v?null:v,y=e.type,g=void 0===y?this.type:y,b=e.width,_=void 0===b?this.width:b,x=e.height,w=void 0===x?this.height:x,k=e.dataFormat,O=void 0===k?this.dataFormat:k,E=e.compressed,S=void 0!==E&&E;m||(m=i);var T=this._deduceParameters({format:u,type:g,dataFormat:O,compressed:S,data:m,width:_,height:w});g=T.type,O=T.dataFormat,S=T.compressed,_=T.width,w=T.height;var P=this.gl;P.bindTexture(this.target,this.handle);var j,C=this._getDataType({data:m,compressed:S});if(m=C.data,j=C.dataType,Object(xn.d)(this.gl,d,(function(){switch(j){case"null":P.texImage2D(n,o,u,_,w,c,O,g,m);break;case"typed-array":P.texImage2D(n,o,u,_,w,c,O,g,m,p);break;case"buffer":Un(P),P.bindBuffer(35052,m.handle||m),P.texImage2D(n,o,u,_,w,c,O,g,p),P.bindBuffer(35052,null);break;case"browser-object":Object(On.h)(P)?P.texImage2D(n,o,u,_,w,c,O,g,m):P.texImage2D(n,o,u,O,g,m);break;case"compressed":P.compressedTexImage2D(n,o,u,_,w,c,m);break;default:Bn(!1,"Unknown image data type")}})),m&&m.byteLength)this._trackAllocatedMemory(m.byteLength,"Texture");else{var A=dr[this.dataFormat]||4,M=vr[this.type]||1;this._trackAllocatedMemory(this.width*this.height*A*M,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,i=e.pixels,a=void 0===i?null:i,o=e.data,s=void 0===o?null:o,u=e.x,l=void 0===u?0:u,c=e.y,h=void 0===c?0:c,p=e.width,f=void 0===p?this.width:p,d=e.height,v=void 0===d?this.height:d,m=e.level,y=void 0===m?0:m,g=e.format,b=void 0===g?this.format:g,_=e.type,x=void 0===_?this.type:_,w=e.dataFormat,k=void 0===w?this.dataFormat:w,O=e.compressed,E=void 0!==O&&O,S=e.offset,T=void 0===S?0:S,P=e.border,j=(void 0===P&&this.border,e.parameters),C=void 0===j?{}:j,A=this._deduceParameters({format:b,type:x,dataFormat:k,compressed:E,data:s,width:f,height:v});if(x=A.type,k=A.dataFormat,E=A.compressed,f=A.width,v=A.height,Bn(0===this.depth,"texSubImage not supported for 3D textures"),s||(s=a),s&&s.data){var M=s;s=M.data,f=M.shape[0],v=M.shape[1]}s instanceof pr&&(s=s.handle),this.gl.bindTexture(this.target,this.handle),Object(xn.d)(this.gl,C,(function(){E?t.gl.compressedTexSubImage2D(r,y,l,h,f,v,b,s):null===s?t.gl.texSubImage2D(r,y,l,h,f,v,k,x,null):ArrayBuffer.isView(s)?t.gl.texSubImage2D(r,y,l,h,f,v,k,x,s,T):s instanceof br?(Un(t.gl),t.gl.bindBuffer(35052,s),t.gl.texSubImage2D(r,y,l,h,f,v,k,x,T),t.gl.bindBuffer(35052,null)):Object(On.h)(t.gl)?t.gl.texSubImage2D(r,y,l,h,f,v,k,x,s):t.gl.texSubImage2D(r,y,l,h,k,x,s)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed;return void 0!==n&&n?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof pr?{data:t.handle,dataType:"buffer"}:t instanceof br?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,i=e.height,a=e.dataFormat,o=e.type,s=e.compressed,u=fr[t];a=a||u&&u.dataFormat,o=o||u&&u.types[0],s=s||u&&u.compressed;var l=this._deduceImageSize(n,r,i);return{dataFormat:a,type:o,compressed:s,width:r=l.width,height:i=l.height,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return Bn(r="undefined"!=typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},"Could not deduced texture size"),Bn(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Bn(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Bn(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(On.h)(this.gl)&&(!(!this.width||!this.height)&&(!Hn(this.width)||!Hn(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===gr.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}]),t}(Kn),xr="";function wr(e,t){return Bn("string"==typeof e),e=xr+e,new Promise((function(n,r){try{var i=new Image;i.onload=function(){return n(i)},i.onerror=function(){return r(new Error("Could not load image ".concat(e,".")))},i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(e){r(e)}}))}var kr,Or=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),Nn(e),(r instanceof Promise||"string"==typeof r)&&(r={data:r}),"string"==typeof r.data&&(r=Object.assign({},r,{data:wr(r.data)})),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,Object.assign({},r,{target:3553})))).initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e,t){return _r.isSupported(e,t)}}]),t}(_r),Er="EXT_color_buffer_float",Sr=(kr={},Object(d.a)(kr,33189,{bpp:2}),Object(d.a)(kr,33190,{gl2:!0,bpp:3}),Object(d.a)(kr,36012,{gl2:!0,bpp:4}),Object(d.a)(kr,36168,{bpp:1}),Object(d.a)(kr,34041,{bpp:4}),Object(d.a)(kr,35056,{gl2:!0,bpp:4}),Object(d.a)(kr,36013,{gl2:!0,bpp:5}),Object(d.a)(kr,32854,{bpp:2}),Object(d.a)(kr,36194,{bpp:2}),Object(d.a)(kr,32855,{bpp:2}),Object(d.a)(kr,33321,{gl2:!0,bpp:1}),Object(d.a)(kr,33330,{gl2:!0,bpp:1}),Object(d.a)(kr,33329,{gl2:!0,bpp:1}),Object(d.a)(kr,33332,{gl2:!0,bpp:2}),Object(d.a)(kr,33331,{gl2:!0,bpp:2}),Object(d.a)(kr,33334,{gl2:!0,bpp:4}),Object(d.a)(kr,33333,{gl2:!0,bpp:4}),Object(d.a)(kr,33323,{gl2:!0,bpp:2}),Object(d.a)(kr,33336,{gl2:!0,bpp:2}),Object(d.a)(kr,33335,{gl2:!0,bpp:2}),Object(d.a)(kr,33338,{gl2:!0,bpp:4}),Object(d.a)(kr,33337,{gl2:!0,bpp:4}),Object(d.a)(kr,33340,{gl2:!0,bpp:8}),Object(d.a)(kr,33339,{gl2:!0,bpp:8}),Object(d.a)(kr,32849,{gl2:!0,bpp:3}),Object(d.a)(kr,32856,{gl2:!0,bpp:4}),Object(d.a)(kr,32857,{gl2:!0,bpp:4}),Object(d.a)(kr,36220,{gl2:!0,bpp:4}),Object(d.a)(kr,36238,{gl2:!0,bpp:4}),Object(d.a)(kr,36975,{gl2:!0,bpp:4}),Object(d.a)(kr,36214,{gl2:!0,bpp:8}),Object(d.a)(kr,36232,{gl2:!0,bpp:8}),Object(d.a)(kr,36226,{gl2:!0,bpp:16}),Object(d.a)(kr,36208,{gl2:!0,bpp:16}),Object(d.a)(kr,33325,{gl2:Er,bpp:2}),Object(d.a)(kr,33327,{gl2:Er,bpp:4}),Object(d.a)(kr,34842,{gl2:Er,bpp:8}),Object(d.a)(kr,33326,{gl2:Er,bpp:4}),Object(d.a)(kr,33328,{gl2:Er,bpp:8}),Object(d.a)(kr,34836,{gl2:Er,bpp:16}),Object(d.a)(kr,35898,{gl2:Er,bpp:4}),kr);function Tr(e,t,n){var r=n[t];if(!r)return!1;var i=Object(On.h)(e)&&r.gl2||r.gl1;return"string"==typeof i?e.getExtension(i):i}var Pr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||Tr(e,n,Sr)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(p.a)(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,i=e.height,a=void 0===i?1:i,o=e.samples,s=void 0===o?0:o;return Bn(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&Object(On.h)(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,r,a):this.gl.renderbufferStorage(36161,t,r,a),this.format=t,this.width=r,this.height=a,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Sr[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}]),t}(Kn);function jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,a=void 0===i?null:i,o=t.depth,s=void 0===o?null:o,u=t.stencil,l=void 0===u?null:u,c={};r&&(c.framebuffer=r);var h=0;a&&(h|=16384,!0!==a&&(c.clearColor=a)),s&&(h|=256,!0!==s&&(c.clearDepth=s)),l&&(h|=1024,!0!==s&&(c.clearStencil=s)),Bn(0!==h,"clear: bad arguments"),Object(xn.d)(e,c,(function(){e.clear(h)}))}function Cr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.buffer,a=void 0===i?6144:i,o=t.drawBuffer,s=void 0===o?0:o,u=t.value,l=void 0===u?[0,0,0,0]:u;Un(e),Object(xn.d)(e,{framebuffer:r},(function(){switch(a){case 6144:switch(l.constructor){case Int32Array:e.clearBufferiv(a,s,l);break;case Uint32Array:e.clearBufferuiv(a,s,l);break;case Float32Array:default:e.clearBufferfv(a,s,l)}break;case 6145:e.clearBufferfv(6145,0,[l]);break;case 6146:e.clearBufferiv(6146,0,[l]);break;case 34041:var t=Object(g.a)(l,2),n=t[0],r=t[1];e.clearBufferfi(34041,0,n,r);break;default:Bn(!1,"clear: bad arguments")}}))}function Ar(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Bn(!1),0}}var Mr=n(10),Ir=n.n(Mr);function Rr(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function Lr(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Rr(a,r,i,o,s,"next",e)}function s(e){Rr(a,r,i,o,s,"throw",e)}o(void 0)}))}}var zr=[34069,34070,34071,34072,34073,34074],Dr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),Nn(e),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,Object.assign({},r,{target:34067})))).initialize(r),Object.seal(Object(h.a)(n)),n}var n;return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,r=void 0===n||n,i=t.parameters,a=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(a)}))}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.mipmapLevel,u=void 0===s?0:s;return this._subImage({target:t,data:n,x:i,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:(n=Lr(Ir.a.mark((function e(t){var n,r,i,a,o,s,u,l,c,h,p,f,d,v=this;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,i=t.pixels,a=t.data,o=t.border,s=void 0===o?0:o,u=t.format,l=void 0===u?6408:u,c=t.type,h=void 0===c?5121:c,p=this.gl,f=i||a,e.next=5,Promise.all(zr.map((function(e){var t=f[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:d=e.sent,this.bind(),zr.forEach((function(e,t){d[t].length>1&&!1!==v.opts.mipmaps&&On.i.warn("".concat(v.id," has mipmap and multiple LODs."))(),d[t].forEach((function(t,i){n&&r?p.texImage2D(e,i,l,n,r,s,l,h,t):p.texImage2D(e,i,l,l,h,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,r=e.width,i=e.height,a=e.pixels,o=e.data,s=e.border,u=void 0===s?0:s,l=e.format,c=void 0===l?6408:l,h=e.type,p=void 0===h?5121:h,f=this.gl,d=a||o;return this.bind(),d instanceof Promise?d.then((function(r){return t.setImageDataForFace(Object.assign({},e,{face:n,data:r,pixels:r}))})):this.width||this.height?f.texImage2D(n,0,c,r,i,u,c,p,d):f.texImage2D(n,0,c,c,p,d),this}}]),t}(_r);Dr.FACES=zr;var Fr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),Un(e),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){return Object(On.h)(e)}}]),Object(p.a)(t,[{key:"setImageData",value:function(e){var t=this,n=e.level,r=void 0===n?0:n,i=e.dataFormat,a=void 0===i?6408:i,o=e.width,s=e.height,u=e.depth,l=void 0===u?1:u,c=e.border,h=void 0===c?0:c,p=e.format,f=e.type,d=void 0===f?5121:f,v=e.offset,m=void 0===v?0:v,y=e.data,g=e.parameters,b=void 0===g?{}:g;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(xn.d)(this.gl,b,(function(){ArrayBuffer.isView(y)&&t.gl.texImage3D(t.target,r,a,o,s,l,h,p,d,y),y instanceof pr&&(t.gl.bindBuffer(35052,y.handle),t.gl.texImage3D(t.target,r,a,o,s,l,h,p,d,m))})),y&&y.byteLength)this._trackAllocatedMemory(y.byteLength,"Texture");else{var _=dr[this.dataFormat]||4,x=vr[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*_*x,"Texture")}return this.loaded=!0,this}}]),t}(_r);function Br(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,r=void 0===n?0:n,i=t.sourceY,a=void 0===i?0:i,o=t.sourceFormat,s=void 0===o?6408:o,u=t.sourceAttachment,l=void 0===u?36064:u,c=t.target,h=void 0===c?null:c,p=t.sourceWidth,f=t.sourceHeight,d=t.sourceType,v=Ur(e),m=v.framebuffer,y=v.deleteFramebuffer;Bn(m);var g=m.gl,b=m.handle,_=m.attachments;p=p||m.width,f=f||m.height,36064===l&&null===b&&(l=1028),Bn(_[l]),h=Vr(h,d=d||_[l].type,s,p,f),d=d||$n(h);var x=g.bindFramebuffer(36160,b);return g.readPixels(r,a,p,f,s,d,h),g.bindFramebuffer(36160,x||null),y&&m.delete(),h}function Nr(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,r=void 0===n?36064:n,i=t.targetMaxHeight,a=void 0===i?Number.MAX_SAFE_INTEGER:i,o=Br(e,{sourceAttachment:r}),s=e.width,u=e.height;u>a;){var l=tr({data:o,width:s,height:u});o=l.data,s=l.width,u=l.height}er({data:o,width:s,height:u});var c=document.createElement("canvas");c.width=s,c.height=u;var h=c.getContext("2d"),p=h.createImageData(s,u);return p.data.set(o),h.putImageData(p,0,0),c.toDataURL()}function Ur(e){return e instanceof Wr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:(t=e,r=t.gl,i=t.width,a=t.height,o=t.id,new Wr(r,Object.assign({},n,{id:"framebuffer-for-".concat(o),width:i,height:a,attachments:Object(d.a)({},36064,t)}))),deleteFramebuffer:!0};var t,n,r,i,a,o}function Vr(e,t,n,r,i){return e||new(Qn(t=t||5121,{clamped:!1}))(r*i*Ar(n))}var Wr=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.ownResources=[],n.initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat,i=!0;return n&&(i=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(i=i&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),i}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(p.a)(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,i=void 0===r?1:r,a=e.attachments,o=void 0===a?null:a,s=e.color,u=void 0===s||s,l=e.depth,c=void 0===l||l,h=e.stencil,p=void 0!==h&&h,f=e.check,d=void 0===f||f,v=e.readBuffer,m=e.drawBuffers;if(Bn(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,o)for(var y in o){var g=o[y];(Array.isArray(g)?g[0]:g).resize({width:n,height:i})}else o=this._createDefaultAttachments(u,c,p,n,i);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:m}),o&&d&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,n=!1,r=void 0;try{for(var i,a=this.ownResources[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){i.value.delete()}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}Rt(Object(c.a)(t.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,i=e.drawBuffers,a=e.clearAttachments,o=void 0!==a&&a,s=e.resizeAttachments,u=void 0===s||s;this.attach(n,{clearAttachments:o,resizeAttachments:u});var l=this.gl,c=l.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),l.bindFramebuffer(36160,c||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Bn(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&On.i.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,a=n.resizeAttachments,o=void 0===a||a,s={};i&&Object.keys(this.attachments).forEach((function(e){s[e]=null})),Object.assign(s,e);var u=this.gl.bindFramebuffer(36160,this.handle);for(var l in s){Bn(void 0!==l,"Misspelled framebuffer binding point?");var c=Number(l),h=s[c],p=h;if(p)if(p instanceof Pr)this._attachRenderbuffer({attachment:c,renderbuffer:p});else if(Array.isArray(h)){var f=Object(g.a)(h,3),d=f[0],v=f[1],m=void 0===v?0:v,y=f[2],b=void 0===y?0:y;p=d,this._attachTexture({attachment:c,texture:d,layer:m,level:b})}else this._attachTexture({attachment:c,texture:p,layer:0,level:0});else this._unattach(c);o&&p&&p.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,u||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(function(e){return(Wr.STATUS||{})[e]||"Framebuffer error ".concat(e)}(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,i=e.drawBuffers,a=void 0===i?[]:i,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&jr(this.gl,{color:t,depth:n,stencil:r}),a.forEach((function(e,t){Cr({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return On.i.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,i=void 0===r?0:r,a=e.y,o=void 0===a?0:a,s=e.width,u=e.height,l=this.gl;Un(l);var c=l.bindFramebuffer(36008,this.handle);return 0===i&&0===o&&void 0===s&&void 0===u?l.invalidateFramebuffer(36008,n):l.invalidateFramebuffer(36008,n,i,o,s,u),l.bindFramebuffer(36008,c),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Wn(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},i=!0,a=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=t?Wn(this.gl,l):l;r[c]=this.getAttachmentParameter(e,l,t)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0,i=t;r<i.length;r++){var a=i[r],o=Number(a),s=e?Wn(this.gl,o):o;n[s]=this.getAttachmentParameters(o,e)}return n}},{key:"show",value:function(){return"undefined"!=typeof window&&window.open(Nr(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>On.i.level||"undefined"==typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=Nr(this,{maxHeight:100});return On.i.image({logLevel:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,r,i){var a,o=null;e&&((o=o||{})[36064]=new Or(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:i,mipmaps:!1,parameters:(a={},Object(d.a)(a,10241,9729),Object(d.a)(a,10240,9729),Object(d.a)(a,10242,33071),Object(d.a)(a,10243,33071),a)}),this.ownResources.push(o[36064]));return t&&n?((o=o||{})[33306]=new Pr(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?((o=o||{})[36096]=new Pr(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:i}),this.ownResources.push(o[36096])):n&&Bn(!1),o}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof Pr?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer;this.gl.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,i=e.layer,a=e.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,a,i);break;case 34067:var s=function(e){return e<34069?e+34069:e}(i);o.framebufferTexture2D(36160,n,s,r.handle,a);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,a);break;default:Bn(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e){var t=this.gl;Object(On.h)(t)?t.readBuffer(e):Bn(36064===e||1029===e,"Multiple render targets not supported"),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(Object(On.h)(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):Bn(1===e.length&&(36064===e[0]||1029===e[0]),"Multiple render targets not supported")}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=function(e){for(var t in e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},fi)void 0===e.luma.caps[t]&&(e.luma.caps[t]=vi(e,t));return e.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(Kn);var qr;Wr.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];var Gr="WEBGL2",Hr="VERTEX_ARRAY_OBJECT",Zr="TIMER_QUERY",Xr="INSTANCED_RENDERING",Yr="MULTIPLE_RENDER_TARGETS",Kr="ELEMENT_INDEX_UINT32",Jr="BLEND_EQUATION_MINMAX",$r="FLOAT_BLEND",Qr="COLOR_ENCODING_SRGB",ei="TEXTURE_DEPTH",ti="TEXTURE_FLOAT",ni="TEXTURE_HALF_FLOAT",ri="TEXTURE_FILTER_LINEAR_FLOAT",ii="TEXTURE_FILTER_LINEAR_HALF_FLOAT",ai="TEXTURE_FILTER_ANISOTROPIC",oi="COLOR_ATTACHMENT_RGBA32F",si="COLOR_ATTACHMENT_FLOAT",ui="COLOR_ATTACHMENT_HALF_FLOAT",li="GLSL_FRAG_DATA",ci="GLSL_FRAG_DEPTH",hi="GLSL_DERIVATIVES",pi="GLSL_TEXTURE_LOD";var fi=(qr={},Object(d.a)(qr,Gr,[!1,!0]),Object(d.a)(qr,Hr,["OES_vertex_array_object",!0]),Object(d.a)(qr,Zr,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(d.a)(qr,Xr,["ANGLE_instanced_arrays",!0]),Object(d.a)(qr,Yr,["WEBGL_draw_buffers",!0]),Object(d.a)(qr,Kr,["OES_element_index_uint",!0]),Object(d.a)(qr,Jr,["EXT_blend_minmax",!0]),Object(d.a)(qr,$r,["EXT_float_blend"]),Object(d.a)(qr,Qr,["EXT_sRGB",!0]),Object(d.a)(qr,ei,["WEBGL_depth_texture",!0]),Object(d.a)(qr,ti,["OES_texture_float",!0]),Object(d.a)(qr,ni,["OES_texture_half_float",!0]),Object(d.a)(qr,ri,["OES_texture_float_linear"]),Object(d.a)(qr,ii,["OES_texture_half_float_linear"]),Object(d.a)(qr,ai,["EXT_texture_filter_anisotropic"]),Object(d.a)(qr,oi,[function(e){var t=new Or(e,{format:6408,type:5126,dataFormat:6408}),n=new Wr(e,{id:"test-framebuffer",check:!1,attachments:Object(d.a)({},36064,t)}),r=n.getStatus();return t.delete(),n.delete(),36053===r},"EXT_color_buffer_float"]),Object(d.a)(qr,si,[!1,"EXT_color_buffer_float"]),Object(d.a)(qr,ui,["EXT_color_buffer_half_float"]),Object(d.a)(qr,li,["WEBGL_draw_buffers",!0]),Object(d.a)(qr,ci,["EXT_frag_depth",!0]),Object(d.a)(qr,hi,["OES_standard_derivatives",!0]),Object(d.a)(qr,pi,["EXT_shader_texture_lod",!0]),qr);function di(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return vi(e,t)}))}function vi(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},void 0===e.luma.caps[t]&&(e.luma.caps[t]=function(e,t){var n,r=fi[t];Bn(r,t);var i=Object(On.h)(e)&&r[1]||r[0];if("function"==typeof i)n=i(e);else if(Array.isArray(i)){n=!0;var a=!0,o=!1,s=void 0;try{for(var u,l=i[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;n=n&&Boolean(e.getExtension(c))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}else"string"==typeof i?n=Boolean(e.getExtension(i)):"boolean"==typeof i?n=i:Bn(!1);return n}(e,t)),e.luma.caps[t]||On.i.log(2,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yi=function(){function e(t,n){Object(u.a)(this,e),this.opts=n,this.source=t}return Object(p.a)(e,[{key:"getValue",value:function(){var e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];var n=this.source.value,r=t.size,i=n;if(n&&n.length!==r){i=new Float32Array(r);for(var a=t.elementOffset||0,o=0;o<r;++o)i[o]=n[a+o]}return i}},{key:"getAccessor",value:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.source.getAccessor(),{},this.opts)}},{key:"value",get:function(){return this.source.value}}]),e}();var gi=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.overAlloc,r=void 0===n?2:n,i=t.poolSize,a=void 0===i?100:i;Object(u.a)(this,e),this.overAlloc=r,this.poolSize=a,this._pool=[]}return Object(p.a)(e,[{key:"allocate",value:function(e,t,n){var r=n.size,i=void 0===r?1:r,a=n.type,o=n.padding,s=void 0===o?0:o,u=n.copy,l=void 0!==u&&u,c=a||e&&e.constructor||Float32Array,h=t*i+s;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,h)}var p=this._allocate(c,h);return e&&l?p.set(e):p.fill(0,0,4),this._release(e),p}},{key:"release",value:function(e){this._release(e)}},{key:"_allocate",value:function(e,t){t=Math.max(Math.ceil(t*this.overAlloc),1);var n=this._pool,r=e.BYTES_PER_ELEMENT*t,i=n.findIndex((function(e){return e.byteLength>=r}));return i>=0?new e(n.splice(i,1)[0],0,t):new e(t)}},{key:"_release",value:function(e){if(ArrayBuffer.isView(e)){var t=this._pool,n=e.buffer,r=n.byteLength,i=t.findIndex((function(e){return e.byteLength>=r}));i<0?t.push(n):(i>0||t.length<this.poolSize)&&t.splice(i,0,n),t.length>this.poolSize&&t.shift()}}}]),e}()),bi=n(16);var _i,xi=new bi.b,wi=new bi.b,ki=new bi.b,Oi=new bi.b,Ei=new bi.b,Si=new bi.b,Ti=new bi.b;function Pi(e,t){var n=t.size,r=void 0===n?1:n,i=t.startIndex,a=void 0===i?0:i,o=t.endIndex;Number.isFinite(o)||(o=e.length);var s=(o-a)/r;_i=gi.allocate(_i,s,{type:Float32Array,size:2*r});for(var u,l=a,c=0;l<o;){for(var h=0;h<r;h++){var p=e[l++];_i[c+h]=p,_i[c+h+r]=(u=p)-Math.fround(u)}c+=2*r}return _i.subarray(0,s*r*2)}function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ai(e){return e.stride||e.size*e.bytesPerElement}function Mi(e,t){t.offset&&yn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();var n=Ai(e);return Ci({},t,{offset:("vertexOffset"in t?t.vertexOffset:e.vertexOffset||0)*n+(t.elementOffset||0)*e.bytesPerElement+(e.offset||0),stride:n})}var Ii=function(){function e(t,n){Object(u.a)(this,e),this.gl=t,this.id=n.id,this.size=n.size;var r=n.logicalType||n.type,i=5130===r,a=n.defaultValue;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0),n.defaultValue=a;var o=r;i?o=5126:!o&&n.isIndexed?o=t&&function(e,t){return di(e,t)}(t,Kr)?5125:5123:o||(o=5126),n.logicalType=r,n.type=o;var s=function(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||o||5126);this.shaderAttributes={},this.doublePrecision=i,i&&!1===n.fp64&&(s=Float32Array),n.bytesPerElement=s.BYTES_PER_ELEMENT,this.defaultType=s,this.value=null,this.settings=n,this.state={externalBuffer:null,bufferAccessor:n,allocatedValue:null,constant:!1},this._buffer=null,this.setData(n)}return Object(p.a)(e,[{key:"delete",value:function(){this._buffer&&(this._buffer.delete(),this._buffer=null),gi.release(this.state.allocatedValue)}},{key:"getShaderAttributes",value:function(e,t){if(this.doublePrecision){var n={},r=this.value instanceof Float64Array,i=(a=this.getAccessor(),{high:o=Mi(a,t||{}),low:Ci({},o,{offset:o.offset+4*a.size})});return n[e]=new yi(this,i.high),n["".concat(e,"64Low")]=r?new yi(this,i.low):new Float32Array(this.size),n}var a,o;if(t){var s=Mi(this.getAccessor(),t);return Object(d.a)({},e,new yi(this,s))}return Object(d.a)({},e,this)}},{key:"getBuffer",value:function(){return this.state.constant?null:this.state.externalBuffer||this._buffer}},{key:"getValue",value:function(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}},{key:"getAccessor",value:function(){return this.state.bufferAccessor}},{key:"setData",value:function(e){var t=this.state;ArrayBuffer.isView(e)?e={value:e}:e instanceof pr&&(e={buffer:e});var n=Ci({},this.settings,{},e);if(t.bufferAccessor=n,e.constant){var r=e.value;if(r=this._normalizeValue(r,[],0),this.settings.normalized&&(r=this._normalizeConstant(r)),!(!t.constant||!this._areValuesEqual(r,this.value)))return!1;t.externalBuffer=null,t.constant=!0,this.value=r}else if(e.buffer){var i=e.buffer;t.externalBuffer=i,t.constant=!1,this.value=e.value;var a=e.value instanceof Float64Array;n.type=e.type||i.accessor.type,n.bytesPerElement=i.accessor.BYTES_PER_ELEMENT*(a?2:1),n.stride=Ai(n)}else if(e.value){this._checkExternalBuffer(e);var o=e.value;t.externalBuffer=null,t.constant=!1,this.value=o,n.bytesPerElement=o.BYTES_PER_ELEMENT,n.stride=Ai(n);var s=this.buffer,u=this.byteOffset;this.doublePrecision&&o instanceof Float64Array&&(o=Pi(o,n)),s.byteLength<o.byteLength+u&&s.reallocate(2*(o.byteLength+u)),s.setAccessor(null),s.subData({data:o,offset:u}),n.type=e.type||s.accessor.type}return!0}},{key:"updateSubBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.value,n=e.startOffset,r=void 0===n?0:n,i=e.endOffset;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?Pi(t,{size:this.size,startIndex:r,endIndex:i}):t.subarray(r,i),offset:r*t.BYTES_PER_ELEMENT+this.byteOffset})}},{key:"allocate",value:function(e){var t=e.numInstances,n=e.copy,r=void 0!==n&&n,i=this.state,a=i.allocatedValue,o=gi.allocate(a,t+1,{size:this.size,type:this.defaultType,copy:r});this.value=o;var s=this.buffer,u=this.byteOffset;return s.byteLength<o.byteLength+u&&(s.reallocate(o.byteLength+u),r&&a&&s.subData({data:a instanceof Float64Array?Pi(a,this):a,offset:u})),i.allocatedValue=o,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}},{key:"_checkExternalBuffer",value:function(e){var t=e.value;if(!e.constant&&t){var n=this.defaultType,r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));t instanceof n||!this.settings.normalized||"normalized"in e||yn.warn("Attribute ".concat(this.id," is normalized"))()}}},{key:"_normalizeConstant",value:function(e){switch(this.settings.type){case 5120:return new Float32Array(e).map((function(e){return(e+128)/255*2-1}));case 5122:return new Float32Array(e).map((function(e){return(e+32768)/65535*2-1}));case 5121:return new Float32Array(e).map((function(e){return e/255}));case 5123:return new Float32Array(e).map((function(e){return e/65535}));default:return e}}},{key:"_normalizeValue",value:function(e,t,n){var r=this.settings,i=r.defaultValue,a=r.size;if(Number.isFinite(e))return t[n]=e,t;if(!e)return t[n]=i[0],t;switch(a){case 4:t[n+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:t[n+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:t[n+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:t[n+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:for(var o=a;--o>=0;)t[n+o]=Number.isFinite(e[o])?e[o]:i[o]}return t}},{key:"_areValuesEqual",value:function(e,t){if(!e||!t)return!1;for(var n=this.size,r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}},{key:"buffer",get:function(){if(!this._buffer){var e=this.settings,t=e.isIndexed,n=e.type;this._buffer=new pr(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:n}})}return this._buffer}},{key:"byteOffset",get:function(){var e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Ai(e):0}}]),e}(),Ri=[],Li=[];function zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=Ri,i={index:-1,data:e,target:[]};return e?"function"==typeof e[Symbol.iterator]?r=e:e.length>0&&(Li.length=e.length,r=Li):r=Ri,(t>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(t,n),i.index=t-1),{iterable:r,objectInfo:i}}function Di(e){return e&&e[Symbol.asyncIterator]}function Fi(e,t){var n=t.size,r=t.stride,i=t.offset,a=t.startIndices,o=t.nested,s=e.BYTES_PER_ELEMENT,u=r?r/s:n,l=i?i/s:0,c=Math.floor((e.length-l)/u);return function(t,r){var i=r.index,s=r.target;if(!a){for(var h=i*u+l,p=0;p<n;p++)s[p]=e[h+p];return s}var f,d=a[i],v=a[i+1]||c;if(o){f=new Array(v-d);for(var m=d;m<v;m++){var y=m*u+l;s=new Array(n);for(var g=0;g<n;g++)s[g]=e[y+g];f[m-d]=s}}else if(u===n)f=e.subarray(d*n+l,v*n+l);else{f=new e.constructor((v-d)*n);for(var b=0,_=d;_<v;_++)for(var x=_*u+l,w=0;w<n;w++)f[b++]=e[x+w]}return f}}function Bi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filter,r=void 0===n?function(){return!0}:n,i=t.map,a=void 0===i?function(e){return e}:i,o=t.result,s=void 0===o?[]:o;return Array.isArray(e)?Ni(e,r,a,s):r(e)?[a(e)]:[]}function Ni(e,t,n,r){for(var i=-1;++i<e.length;){var a=e[i];Array.isArray(a)?Ni(a,t,n,r):t(a)&&r.push(n(a))}return r}function Ui(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=i;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(i+l,i,i+l),l*=2):(t.copyWithin(i+l,i,i+u-l),l=u);return t}var Vi=[],Wi=[[0,1/0]];function qi(e,t){if(e===Wi)return e;if(t[0]<0&&(t[0]=0),t[0]>=t[1])return e;for(var n=[],r=e.length,i=0,a=0;a<r;a++){var o=e[a];o[1]<t[0]?(n.push(o),i=a+1):o[0]>t[1]?n.push(o):t=[Math.min(o[0],t[0]),Math.max(o[1],t[1])]}return n.splice(i,0,t),n}function Gi(e){var t=e.source,n=e.target,r=e.start,i=void 0===r?0:r,a=e.end,o=e.getData;a=a||n.length;var s=t.length,u=a-i;if(s>u)n.set(t.subarray(0,u),i);else if(n.set(t,i),o)for(var l=s;l<u;)for(var c=o(l,t),h=0;h<c.length;h++)n[i+l]=c[h],l++}var Hi={interpolation:{duration:0,easing:function(e){return e}},spring:{stiffness:.05,damping:.5}};function Zi(e,t){return e?(Number.isFinite(e)&&(e={duration:e}),e.type=e.type||"interpolation",Object.assign({},Hi[e.type],t,e)):null}function Xi(e,t){return t.getBuffer()?[t.getBuffer(),{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function Yi(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function Ki(e){e.push(e.shift())}function Ji(e,t){var n=e.doublePrecision,r=e.settings,i=e.value,a=e.size,o=n?2:1;return(r.noAlloc?i.length:t*a)*o}function $i(e){var t=e.buffer,n=e.numInstances,r=e.attribute,i=e.fromLength,a=e.fromStartIndices,o=e.getData,s=void 0===o?function(e){return e}:o,u=r.doublePrecision?2:1,l=r.size*u,c=r.byteOffset,h=r.startIndices,p=a&&h,f=Ji(r,n),d=r.state.constant;if(p||!(i>=f)){var v=d?r.value:r.getBuffer().getData({srcByteOffset:c});if(r.settings.normalized&&!d){var m=s;s=function(e,t){return r._normalizeConstant(m(e,t))}}var y=d?function(e,t){return s(v,t)}:function(e,t){return s(v.subarray(e,e+l),t)},g=t.getData({length:i}),b=new Float32Array(f);!function(e){var t=e.source,n=e.target,r=e.size,i=e.getData,a=e.sourceStartIndices,o=e.targetStartIndices;if(!Array.isArray(o))return Gi({source:t,target:n,getData:i}),n;for(var s=0,u=0,l=i&&function(e,t){return i(e+u,t)},c=Math.min(a.length,o.length),h=1;h<c;h++){var p=a[h]*r,f=o[h]*r;Gi({source:t.subarray(s,p),target:n,start:u,end:f,getData:l}),s=p,u=f}u<n.length&&Gi({source:[],target:n,start:u,getData:l})}({source:g,target:b,sourceStartIndices:a,targetStartIndices:h,size:l,getData:y}),t.byteLength<b.byteLength+c&&t.reallocate(b.byteLength+c),t.subData({data:b,offset:c})}}var Qi,ea=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,t),n=Object(l.a)(this,Object(c.a)(t).call(this,e,r));var i=r.transition,a=void 0!==i&&i,o=r.noAlloc,s=void 0!==o&&o,h=r.update,p=void 0===h?null:h,f=r.accessor,d=void 0===f?null:f,v=r.transform,m=void 0===v?null:v,y=r.startIndices,g=void 0===y?null:y;return Object.assign(n.settings,{transition:a,noAlloc:s,update:p||d&&n._autoUpdater,accessor:d,transform:m}),Object.assign(n.state,{lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Wi,startIndices:g}),Object.seal(n.settings),Object.seal(n.state),n._validateAttributeUpdaters(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"needsUpdate",value:function(){return this.state.needsUpdate}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearChangedFlags,n=void 0!==t&&t,r=this.state.needsRedraw;return this.state.needsRedraw=r&&!n,r}},{key:"getUpdateTriggers",value:function(){var e=this.settings.accessor;return[this.id].concat("function"!=typeof e&&e||[])}},{key:"supportsTransition",value:function(){return Boolean(this.settings.transition)}},{key:"getTransitionSetting",value:function(e){var t=this.settings.accessor,n=this.settings.transition;return this.supportsTransition()?Zi(Array.isArray(t)?e[t.find((function(t){return e[t]}))]:e[t],n):null}},{key:"setNeedsUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id,t=arguments.length>1?arguments[1]:void 0;if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){var n=t.startRow,r=void 0===n?0:n,i=t.endRow,a=void 0===i?1/0:i;this.state.updateRanges=qi(this.state.updateRanges,[r,a])}else this.state.updateRanges=Wi}},{key:"clearNeedsUpdate",value:function(){this.state.needsUpdate=!1,this.state.updateRanges=Vi}},{key:"setNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.id;this.state.needsRedraw=this.state.needsRedraw||e}},{key:"update",value:function(e){this.setData(e)}},{key:"allocate",value:function(e){var n=this.state,r=this.settings;return!r.noAlloc&&(!!r.update&&(fn(Number.isFinite(e)),Rt(Object(c.a)(t.prototype),"allocate",this).call(this,{numInstances:e,copy:n.updateRanges!==Wi}),!0))}},{key:"updateBuffer",value:function(e){var n=e.numInstances,r=e.data,i=e.props,a=e.context;if(!this.needsUpdate())return!1;var o=this.state.updateRanges,s=this.settings,u=s.update,l=s.noAlloc,h=!0;if(u){var p=!0,f=!1,d=void 0;try{for(var v,m=o[Symbol.iterator]();!(p=(v=m.next()).done);p=!0){var y=Object(g.a)(v.value,2),b=y[0],_=y[1];u.call(a,this,{data:r,startRow:b,endRow:_,props:i,numInstances:n})}}catch(e){f=!0,d=e}finally{try{p||null==m.return||m.return()}finally{if(f)throw d}}if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant});else{var x=!0,w=!1,k=void 0;try{for(var O,E=o[Symbol.iterator]();!(x=(O=E.next()).done);x=!0){var S=Object(g.a)(O.value,2),T=(b=S[0],_=S[1],Number.isFinite(b)?this.getVertexOffset(b):0),P=Number.isFinite(_)?this.getVertexOffset(_):l||!Number.isFinite(n)?this.value.length:n*this.size;Rt(Object(c.a)(t.prototype),"updateSubBuffer",this).call(this,{startOffset:T,endOffset:P})}}catch(e){w=!0,k=e}finally{try{x||null==E.return||E.return()}finally{if(w)throw k}}}else;this._checkAttributeArray()}else h=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),h}},{key:"setConstantValue",value:function(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}},{key:"setExternalBuffer",value:function(e){var t=this.state;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}},{key:"setBinaryValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.state,r=this.settings;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;n.binaryValue=e,this.setNeedsRedraw(),ArrayBuffer.isView(e)&&(e={value:e});var i=r.transform||t!==this.startIndices;if(i){fn(ArrayBuffer.isView(e.value),"invalid ".concat(r.accessor));var a=e.size&&e.size!==this.size;return n.binaryAccessor=Fi(e.value,{size:e.size||this.size,stride:e.stride,offset:e.offset,startIndices:t,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}},{key:"getVertexOffset",value:function(e){var t=this.startIndices;return(t?t[e]:e)*this.size}},{key:"getShaderAttributes",value:function(){var e=this.settings.shaderAttributes||Object(d.a)({},this.id,null),n={};for(var r in e)Object.assign(n,Rt(Object(c.a)(t.prototype),"getShaderAttributes",this).call(this,r,e[r]));return n}},{key:"_autoUpdater",value:function(e,t){var n=t.data,r=t.startRow,i=t.endRow,a=t.props,o=t.numInstances,s=e.settings,u=e.state,l=e.value,c=e.size,h=e.startIndices,p=s.accessor,f=s.transform,d=u.binaryAccessor||("function"==typeof p?p:a[p]);fn("function"==typeof d,'accessor "'.concat(p,'" is not a function'));var v=e.getVertexOffset(r),m=zi(n,r,i),y=m.iterable,g=m.objectInfo,b=!0,_=!1,x=void 0;try{for(var w,k=y[Symbol.iterator]();!(b=(w=k.next()).done);b=!0){var O=w.value;g.index++;var E=d(O,g);if(f&&(E=f.call(this,E)),h){var S=(h[g.index+1]||o)-h[g.index];if(E&&Array.isArray(E[0])){var T=v,P=!0,j=!1,C=void 0;try{for(var A,M=E[Symbol.iterator]();!(P=(A=M.next()).done);P=!0){var I=A.value;e._normalizeValue(I,l,T),T+=c}}catch(e){j=!0,C=e}finally{try{P||null==M.return||M.return()}finally{if(j)throw C}}}else E&&E.length>c?l.set(E,v):(e._normalizeValue(E,g.target,0),Ui({target:l,source:g.target,start:v,count:S}));v+=S*c}else e._normalizeValue(E,l,v),v+=c}}catch(e){_=!0,x=e}finally{try{b||null==k.return||k.return()}finally{if(_)throw x}}e.constant=!1}},{key:"_validateAttributeUpdaters",value:function(){var e=this.settings;if(!(e.noAlloc||"function"==typeof e.update))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}},{key:"_checkAttributeArray",value:function(){var e=this.value,t=Math.min(4,this.size);if(e&&e.length>=t){var n=!0;switch(t){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}},{key:"startIndices",get:function(){return this.state.startIndices},set:function(e){this.state.startIndices=e}}]),t}(Ii),ta={attributeUpdateMessages:[]},na={};function ra(e){var t;yn.level>0&&na[e]&&(t=na[e]).call.apply(t,arguments)}function ia(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}Qi=yn,na={"layer.changeFlag":function(e,t,n){Qi.log(3,"".concat(e.id," ").concat(t,": "),n[t])()},"layer.initialize":function(e){Qi.log(1,"Initializing ".concat(e))()},"layer.update":function(e,t){if(t){var n=e.getChangeFlags();Qi.log(2,"Updating ".concat(e," because: ").concat(Object.keys(n).filter((function(e){return n[e]})).join(", ")))()}else Qi.log(4,"".concat(e," does not need update"))()},"layer.matched":function(e,t){t&&Qi.log(4,"Matched ".concat(e,", state transfered"))()},"layer.finalize":function(e){Qi.log(1,"Finalizing ".concat(e))()},"compositeLayer.renderLayers":function(e,t,n){t?Qi.log(2,"Composite layer rendered new subLayers ".concat(e),n)():Qi.log(4,"Composite layer reused subLayers ".concat(e),n)()},"layerManager.setLayers":function(e,t,n){t&&Qi.log(2,"Updating ".concat(n.length," deck layers"))()},"layerManager.activateViewport":function(e,t){Qi.log(3,"Viewport changed",t)()},"attributeManager.invalidate":function(e,t,n){Qi.log(1,n?"invalidated attributes ".concat(n," (").concat(t,") for ").concat(e.id):"invalidated all attributes for ".concat(e.id))()},"attributeManager.updateStart":function(e){ta.attributeUpdateMessages.length=0,ta.attributeManagerUpdateStart=Date.now()},"attributeManager.updateEnd":function(e,t){var n=Math.round(Date.now()-ta.attributeManagerUpdateStart);Qi.groupCollapsed(2,"Updated attributes for ".concat(t," instances in ").concat(e.id," in ").concat(n,"ms"))();var r=!0,i=!1,a=void 0;try{for(var o,s=ta.attributeUpdateMessages[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;Qi.log(3,u)()}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}Qi.groupEnd(2)()},"attribute.updateStart":function(e){ta.attributeUpdateStart=Date.now()},"attribute.allocate":function(e,t){var n="".concat(e.id," allocated ").concat(t);ta.attributeUpdateMessages.push(n)},"attribute.updateEnd":function(e,t){var n=Math.round(Date.now()-ta.attributeUpdateStart),r="".concat(e.id," updated ").concat(t," in ").concat(n,"ms");ta.attributeUpdateMessages.push(r)},"deckRenderer.renderLayers":function(e,t,n){var r=n.pass,i=n.redrawReason,a=n.stats,o=!0,s=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value,p=h.totalCount,f=h.visibleCount,d=h.compositeCount,v=h.pickableCount,m=p-d-f;Qi.log(2,"RENDER #".concat(e.renderCount,"   ").concat(f," (of ").concat(p," layers) to ").concat(r," because ").concat(i,"   (").concat(m," hidden, ").concat(d," composite ").concat(v," pickable)"))(),a&&a.get("Redraw Layers").add(f)}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}};var aa="void main() {gl_FragColor = vec4(0);}",oa="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",sa="#version 300 es\n".concat(oa);function ua(e,t){t=Array.isArray(t)?t:[t];var n=e.replace(/^\s+/,"").split(/\s+/),r=Object(g.a)(n,3),i=r[0],a=r[1],o=r[2];return t.includes(i)&&a&&o?{qualifier:i,type:a,name:o.split(";")[0]}:null}function la(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.version,n=void 0===t?100:t,r=e.input,i=e.inputType,a=e.output;if(!r)return 300===n?sa:n>300?"#version ".concat(n,"\n").concat(oa):aa;var o=ha(r,i);return n>=300?"#version ".concat(n," ").concat(300===n?"es":"","\nin ").concat(i," ").concat(r,";\nout vec4 ").concat(a,";\nvoid main() {\n  ").concat(a," = ").concat(o,";\n}"):"varying ".concat(i," ").concat(r,";\nvoid main() {\n  gl_FragColor = ").concat(o,";\n}")}function ca(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return ia(!1),null}}function ha(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return ia(!1),null}}var pa=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),Un(e),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).initialize(r),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){return Object(On.h)(e)}}]),Object(p.a)(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Zn(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),i=this._getBufferParams(t),a=i.buffer,o=i.byteSize,s=i.byteOffset;return r<0?(this.unused[e]=a,On.i.warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,a,s,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof pr==!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.byteSize,i=t.byteOffset;this._bindBuffer(e,n,i,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=t&&t.handle;return i&&void 0!==r?this.gl.bindBufferRange(35982,e,i,n,r):this.gl.bindBufferBase(35982,e,i),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(Kn),fa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(p.a)(e,[{key:"setupResources",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.bindings[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setupTransformFeedback(o,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.varyings;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceBuffers,r=t.transformFeedback,i=Object.assign({},n,e.attributes);return{attributes:i,transformFeedback:r}}},{key:"swap",value:function(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e)}},{key:"getBuffer",value:function(e){var t=this.bindings[this.currentIndex].feedbackBuffers,n=e?t[e]:null;return n?n instanceof pr?n:n.buffer:null}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.varyingName,n=this.getBuffer(t);return n?n.getData():null}},{key:"delete",value:function(){for(var e in this.resources)this.resources[e].delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Bn(Object(On.h)(this.gl))}},{key:"_getFeedbackBuffers",value:function(e){var t=e.sourceBuffers,n=void 0===t?{}:t,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(var i in this.feedbackMap){var a=this.feedbackMap[i];i in n&&(r[a]=i)}for(var o in Object.assign(r,e.feedbackBuffers),r){var s=r[o];if("string"==typeof s){var u=n[s],l=u.byteLength,c=u.usage,h=u.accessor;r[o]=this._createNewBuffer(o,{byteLength:l,usage:c,accessor:h})}}return r}},{key:"_setupBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceBuffers,n=void 0===t?null:t;Object.assign(this.feedbackMap,e.feedbackMap);var r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}},{key:"_setupTransformFeedback",value:function(e,t){var n=t.model.program;e.transformFeedback=new pa(this.gl,{program:n,buffers:e.feedbackBuffers})}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){var t=this._swapBuffers(this.bindings[this.currentIndex]),n=t.sourceBuffers,r=t.feedbackBuffers,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}},{key:"_updateBinding",value:function(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}},{key:"_swapBuffers",value:function(e){if(!this.feedbackMap)return null;var t=Object.assign({},e.sourceBuffers),n=Object.assign({},e.feedbackBuffers);for(var r in this.feedbackMap){var i=this.feedbackMap[r];t[r]=e.feedbackBuffers[i],n[i]=e.sourceBuffers[r],Bn(n[i]instanceof pr)}return{sourceBuffers:t,feedbackBuffers:n}}},{key:"_createNewBuffer",value:function(e,t){var n=new pr(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}}]),e}();function da(e){var t=100,n=e.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){var r=parseInt(n[1],10);Number.isFinite(r)&&(t=r)}return t}var va,ma=(va={},Object(d.a)(va,"vs","#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n"),Object(d.a)(va,"fs","#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"),va),ya=/void main\s*\([^)]*\)\s*\{\n?/,ga=/}\n?[^{}]*$/,ba=[];function _a(e){var t={};return ia(Array.isArray(e)&&e.length>1),e.forEach((function(e){for(var n in e)t[n]=t[n]?"".concat(t[n],"\n").concat(e[n]):e[n]})),t}var xa,wa={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null};function ka(e){var t=e.vs,n=e.sourceTextureMap,r=e.targetTextureVarying,i=e.targetTexture,a=Object.keys(n).length,o=null,s={},u=t,l={};if(a>0||r){var c=u.split("\n"),h=c.slice();if(c.forEach((function(e,t,i){if(a>0){var u=function(e,t){var n={},r=function(e){return ua(e,["attribute","in"])}(e);if(!r)return null;var i=r.type,a=r.name;if(a&&t[a]){var o="// ".concat(e," => Replaced by Transform with a sampler"),s=function(e){var t="".concat("transform_uSampler_").concat(e),n="".concat("transform_uSize_").concat(e),r="  uniform sampler2D ".concat(t,";\n  uniform vec2 ").concat(n,";");return{samplerName:t,sizeName:n,uniformDeclerations:r}}(a),u=s.samplerName,l=s.sizeName,c=s.uniformDeclerations,h=function(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return ia(!1),null}}(i),p="  ".concat(i," ").concat(a," = transform_getInput(").concat(u,", ").concat(l,").").concat(h,";\n");return n[u]=a,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":p},samplerTextureMap:n}}return null}(e,n);if(u){var c=u.updatedLine,p=u.inject;h[t]=c,l=_a([l,p]),Object.assign(s,u.samplerTextureMap),a--}}r&&!o&&(o=function(e,t){var n=ua(e,["varying","out"]);if(!n)return null;return n.name===t?n.type:null}(e,r))})),r){Bn(i);var p="".concat("transform_uSize_").concat(r),f="uniform vec2 ".concat(p,";\n"),d="     vec2 ".concat("transform_position"," = transform_getPos(").concat(p,");\n     gl_Position = vec4(").concat("transform_position",", 0, 1.);\n");l=_a([l,{"vs:#decl":f,"vs:#main-start":d}])}u=h.join("\n")}return{vs:u,targetTextureType:o,inject:l,samplerTextureMap:s}}function Oa(e){var t,n,r=e.sourceTextureMap,i=e.targetTextureVarying,a=e.targetTexture,o={};for(var s in i&&(t=a.width,n=a.height,o["".concat("transform_uSize_").concat(i)]=[t,n]),r){var u=r[s];t=u.width,n=u.height,o["".concat("transform_uSize_").concat(s)]=[t,n]}return o}var Ea=(xa={},Object(d.a)(xa,10241,9728),Object(d.a)(xa,10240,9728),Object(d.a)(xa,10242,33071),Object(d.a)(xa,10243,33071),xa),Sa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.gl=t,this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}return Object(p.a)(e,[{key:"updateModelProps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._processVertexShader(e);return Object.assign({},e,t)}},{key:"getDrawOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.framebuffer,i=t.targetTexture,a=Object.assign({},e.attributes),o=Object.assign({},e.uniforms),s=Object.assign({},e.parameters),u=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){for(var l in a.transform_elementID=this.elementIDBuffer,this.samplerTextureMap){var c=this.samplerTextureMap[l];o[l]=n[c]}this._setSourceTextureParameters();var h=Oa({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i});Object.assign(o,h)}return this.hasTargetTexture&&(u=!1,s.viewport=[0,0,r.width,r.height]),{attributes:a,framebuffer:r,uniforms:o,discard:u,parameters:s}}},{key:"swap",value:function(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupTextures(e)}},{key:"getTargetTexture",value:function(){return this.bindings[this.currentIndex].targetTexture}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packed,n=void 0!==t&&t,r=this.bindings[this.currentIndex].framebuffer,i=Br(r);if(!n)return i;for(var a=i.constructor,o=ca(this.targetTextureType),s=new a(i.length*o/4),u=0,l=0;l<i.length;l+=4)for(var c=0;c<o;c++)s[u++]=i[l+c];return s}},{key:"getFramebuffer",value:function(){return this.bindings[this.currentIndex].framebuffer}},{key:"delete",value:function(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._targetTextureVarying,n=e._swapTexture;this._swapTexture=n,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}},{key:"_createTargetTexture",value:function(e){var t=e.sourceTextures,n=e.textureOrReference;if(n instanceof Or)return n;var r=t[n];return r?(this._targetRefTexName=n,this._createNewTexture(r)):null}},{key:"_setupTextures",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e._sourceTextures,n=void 0===t?{}:t,r=e._targetTexture,i=this._createTargetTexture({sourceTextures:n,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceTextures:n,targetTexture:i}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}},{key:"_updateElementIDBuffer",value:function(e){if(!("number"!=typeof e||this.elementCount>=e)){var t=new Float32Array(e);t.forEach((function(e,t,n){n[t]=t})),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new pr(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}}},{key:"_updateBindings",value:function(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){var t=this._swapTextures(this.bindings[this.currentIndex]),n=t.sourceTextures,r=t.targetTexture,i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}},{key:"_updateBinding",value:function(e,t){var n=t.sourceTextures,r=t.targetTexture;if(e||(e={sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,n),r){e.targetTexture=r;var i=r.width,a=r.height,o=e.framebuffer;o?(o.update({attachments:Object(d.a)({},36064,r),resizeAttachments:!1}),o.resize({width:i,height:a})):e.framebuffer=new Wr(this.gl,{id:"".concat(this.id||"transform","-framebuffer"),width:i,height:a,attachments:Object(d.a)({},36064,r)})}return e}},{key:"_setSourceTextureParameters",value:function(){var e=this.currentIndex,t=this.bindings[e].sourceTextures;for(var n in t)t[n].setParameters(Ea)}},{key:"_swapTextures",value:function(e){if(!this._swapTexture)return null;var t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}},{key:"_createNewTexture",value:function(e){var t,n=function(e,t){Bn(e instanceof Or||e instanceof Dr||e instanceof Fr);var n=e.constructor,r=e.gl,i=e.width,a=e.height,o=e.format,s=e.type,u=e.dataFormat,l=e.border,c=e.mipmaps;return new n(r,Object.assign({width:i,height:a,format:o,type:s,dataFormat:u,border:l,mipmaps:c},t))}(e,{parameters:(t={},Object(d.a)(t,10241,9728),Object(d.a)(t,10240,9728),Object(d.a)(t,10242,33071),Object(d.a)(t,10243,33071),t),pixelStore:Object(d.a)({},37440,!1)});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}},{key:"_getNextIndex",value:function(){return(this.currentIndex+1)%2}},{key:"_processVertexShader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.bindings[this.currentIndex],n=t.sourceTextures,r=t.targetTexture,i=ka({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),a=i.vs,o=i.uniforms,s=i.targetTextureType,u=i.inject,l=i.samplerTextureMap,c=_a([e.inject||{},u]);this.targetTextureType=s,this.samplerTextureMap=l;var h=e._fs||la({version:da(a),input:this.targetTextureVarying,inputType:s,output:"transform_output"}),p=this.hasSourceTextures||this.targetTextureVarying?[wa].concat(e.modules||[]):e.modules;return{vs:a,fs:h,modules:p,uniforms:o,inject:c}}}]),e}();function Ta(e,t,n){switch(t){case 300:return n?function(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e):function(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}(e);case 100:return n?function(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e):function(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}(e);default:throw new Error("unknown GLSL version ".concat(t))}}var Pa={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function ja(e){var t=Ca(e);return"object"===t?e?"type"in e?Object.assign({},e,Pa[e.type]):"value"in e?(t=Ca(e.value),Object.assign({type:t},e,Pa[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},Pa[t])}function Ca(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Object(rt.a)(e)}var Aa=function(){function e(t){var n=t.name,r=t.vs,i=t.fs,a=t.dependencies,o=void 0===a?[]:a,s=t.uniforms,l=t.getUniforms,c=t.deprecations,h=void 0===c?[]:c,p=t.defines,f=void 0===p?{}:p,d=t.inject,v=void 0===d?{}:d,m=t.vertexShader,y=t.fragmentShader;Object(u.a)(this,e),ia("string"==typeof n),this.name=n,this.vs=r||m,this.fs=i||y,this.getModuleUniforms=l,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(h),this.defines=f,this.injections=function(e){var t={vs:{},fs:{}};for(var n in e){var r=e[n],i=n.slice(0,2);"string"==typeof r&&(r={injection:r}),t[i][n]=r}return t}(v),s&&(this.uniforms=function(e){var t={};for(var n in e){var r=ja(e[n]);t[n]=r}return t}(s))}return Object(p.a)(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case"vs":n=Ta(this.vs||"",t,!0);break;case"fs":n=Ta(this.fs||"",t,!1);break;default:ia(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n.new)():t.removed(n.old,n.new)())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var r in n){var i=n[r];r in e&&!i.private?(i.validate&&ia(i.validate(e[r],i),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=i.value}return t}}]),e}();function Ma(e){return Ia(function e(t,n){return t.map((function(t){return t instanceof Aa||(ia("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),ia(t.name,"shader module has no name"),(t=new Aa(t)).dependencies=e(t.dependencies)),t}))}(e))}function Ia(e){var t={},n={};return Ra({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}function Ra(e){var t=e.modules,n=e.level,r=e.moduleMap,i=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;r[c.name]=c,(void 0===i[c.name]||i[c.name]<n)&&(i[c.name]=n)}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}var h=!0,p=!1,f=void 0;try{for(var d,v=t[Symbol.iterator]();!(h=(d=v.next()).done);h=!0){var m=d.value;m.dependencies&&Ra({modules:m.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}}catch(e){p=!0,f=e}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}}function La(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!=typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i}var za={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Da={};Object.keys(za).forEach((function(e){Da[e]=e}));var Fa,Ba={};function Na(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=za[t];if(ia(r,t),!La(n))return!0;if(t in Ba)return Ba[t];var i=r[0],a=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(a,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var u=e.getShaderParameter(s,35713);return e.deleteShader(s),Ba[t]=u,u}function Ua(e,t){var n=za[t];ia(n,t);var r=function(e){return Boolean(e&&2===e._version)}(e)&&n[1]||n[0],i="string"==typeof r?Boolean(e.getExtension(r)):r;return ia(!1===i||!0===i),i}function Va(e,t){return(t=Array.isArray(t)?t:[t]).every((function(t){return Ua(e,t)}))}var Wa,qa="\n\n".concat("__LUMA_INJECT_DECLARATIONS__","\n\n"),Ga=(Fa={},Object(d.a)(Fa,"vs","vertex"),Object(d.a)(Fa,"fs","fragment"),Fa);function Ha(e,t){var n=t.vs,r=t.fs,i=Ma(t.modules||[]);return{gl:e,vs:Za(e,Object.assign({},t,{source:n,type:"vs",modules:i})),fs:Za(e,Object.assign({},t,{source:r,type:"fs",modules:i})),getUniforms:Xa(i)}}function Za(e,t){var n=t.id,r=t.source,i=t.type,a=t.modules,o=t.defines,s=void 0===o?{}:o,u=t.hookFunctions,l=void 0===u?[]:u,c=t.inject,h=void 0===c?{}:c,p=t.prologue,f=void 0===p||p,d=t.log;ia("string"==typeof r,"shader source must be a string");var v="vs"===i,m=r.split("\n"),y=100,b="",_=r;0===m[0].indexOf("#version ")?(y=300,b=m[0],_=m.slice(1).join("\n")):b="#version ".concat(y);var x={};a.forEach((function(e){Object.assign(x,e.getDefines())})),Object.assign(x,s);var w=f?"".concat(b,"\n").concat(function(e){var t=e.id,n=e.source,r=e.type;return t&&"string"==typeof t&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(t,"_").concat(Ga[r],"\n\n"):""}({id:n,source:r,type:i}),"\n").concat(function(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(Ga[t].toUpperCase(),"\n")}({type:i}),"\n").concat(function(e){switch(function(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||7936),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||7937);return{gpuVendor:function(e,t){if(e.match(/NVIDIA/i)||t.match(/NVIDIA/i))return"NVIDIA";if(e.match(/INTEL/i)||t.match(/INTEL/i))return"INTEL";if(e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i))return"AMD";return"UNKNOWN GPU"}(n,r),vendor:n,renderer:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}(e).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(e),"\n").concat(function(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return Va(e,Da.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),Va(e,Da.GLSL_DERIVATIVES)&&Na(e,Da.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),Va(e,Da.GLSL_FRAG_DATA)&&Na(e,Da.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),Va(e,Da.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}(e),"\n").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var i=e[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}0===t&&(n+="\n");return n}(x),"\n").concat(v?"":"precision highp float;\n\n","\n"):"".concat(b,"\n");l=function(e){var t={vs:{},fs:{}};return e.forEach((function(e){var n;"string"!=typeof e?e=(n=e).hook:n={};var r=(e=e.trim()).split(":"),i=Object(g.a)(r,2),a=i[0],o=i[1],s=e.replace(/\(.+/,"");t[a][s]=Object.assign(n,{signature:o})})),t}(l);var k={},O={};for(var E in h){var S="string"==typeof h[E]?{injection:h[E],order:0}:h[E];E.match(/^(v|f)s:/)?"#"===E[3]?O[E]=[S]:k[E]=[S]:O[E]=[S]}var T=!0,P=!1,j=void 0;try{for(var C,A=a[Symbol.iterator]();!(T=(C=A.next()).done);T=!0){var M=C.value;d&&M.checkDeprecations(_,d),w+=M.getModuleSource(i,y);var I=M.injections[i];for(var R in I)R.match(/^(v|f)s:#/)?(O[R]=O[R]||[],O[R].push(I[R])):(k[R]=k[R]||[],k[R].push(I[R]))}}catch(e){P=!0,j=e}finally{try{T||null==A.return||A.return()}finally{if(P)throw j}}return w+=qa,w+=function(e,t){var n="";for(var r in e){var i=e[r];if(n+="void ".concat(i.signature," {\n"),i.header&&(n+="  ".concat(i.header)),t[r]){var a=t[r];a.sort((function(e,t){return e.order-t.order}));var o=!0,s=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var h=l.value;n+="  ".concat(h.injection,"\n")}}catch(e){s=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(s)throw u}}}i.footer&&(n+="  ".concat(i.footer)),n+="}\n"}return n}(l[i],k),w=function(e,t,n,r){var i="vs"===t,a=function(t){var r=n[t];r.sort((function(e,t){return e.order-t.order})),ba.length=r.length;for(var a=0,o=r.length;a<o;++a)ba[a]=r[a].injection;var s="".concat(ba.join("\n"),"\n");switch(t){case"vs:#decl":i&&(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"vs:#main-start":i&&(e=e.replace(ya,(function(e){return e+s})));break;case"vs:#main-end":i&&(e=e.replace(ga,(function(e){return s+e})));break;case"fs:#decl":i||(e=e.replace("__LUMA_INJECT_DECLARATIONS__",s));break;case"fs:#main-start":i||(e=e.replace(ya,(function(e){return e+s})));break;case"fs:#main-end":i||(e=e.replace(ga,(function(e){return s+e})));break;default:e=e.replace(t,(function(e){return e+s}))}};for(var o in n)a(o);return e=e.replace("__LUMA_INJECT_DECLARATIONS__",""),r&&(e=e.replace(/\}\s*$/,(function(e){return e+ma[t]}))),e}(w+=_,i,O)}function Xa(e){return function(t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value.getUniforms(t,n);Object.assign(n,u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}var Ya=(Wa={},Object(d.a)(Wa,5126,co.bind(null,"uniform1fv",to,1,ho)),Object(d.a)(Wa,35664,co.bind(null,"uniform2fv",to,2,ho)),Object(d.a)(Wa,35665,co.bind(null,"uniform3fv",to,3,ho)),Object(d.a)(Wa,35666,co.bind(null,"uniform4fv",to,4,ho)),Object(d.a)(Wa,5124,co.bind(null,"uniform1iv",no,1,ho)),Object(d.a)(Wa,35667,co.bind(null,"uniform2iv",no,2,ho)),Object(d.a)(Wa,35668,co.bind(null,"uniform3iv",no,3,ho)),Object(d.a)(Wa,35669,co.bind(null,"uniform4iv",no,4,ho)),Object(d.a)(Wa,35670,co.bind(null,"uniform1iv",no,1,ho)),Object(d.a)(Wa,35671,co.bind(null,"uniform2iv",no,2,ho)),Object(d.a)(Wa,35672,co.bind(null,"uniform3iv",no,3,ho)),Object(d.a)(Wa,35673,co.bind(null,"uniform4iv",no,4,ho)),Object(d.a)(Wa,35674,co.bind(null,"uniformMatrix2fv",to,4,po)),Object(d.a)(Wa,35675,co.bind(null,"uniformMatrix3fv",to,9,po)),Object(d.a)(Wa,35676,co.bind(null,"uniformMatrix4fv",to,16,po)),Object(d.a)(Wa,35678,lo),Object(d.a)(Wa,35680,lo),Object(d.a)(Wa,5125,co.bind(null,"uniform1uiv",ro,1,ho)),Object(d.a)(Wa,36294,co.bind(null,"uniform2uiv",ro,2,ho)),Object(d.a)(Wa,36295,co.bind(null,"uniform3uiv",ro,3,ho)),Object(d.a)(Wa,36296,co.bind(null,"uniform4uiv",ro,4,ho)),Object(d.a)(Wa,35685,co.bind(null,"uniformMatrix2x3fv",to,6,po)),Object(d.a)(Wa,35686,co.bind(null,"uniformMatrix2x4fv",to,8,po)),Object(d.a)(Wa,35687,co.bind(null,"uniformMatrix3x2fv",to,6,po)),Object(d.a)(Wa,35688,co.bind(null,"uniformMatrix3x4fv",to,12,po)),Object(d.a)(Wa,35689,co.bind(null,"uniformMatrix4x2fv",to,8,po)),Object(d.a)(Wa,35690,co.bind(null,"uniformMatrix4x3fv",to,12,po)),Object(d.a)(Wa,35679,lo),Object(d.a)(Wa,35682,lo),Object(d.a)(Wa,36289,lo),Object(d.a)(Wa,36292,lo),Object(d.a)(Wa,36293,lo),Object(d.a)(Wa,36298,lo),Object(d.a)(Wa,36299,lo),Object(d.a)(Wa,36300,lo),Object(d.a)(Wa,36303,lo),Object(d.a)(Wa,36306,lo),Object(d.a)(Wa,36307,lo),Object(d.a)(Wa,36308,lo),Object(d.a)(Wa,36311,lo),Wa),Ka={},Ja={},$a={},Qa=[0];function eo(e,t,n,r){1===t&&"boolean"==typeof e&&(e=e?1:0),Number.isFinite(e)&&(Qa[0]=e,e=Qa);var i=e.length;if(i%t&&On.i.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=e[o];return a}function to(e,t){return eo(e,t,Float32Array,Ka)}function no(e,t){return eo(e,t,Int32Array,Ja)}function ro(e,t){return eo(e,t,Uint32Array,$a)}function io(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=e.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function ao(e,t,n){var r=Ya[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,e,t)}function oo(e,t,n){for(var r in e){var i=e[r];if((!n||Boolean(n[r]))&&!so(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),i),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function so(e){return Array.isArray(e)||ArrayBuffer.isView(e)?function(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof _r||(e instanceof Pr||e instanceof Wr&&Boolean(e.texture))))}function uo(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(e[t])for(var r=e[t],i=0,a=n.length;i<a;++i)r[i]=n[i];else e[t]=n.slice();else e[t]=n}function lo(){var e=null;return function(t,n,r){var i=e!==r;return i&&(t.uniform1i(n,r),e=r),i}}function co(e,t,n,r){var i=null,a=null;return function(o,s,u){var l=t(u,n),c=l.length,h=!1;if(null===i)i=new Float32Array(c),a=c,h=!0;else{Bn(a===c,"Uniform length cannot change.");for(var p=0;p<c;++p)if(l[p]!==i[p]){h=!0;break}}return h&&(r(o,e,s,l),i.set(l)),h}}function ho(e,t,n,r){e[t](n,r)}function po(e,t,n,r){e[t](n,!1,r)}function fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}function vo(e,t,n,r){for(var i=e.split(/\r?\n/),a={},o={},s=r||fo(t)||"(unnamed)",u="".concat(function(e){switch(e){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(s),l=0;l<i.length;l++){var c=i[l];if(!(c.length<=1)){var h=c.split(":"),p=h[0],f=parseInt(h[2],10);if(isNaN(f))throw new Error("GLSL compilation error in ".concat(u,": ").concat(e));"WARNING"!==p?a[f]=c:o[f]=c}}var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map((function(e,r){var a=r+t,o=String(a).length;return yo(a,i-o)+n+e}))}(t);return{shaderName:u,errors:mo(a,d),warnings:mo(o,d)}}function mo(e,t){for(var n="",r=0;r<t.length;r++){var i=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(i,"\n"),e[r+1])){var a=e[r+1],o=a.split(":",3),s=o[0],u=parseInt(o[1],10)||0,l=a.substring(o.join(":").length+1).trim();n+=yo("^^^ ".concat(s,": ").concat(l,"\n\n"),u)}}return n}function yo(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var go,bo=function(e){function t(e,n){var r;Object(u.a)(this,t),Nn(e),Bn("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string");var i=fo(n.source,null)||n.id||Gn("unnamed ".concat(t.getTypeName(n.shaderType)));return(r=Object(l.a)(this,Object(c.a)(t).call(this,e,{id:i}))).shaderType=n.shaderType,r.source=n.source,r.initialize(n),r}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Bn(!1),"unknown"}}}]),Object(p.a)(t,[{key:"initialize",value:function(e){var t=e.source,n=fo(t,null);n&&(this.id=Gn(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return fo(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var n=this.gl.getShaderInfoLog(this.handle),r=vo(n,this.source,this.shaderType,this.id),i=r.shaderName,a=r.errors,o=r.warnings;throw On.i.error("GLSL compilation errors in ".concat(i,"\n").concat(a))(),On.i.warn("GLSL compilation warnings in ".concat(i,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(Kn),_o=function(e){function t(e,n){return Object(u.a)(this,t),"string"==typeof n&&(n={source:n}),Object(l.a)(this,Object(c.a)(t).call(this,e,Object.assign({},n,{shaderType:35633})))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(bo),xo=function(e){function t(e,n){return Object(u.a)(this,t),"string"==typeof n&&(n={source:n}),Object(l.a)(this,Object(c.a)(t).call(this,e,Object.assign({},n,{shaderType:35632})))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(bo),wo=(go={},Object(d.a)(go,5126,[5126,1,"float"]),Object(d.a)(go,35664,[5126,2,"vec2"]),Object(d.a)(go,35665,[5126,3,"vec3"]),Object(d.a)(go,35666,[5126,4,"vec4"]),Object(d.a)(go,5124,[5124,1,"int"]),Object(d.a)(go,35667,[5124,2,"ivec2"]),Object(d.a)(go,35668,[5124,3,"ivec3"]),Object(d.a)(go,35669,[5124,4,"ivec4"]),Object(d.a)(go,5125,[5125,1,"uint"]),Object(d.a)(go,36294,[5125,2,"uvec2"]),Object(d.a)(go,36295,[5125,3,"uvec3"]),Object(d.a)(go,36296,[5125,4,"uvec4"]),Object(d.a)(go,35670,[5126,1,"bool"]),Object(d.a)(go,35671,[5126,2,"bvec2"]),Object(d.a)(go,35672,[5126,3,"bvec3"]),Object(d.a)(go,35673,[5126,4,"bvec4"]),Object(d.a)(go,35674,[5126,8,"mat2"]),Object(d.a)(go,35685,[5126,8,"mat2x3"]),Object(d.a)(go,35686,[5126,8,"mat2x4"]),Object(d.a)(go,35675,[5126,12,"mat3"]),Object(d.a)(go,35687,[5126,12,"mat3x2"]),Object(d.a)(go,35688,[5126,12,"mat3x4"]),Object(d.a)(go,35676,[5126,16,"mat4"]),Object(d.a)(go,35689,[5126,16,"mat4x2"]),Object(d.a)(go,35690,[5126,16,"mat4x3"]),go);function ko(e){switch(e){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Bn(!1),0}}function Oo(e){var t=wo[e];if(!t)return null;var n=Object(g.a)(t,2);return{type:n[0],components:n[1]}}function Eo(e,t){switch(e){case 5120:case 5121:case 5122:case 5123:e=5126}for(var n in wo){var r=Object(g.a)(wo[n],3),i=r[0],a=r[1],o=r[2];if(i===e&&a===t)return{glType:n,name:o}}return null}var So=function(){function e(t){Object(u.a)(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(p.a)(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var i=t.getActiveAttrib(e.handle,r),a=i.name,o=i.type,s=i.size,u=t.getAttribLocation(e.handle,a);u>=0&&this._addAttribute(u,a,o,s)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(On.h)(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var i=t.getTransformFeedbackVarying(e.handle,r),a=i.name,o=i.type,s=i.size;this._addVarying(r,a,o,s)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var i=Oo(n),a={type:i.type,size:r*i.components};this._inferProperties(e,t,a);var o={location:e,name:t,accessor:new ur(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[e]=o,this.attributeInfosByName[o.name]=o}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var i=Oo(n),a=i.type,o=i.components,s={location:e,name:t,accessor:new ur({type:a,size:r*o})};this.varyingInfos.push(s),this.varyingInfosByName[s.name]=s}}]),e}(),To=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Po=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).stubRemovedMethods("Program","v6.0",To),n._isCached=!1,n.initialize(r),Object.seal(Object(h.a)(n)),n._setId(r.id),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,n=e.vs,r=e.fs,i=e.varyings,a=e.bufferMode,o=void 0===a?35981:a;return this.hash=t||"",this.vs="string"==typeof n?new _o(this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"==typeof r?new xo(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Bn(this.vs instanceof _o),Bn(this.fs instanceof xo),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,i&&i.length>0&&(Un(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new So(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Rt(Object(c.a)(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,i=void 0===r?4:r,a=e.vertexCount,o=e.offset,s=void 0===o?0:o,u=e.start,l=e.end,c=e.isIndexed,h=void 0!==c&&c,p=e.indexType,f=void 0===p?5123:p,d=e.instanceCount,v=void 0===d?0:d,m=e.isInstanced,y=void 0===m?v>0:m,g=e.vertexArray,b=void 0===g?null:g,_=e.transformFeedback,x=e.framebuffer,w=e.parameters,k=void 0===w?{}:w,O=e.uniforms,E=e.samplers;if((O||E)&&(On.i.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(O||{})),On.i.priority>=n){var S=x?x.id:"default",T="mode=".concat(Wn(this.gl,i)," verts=").concat(a," ")+"instances=".concat(v," indexType=").concat(Wn(this.gl,f)," ")+"isInstanced=".concat(y," isIndexed=").concat(h," ")+"Framebuffer=".concat(S);On.i.log(n,T)()}return Bn(b),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(b.bindForDraw(a,v,(function(){if(void 0!==x&&(k=Object.assign({},k,{framebuffer:x})),_){var e=ko(i);_.begin(e)}t._bindTextures(),Object(xn.d)(t.gl,k,(function(){h&&y?t.gl.drawElementsInstanced(i,a,f,s,v):h&&Object(On.h)(t.gl)&&!isNaN(u)&&!isNaN(l)?t.gl.drawRangeElements(i,u,l,a,f,s):h?t.gl.drawElements(i,a,f,s):y?t.gl.drawArraysInstanced(i,s,a,v):t.gl.drawArrays(i,s,a)})),_&&_.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in On.i.priority>=2&&oo(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r){var i=n,a=!1;if(i instanceof Wr&&(i=i.texture),i instanceof _r)if(a=this.uniforms[t]!==n){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var o=i,s=r.textureIndex;o.bind(s),i=s,o.loaded||(this._texturesRenderable=!1),this._textureUniforms[t]=o}else i=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(i)||a)&&uo(this.uniforms,t,n)}}return this}},{key:"_areTexturesRenderable",value:function(){if(this._texturesRenderable)return!0;for(var e in this._texturesRenderable=!0,this._textureUniforms){var t=this._textureUniforms[e];this._texturesRenderable=this._texturesRenderable&&t.loaded}return this._texturesRenderable}},{key:"_bindTextures",value:function(){for(var e in this._textureUniforms){var t=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(t)}}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new _o({handle:u});break;case 35632:n.fs=new xo({handle:u})}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Gn(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=(e=e.replace(/shader/i,""))?"".concat(e,"-program"):"program"}},{key:"_compileAndLink",value:function(){var e=this.gl;if((e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),On.i.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),On.i.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||On.i.level>0)&&(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35714)))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=io(n.name),i=r.name,a=(r.isArray,e.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=ao(e,a,n),n.size>1)for(var o=0;o<n.size;o++)a=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=ao(e,a,n)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(Kn),jo=function(){function e(t){Object(u.a)(this,e),this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(p.a)(e,null,[{key:"getDefaultProgramManager",value:function(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new e(t),t.luma.defaultProgramManager}}]),Object(p.a)(e,[{key:"addDefaultModule",value:function(e){this._defaultModules.find((function(t){return t.name===e.name}))||this._defaultModules.push(e),this.stateHash++}},{key:"removeDefaultModule",value:function(e){var t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter((function(e){return e.name!==t})),this.stateHash++}},{key:"addShaderHook",value:function(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}},{key:"get",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.vs,r=void 0===n?"":n,i=t.fs,a=void 0===i?"":i,o=t.defines,s=void 0===o?{}:o,u=t.inject,l=void 0===u?{}:u,c=t.varyings,h=void 0===c?[]:c,p=t.bufferMode,f=void 0===p?35981:p,d=this._getModuleList(t.modules),v=this._getHash(r),m=this._getHash(a),y=d.map((function(t){return e._getHash(t.name)})).sort(),g=h.map((function(t){return e._getHash(t)})),b=Object.keys(s).sort(),_=Object.keys(l).sort(),x=[],w=[],k=!0,O=!1,E=void 0;try{for(var S,T=b[Symbol.iterator]();!(k=(S=T.next()).done);k=!0){var P=S.value;x.push(this._getHash(P)),x.push(this._getHash(s[P]))}}catch(e){O=!0,E=e}finally{try{k||null==T.return||T.return()}finally{if(O)throw E}}var j=!0,C=!1,A=void 0;try{for(var M,I=_[Symbol.iterator]();!(j=(M=I.next()).done);j=!0){var R=M.value;w.push(this._getHash(R)),w.push(this._getHash(l[R]))}}catch(e){C=!0,A=e}finally{try{j||null==I.return||I.return()}finally{if(C)throw A}}var L="".concat(v,"/").concat(m,"D").concat(x.join("/"),"M").concat(y.join("/"),"I").concat(w.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(f);if(!this._programCache[L]){var z=Ha(this.gl,{vs:r,fs:a,modules:d,inject:l,defines:s,hookFunctions:this._hookFunctions});this._programCache[L]=new Po(this.gl,{hash:L,vs:z.vs,fs:z.fs,varyings:h,bufferMode:f}),this._getUniforms[L]=z.getUniforms||function(e){},this._useCounts[L]=0}return this._useCounts[L]++,this._programCache[L]}},{key:"getUniforms",value:function(e){return this._getUniforms[e.hash]||null}},{key:"release",value:function(e){var t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}},{key:"_getHash",value:function(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}},{key:"_getModuleList",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Array(this._defaultModules.length+e.length),n={},r=0,i=0,a=this._defaultModules.length;i<a;++i){var o=this._defaultModules[i],s=o.name;t[r++]=o,n[s]=!0}for(var u=0,l=e.length;u<l;++u){var c=e[u],h=c.name;n[h]||(t[r++]=c,n[h]=!0)}return t.length=r,t}}]),e}(),Co=null;function Ao(e,t){var n;return new e((n=e.BYTES_PER_ELEMENT*t,(!Co||Co.byteLength<n)&&(Co=new ArrayBuffer(n)),Co),0,t)}var Mo=n(26),Io=n(51),Ro=n(52);function Lo(e){if(!e&&!Object(Io.a)())return"Node";if(Object(Ro.a)(e))return"Electron";var t="undefined"!=typeof navigator?navigator:{},n=e||t.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";var r=-1!==n.indexOf("MSIE "),i=-1!==n.indexOf("Trident/");return r||i?"IE":Mo.b.chrome?"Chrome":Mo.b.safari?"Safari":Mo.b.mozInnerScreenX?"Firefox":"Unknown"}var zo="elements must be GL.ELEMENT_ARRAY_BUFFER",Do=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,t);var i=r.id||r.program&&r.program.id;return(n=Object(l.a)(this,Object(c.a)(t).call(this,e,Object.assign({},r,{id:i})))).hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(r),Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.constantAttributeZero?Object(On.h)(e)||"Chrome"===Lo():Object(On.h)(e)||e.getExtension("OES_vertex_array_object")}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:Bn(!1)}}}]),Object(p.a)(t,[{key:"delete",value:function(){Rt(Object(c.a)(t.prototype),"delete",this).call(this),this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bn(!t||34963===t.target,zo),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,i=n.type,a=n.stride,o=n.offset,s=n.normalized,u=n.integer,l=n.divisor,c=this.gl;return e=Number(e),this.bind((function(){c.bindBuffer(34962,t.handle),u?(Bn(Object(On.h)(c)),c.vertexAttribIPointer(e,r,i,a,o)):c.vertexAttribPointer(e,r,i,s,a,o),c.enableVertexAttribArray(e),c.vertexAttribDivisor(e,l||0)})),this}},{key:"enable",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!r&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return i||(e=Number(e),this.bind((function(){return r?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,n){var r=this._normalizeConstantArrayValue(t,n),i=r.byteLength*e,a=r.length*e,o=!this.buffer;if(this.buffer=this.buffer||new pr(this.gl,i),o=(o=o||this.buffer.reallocate(i))||!this._compareConstantArrayValues(r,this.bufferValue)){var s=Ao(t.constructor,a);!function(e){for(var t=e.target,n=e.source,r=e.start,i=void 0===r?0:r,a=e.count,o=void 0===a?1:a,s=n.length,u=o*s,l=0,c=i;l<s;l++)t[c++]=n[l];for(;l<u;)l<u-l?(t.copyWithin(i+l,i,i+l),l*=2):(t.copyWithin(i+l,i,i+u-l),l=u)}({target:s,source:r,start:0,count:a}),this.buffer.subData(s),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return Bn(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Bn(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(Bn(Object(On.h)(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Bn(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(Bn(Object(On.h)(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Bn(!1)}}}]),t}(Kn),Fo=/^(.+)__LOCATION_([0-9]+)$/,Bo=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],No=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e);var r=n.id||n.program&&n.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=Do.isSupported(t)?new Do(t):Do.getDefaultArray(t),Xn(this,"VertexArray","v6.0",Bo),this.initialize(n),Object.seal(this)}return Object(p.a)(e,[{key:"delete",value:function(){this.buffer&&this.buffer.delete()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];t._setAttribute(n,r)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),i=r.location,a=r.accessor;return i>=0&&(this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(i,t,a)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),i=r.location,a=r.accessor;return i>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,a),this.values[i]=t,this.accessors[i]=a,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(i,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&(e.vertexArrayObject.isDefaultArray||e.vertexArrayObject.setElementBuffer(null)),e.buffer=e.buffer||new pr(e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof pr&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof pr&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,i=this;return this.vertexArrayObject.bind((function(){i._setConstantAttributes(e,t),i.vertexArrayObject.hasVertexArrays||i.bindBuffers(),r=n(),i.vertexArrayObject.hasVertexArrays||i.unbindBuffers()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var i=this,a=this._getAttributeIndex(e),o=a.location,s=a.name;if(!Number.isFinite(o)||o<0)return this.unused[e]=t,On.i.once(3,(function(){return"unused value ".concat(e," in ").concat(i.id)}))(),this;var u=this._getAttributeInfo(s||o);if(!u)return{location:-1,accessor:null};var l=this.accessors[o]||{},c=ur.resolve(u.accessor,l,n,r),h=c.size,p=c.type;return Bn(Number.isFinite(h)&&Number.isFinite(p)),{location:o,accessor:c}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=Fo.exec(e),r=n?n[1]:e,i=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+i,name:r}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof pr)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof pr){var n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var i=t;this.setConstant(e,i)}else{if(!(t.buffer instanceof pr))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var a=t;this.setBuffer(e,a.buffer,a)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)r=this.values[i],ArrayBuffer.isView(r)&&this._setConstantAttribute(i,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(Do.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){Do.setConstant(this.gl,e,t),this.vertexArrayObject.isDefaultArray&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var i=r.divisor>0;if(e.isInstanced=e.isInstanced||i,n instanceof pr){var a=n;if(i){var o=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,o)}else{var s=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return On.i.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}();function Uo(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,o="[",s=0;s<e.length&&s<r;++s)s>0&&(o+=",".concat(s%a==0?" ":"")),o+=Vo(e[s],t);var u=e.length>r?"...":"]";return"".concat(o).concat(u)}function Vo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1e-16,r=t.isInteger,i=void 0!==r&&r;if(Array.isArray(e)||ArrayBuffer.isView(e))return Uo(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<n)return i?"0":"0.";if(i)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var a=e.toPrecision(2),o=a.indexOf(".0");return o===a.length-2?a.slice(0,-1):a}function Wo(e,t,n,r){var i,a,o=e.gl;if(!t)return a={},Object(d.a)(a,r,"null"),Object(d.a)(a,"Format ","N/A"),a;var s,u,l,c="NOT PROVIDED",h="N/A",p="N/A",f="N/A";if(n&&(c=n.type,h=n.size,s=-1!==(c=String(c).replace("Array","")).indexOf("nt")),t instanceof pr){var v,m,y=t,g=y.getDebugData(),b=g.data;if(u=g.modified?"*":"",l=b,p=(f=y.byteLength)/b.BYTES_PER_ELEMENT/h,n){var _=n.divisor>0;m="".concat(_?"I ":"P "," ").concat(p," (x").concat(h,"=").concat(f," bytes ").concat(Wn(o,c),")")}else s=!0,m="".concat(f," bytes");return v={},Object(d.a)(v,r,"".concat(u).concat(Vo(l,{size:h,isInteger:s}))),Object(d.a)(v,"Format ",m),v}return l=t,h=t.length,s=-1!==(c=String(t.constructor.name).replace("Array","")).indexOf("nt"),i={},Object(d.a)(i,r,"".concat(Vo(l,{size:h,isInteger:s})," (constant)")),Object(d.a)(i,"Format ","".concat(h,"x").concat(c," (constant)")),i}function qo(e,t){var n=Eo(t.type,t.size);return n?"".concat(e," (").concat(n.name,")"):e}function Go(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms,a=e.undefinedOnly,o=void 0!==a&&a;Bn(r);var s=".*_.*",u=".*Matrix",l=r._uniformSetters,c={},h=Object.keys(l).sort(),p=0,f=!0,v=!1,m=void 0;try{for(var y,g=h[Symbol.iterator]();!(f=(y=g.next()).done);f=!0){var b=y.value;b.match(s)||b.match(u)||Ho({table:c,header:n,uniforms:i,uniformName:b,undefinedOnly:o})&&p++}}catch(e){v=!0,m=e}finally{try{f||null==g.return||g.return()}finally{if(v)throw m}}var _=!0,x=!1,w=void 0;try{for(var k,O=h[Symbol.iterator]();!(_=(k=O.next()).done);_=!0){var E=k.value;E.match(u)&&Ho({table:c,header:n,uniforms:i,uniformName:E,undefinedOnly:o})&&p++}}catch(e){x=!0,w=e}finally{try{_||null==O.return||O.return()}finally{if(x)throw w}}var S=!0,T=!1,P=void 0;try{for(var j,C=h[Symbol.iterator]();!(S=(j=C.next()).done);S=!0){var A=j.value;c[A]||Ho({table:c,header:n,uniforms:i,uniformName:A,undefinedOnly:o})&&p++}}catch(e){T=!0,P=e}finally{try{S||null==C.return||C.return()}finally{if(T)throw P}}var M=0,I={};if(!o)for(var R in i){var L=i[R];c[R]||(M++,I[R]=Object(d.a)({Type:"NOT USED: ".concat(L)},n,Vo(L)))}return{table:c,count:p,unusedTable:I,unusedCount:M}}function Ho(e){var t,n=e.table,r=e.header,i=e.uniforms,a=e.uniformName,o=e.undefinedOnly,s=i[a],u=function(e){return null!=e}(s);return(!o||!u)&&(n[a]=(t={},Object(d.a)(t,r,u?Vo(s):"N/A"),Object(d.a)(t,"Uniform Type",u?s:"NOT PROVIDED"),t),!0)}function Zo(e){var t=e.accessor,n=Eo(t.type,t.size);return n?"".concat(n.name," ").concat(e.name):e.name}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Object(d.a)(e,t,n[t])}))}return e}var Yo={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Ko(e,t){var n=(t||{}).attributeMap,r=void 0===n?Yo:n;return r&&r[e]||e}function Jo(e,t){var n;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2}Bn(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}var $o=function(){},Qo={},es=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e);var r=n.id,i=void 0===r?Gn("model"):r;Bn(Object(On.g)(t)),this.id=i,this.gl=t,this.id=n.id||Gn("Model"),this.lastLogTime=0,this.initialize(n)}return Object(p.a)(e,[{key:"initialize",value:function(e){this.props={},this.programManager=e.programManager||jo.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var t=e.program,n=void 0===t?null:t,r=e.vs,i=e.fs,a=e.modules,o=e.defines,s=e.inject,u=e.varyings,l=e.bufferMode;this.programProps={program:n,vs:r,fs:i,modules:a,defines:o,inject:s,varyings:u,bufferMode:l},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Bn(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}},{key:"setProps",value:function(e){this._setModelProps(e)}},{key:"delete",value:function(){for(var e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&this.programManager.release(this.program),this.vertexArray.delete(),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(e){var t=e.program,n=e.vs,r=e.fs,i=e.modules,a=e.defines,o=e.inject,s=e.varyings,u=e.bufferMode;this.programProps={program:t,vs:n,fs:r,modules:i,defines:a,inject:o,varyings:s,bufferMode:u},this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setDrawMode",value:function(e){return this.drawMode=e,this}},{key:"setVertexCount",value:function(e){return Bn(Number.isFinite(e)),this.vertexCount=e,this}},{key:"setInstanceCount",value:function(e){return Bn(Number.isFinite(e)),this.instanceCount=e,this}},{key:"setGeometry",value:function(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function(e,t,n){var r={},i=t.indices;for(var a in t.attributes){var o=t.attributes[a],s=Ko(a,n);if("indices"===a)i=o;else if(o.constant)r[s]=o.value;else{var u=o.value,l=Xo({},o);delete l.value,r[s]=[new pr(e,u),l],Jo(a,l)}}if(i){var c=i.value||i;Bn(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var h={size:1,isIndexed:void 0===i.isIndexed||i.isIndexed};r.indices=[new pr(e,{data:c,target:34963}),h]}return r}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Zn(e))return this;var t={};for(var n in e){var r=e[n];t[n]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.uniforms,e),this}},{key:"getModuleUniforms",value:function(e){this._checkProgram();var t=this.programManager.getUniforms(this.program);return t?t(e):{}}},{key:"updateModuleSettings",value:function(e){var t=this.getModuleUniforms(e||{});return this.setUniforms(t)}},{key:"clear",value:function(e){return jr(this.program.gl,e),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var t,n=e.moduleSettings,r=void 0===n?null:n,i=e.framebuffer,a=e.uniforms,o=void 0===a?{}:a,s=e.attributes,u=void 0===s?{}:s,l=e.transformFeedback,c=void 0===l?this.transformFeedback:l,h=e.parameters,p=void 0===h?{}:h,f=e.vertexArray,d=void 0===f?this.vertexArray:f;this.setAttributes(u),this.updateModuleSettings(r),this.setUniforms(o),On.i.priority>=2&&(t=this._logDrawCallStart(2));var v=this.vertexArray.getDrawParams(),m=this.props,y=m.isIndexed,g=void 0===y?v.isIndexed:y,b=m.indexType,_=void 0===b?v.indexType:b,x=m.indexOffset,w=void 0===x?v.indexOffset:x,k=m.vertexArrayInstanced,O=void 0===k?v.isInstanced:k;O&&!this.isInstanced&&On.i.warn("Found instanced attributes on non-instanced model",this.id)();var E=this.isInstanced,S=this.instanceCount,T=this.props,P=T.onBeforeRender,j=void 0===P?$o:P,C=T.onAfterRender,A=void 0===C?$o:C;j(),this.program.setUniforms(this.uniforms);var M=this.program.draw(Object.assign(Qo,e,{logPriority:t,uniforms:null,framebuffer:i,parameters:p,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:d,transformFeedback:c,isIndexed:g,indexType:_,isInstanced:E,instanceCount:S,offset:g?w:0}));return A(),On.i.priority>=2&&this._logDrawCallEnd(t,d,i),M}},{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.discard,n=void 0===t||t,r=e.feedbackBuffers,i=e.unbindModels,a=void 0===i?[]:i,o=e.parameters;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,Object(d.a)({},35977,n))),a.forEach((function(e){return e.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},e,{parameters:o}))}finally{a.forEach((function(e){return e.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return On.i.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}},{key:"_setModelProps",value:function(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}},{key:"_checkProgram",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(e){var t=this.programProps.program;if(t)this._managedProgram=!1;else{var n=this.programProps,r=n.vs,i=n.fs,a=n.modules,o=n.inject,s=n.defines,u=n.varyings,l=n.bufferMode;t=this.programManager.get({vs:r,fs:i,modules:a,inject:o,defines:s,varyings:u,bufferMode:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Bn(t instanceof Po,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new No(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_deleteGeometryBuffers",value:function(){for(var e in this.geometryBuffers){var t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof pr&&t.delete()}}},{key:"_setAnimationProps",value:function(e){if(this.animated){Bn(e,"Model.draw(): animated uniforms but no animationProps");var t=this._evaluateAnimateUniforms(e);Object.assign(this.uniforms,t)}}},{key:"_setFeedbackBuffers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Zn(e))return this;var t=this.program.gl;return this.transformFeedback=this.transformFeedback||new pa(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}},{key:"_logDrawCallStart",value:function(e){var t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),On.i.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:On.i.level<=2})(),e}},{key:"_logDrawCallEnd",value:function(e,t,n,r){if(void 0!==e){var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var i={};t.elements&&(i.ELEMENT_ARRAY_BUFFER=Wo(t,t.elements,null,r));var a=t.values;for(var o in a){var s=t._getAttributeInfo(o);if(s){var u="".concat(o,": ").concat(s.name),l=t.accessors[s.location];l&&(u="".concat(o,": ").concat(qo(s.name,l))),i[u]=Wo(t,a[o],l,r)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=Go({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),o=a.table,s=a.unusedTable,u=a.unusedCount,l=Go({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0}),c=l.table;l.count>0&&On.i.log("MISSING UNIFORMS",Object.keys(c))(),u>0&&On.i.log("UNUSED UNIFORMS",Object.keys(s))();var h=function(e){var t={},n="Accessors for ".concat(e.id),r=!0,i=!1,a=void 0;try{for(var o,s=e.attributeInfos[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u){var l=Zo(u);t["in ".concat(l)]=Object(d.a)({},n,JSON.stringify(u.accessor))}}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}var c=!0,h=!1,p=void 0;try{for(var f,v=e.varyingInfos[Symbol.iterator]();!(c=(f=v.next()).done);c=!0){var m=f.value;if(m){var y=Zo(m);t["out ".concat(y)]=Object(d.a)({},n,JSON.stringify(m.accessor))}}}catch(e){h=!0,p=e}finally{try{c||null==v.return||v.return()}finally{if(h)throw p}}return t}(this.vertexArray.configuration);On.i.table(e,i)(),On.i.table(e,o)(),On.i.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),On.i.groupEnd(2,">>> DRAWING MODEL ".concat(this.id))()}}}]),e}(),ts=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}return Object(p.a)(e,null,[{key:"isSupported",value:function(e){return Object(On.h)(e)}}]),Object(p.a)(e,[{key:"delete",value:function(){var e=this.model,t=this.bufferTransform,n=this.textureTransform;e&&e.delete(),t&&t.delete(),n&&n.delete()}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRenderTarget,n=void 0===t||t,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}},{key:"swap",value:function(){var e=!1,t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e=e||s.swap()}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}Bn(e,"Nothing to swap")}},{key:"getBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.getData(e);if(u)return u}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}},{key:"getFramebuffer",value:function(){return this.textureTransform&&this.textureTransform.getFramebuffer()}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);var t=[this.bufferTransform,this.textureTransform].filter(Boolean),n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;s.update(e)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}}},{key:"_initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.gl;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new es(t,Object.assign({},e,{fs:e.fs||la({version:da(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}},{key:"_updateModelProps",value:function(e){var t=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){t=o.value.updateModelProps(t)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}},{key:"_buildResourceTransforms",value:function(e,t){(function(e){if(!Zn(e.sourceBuffers)||!Zn(e.feedbackBuffers)||e.varyings&&e.varyings.length>0)return!0;return!1})(t)&&(this.bufferTransform=new fa(e,t)),function(e){if(!Zn(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)return!0;return!1}(t)&&(this.textureTransform=new Sa(e,t)),Bn(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}},{key:"_updateDrawOptions",value:function(e){var t=Object.assign({},e),n=[this.bufferTransform,this.textureTransform].filter(Boolean),r=!0,i=!1,a=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;t=Object.assign(t,u.getDrawOptions(t))}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return t}}]),e}();function ns(){}var rs={onStart:ns,onUpdate:ns,onInterrupt:ns,onEnd:ns},is=function(){function e(t){Object(u.a)(this,e),this._inProgress=!1,this._handle=null,this.timeline=t,this.settings={}}return Object(p.a)(e,[{key:"start",value:function(e){this.cancel(),this.settings=Object.assign({},rs,e),this._inProgress=!0;var t=this.timeline,n=this.settings;this._handle=t.addChannel({delay:t.getTime(),duration:n.duration}),n.onStart(this)}},{key:"end",value:function(){this._inProgress&&(this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,this.settings.onEnd(this))}},{key:"cancel",value:function(){this._inProgress&&(this.settings.onInterrupt(this),this.timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}},{key:"update",value:function(){return!!this._inProgress&&(this.time=this.timeline.getTime(this._handle),this._onUpdate(),this.settings.onUpdate(this),this.timeline.isFinished(this._handle)&&this.end(),!0)}},{key:"_onUpdate",value:function(){}},{key:"inProgress",get:function(){return this._inProgress}}]),e}();function as(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?as(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):as(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ss=function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Object(u.a)(this,e),this.gl=n,this.type="interpolation",this.transition=new is(i),this.attribute=r,this.attributeInTransition=new ea(n,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=function(e,t){var n=Yi(t.size);return new ts(e,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(n,r);var a={byteLength:0,usage:35050};this.buffers=[new pr(n,a),new pr(n,a)]}return Object(p.a)(e,[{key:"start",value:function(e,t){if(e.duration<=0)this.transition.cancel();else{this.gl;var n=this.buffers,r=this.attribute;Ki(n);var i={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){$i(os({buffer:u.value},i))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}this.currentStartIndices=r.startIndices,this.currentLength=Ji(r,t),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aFrom:n[0],aTo:Xi(0,r)},feedbackBuffers:{vCurrent:n[1]}})}}},{key:"update",value:function(){var e=this.transition.update();if(e){var t=this.transition,n=t.time,r=t.settings,i=r.duration,a=(0,r.easing)(n/i);this.transform.run({uniforms:{time:a}})}return e}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete()}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}();function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var cs={interpolation:ss,spring:function(){function e(t){var n=t.gl,r=t.attribute,i=t.timeline;Object(u.a)(this,e),this.gl=n,this.type="spring",this.transition=new is(i),this.attribute=r,this.attributeInTransition=new ea(n,Object.assign({},r.settings,{normalized:!1})),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=function(e){return new Or(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(n),this.framebuffer=function(e,t){return new Wr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:Object(d.a)({},36064,t)})}(n,this.texture),this.transform=function(e,t,n){var r=Yi(t.size);return new ts(e,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}(n,r,this.framebuffer);var a={byteLength:0,usage:35050};this.buffers=[new pr(n,a),new pr(n,a),new pr(n,a)]}return Object(p.a)(e,[{key:"start",value:function(e,t){this.gl;var n=this.buffers,r=this.attribute,i={numInstances:t,attribute:r,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter},a=!0,o=!1,s=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){$i(ls({buffer:u.value},i))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}this.currentStartIndices=r.startIndices,this.currentLength=Ji(r,t),this.attributeInTransition.update({buffer:n[1],value:r.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/r.size),sourceBuffers:{aTo:Xi(0,r)}})}},{key:"update",value:function(){var e=this.buffers,t=this.transform,n=this.framebuffer,r=this.transition;return!!r.update()&&(t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:r.settings.stiffness,damping:r.settings.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Ki(e),this.attributeInTransition.update({buffer:e[1],value:this.attribute.value}),Br(n)[0]>0||r.end(),!0)}},{key:"cancel",value:function(){for(this.transition.cancel(),this.transform.delete();this.buffers.length;)this.buffers.pop().delete();this.texture.delete(),this.texture=null,this.framebuffer.delete(),this.framebuffer=null}},{key:"inProgress",get:function(){return this.transition.inProgress}}]),e}()},hs=function(){function e(t,n){var r=n.id,i=n.timeline;Object(u.a)(this,e),this.id=r,this.gl=t,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,ts.isSupported(t)?this.isSupported=!0:t&&yn.warn("WebGL2 not supported by this browser. Transition animation is disabled.")()}return Object(p.a)(e,[{key:"finalize",value:function(){for(var e in this.transitions)this._removeTransition(e)}},{key:"update",value:function(e){var t=e.attributes,n=e.transitions,r=void 0===n?{}:n,i=e.numInstances;if(this.numInstances=i||1,this.isSupported){for(var a in t){var o=t[a],s=o.getTransitionSetting(r);s&&this._updateAttribute(a,o,s)}for(var u in this.transitions){var l=t[u];l&&l.getTransitionSetting(r)||this._removeTransition(u)}}}},{key:"hasAttribute",value:function(e){var t=this.transitions[e];return t&&t.inProgress}},{key:"getAttributes",value:function(){var e={};for(var t in this.transitions){var n=this.transitions[t];n.inProgress&&(e[t]=n.attributeInTransition)}return e}},{key:"run",value:function(){if(!this.isSupported||0===this.numInstances)return!1;for(var e in this.transitions){this.transitions[e].update()&&(this.needsRedraw=!0)}var t=this.needsRedraw;return this.needsRedraw=!1,t}},{key:"_removeTransition",value:function(e){this.transitions[e].cancel(),delete this.transitions[e]}},{key:"_updateAttribute",value:function(e,t,n){var r=this.transitions[e],i=!r||r.type!==n.type;if(i){r&&this._removeTransition(e);var a=cs[n.type];a?this.transitions[e]=new a({attribute:t,timeline:this.timeline,gl:this.gl}):(yn.error("unsupported transition type '".concat(n.type,"'"))(),i=!1)}(i||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}]),e}(),ps=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=void 0===r?"attribute-manager":r,a=n.stats,o=n.timeline;Object(u.a)(this,e),this.id=i,this.gl=t,this.attributes={},this.updateTriggers={},this.accessors={},this.needsRedraw=!0,this.userData={},this.stats=a,this.attributeTransitionManager=new hs(t,{id:"".concat(i,"-transitions"),timeline:o}),Object.seal(this)}return Object(p.a)(e,[{key:"finalize",value:function(){for(var e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"add",value:function(e,t){this._add(e,t)}},{key:"addInstanced",value:function(e,t){this._add(e,t,{instanced:1})}},{key:"remove",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}}},{key:"invalidate",value:function(e,t){ra("attributeManager.invalidate",this,e,this._invalidateTrigger(e,t))}},{key:"invalidateAll",value:function(e){for(var t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);ra("attributeManager.invalidate",this,"all")}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.numInstances,r=e.startIndices,i=void 0===r?null:r,a=e.transitions,o=e.props,s=void 0===o?{}:o,u=e.buffers,l=void 0===u?{}:u,c=e.context,h=void 0===c?{}:c,p=!1;for(var f in ra("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart(),this.attributes){var d=this.attributes[f],v=d.settings.accessor;d.startIndices=i,s[f]&&yn.removed("props.".concat(f),"data.attributes.".concat(f))(),d.setExternalBuffer(l[f])||d.setBinaryValue(l[v],t.startIndices)||!l[v]&&d.setConstantValue(s[v])||d.needsUpdate()&&(p=!0,this._updateAttribute({attribute:d,numInstances:n,data:t,props:s,context:h})),this.needsRedraw|=d.needsRedraw()}p&&ra("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:a})}},{key:"updateTransition",value:function(){var e=this.attributeTransitionManager.run();return this.needsRedraw=this.needsRedraw||e,e}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearChangedFlags:!1},t=this.attributes,n=this.attributeTransitionManager,r=Object.assign({},n.getAttributes());for(var i in t){var a=t[i];a.needsRedraw(e)&&!n.hasAttribute(i)&&(r[i]=a)}return r}},{key:"getShaderAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e||(e=this.getAttributes());var n={};for(var r in e)t[r]||Object.assign(n,e[r].getShaderAttributes());return n}},{key:"getAccessors",value:function(){return this.updateTriggers}},{key:"_add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&yn.warn("AttributeManager.add({updaters}) - updater map no longer supported")();var r={};for(var i in e){var a=e[i],o=this._createAttribute(i,a,n);r[i]=o}Object.assign(this.attributes,r),this._mapUpdateTriggersToAttributes()}},{key:"_createAttribute",value:function(e,t,n){var r={id:e,constant:t.constant||!1,isIndexed:t.isIndexed||t.elements,size:t.elements?1:t.size,value:t.value||null,divisor:t.instanced||n.instanced?1:t.divisor};return new ea(this.gl,Object.assign({},t,r))}},{key:"_mapUpdateTriggersToAttributes",value:function(){var e=this,t={},n=function(n){e.attributes[n].getUpdateTriggers().forEach((function(e){t[e]||(t[e]=[]),t[e].push(n)}))};for(var r in this.attributes)n(r);this.updateTriggers=t}},{key:"_invalidateTrigger",value:function(e,t){var n=this.attributes,r=this.updateTriggers[e];return r&&r.forEach((function(e){var r=n[e];r&&r.setNeedsUpdate(r.id,t)})),r}},{key:"_updateAttribute",value:function(e){var t=e.attribute,n=e.numInstances;ra("attribute.updateStart",t),t.allocate(n)&&ra("attribute.allocate",t,n),t.updateBuffer(e)&&(this.needsRedraw=!0,ra("attribute.updateEnd",t,n))}}]),e}(),fs=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_onUpdate",value:function(){var e=this.time,t=this.settings,n=t.fromValue,r=t.toValue,i=t.duration,a=(0,t.easing)(e/i);this._value=Object(bi.f)(n,r,a)}},{key:"value",get:function(){return this._value}}]),t}(is);function ds(e,t,n,r,i){var a=t-e;return(n-t)*i+-a*r+a+t}function vs(e,t){if(Array.isArray(e)){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}return Math.abs(e-t)}function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ys={interpolation:fs,spring:function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_onUpdate",value:function(){var e=this.settings,t=e.fromValue,n=e.toValue,r=e.damping,i=e.stiffness,a=this._prevValue,o=void 0===a?t:a,s=this._currValue,u=void 0===s?t:s,l=function(e,t,n,r,i){if(Array.isArray(n)){for(var a=[],o=0;o<n.length;o++)a[o]=ds(e[o],t[o],n[o],r,i);return a}return ds(e,t,n,r,i)}(o,u,n,r,i),c=vs(l,n),h=vs(l,u);c<1e-5&&h<1e-5&&(l=n,this.end()),this._prevValue=u,this._currValue=l}},{key:"value",get:function(){return this._currValue}}]),t}(is)},gs=function(){function e(t){Object(u.a)(this,e),this.transitions=new Map,this.timeline=t}return Object(p.a)(e,[{key:"add",value:function(e,t,n,r){var i=this.transitions;i.has(e)&&(t=i.get(e).value,this.remove(e));if(r=Zi(r)){var a=ys[r.type];if(a){var o=new a(this.timeline);o.start(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r,{fromValue:t,toValue:n})),i.set(e,o)}else yn.error("unsupported transition type '".concat(r.type,"'"))()}}},{key:"remove",value:function(e){var t=this.transitions;t.has(e)&&(t.get(e).cancel(),t.delete(e))}},{key:"update",value:function(){var e={},t=!0,n=!1,r=void 0;try{for(var i,a=this.transitions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=Object(g.a)(i.value,2),s=o[0],u=o[1];u.update(),e[s]=u.value,u.inProgress||this.remove(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.transitions.keys()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this.remove(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"active",get:function(){return this.transitions.size>0}}]),e}(),bs="Awaiting state",_s="Matched. State transferred from previous layer",xs="Initialized",ws="Discarded. Awaiting garbage collection",ks="No longer matched. Awaiting garbage collection",Os="Finalized! Awaiting garbage collection",Es={COMPONENT:Symbol.for("component"),ASYNC_DEFAULTS:Symbol.for("asyncPropDefaults"),ASYNC_ORIGINAL:Symbol.for("asyncPropOriginal"),ASYNC_RESOLVED:Symbol.for("asyncPropResolved")},Ss=Es.COMPONENT;function Ts(e,t){var n=js({newProps:e,oldProps:t,propTypes:Is(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=function(e,t){if(null===t)return"oldProps is null, initial diff";var n=null,r=e.dataComparator,i=e._dataDiff;r?r(e.data,t.data)||(n="Data comparator detected a change"):e.data!==t.data&&(n="A new data container was supplied");n&&i&&(n=i(e.data,t.data)||n);return n}(e,t),i=!1;return r||(i=function(e,t){if(null===t)return"oldProps is null, initial diff";if("all"in e.updateTriggers){if(Ms(e,t,"all"))return{all:!0}}var n={},r=!1;for(var i in e.updateTriggers){if("all"!==i)Ms(e,t,i)&&(n[i]=!0,r=n)}return r}(e,t)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:As(e,t),transitionsChanged:Ps(e,t)}}function Ps(e,t){if(!e.transitions)return null;var n={},r=Is(e);for(var i in e.transitions){var a=r[i],o=a&&a.type;("number"===o||"color"===o||"array"===o)&&Cs(e[i],t[i],a)&&(n[i]=!0)}return n}function js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProps,n=e.oldProps,r=e.ignoreProps,i=void 0===r?{}:r,a=e.propTypes,o=void 0===a?{}:a,s=e.triggerName,u=void 0===s?"props":s;if(n===t)return null;if("object"!==Object(rt.a)(t)||null===t)return"".concat(u," changed shallowly");if("object"!==Object(rt.a)(n)||null===n)return"".concat(u," changed shallowly");for(var l=0,c=Object.keys(t);l<c.length;l++){var h=c[l];if(!(h in i)){if(!(h in n))return"".concat(u,".").concat(h," added");var p=Cs(t[h],n[h],o[h]);if(p)return"".concat(u,".").concat(h," ").concat(p)}}for(var f=0,d=Object.keys(n);f<d.length;f++){var v=d[f];if(!(v in i)){if(!(v in t))return"".concat(u,".").concat(v," dropped");if(!Object.hasOwnProperty.call(t,v)){var m=Cs(t[v],n[v],o[v]);if(m)return"".concat(u,".").concat(v," ").concat(m)}}}return null}function Cs(e,t,n){var r=n&&n.equal;return r&&!r(e,t,n)?"changed deeply":r||!(r=e&&t&&e.equals)||r.call(e,t)?r||t===e?null:"changed shallowly":"changed deeply"}function As(e,t){if(null===t)return"oldProps is null, initial diff";var n=t.extensions,r=e.extensions;if(r===n)return!1;if(r.length!==n.length)return!0;for(var i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Ms(e,t,n){var r=e.updateTriggers[n];r=null==r?{}:r;var i=t.updateTriggers[n];return js({oldProps:i=null==i?{}:i,newProps:r,triggerName:n})}function Is(e){var t=e[Ss],n=t&&t.constructor;return n?n._propTypes:{}}function Rs(e){if(null===(t=e)||"object"!==Object(rt.a)(t))throw new Error("count(): argument not an object");var t;if("function"==typeof e.count)return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(function(e){return null!==e&&"object"===Object(rt.a)(e)&&e.constructor===Object}(e))return Object.keys(e).length;throw new Error("count(): argument not a container")}function Ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zs(e,t){if(!t)return e;var n=Object.assign({},e,t);if("defines"in t&&(n.defines=Object.assign({},e.defines,t.defines)),"modules"in t&&(n.modules=(e.modules||[]).concat(t.modules),t.modules.some((function(e){return"project64"===e.name})))){var r=n.modules.findIndex((function(e){return"project32"===e.name}));r>=0&&n.modules.splice(r,1)}if("inject"in t)if(e.inject){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ls(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.inject);for(var a in t.inject)i[a]=(i[a]||"")+t.inject[a];n.inject=i}else n.inject=t.inject;return n}function Ds(e,t){if(e===t)return!0;if(Array.isArray(e)){var n=e.length;if(!t||t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return!1}function Fs(e){var t,n={};return function(r){for(var i in r)if(!Ds(r[i],n[i])){t=e(r),n=r;break}return t}}var Bs=[0,0,0,0],Ns=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Us=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Vs=[0,0,0],Ws=[0,0,0],qs=Fs((function(e){var t=e.viewport,n=e.devicePixelRatio,r=e.coordinateSystem,i=e.coordinateOrigin,a=function(e){var t=e.viewport,n=e.coordinateSystem,r=e.coordinateOrigin,i=t.viewMatrixUncentered,a=t.projectionMatrix,o=t.projectionMode,s=t.viewMatrix,u=t.viewProjectionMatrix,l=Bs,c=t.cameraPosition,h=r,p=!0;n===gn.LNGLAT?o===bn.WEB_MERCATOR?p=!1:h=[Math.fround(t.longitude),Math.fround(t.latitude),0]:o===bn.IDENTITY&&(h=t.position.map(Math.fround));if(h[2]=h[2]||0,p){var f=t.projectPosition(h);c=[c[0]-f[0],c[1]-f[1],c[2]-f[2]],f[3]=1,l=b.b([],f,u),s=i||s,u=k.g([],a,s),u=k.g([],u,Ns)}return{viewMatrix:s,viewProjectionMatrix:u,projectionCenter:l,cameraPosCommon:c,shaderCoordinateOrigin:h}}({coordinateSystem:r,coordinateOrigin:i,viewport:t}),o=a.projectionCenter,s=a.viewProjectionMatrix,u=a.cameraPosCommon,l=a.shaderCoordinateOrigin,c=t.getDistanceScales(),h=[t.width*n,t.height*n],p={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCenter:o,project_uAntimeridian:(t.longitude||0)-180,project_uViewportSize:h,project_uDevicePixelRatio:n,project_uFocalDistance:t.focalDistance||1,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Vs,project_uScale:t.scale,project_uViewProjectionMatrix:s,project_uCameraPosition:u},f=t.getDistanceScales(l);switch(r){case gn.METER_OFFSETS:p.project_uCommonUnitsPerWorldUnit=f.unitsPerMeter,p.project_uCommonUnitsPerWorldUnit2=f.unitsPerMeter2;break;case gn.LNGLAT:case gn.LNGLAT_OFFSETS:p.project_uCommonUnitsPerWorldUnit=f.unitsPerDegree,p.project_uCommonUnitsPerWorldUnit2=f.unitsPerDegree2}return p}));function Gs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewport,n=e.devicePixelRatio,r=void 0===n?1:n,i=e.modelMatrix,a=void 0===i?null:i,o=e.coordinateSystem,s=void 0===o?gn.DEFAULT:o,u=e.coordinateOrigin,l=void 0===u?Ws:u,c=e.wrapLongitude,h=void 0!==c&&c;e.projectionMode,e.positionOrigin;fn(t),s===gn.DEFAULT&&(s=t.isGeospatial?gn.LNGLAT:gn.CARTESIAN);var p=qs({viewport:t,devicePixelRatio:r,coordinateSystem:s,coordinateOrigin:l});return p.project_uWrapLongitude=h,p.project_uModelMatrix=a||Us,p}function Hs(e,t){var n=b.b([],t,e);return b.a(n,n,1/n[3]),n}function Zs(e,t){var n=e%t;return n<0?t+n:n}function Xs(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}var Ys=Math.PI,Ks=Ys/4,Js=Ys/180,$s=180/Ys;function Qs(e){return Math.pow(2,e)}function eu(e){return Math.log2(e)}function tu(e){var t=Object(g.a)(e,2),n=t[0],r=t[1];Xs(Number.isFinite(n)),Xs(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");var i=r*Js;return[512*(n*Js+Ys)/(2*Ys),512*(Ys+Math.log(Math.tan(Ks+.5*i)))/(2*Ys)]}function nu(e){var t=Object(g.a)(e,2),n=t[0],r=t[1],i=n/512*(2*Ys)-Ys,a=2*(Math.atan(Math.exp(r/512*(2*Ys)-Ys))-Ks);return[i*$s,a*$s]}function ru(e){var t=e.latitude,n=e.longitude,r=e.highPrecision,i=void 0!==r&&r;Xs(Number.isFinite(t)&&Number.isFinite(n));var a={},o=Math.cos(t*Js),s=512/360/o,u=512/4003e4/o;if(a.unitsPerMeter=[u,u,u],a.metersPerUnit=[1/u,1/u,1/u],a.unitsPerDegree=[512/360,s,u],a.degreesPerUnit=[.703125,1/s,1/u],i){var l=Js*Math.tan(t*Js)/o,c=512/360*l/2,h=512/4003e4*l,p=h/s*u;a.unitsPerDegree2=[0,c,h],a.unitsPerMeter2=[p,0,p]}return a}function iu(e,t){var n=Object(g.a)(e,3),r=n[0],i=n[1],a=n[2],o=Object(g.a)(t,3),s=o[0],u=o[1],l=o[2],c=ru({longitude:r,latitude:i,highPrecision:!0}),h=c.unitsPerMeter,p=c.unitsPerMeter2,f=tu(e);f[0]+=s*(h[0]+p[0]*u),f[1]+=u*(h[1]+p[1]*u);var d=nu(f),v=(a||0)+(l||0);return Number.isFinite(a)||Number.isFinite(l)?[d[0],d[1],v]:d}function au(e){var t=e.height,n=e.pitch,r=e.bearing,i=e.altitude,a=e.scale,o=e.center,s=void 0===o?null:o,u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return k.o(u,u,[0,0,-i]),k.k(u,u,-n*Js),k.m(u,u,r*Js),a/=t,k.n(u,u,[a,a,a]),s&&k.o(u,u,E.c([],s)),u}function ou(e){var t=e.width,n=e.height,r=e.altitude,i=void 0===r?1.5:r,a=e.pitch,o=void 0===a?0:a,s=e.nearZMultiplier,u=void 0===s?1:s,l=e.farZMultiplier,c=void 0===l?1:l,h=o*Js,p=Math.atan(.5/i),f=Math.sin(p)*i/Math.sin(Math.PI/2-h-p);return{fov:2*p,aspect:t/n,focalDistance:i,near:u,far:(Math.cos(Math.PI/2-h)*f+i)*c}}function su(e){var t=e.width,n=e.height,r=e.pitch,i=ou({width:t,height:n,altitude:e.altitude,pitch:r,nearZMultiplier:e.nearZMultiplier,farZMultiplier:e.farZMultiplier}),a=i.fov,o=i.aspect,s=i.near,u=i.far;return k.i([],a,o,s,u)}function uu(e,t){var n=Object(g.a)(e,3),r=n[0],i=n[1],a=n[2],o=void 0===a?0:a;return Xs(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),Hs(t,[r,i,o,1])}function lu(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Object(g.a)(e,3),i=r[0],a=r[1],o=r[2];if(Xs(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=Hs(t,[i,a,o,1]);return s}var u=Hs(t,[i,a,0,1]),l=Hs(t,[i,a,1,1]),c=u[2],h=l[2],p=c===h?0:((n||0)-c)/(h-c);return O.c([],u,l,p)}var cu=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function hu(e){var t=e.width,n=e.height,r=e.bounds,i=e.minExtent,a=void 0===i?0:i,o=e.maxZoom,s=void 0===o?24:o,u=e.padding,l=void 0===u?0:u,c=e.offset,h=void 0===c?[0,0]:c,p=Object(g.a)(r,2),f=Object(g.a)(p[0],2),d=f[0],v=f[1],m=Object(g.a)(p[1],2),y=m[0],b=m[1];if(Number.isFinite(l)){l={top:l,bottom:l,left:l,right:l}}else Xs(Number.isFinite(l.top)&&Number.isFinite(l.bottom)&&Number.isFinite(l.left)&&Number.isFinite(l.right));var _=new pu({width:t,height:n,longitude:0,latitude:0,zoom:0}),x=_.project([d,b]),w=_.project([y,v]),k=[Math.max(Math.abs(w[0]-x[0]),a),Math.max(Math.abs(w[1]-x[1]),a)],O=[t-l.left-l.right-2*Math.abs(h[0]),n-l.top-l.bottom-2*Math.abs(h[1])];Xs(O[0]>0&&O[1]>0);var E=O[0]/k[0],S=O[1]/k[1],T=(l.right-l.left)/2/E,P=(l.bottom-l.top)/2/S,j=[(w[0]+x[0])/2+T,(w[1]+x[1])/2+P],C=_.unproject(j),A=Math.min(s,_.zoom+Math.log2(Math.abs(Math.min(E,S))));return Xs(Number.isFinite(A)),{longitude:C[0],latitude:C[1],zoom:A}}var pu=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,o=void 0===a?0:a,s=n.longitude,p=void 0===s?0:s,f=n.zoom,d=void 0===f?0:f,v=n.pitch,m=void 0===v?0:v,y=n.bearing,g=void 0===y?0:y,b=n.altitude,_=void 0===b?1.5:b,x=n.nearZMultiplier,w=void 0===x?.02:x,k=n.farZMultiplier,O=void 0===k?1.01:k;Object(u.a)(this,t),r=r||1,i=i||1;var E=Qs(d);_=Math.max(.75,_);var S=tu([p,o]);S[2]=0;var T=su({width:r,height:i,pitch:m,bearing:g,altitude:_,nearZMultiplier:w,farZMultiplier:O}),P=au({height:i,scale:E,center:S,pitch:m,bearing:g,altitude:_});return(e=Object(l.a)(this,Object(c.a)(t).call(this,{width:r,height:i,scale:E,viewMatrix:P,projectionMatrix:T}))).latitude=o,e.longitude=p,e.zoom=d,e.pitch=m,e.bearing=g,e.altitude=_,e.center=S,e.unitsPerMeter=ru(Object(h.a)(e)).unitsPerMeter[2],Object.freeze(Object(h.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"projectFlat",value:function(e){return tu(e)}},{key:"unprojectFlat",value:function(e){return nu(e)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=lu(e.pos,this.pixelUnprojectionMatrix),r=tu(t),i=O.a([],r,O.d([],n));return nu(O.a([],this.center,i),this.scale)}},{key:"getLocationAtPoint",value:function(e){var t=e.lngLat,n=e.pos;return this.getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=hu(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:u})}}]),t}(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.width,r=t.height,i=t.scale,a=t.viewMatrix,o=void 0===a?cu:a,s=t.projectionMatrix,l=void 0===s?cu:s;Object(u.a)(this,e),this.width=n||1,this.height=r||1,this.scale=i,this.unitsPerMeter=1,this.viewMatrix=o,this.projectionMatrix=l;var c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.g(c,c,this.projectionMatrix),k.g(c,c,this.viewMatrix),this.viewProjectionMatrix=c;var h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.n(h,h,[this.width/2,-this.height/2,1]),k.o(h,h,[1,-1,0]),k.g(h,h,this.viewProjectionMatrix);var p=k.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],h);if(!p)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=p,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(p.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&k.b(t.projectionMatrix,this.projectionMatrix)&&k.b(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),a=uu(i,this.pixelProjectionMatrix),o=Object(g.a)(a,2),s=o[0],u=o[1],l=r?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,a=Object(g.a)(e,3),o=a[0],s=a[1],u=a[2],l=r?s:this.height-s,c=i&&i*this.unitsPerMeter,h=lu([o,l,u],this.pixelUnprojectionMatrix,c),p=this.unprojectPosition(h),f=Object(g.a)(p,3),d=f[0],v=f[1],m=f[2];return Number.isFinite(u)?[d,v,m]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)*this.unitsPerMeter]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)/this.unitsPerMeter]}},{key:"projectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}},{key:"unprojectFlat",value:function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return e}}]),e}());function fu(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(g.a)(e,3),i=r[0],a=r[1],o=r[2],s=void 0===o?0:o,u=t.projectFlat(e),l=Object(g.a)(u,2),c=l[0],h=l[1],p=t.getDistanceScales(n&&[i,a]),f=s*p.unitsPerMeter[2];return[c,h,f]}function du(e,t){var n=t.viewport,r=t.modelMatrix,i=t.coordinateSystem,a=t.coordinateOrigin,o=t.offsetMode,s=Object(g.a)(e,3),u=s[0],l=s[1],c=s[2];if(r){var h=b.b([],[u,l,c,1],r),p=Object(g.a)(h,3);u=p[0],l=p[1],c=p[2]}switch(i){case gn.LNGLAT:return fu([u,l,c],n,o);case gn.LNGLAT_OFFSETS:return fu([u+a[0],l+a[1],c+(a[2]||0)],n,o);case gn.METER_OFFSETS:return fu(iu(a,[u,l,c]),n,o);case gn.CARTESIAN:default:return n.projectPosition([u,l,c])}}function vu(e,t){var n=function(e){var t=Object.assign({},e),n=e.coordinateSystem,r=e.viewport,i=e.coordinateOrigin,a=e.fromCoordinateSystem,o=e.fromCoordinateOrigin;return n===gn.DEFAULT&&(n=r.isGeospatial?gn.LNGLAT:gn.CARTESIAN),void 0===a&&(t.fromCoordinateSystem=n),void 0===o&&(t.fromCoordinateOrigin=i),n===gn.LNGLAT&&r.zoom>=12&&(n=gn.LNGLAT_OFFSETS,t.coordinateOrigin=[Math.fround(r.longitude),Math.fround(r.latitude)]),t.coordinateSystem=n,t}(t),r=n.viewport,i=n.coordinateSystem,a=n.coordinateOrigin,o=n.modelMatrix,s=n.fromCoordinateSystem,u=n.fromCoordinateOrigin;switch(i){case gn.LNGLAT_OFFSETS:case gn.METER_OFFSETS:var l=du(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!0}),c=fu(a,r,!0);return E.g(l,l,c),l;case gn.LNGLAT:case gn.CARTESIAN:default:return du(e,{viewport:r,modelMatrix:o,coordinateSystem:s,coordinateOrigin:u,offsetMode:!1})}}var mu={boolean:{validate:function(e,t){return!0},equal:function(e,t,n){return Boolean(e)===Boolean(t)}},number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate:function(e,t){return t.optional&&!e||_u(e)&&(3===e.length||4===e.length)},equal:function(e,t,n){return yu(e,t)}},accessor:{validate:function(e,t){var n=xu(e);return"function"===n||n===xu(t.value)},equal:function(e,t,n){return"function"==typeof t||yu(e,t)}},array:{validate:function(e,t){return t.optional&&!e||_u(e)},equal:function(e,t,n){return n.compare?yu(e,t):e===t}},function:{validate:function(e,t){return t.optional&&!e||"function"==typeof e},equal:function(e,t,n){return!n.compare||e===t}}};function yu(e,t){if(e===t)return!0;if(!_u(e)||!_u(t))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function gu(e,t){switch(xu(t)){case"object":return bu(e,t);case"array":return bu(e,{type:"array",value:t,compare:!1});case"boolean":return bu(e,{type:"boolean",value:t});case"number":return bu(e,{type:"number",value:t});case"function":return bu(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function bu(e,t){return"type"in t?Object.assign({name:e},mu[t.type],t):"value"in t?Object.assign({name:e,type:xu(t.value)},t):{name:e,type:"object",value:t}}function _u(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function xu(e){return _u(e)?"array":null===e?"null":Object(rt.a)(e)}var wu=Es.COMPONENT,ku=Es.ASYNC_ORIGINAL,Ou=Es.ASYNC_RESOLVED,Eu=Es.ASYNC_DEFAULTS;function Su(){var e=this,t=Tu(e.constructor),n=Object.create(t);n[wu]=e,n[ku]={},n[Ou]={};for(var r=0;r<arguments.length;++r){var i=arguments[r];for(var a in i)n[a]=i[a]}return Object.freeze(n),n}function Tu(e){var t=Cu(e,"_mergedDefaultProps");return t||(function(e){if(!e.prototype)return;var t=Object.getPrototypeOf(e),n=Tu(t),r=function(e){for(var t={},n={},r={},i=0,a=Object.entries(e);i<a.length;i++){var o=Object(g.a)(a[i],2),s=o[0],u=o[1];if(u&&u.deprecatedFor)r[s]=Array.isArray(u.deprecatedFor)?u.deprecatedFor:[u.deprecatedFor];else{var l=gu(s,u);t[s]=l,n[s]=l.value}}return{propTypes:t,defaultProps:n,deprecatedProps:r}}(Cu(e,"defaultProps")||{}),i=function(e,t,n){var r=Object.create(null);Object.assign(r,t,e);var i=function(e){var t=Cu(e,"layerName")||Cu(e,"componentName");t||yn.once(0,"".concat(e.name,".componentName not specified"))();return t||e.name}(n);return delete e.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}(r.defaultProps,n,e),a=Object.assign({},t._propTypes,r.propTypes);!function(e,t){var n={},r={};for(var i in t){var a=t[i],o=a.name,s=a.value;a.async&&(n[o]=s,r[o]=Pu(o))}e[Eu]=n,e[ku]={},Object.defineProperties(e,r)}(i,a);var o=Object.assign({},t._deprecatedProps,r.deprecatedProps);(function(e,t){var n=function(n){Object.defineProperty(e,n,{enumerable:!1,set:function(e){var r="".concat(this.id,": ").concat(n),i=!0,a=!1,o=void 0;try{for(var s,u=t[n][Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;ju(this,l)||(this[l]=e)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}yn.deprecated(r,t[n].join("/"))()}})};for(var r in t)n(r)})(i,o),e._mergedDefaultProps=i,e._propTypes=a,e._deprecatedProps=o}(e),e._mergedDefaultProps)}function Pu(e){return{enumerable:!0,set:function(t){"string"==typeof t||t instanceof Promise||Di(t)?this[ku][e]=t:this[Ou][e]=t},get:function(){if(this[Ou]){if(e in this[Ou]){var t=this[Ou][e];return"data"===e?t||this[Eu][e]:t}if(e in this[ku]){var n=this[wu]&&this[wu].internalState;if(n&&n.hasAsyncProp(e))return n.getAsyncProp(e)}}return this[Eu][e]}}}function ju(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Cu(e,t){return ju(e,t)&&e[t]}function Au(e){var t;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}var Mu=Es.ASYNC_ORIGINAL,Iu=Es.ASYNC_RESOLVED,Ru=Es.ASYNC_DEFAULTS,Lu=Object.freeze({}),zu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(u.a)(this,e),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=function(){},this.oldProps=Lu,this.oldAsyncProps=null}var t;return Object(p.a)(e,[{key:"getOldProps",value:function(){return this.oldAsyncProps||this.oldProps}},{key:"resetOldProps",value:function(){this.oldAsyncProps=null,this.oldProps=this.component.props}},{key:"freezeAsyncOldProps",value:function(){if(!this.oldAsyncProps)for(var e in this.oldProps=this.oldProps||this.component.props,this.oldAsyncProps=Object.create(this.oldProps),this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}},{key:"hasAsyncProp",value:function(e){return e in this.asyncProps}},{key:"getAsyncProp",value:function(e){var t=this.asyncProps[e];return t&&t.resolvedValue}},{key:"isAsyncPropLoading",value:function(e){var t=this.asyncProps[e];return Boolean(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}},{key:"setAsyncProps",value:function(e){var t=e[Iu]||{},n=e[Mu]||e,r=e[Ru]||{};for(var i in t){var a=t[i];this._createAsyncPropData(i,a,r[i]),this._updateAsyncProp(i,a)}for(var o in n){var s=n[o];this._createAsyncPropData(o,s,r[o]),this._updateAsyncProp(o,s)}}},{key:"_updateAsyncProp",value:function(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t){var n=this.layer&&this.layer.props.fetch;n&&(t=n(t,{propName:e,layer:this.layer}))}t instanceof Promise?this._watchPromise(e,t):Di(t)?this._resolveAsyncIterable(e,t):this._setPropValue(e,t)}}},{key:"_didAsyncInputValueChange",value:function(e,t){var n=this.asyncProps[e];return t!==n.lastValue&&(n.lastValue=t,!0)}},{key:"_setPropValue",value:function(e,t){var n=this.asyncProps[e];n.value=t,n.resolvedValue=t,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount}},{key:"_setAsyncPropValue",value:function(e,t,n){var r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&(fn(void 0!==t),this.freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,t))}},{key:"_watchPromise",value:function(e,t){var n=this,r=this.asyncProps[e];r.pendingLoadCount++;var i=r.pendingLoadCount;t.then((function(t){t=n._postProcessValue(e,t),n._setAsyncPropValue(e,t,i);var r=n.layer&&n.layer.props.onDataLoad;"data"===e&&r&&r(t,{propName:e,layer:n.layer})})).catch((function(e){return yn.error(e)()}))}},{key:"_resolveAsyncIterable",value:(t=Lr(Ir.a.mark((function e(t,n){var r,i,a,o,s,u,l,c,h,p,f,d;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"data"!==t&&this._setPropValue(t,n),(r=this.asyncProps[t]).pendingLoadCount++,i=r.pendingLoadCount,a=[],o=0,s=!0,u=!1,e.prev=8,c=Au(n);case 10:return e.next=12,c.next();case 12:return h=e.sent,s=h.done,e.next=16,h.value;case 16:if(p=e.sent,s){e.next=26;break}f=p,a=this._postProcessValue(t,f,a),Object.defineProperty(a,"__diff",{enumerable:!1,value:[{startRow:o,endRow:a.length}]}),o=a.length,this._setAsyncPropValue(t,a,i);case 23:s=!0,e.next=10;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),u=!0,l=e.t0;case 32:if(e.prev=32,e.prev=33,s||null==c.return){e.next=37;break}return e.next=37,c.return();case 37:if(e.prev=37,!u){e.next=40;break}throw l;case 40:return e.finish(37);case 41:return e.finish(32);case 42:(d=this.layer&&this.layer.props.onDataLoad)&&d(a,{propName:t,layer:this.layer});case 44:case"end":return e.stop()}}),e,this,[[8,28,32,42],[33,,37,41]])}))),function(e,n){return t.apply(this,arguments)})},{key:"_postProcessValue",value:function(e,t,n){var r=(this.component?this.component.props:{}).dataTransform;return"data"!==e?t:r?r(t,n):n?n.concat(t):t}},{key:"_createAsyncPropData",value:function(e,t,n){this.asyncProps[e]||(this.asyncProps[e]={lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0})}}]),e}(),Du=Es.ASYNC_ORIGINAL,Fu=Es.ASYNC_RESOLVED,Bu=Es.ASYNC_DEFAULTS,Nu=0,Uu=function(){function e(){Object(u.a)(this,e),this.props=Su.apply(this,arguments),this.id=this.props.id,this.count=Nu++,this.lifecycle=bs,this.parent=null,this.context=null,this.state=null,this.internalState=null,Object.seal(this)}return Object(p.a)(e,[{key:"clone",value:function(e){var t=this.props,n={};for(var r in t[Bu])r in t[Fu]?n[r]=t[Fu][r]:r in t[Du]&&(n[r]=t[Du][r]);return new this.constructor(Object.assign({},t,n,e))}},{key:"_initState",value:function(){this.internalState=new zu({})}},{key:"stats",get:function(){return this.internalState.stats}}]),e}();Uu.componentName="Component",Uu.defaultProps={};var Vu=function(e){function t(e){var n,r=e.attributeManager,i=e.layer;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,i))).attributeManager=r,n.model=null,n.needsRedraw=!0,n.subLayers=null,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"layer",get:function(){return this.component},set:function(e){this.component=e}}]),t}(zu),Wu=function(e){return"undefined"!=typeof Response&&e instanceof Response||e.arrayBuffer&&e.text&&e.json},qu=function(e){return function(e){return"undefined"!=typeof File&&e instanceof File}(e)||function(e){return"undefined"!=typeof Blob&&e instanceof Blob}(e)},Gu="",Hu={};function Zu(e){for(var t in Hu)if(e.startsWith(t)){var n=Hu[t];return e.replace(t,n)}return e+=Gu}function Xu(e,t){if(!e)throw new Error(t||"loader assertion failed.")}var Yu=function(){function e(t){Object(u.a)(this,e),this._fileOrBlob=t,this.bodyUsed=!1}var t,n,r;return Object(p.a)(e,[{key:"arrayBuffer",value:(r=Lr(Ir.a.mark((function e(){var t,n,r;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,r=t.promise,n.readAsArrayBuffer(this._fileOrBlob),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"text",value:(n=Lr(Ir.a.mark((function e(){var t,n,r;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getFileReader(),n=t.reader,r=t.promise,n.readAsText(this._fileOrBlob),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"json",value:(t=Lr(Ir.a.mark((function e(){var t;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.text();case 2:return t=e.sent,e.abrupt("return",JSON.parse(t));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_getFileReader",value:function(){var e;Xu(!this.bodyUsed),this.bodyUsed=!0;var t=new Promise((function(t,n){try{(e=new FileReader).onerror=function(e){return n(new Error(e))},e.onabort=function(){return n(new Error("Read aborted."))},e.onload=function(){return t(e.result)}}catch(e){n(e)}}));return{reader:e,promise:t}}},{key:"headers",get:function(){return new Headers({"Content-Length":this._fileOrBlob.size,"Content-Type":this._fileOrBlob.type})}},{key:"ok",get:function(){return!0}},{key:"status",get:function(){return 200}},{key:"url",get:function(){return this._fileOrBlob.name||""}}]),e}();function Ku(e,t){return Promise.resolve(new Yu(e,t))}function Ju(e,t){return $u.apply(this,arguments)}function $u(){return($u=Lr(Ir.a.mark((function e(t,n){return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!qu(t)){e.next=2;break}return e.abrupt("return",Ku(t,n));case 2:return t=Zu(t),e.abrupt("return",fetch(t,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e){if(!e)return!1;Array.isArray(e)&&(e=e[0]);var t=e.parseTextSync||e.parseSync||e.parse||e.parseStream||e.parseInBatches,n=e.options&&e.options[e.id];return t=t||n&&n.workerUrl}function nl(e){var t;return Xu(e,"null loader"),Xu(tl(e),"invalid loader"),Array.isArray(e)&&(t=e[1],e=el({},e=e[0],{options:el({},e.options,{},t)})),e.extension&&(e.extensions=e.extensions||e.extension,delete e.extension),Array.isArray(e.extensions)||(e.extensions=[e.extensions]),Xu(e.extensions&&e.extensions.length>0&&e.extensions[0]),e.parseTextSync&&(e.text=!0),e.text||(e.binary=!0),e}function rl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2.0.4";Xu(e,"no loader provided");var n=e.version;t&&n&&(t=il(t),n=il(n))}function il(e){var t=e.split(".").map(Number);return{major:t[0],minor:t[1]}}var al=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,[{key:"log",value:function(){return function(e){}}},{key:"info",value:function(){return function(e){}}},{key:"warn",value:function(){return function(e){}}},{key:"error",value:function(){return function(e){}}}]),e}(),ol={CDN:"https://unpkg.com/@loaders.gl",worker:!0,log:new(function(){function e(){Object(u.a)(this,e),this.console=console}return Object(p.a)(e,[{key:"log",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.log).bind.apply(e,[this.console].concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.info).bind.apply(e,[this.console].concat(n))}},{key:"warn",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.warn).bind.apply(e,[this.console].concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.console.error).bind.apply(e,[this.console].concat(n))}}]),e}()),dataType:"arraybuffer"};function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ul(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ll=function(e){return e&&"object"===Object(rt.a)(e)&&e.constructor==={}.constructor},cl=ul({},ol);function hl(e,t,n){var r=ul({},e&&(e.DEFAULT_LOADER_OPTIONS||e.defaultOptions||e.options||{}));return function(e,t){!t||"baseUri"in e||(e.baseUri=t)}(r,n),null===r.log&&(r.log=new al),pl(r,cl),pl(r,t),r}function pl(e,t){for(var n in t)if(n in t){var r=t[n];ll(r)&&ll(e[n])?e[n]=ul({},e[n],{},t[n]):e[n]=t[n]}}function fl(e){this.wrapped=e}function dl(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof fl;Promise.resolve(s?o.wrapped:o).then((function(e){s?r("return"===t?"return":"next",e):i(a.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(dl.prototype[Symbol.asyncIterator]=function(){return this}),dl.prototype.next=function(e){return this._invoke("next",e)},dl.prototype.throw=function(e){return this._invoke("throw",e)},dl.prototype.return=function(e){return this._invoke("return",e)};n(100);function vl(e){return ml.apply(this,arguments)}function ml(){return(ml=Lr(Ir.a.mark((function e(t){var n,r;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=12;break}return n="fetch failed ".concat(t.status," "),e.prev=2,e.next=5,t.text();case 5:r=e.sent,n+=r,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:throw new Error(n);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var yl="Cannot convert supplied data type";function gl(e,t){return Wu(e)?t=t||e.url:qu(t)&&(t=t.name),"string"==typeof t?t.replace(/\?.*/,""):t}function bl(e,t){if(t.text&&"string"==typeof e)return e;if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){var n=e.buffer||e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}throw new Error(yl)}function _l(e,t){return xl.apply(this,arguments)}function xl(){return(xl=Lr(Ir.a.mark((function e(t,n){var r,i;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(t=e.sent,r=t instanceof ArrayBuffer||ArrayBuffer.isView(t),"string"!=typeof t&&!r){e.next=6;break}return e.abrupt("return",bl(t,n));case 6:if(!qu(t)){e.next=10;break}return e.next=9,Ku(t);case 9:t=e.sent;case 10:if(!Wu(t)){e.next=24;break}return i=t,e.next=14,vl(i);case 14:if(!n.binary){e.next=20;break}return e.next=17,i.arrayBuffer();case 17:e.t0=e.sent,e.next=23;break;case 20:return e.next=22,i.text();case 22:e.t0=e.sent;case 23:return e.abrupt("return",e.t0);case 24:throw new Error(yl);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wl=n(15);function kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e,t,n){return n||(e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(n),!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({fetch:e.fetch||Ju},e),Array.isArray(e.loaders)||(e.loaders=null),e)}function El(e,t){if(!t&&!Array.isArray(e))return e;var n;if(e&&(n=Array.isArray(e)?e:[e]),t&&t.loaders){var r=Array.isArray(t.loaders)?t.loaders:[t.loaders];n=n?[].concat(Object(wl.a)(n),Object(wl.a)(r)):r}return n&&n.length?n:null}var Sl=n(59);function Tl(e){if(Sl.toArrayBuffer&&(e=Object(Sl.toArrayBuffer)(e)),e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.buffer;if("string"==typeof e){var t=e;return(new TextEncoder).encode(t).buffer}return Xu(!1)}var Pl=new Map;function jl(e){return"try {\n  importScripts('".concat(e,"');\n} catch (error) {\n  console.error(error);\n}")}function Cl(e){return!!e&&(e instanceof ArrayBuffer||e.buffer instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}function Al(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){if(Cl(e))n.push(e);else if(Cl(e.buffer))n.push(e.buffer);else if(t&&"object"===Object(rt.a)(e))for(var r in e)Al(e[r],t,n)}else;return n}var Ml=0;function Il(e){var t=e.data;(0,e.resolve)(t)}var Rl=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"web-worker-".concat(Ml++):r,a=t.onMessage;Object(u.a)(this,e);var o=function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],Xu("string"==typeof e,"worker source"),e.startsWith("url(")&&e.endsWith(")")){var t=e.match(/^url\((.*)\)$/)[1];if(t&&!t.startsWith("http"))return t;e=jl(t)}var n=Pl.get(e);if(!n){var r=new Blob([e],{type:"application/javascript"});n=URL.createObjectURL(r),Pl.set(e,n)}return n}(n,i);this.worker=new Worker(o,{name:i}),this.name=i,this.onMessage=a||Il}var t;return Object(p.a)(e,[{key:"process",value:(t=Lr(Ir.a.mark((function e(t){var n=this;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.worker.onmessage=function(t){return n.onMessage({worker:n.worker,data:t.data,resolve:e,reject:r})},n.worker.onerror=function(e){var t="".concat(n.name,": WorkerThread.process() failed");e.message&&(t+=" ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));var i=new Error(t);console.error(e),r(i)};var i=Al(t);n.worker.postMessage(t,i)})));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"destroy",value:function(){this.worker.terminate(),this.worker=null}}]),e}(),Ll=function(){function e(t){var n=t.source,r=t.name,i=void 0===r?"unnamed":r,a=t.maxConcurrency,o=void 0===a?1:a,s=t.onMessage,l=t.onDebug,c=void 0===l?function(){}:l;Object(u.a)(this,e),this.source=n,this.name=i,this.maxConcurrency=o,this.onMessage=s,this.onDebug=c,this.jobQueue=[],this.idleQueue=[],this.count=0,this.isDestroyed=!1}var t;return Object(p.a)(e,[{key:"destroy",value:function(){this.idleQueue.forEach((function(e){return e.destroy()})),this.isDestroyed=!0}},{key:"process",value:(t=Lr(Ir.a.mark((function e(t,n){var r=this;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){r.jobQueue.push({data:t,jobName:n,resolve:e,reject:i}),r._startQueuedJob()})));case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"_startQueuedJob",value:function(){var e=this;if(this.jobQueue.length){var t=this._getAvailableWorker();if(t){var n=this.jobQueue.shift();this.onDebug({message:"processing",worker:t.name,job:n.jobName,backlog:this.jobQueue.length}),t.process(n.data).then((function(e){return n.resolve(e)})).catch((function(e){return n.reject(e)})).then((function(){return e._onWorkerDone(t)}))}}}},{key:"_onWorkerDone",value:function(e){this.isDestroyed?e.destroy():(this.idleQueue.push(e),this._startQueuedJob())}},{key:"_getAvailableWorker",value:function(){if(this.idleQueue.length>0)return this.idleQueue.shift();if(this.count<this.maxConcurrency){this.count++;var e="".concat(this.name.toLowerCase(),"-worker (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Rl({source:this.source,onMessage:this.onMessage,name:e})}return null}}]),e}(),zl=function(){function e(t){var n=t.maxConcurrency,r=void 0===n?5:n,i=t.onMessage,a=t.onDebug,o=void 0===a?function(){}:a;Object(u.a)(this,e),this.maxConcurrency=r,this.onMessage=i,this.onDebug=o,this.workerPools=new Map}var t;return Object(p.a)(e,null,[{key:"isSupported",value:function(){return"undefined"!=typeof Worker}}]),Object(p.a)(e,[{key:"setProps",value:function(e){"maxConcurrency"in e&&(this.maxConcurrency=e.maxConcurrency),"onDebug"in e&&(this.onDebug=e.onDebug)}},{key:"destroy",value:function(){this.workerPools.forEach((function(e){return e.destroy()}))}},{key:"process",value:(t=Lr(Ir.a.mark((function e(t,n,r){var i;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._getWorkerPool(t,n),e.abrupt("return",i.process(r));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"_getWorkerPool",value:function(e,t){var n=this.workerPools.get(t);return n||(n=new Ll({source:e,name:t,onMessage:this.onMessage,maxConcurrency:this.maxConcurrency,onDebug:this.onDebug}),this.workerPools.set(t,n)),n}}]),e}();function Dl(e,t,n,r){if(!zl.isSupported())return!1;var i=n&&n[e.id];return!!("local"===n.worker&&i&&i.localWorkerUrl||n.worker&&i&&i.workerUrl)&&(!e.useWorker||e.useWorker(n))}function Fl(e,t,n,r){var i=(n||{}).worker,a=n&&n[e.id]||{},o="local"===i?a.localWorkerUrl:a.workerUrl,s="url(".concat(o,")"),u=e.name,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};e.maxConcurrency&&(t.maxConcurrency=e.maxConcurrency);e.onDebug&&(t.onDebug=e.onDebug);Bl||(Bl=new zl({onMessage:Nl}));return Bl.setProps(t),Bl}(n);n=JSON.parse(JSON.stringify(n));var c="2.0.4"!==e.version?"(core version ".concat("2.0.4",")"):"";return l.process(s,"loaders.gl@".concat(e.version).concat(c,":").concat(u),{arraybuffer:Tl(t),options:n,source:"loaders.gl@".concat("2.0.4"),type:"parse"})}var Bl=null;function Nl(e){return Ul.apply(this,arguments)}function Ul(){return(Ul=Lr(Ir.a.mark((function e(t){var n,r,i,a,o;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.worker,r=t.data,i=t.resolve,a=t.reject,e.t0=r.type,e.next="done"===e.t0?4:"parse"===e.t0?6:"error"===e.t0?17:19;break;case 4:return i(r.result),e.abrupt("break",19);case 6:return e.prev=6,e.next=9,nc(r.arraybuffer,r.options,r.url);case 9:o=e.sent,n.postMessage({type:"parse-done",id:r.id,result:o},Al(o)),e.next=16;break;case 13:e.prev=13,e.t1=e.catch(6),n.postMessage({type:"parse-error",id:r.id,message:e.t1.message});case 16:return e.abrupt("break",19);case 17:return a(r.message),e.abrupt("break",19);case 19:case"end":return e.stop()}}),e,null,[[6,13]])})))).apply(this,arguments)}var Vl=[];function Wl(){return Vl}var ql=/\.([^.]+)$/,Gl=/^data:(.*?)(;|,)/;function Hl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.nothrow,a=void 0!==i&&i;if(t=t||"",e&&!Array.isArray(e)){var o=e;return nl(o),o}Zl(e=[].concat(Object(wl.a)(e||[]),Object(wl.a)(Wl())));var s=Xl(e,t=t.replace(/\?.*/,""));if(!(s=(s=s||Kl(e,n))||Jl(e,n))){if(a)return null;var u="No valid loader found";throw n&&(u+=' for data starting with "'.concat(ec(n),'"')),t&&(u+=" for ".concat(t)),new Error(u)}return s}function Zl(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){nl(i.value)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}function Xl(e,t){var n=t.match(Gl),r=n&&n[1];if(r)return Yl(e,r);var i=(n=t.match(ql))&&n[1];return i&&function(e,t){t=t.toLowerCase();var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=!0,l=!1,c=void 0;try{for(var h,p=s.extensions[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){if(h.value.toLowerCase()===t)return s}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}(e,i)}function Yl(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.mimeTypes&&s.mimeTypes.includes(t))return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function Kl(e,t){return t&&Wu(t)&&t.headers?Yl(e,t.headers.get("content-type")):null}function Jl(e,t){if(!t)return null;var n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("string"==typeof t){if($l(t,s))return s}else if(ArrayBuffer.isView(t)){if(Ql(t.buffer,t.byteOffset,s))return s}else if(t instanceof ArrayBuffer){if(Ql(t,0,s))return s}}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function $l(e,t){return t.testText&&t.testText(e)}function Ql(e,t,n){switch(Array.isArray(n.test)?"array":Object(rt.a)(n.test)){case"function":return n.test(e,n);case"string":case"array":return(Array.isArray(n.test)?n.test:[n.test]).some((function(n){return n===tc(e,t,n.length)}));default:return!1}}function ec(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if("string"==typeof e)return e.slice(0,t);if(ArrayBuffer.isView(e))return tc(e.buffer,e.byteOffset,t);if(e instanceof ArrayBuffer){var n=0;return tc(e,n,t)}return""}function tc(e,t,n){if(e.byteLength<=t+n)return"";for(var r=new DataView(e),i="",a=0;a<n;a++)i+=String.fromCharCode(r.getUint8(t+a));return i}function nc(e,t,n,r){return rc.apply(this,arguments)}function rc(){return(rc=Lr(Ir.a.mark((function e(t,n,r,i){var a,o,s,u;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||Array.isArray(n)||tl(n)||(i=r,r=n,n=null),a="","string"==typeof i&&(a=i,i=null),r=r||{},o=gl(t,a),s=El(n,i),u=Hl(s,o,t)){e.next=9;break}return e.abrupt("return",null);case 9:return r=hl(u,r,o),i=Ol({url:o,parse:nc,loaders:s},0,i),e.next=13,ic(u,t,r,i);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ic(e,t,n,r){return ac.apply(this,arguments)}function ac(){return(ac=Lr(Ir.a.mark((function e(t,n,r,i){return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rl(t),e.next=3,_l(n,t);case 3:if(n=e.sent,!t.parseTextSync||"string"!=typeof n){e.next=7;break}return r.dataType="text",e.abrupt("return",t.parseTextSync(n,r,i,t));case 7:if(!Dl(t,0,r)){e.next=11;break}return e.next=10,Fl(t,n,r);case 10:return e.abrupt("return",e.sent);case 11:if(!t.parse){e.next=15;break}return e.next=14,t.parse(n,r,i,t);case 14:return e.abrupt("return",e.sent);case 15:return Xu(!t.parseSync),e.abrupt("return",Xu(!1));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oc(){return(oc=Lr(Ir.a.mark((function e(t,n,r){var i;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(n)||tl(n)||(r=n,n=null),i=t,"string"!=typeof t){e.next=6;break}return e.next=5,Ju(t,r);case 5:i=e.sent;case 6:if(!qu(t)){e.next=11;break}return e.next=9,Ju(t,r);case 9:i=e.sent,t=null;case 11:return e.next=13,nc(i,n,r,t);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sc=Object.freeze([]),uc=new Uint8ClampedArray(0),lc={data:{type:"data",value:sc,async:!0},dataComparator:null,_dataDiff:{type:"function",value:function(e){return e&&e.__diff},compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:function(e,t){return function(e,t,n){return oc.apply(this,arguments)}(e,t.layer.getLoadOptions())},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:gn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{},uniforms:{},extensions:[],getPolygonOffset:{type:"function",value:function(e){return[0,100*-e.layerIndex]},compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"color",value:[0,0,128,128]}},cc=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"toString",value:function(){var e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}},{key:"setState",value:function(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.internalState&&(this.internalState.needsRedraw=e)}},{key:"setNeedsUpdate",value:function(){this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};return this._getNeedsRedraw(e)}},{key:"needsUpdate",value:function(){return this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams())}},{key:"hasUniformTransition",value:function(){return this.internalState.uniformTransitions.active}},{key:"isPickable",value:function(){return this.props.pickable&&this.props.visible}},{key:"getModels",value:function(){return this.state&&(this.state.models||(this.state.model?[this.state.model]:[]))}},{key:"getAttributeManager",value:function(){return this.internalState&&this.internalState.attributeManager}},{key:"getCurrentLayer",value:function(){return this.internalState&&this.internalState.layer}},{key:"getLoadOptions",value:function(){return this.props.loadOptions}},{key:"project",value:function(e){var t=this.context.viewport,n=uu(du(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),t.pixelProjectionMatrix),r=Object(g.a)(n,3),i=r[0],a=r[1],o=r[2];return 2===e.length?[i,a]:[i,a,o]}},{key:"unproject",value:function(e){return this.context.viewport.unproject(e)}},{key:"projectPosition",value:function(e){return vu(e,{viewport:this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem})}},{key:"use64bitPositions",value:function(){var e=this.props.coordinateSystem;return e===gn.DEFAULT||e===gn.LNGLAT||e===gn.CARTESIAN}},{key:"onHover",value:function(e,t){return!!this.props.onHover&&this.props.onHover(e,t)}},{key:"onClick",value:function(e,t){return!!this.props.onClick&&this.props.onClick(e,t)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}},{key:"decodePickingColor",value:function(e){fn(e instanceof Uint8Array);var t=Object(g.a)(e,3);return t[0]+256*t[1]+65536*t[2]-1}},{key:"initializeState",value:function(){throw new Error("Layer ".concat(this," has not defined initializeState"))}},{key:"getShaders",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.props.extensions[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;e=zs(e,o.getShaders.call(this,o))}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"shouldUpdateState",value:function(e){e.oldProps,e.props,e.context;return e.changeFlags.propsOrDataChanged}},{key:"updateState",value:function(e){e.oldProps,e.props,e.context;var t=e.changeFlags,n=this.getAttributeManager();if(t.dataChanged&&n){var r=t.dataChanged;if(Array.isArray(r)){var i=!0,a=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;n.invalidateAll(l)}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}else n.invalidateAll()}}},{key:"finalizeState",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.getModels()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=this.getAttributeManager();a&&a.finalize(),this.internalState.uniformTransitions.clear()}},{key:"draw",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.draw(e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"getPickingInfo",value:function(e){var t=e.info,n=(e.mode,t.index);return n>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[n]),t}},{key:"invalidateAttribute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.getAttributeManager());t&&("all"===e?t.invalidateAll():t.invalidate(e))}},{key:"updateAttributes",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;this._setModelAttributes(o,e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_updateAttributes",value:function(e){var t=this.getAttributeManager();if(t){var n=this.getNumInstances(e),r=this.getStartIndices(e);t.update({data:e.data,numInstances:n,startIndices:r,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this,ignoreUnknownAttributes:!0});var i=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(i)}}},{key:"_updateAttributeTransition",value:function(){var e=this.getAttributeManager();e&&e.updateTransition()}},{key:"_updateUniformTransition",value:function(){var e=this.internalState.uniformTransitions;if(e.active){var t=e.update(),n=Object.create(this.props);for(var r in t)Object.defineProperty(n,r,{value:t[r]});return n}return this.props}},{key:"calculateInstancePickingColors",value:function(e,t){var n=t.numInstances,r=uc.length/3;if(r<n){var i=(uc=gi.allocate(uc,n,{size:3,copy:!0})).length/3,a=[];fn(i<16777215,"index out of picking color range");for(var o=r;o<i;o++)this.encodePickingColor(o,a),uc[3*o+0]=a[0],uc[3*o+1]=a[1],uc[3*o+2]=a[2]}e.value=uc.subarray(0,3*n)}},{key:"_setModelAttributes",value:function(e,t){var n=this.getAttributeManager(),r=e.userData.excludeAttributes||{},i=n.getShaderAttributes(t,r);e.setAttributes(i)}},{key:"clearPickingColor",value:function(e){var t=this.getAttributeManager().attributes,n=t.pickingColors,r=t.instancePickingColors,i=n||r,a=this.decodePickingColor(e),o=i.getVertexOffset(a),s=i.getVertexOffset(a+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}},{key:"restorePickingColors",value:function(){var e=this.getAttributeManager().attributes,t=e.pickingColors,n=e.instancePickingColors;(t||n).updateSubBuffer({startOffset:0})}},{key:"getNumInstances",value:function(e){return void 0!==(e=e||this.props).numInstances?e.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:Rs(e.data)}},{key:"getStartIndices",value:function(e){return void 0!==(e=e||this.props).startIndices?e.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}},{key:"_initialize",value:function(){ra("layer.initialize",this),this._initState(),this.initializeState(this.context);var e=!0,t=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.initializeState.call(this,this.context,a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,extensionsChanged:!0}),this._updateState()}},{key:"_update",value:function(){var e=this.needsUpdate();ra("layer.update",this,e),e&&this._updateState()}},{key:"_updateState",value:function(){var e=this.props,t=this._updateUniformTransition();this.internalState.propsInTransition=t,this.props=t;var n=this._getUpdateParams();if(this.context.gl)this.updateState(n);else try{this.updateState(n)}catch(e){}var r=!0,i=!1,a=void 0;try{for(var o,s=this.props.extensions[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.updateState.call(this,n,u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}this._updateModules(n),this.isComposite?this._renderLayers(n):(this.setNeedsRedraw(),this._updateAttributes(this.props),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())),this.props=e,this.clearChangeFlags(),this.internalState.needsUpdate=!1,this.internalState.resetOldProps()}},{key:"_finalize",value:function(){ra("layer.finalize",this),fn(this.internalState&&this.state),this.finalizeState(this.context);var e=!0,t=!1,n=void 0;try{for(var r,i=this.props.extensions[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;a.finalizeState.call(this,a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"drawLayer",value:function(e){var t=this,n=e.moduleParameters,r=void 0===n?null:n,i=e.uniforms,a=void 0===i?{}:i,o=e.parameters,s=void 0===o?{}:o;this._updateAttributeTransition();var u=this.props;this.props=this.internalState.propsInTransition;var l=this.props.opacity;a.opacity=Math.pow(l,1/2.2),r&&this.setModuleParameters(r);var c=this.props.getPolygonOffset,h=c&&c(a)||[0,0];Object(xn.c)(this.context.gl,{polygonOffset:h}),Object(xn.d)(this.context.gl,s,(function(){t.draw({moduleParameters:r,uniforms:a,parameters:s,context:t.context})})),this.props=u}},{key:"getChangeFlags",value:function(){return this.internalState.changeFlags}},{key:"setChangeFlags",value:function(e){var t=this.internalState.changeFlags;for(var n in t)e[n]&&!t[n]&&(t[n]=e[n],ra("layer.changeFlag",this,n,e));var r=t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged;t.propsOrDataChanged=r,t.somethingChanged=r||e.viewportChanged||e.stateChanged}},{key:"clearChangeFlags",value:function(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}},{key:"diffProps",value:function(e,t){var n=Ts(e,t);if(n.updateTriggersChanged)for(var r in n.updateTriggersChanged)n.updateTriggersChanged[r]&&this.invalidateAttribute(r);if(n.transitionsChanged)for(var i in n.transitionsChanged)this.internalState.uniformTransitions.add(i,t[i],e[i],e.transitions[i]);return this.setChangeFlags(n)}},{key:"validateProps",value:function(){!function(e){var t=Is(e);for(var n in t){var r=t[n],i=r.validate;if(i&&!i(e[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(e[n]))}}(this.props)}},{key:"setModuleParameters",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.getModels()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.updateModuleSettings(e)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_updateModules",value:function(e){var t=e.props,n=e.oldProps,r=t.autoHighlight,i=t.highlightedObjectIndex,a=t.highlightColor;if(n.autoHighlight!==r||n.highlightedObjectIndex!==i||n.highlightColor!==a){var o={};r||(o.pickingSelectedColor=null),a[3]=a[3]||255,o.pickingHighlightColor=a,Number.isInteger(i)&&(o.pickingSelectedColor=i>=0?this.encodePickingColor(i):null),this.setModuleParameters(o)}}},{key:"_getUpdateParams",value:function(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}},{key:"_getNeedsRedraw",value:function(e){if(!this.internalState)return!1;var t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;var n=this.getAttributeManager(),r=n&&n.getNeedsRedraw(e);return t=t||r}},{key:"_getAttributeManager",value:function(){return new ps(this.context.gl,{id:this.props.id,stats:this.context.stats,timeline:this.context.timeline})}},{key:"_initState",value:function(){fn(!this.internalState&&!this.state),fn(isFinite(this.props.coordinateSystem),"".concat(this.id,": invalid coordinateSystem"));var e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Vu({attributeManager:e,layer:this}),this.clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:function(){return yn.deprecated("layer.state.attributeManager","layer.getAttributeManager()"),e}}),this.internalState.layer=this,this.internalState.uniformTransitions=new gs(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props)}},{key:"_transferState",value:function(e){ra("layer.matched",this,this===e);var t=e.state,n=e.internalState;fn(t&&n),this!==e&&(this.internalState=n,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this.diffProps(this.props,this.internalState.getOldProps()))}},{key:"_onAsyncPropUpdated",value:function(){this.diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}]),t}(Uu);cc.layerName="Layer",cc.defaultProps=lc;var hc=Math.PI/180,pc=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fc=[0,0,0],dc={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]},vc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,a=void 0===i?0:i,o=t.y,s=void 0===o?0:o,l=t.width,c=void 0===l?1:l,h=t.height,p=void 0===h?1:h;this.id=r||this.constructor.displayName||"viewport",this.x=a,this.y=s,this.width=c||1,this.height=p||1,this._frustumPlanes={},this._initViewMatrix(t),this._initProjectionMatrix(t),this._initPixelMatrices(),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return Object(p.a)(e,[{key:"equals",value:function(t){return t instanceof e&&(t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Object(bi.e)(t.projectionMatrix,this.projectionMatrix)&&Object(bi.e)(t.viewMatrix,this.viewMatrix))}},{key:"project",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=this.projectPosition(e),a=uu(i,this.pixelProjectionMatrix),o=Object(g.a)(a,2),s=o[0],u=o[1],l=r?u:this.height-u;return 2===e.length?[s,l]:[s,l,a[2]]}},{key:"unproject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.topLeft,r=void 0===n||n,i=t.targetZ,a=Object(g.a)(e,3),o=a[0],s=a[1],u=a[2],l=r?s:this.height-s,c=i&&i*this.distanceScales.unitsPerMeter[2],h=lu([o,l,u],this.pixelUnprojectionMatrix,c),p=this.unprojectPosition(h),f=Object(g.a)(p,3),d=f[0],v=f[1],m=f[2];return Number.isFinite(u)?[d,v,m]:Number.isFinite(i)?[d,v,i]:[d,v]}},{key:"projectPosition",value:function(e){var t=this.projectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}},{key:"unprojectPosition",value:function(e){var t=this.unprojectFlat(e),n=Object(g.a)(t,2);return[n[0],n[1],(e[2]||0)*this.distanceScales.metersPerUnit[2]]}},{key:"projectFlat",value:function(e){return this.isGeospatial?tu(e):e}},{key:"unprojectFlat",value:function(e){return this.isGeospatial?nu(e):e}},{key:"getDistanceScales",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?ru({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}},{key:"containsPixel",value:function(e){var t=e.x,n=e.y,r=e.width,i=void 0===r?1:r,a=e.height,o=void 0===a?1:a;return t<this.x+this.width&&this.x<t+i&&n<this.y+this.height&&this.y<n+o}},{key:"getFrustumPlanes",value:function(){if(this._frustumPlanes.near)return this._frustumPlanes;var e=this.projectionProps,t=e.near,n=e.far,r=e.fovyRadians,i=e.aspect;return Object.assign(this._frustumPlanes,function(e){var t=e.aspect,n=e.near,r=e.far,i=e.fovyRadians,a=e.position,o=e.direction,s=e.up,u=e.right;wi.copy(o);var l=1/wi.len();wi.normalize(),xi.copy(a),ki.copy(s);var c=1/ki.len();ki.normalize(),Oi.copy(u).normalize();var h=2*Math.tan(i/2)*n*c,p=h*t;Ei.copy(wi).scale(n*l).add(xi),Si.copy(wi).scale(r*l).add(xi);var f=wi.clone().negate(),d=f.dot(Ei),v={near:{distance:d,normal:f},far:{distance:wi.dot(Si),normal:wi.clone()}};return Ti.copy(Oi).scale(.5*p).add(Ei).subtract(xi).normalize(),f=new bi.b(Ti).cross(ki),d=xi.dot(f),v.right={normal:f,distance:d},Ti.copy(Oi).scale(.5*-p).add(Ei).subtract(xi).normalize(),f=new bi.b(ki).cross(Ti),d=xi.dot(f),v.left={normal:f,distance:d},Ti.copy(ki).scale(.5*h).add(Ei).subtract(xi).normalize(),f=new bi.b(Oi).cross(Ti),d=xi.dot(f),v.top={normal:f,distance:d},Ti.copy(ki).scale(.5*-h).add(Ei).subtract(xi).normalize(),f=new bi.b(Ti).cross(Oi),d=xi.dot(f),v.bottom={normal:f,distance:d},v}({aspect:i,near:t,far:n,fovyRadians:r,position:this.cameraPosition,direction:this.cameraDirection,up:this.cameraUp,right:this.cameraRight})),this._frustumPlanes}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"getCameraDirection",value:function(){return this.cameraDirection}},{key:"getCameraUp",value:function(){return this.cameraUp}},{key:"_createProjectionMatrix",value:function(e){var t=e.orthographic,n=e.fovyRadians,r=e.aspect,i=e.focalDistance,a=e.near,o=e.far;return t?(new bi.a).orthographic({fovy:n,aspect:r,focalDistance:i,near:a,far:o}):(new bi.a).perspective({fovy:n,aspect:r,near:a,far:o})}},{key:"_initViewMatrix",value:function(e){var t=e.viewMatrix,n=void 0===t?pc:t,r=e.longitude,i=void 0===r?null:r,a=e.latitude,o=void 0===a?null:a,s=e.zoom,u=void 0===s?null:s,l=e.position,c=void 0===l?null:l,h=e.modelMatrix,p=void 0===h?null:h,f=e.focalDistance,d=void 0===f?1:f,v=e.distanceScales,m=void 0===v?null:v;this.isGeospatial=Number.isFinite(o)&&Number.isFinite(i),this.zoom=u,Number.isFinite(this.zoom)||(this.zoom=this.isGeospatial?function(e){var t=e.latitude;return Xs(Number.isFinite(t)),eu(4003e4*Math.cos(t*Js))-9}({latitude:o})+Math.log2(d):0);var y=Math.pow(2,this.zoom);this.scale=y,this.distanceScales=this.isGeospatial?ru({latitude:o,longitude:i}):m||dc,this.focalDistance=d,this.distanceScales.metersPerUnit=new bi.b(this.distanceScales.metersPerUnit),this.distanceScales.unitsPerMeter=new bi.b(this.distanceScales.unitsPerMeter),this.position=fc,this.meterOffset=fc,c&&(this.position=c,this.modelMatrix=p,this.meterOffset=p?p.transformVector(c):c),this.isGeospatial?(this.longitude=i,this.latitude=o,this.center=this._getCenterInWorld({longitude:i,latitude:o})):this.center=c?this.projectPosition(c):[0,0,0],this.viewMatrixUncentered=n,this.viewMatrix=(new bi.a).multiplyRight(this.viewMatrixUncentered).translate(new bi.b(this.center||fc).negate())}},{key:"_getCenterInWorld",value:function(e){var t=e.longitude,n=e.latitude,r=this.meterOffset,i=this.distanceScales,a=this.projectFlat([t,n]),o=new bi.b(a[0],a[1],0);if(r){var s=new bi.b(r).scale(i.unitsPerMeter);o.add(s)}return o}},{key:"_initProjectionMatrix",value:function(e){var t=e.projectionMatrix,n=void 0===t?null:t,r=e.orthographic,i=void 0!==r&&r,a=e.fovyRadians,o=e.fovy,s=void 0===o?75:o,u=e.near,l=void 0===u?.1:u,c=e.far,h=void 0===c?1e3:c,p=e.focalDistance,f=void 0===p?1:p;this.projectionProps={orthographic:i,fovyRadians:a||s*hc,aspect:this.width/this.height,focalDistance:f,near:l,far:h},this.projectionMatrix=n||this._createProjectionMatrix(this.projectionProps)}},{key:"_initPixelMatrices",value:function(){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.g(e,e,this.projectionMatrix),k.g(e,e,this.viewMatrix),this.viewProjectionMatrix=e,this.viewMatrixInverse=k.e([],this.viewMatrix)||this.viewMatrix;var t,n,r,i=(t={viewMatrix:this.viewMatrix,viewMatrixInverse:this.viewMatrixInverse},n=t.viewMatrix,{eye:[(r=t.viewMatrixInverse)[12],r[13],r[14]],direction:[-n[2],-n[6],-n[10]],up:[n[1],n[5],n[9]],right:[n[0],n[4],n[8]]}),a=i.eye,o=i.direction,s=i.up,u=i.right;this.cameraPosition=a,this.cameraDirection=o,this.cameraUp=s,this.cameraRight=u;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];k.n(l,l,[this.width/2,-this.height/2,1]),k.o(l,l,[1,-1,0]),k.g(c,l,this.viewProjectionMatrix),this.pixelProjectionMatrix=c,this.viewportMatrix=l,this.pixelUnprojectionMatrix=k.e([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||yn.warn("Pixel project matrix not invertible")()}},{key:"metersPerPixel",get:function(){return this.distanceScales.metersPerUnit[2]/this.scale}},{key:"projectionMode",get:function(){return this.isGeospatial?this.zoom<12?bn.WEB_MERCATOR:bn.WEB_MERCATOR_AUTO_OFFSET:bn.IDENTITY}}]),e}();vc.displayName="Viewport";var mc={name:"geometry",vs:"\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry;\n",fs:"\n#define SMOOTH_EDGE_RADIUS 0.5\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n"},yc={name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},gc=Object.keys(gn).map((function(e){return"const float COORDINATE_SYSTEM_".concat(e," = ").concat(gn[e],".;")})).join(""),bc=Object.keys(bn).map((function(e){return"const float PROJECTION_MODE_".concat(e," = ").concat(bn[e],".;")})).join(""),_c="".concat(gc,"\n").concat(bc,"\n\nuniform float project_uCoordinateSystem;\nuniform float project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform float project_uAntimeridian;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z;\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy;\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter;\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\nvec3 project_normal(vec3 vector) {\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  return normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    dy = clamp(dy, -1., 1.);\n  }\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x - project_uAntimeridian, 360.0) + project_uAntimeridian;\n  }\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy) * WORLD_SCALE,\n        project_size(position_world.z),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT)) {\n    position_world.xyz -= project_uCoordinateOrigin;\n    position_world += project_uModelMatrix * vec4(position64Low, 0.0);\n  }\n\n  return project_offset_(position_world);\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (project_uCoordinateSystem == COORDINATE_SYSTEM_METER_OFFSETS ||\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {\n    position.w *= project_uCommonUnitsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n"),xc={};var wc={name:"project",dependencies:[yc],vs:_c,getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xc;return e.viewport?Gs(e):{}}},kc=[mc,wc],Oc=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Ec(e){var t=jo.getDefaultProgramManager(e),n=!0,r=!1,i=void 0;try{for(var a,o=kc[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;t.addDefaultModule(s)}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=!0,l=!1,c=void 0;try{for(var h,p=Oc[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value;t.addShaderHook(f)}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return t}var Sc=Object.seal({layerManager:null,deck:null,gl:null,stats:null,shaderCache:null,pickingFBO:null,mousePosition:null,userData:{}}),Tc=function(e){return e instanceof cc?"".concat(e):e?"invalid":"null"},Pc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.deck,i=n.stats,a=n.viewport,o=void 0===a?null:a,s=n.timeline,l=void 0===s?null:s;Object(u.a)(this,e),this.lastRenderedLayers=[],this.layers=[],this.context=Object.assign({},Sc,{layerManager:this,deck:r,gl:t,programManager:t&&Ec(t),stats:i||new Dn({id:"deck.gl"}),viewport:o||new vc({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:l||new mn}),this._needsRedraw="Initial render",this._needsUpdate=!1,this._debug=!1,this.activateViewport=this.activateViewport.bind(this),Object.seal(this)}return Object(p.a)(e,[{key:"finalize",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.layers[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var a=r.value;this._finalizeLayer(a)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=!0,r=!1,i=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value,u=s.getNeedsRedraw(e);t=t||u}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return t}},{key:"needsUpdate",value:function(){return this._needsUpdate}},{key:"setNeedsRedraw",value:function(e){this._needsRedraw=this._needsRedraw||e}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e}},{key:"getLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerIds,n=void 0===t?null:t;return n?this.layers.filter((function(e){return n.find((function(t){return 0===e.id.indexOf(t)}))})):this.layers}},{key:"setProps",value:function(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&this.setLayers(e.layers)}},{key:"setLayers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t||e!==this.lastRenderedLayers;if(ra("layerManager.setLayers",this,n,e),!n)return this;this.lastRenderedLayers=e,e=Bi(e,{filter:Boolean});var r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.context=this.context}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return this._updateLayers(this.layers,e),this}},{key:"updateLayers",value:function(){var e=this.needsUpdate();if(e){this.setNeedsRedraw("updating layers: ".concat(e));this.setLayers(this.lastRenderedLayers,!0)}}},{key:"activateViewport",value:function(e){fn(e,"LayerManager: viewport not set");var t=this.context.viewport;if(!t||!e.equals(t)){ra("layerManager.activateViewport",this,e),this.context.viewport=e;var n={viewportChanged:!0},r=!0,i=!1,a=void 0;try{for(var o,s=this.layers[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.setChangeFlags(n),this._updateLayer(u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}}return this}},{key:"_updateLayers",value:function(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;n[u.id]?yn.warn("Multiple old layers with same id ".concat(Tc(u)))():n[u.id]=u}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}for(var l=[],c=this._updateSublayersRecursively(t,n,l),h=this._finalizeOldLayers(n),p=!1,f=0,d=l;f<d.length;f++){if(d[f].hasUniformTransition()){p=!0;break}}this._needsUpdate=p,this.layers=l;var v=c||h;if(v)throw v}},{key:"_updateSublayersRecursively",value:function(e,t,n){var r=null,i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;l.context=this.context;var c=t[l.id];null===c&&yn.warn("Multiple new layers with same id ".concat(Tc(l)))(),t[l.id]=null;var h=null;try{if(this._debug&&c!==l&&l.validateProps(),c){this._transferLayerState(c,l);var p=this._updateLayer(l);r=r||p}else{var f=this._initializeLayer(l);r=r||f}n.push(l),h=l.isComposite&&l.getSubLayers()}catch(f){yn.warn("error during matching of ".concat(Tc(l)),f)(),r=r||f}if(h){var d=this._updateSublayersRecursively(h,t,n);r=r||d}}}catch(f){a=!0,o=f}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}return r}},{key:"_finalizeOldLayers",value:function(e){var t=null;for(var n in e){var r=e[n];if(r){var i=this._finalizeLayer(r);t=t||i}}return t}},{key:"_initializeLayer",value:function(e){try{e._initialize(),e.lifecycle=xs}catch(t){return yn.warn("error while initializing ".concat(Tc(e),"\n"),t)(),t}return null}},{key:"_transferLayerState",value:function(e,t){t._transferState(e),t.lifecycle=_s,t!==e&&(e.lifecycle=ws)}},{key:"_updateLayer",value:function(e){try{e._update()}catch(t){return yn.warn("error during update of ".concat(Tc(e)),t)(),t}return null}},{key:"_finalizeLayer",value:function(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(Tc(e)),e.lifecycle=ks;try{e._finalize(),e.lifecycle=Os}catch(t){return yn.warn("error during finalization of ".concat(Tc(e)),t)(),t}return null}}]),e}();function jc(e,t){return e===t||Object.keys(e).every((function(n){return Array.isArray(e[n])&&Array.isArray(t[n])?jc(e[n],t[n]):e[n]===t[n]}))}var Cc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="Initial render",this._needsUpdate=!0,this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractiveStateChange:t.onInteractiveStateChange},Object.seal(this),this.setProps(t)}return Object(p.a)(e,[{key:"finalize",value:function(){for(var e in this.controllers)this.controllers[e]&&this.controllers[e].finalize();this.controllers={}}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"setNeedsUpdate",value:function(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}},{key:"updateViewStates",value:function(){for(var e in this.controllers){var t=this.controllers[e];t&&t.updateTransition()}}},{key:"getViewports",value:function(e){return e?this._viewports.filter((function(t){return t.containsPixel(e)})):this._viewports}},{key:"getViews",value:function(){var e={};return this.views.forEach((function(t){e[t.id]=t})),e}},{key:"getView",value:function(e){return"string"==typeof e?this.views.find((function(t){return t.id===e})):e}},{key:"getViewState",value:function(e){var t=this.getView(e),n=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(n):n}},{key:"getViewport",value:function(e){return this._viewportMap[e]}},{key:"unproject",value:function(e,t){for(var n=this.getViewports(),r={x:e[0],y:e[1]},i=n.length-1;i>=0;--i){var a=n[i];if(a.containsPixel(r)){var o=e.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,t)}}return null}},{key:"setProps",value:function(e){"views"in e&&this._setViews(e.views),"viewState"in e&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}},{key:"_update",value:function(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}},{key:"_setSize",value:function(e,t){fn(Number.isFinite(e)&&Number.isFinite(t)),e===this.width&&t===this.height||(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}},{key:"_setViews",value:function(e){e=Bi(e,{filter:Boolean}),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}},{key:"_setViewState",value:function(e){e?(!jc(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):yn.warn("missing `viewState` or `initialViewState`")()}},{key:"_onViewStateChange",value:function(e,t){t.viewId=e,this._eventCallbacks.onViewStateChange(t)}},{key:"_createController",value:function(e){return new(0,e.type)(Object.assign({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractiveStateChange},e))}},{key:"_updateController",value:function(e,t,n,r){if(e.controller){var i=Object.assign({},e.controller,t,{id:e.id,x:n.x,y:n.y,width:n.width,height:n.height});return r?r.setProps(i):r=this._createController(i),r}return null}},{key:"_rebuildViewports",value:function(){var e=this.width,t=this.height,n=this.views,r=this.controllers;this._viewports=[],this.controllers={};for(var i=n.length;i--;){var a=n[i],o=this.getViewState(a),s=a.makeViewport({width:e,height:t,viewState:o});this.controllers[a.id]=this._updateController(a,o,s,r[a.id]),this._viewports.unshift(s)}for(var u in r)r[u]&&!this.controllers[u]&&r[u].finalize();this._buildViewportMap()}},{key:"_buildViewportMap",value:function(){var e=this;this._viewportMap={},this._viewports.forEach((function(t){t.id&&(e._viewportMap[t.id]=e._viewportMap[t.id]||t)}))}},{key:"_diffViews",value:function(e,t){return e.length!==t.length||e.some((function(n,r){return!e[r].equals(t[r])}))}}]),e}(),Ac=/([0-9]+\.?[0-9]*)(%|px)/;function Mc(e){switch(Object(rt.a)(e)){case"number":return{position:e,relative:!1};case"string":var t=e.match(Ac);if(t&&t.length>=3){var n="%"===t[2],r=parseFloat(t[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(e))}}function Ic(e,t){return e.relative?Math.round(e.position*t):e.position}var Rc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.id,r=void 0===n?null:n,i=t.x,a=void 0===i?0:i,o=t.y,s=void 0===o?0:o,l=t.width,c=void 0===l?"100%":l,h=t.height,p=void 0===h?"100%":h,f=t.projectionMatrix,d=void 0===f?null:f,v=t.fovy,m=void 0===v?50:v,y=t.near,g=void 0===y?.1:y,b=t.far,_=void 0===b?1e3:b,x=t.modelMatrix,w=void 0===x?null:x,k=t.viewportInstance,O=void 0===k?null:k,E=t.type,S=void 0===E?vc:E;fn(!O||O instanceof vc),this.viewportInstance=O,this.id=r||this.constructor.displayName||"view",this.type=S,this.props=Object.assign({},t,{id:this.id,projectionMatrix:d,fovy:m,near:g,far:_,modelMatrix:w}),this._parseDimensions({x:a,y:s,width:c,height:p}),this.equals=this.equals.bind(this),Object.seal(this)}return Object(p.a)(e,[{key:"equals",value:function(e){return this===e||(this.viewportInstance?e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):jc(this.props,e.props))}},{key:"makeViewport",value:function(e){var t=e.width,n=e.height,r=e.viewState;if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);var i=this.getDimensions({width:t,height:n}),a=Object.assign({viewState:r},r,this.props,i);return this._getViewport(a)}},{key:"getViewStateId",value:function(){switch(Object(rt.a)(this.props.viewState)){case"string":return this.props.viewState;case"object":return this.props.viewState&&this.props.viewState.id;default:return this.id}}},{key:"filterViewState",value:function(e){if(this.props.viewState&&"object"===Object(rt.a)(this.props.viewState)){if(!this.props.viewState.id)return this.props.viewState;var t=Object.assign({},e);for(var n in this.props.viewState)"id"!==n&&(t[n]=this.props.viewState[n]);return t}return e}},{key:"getDimensions",value:function(e){var t=e.width,n=e.height;return{x:Ic(this._x,t),y:Ic(this._y,n),width:Ic(this._width,t),height:Ic(this._height,n)}}},{key:"_getControllerProps",value:function(e){var t=this.props.controller;return t?!0===t?e:("function"==typeof t&&(t={type:t}),Object.assign({},e,t)):null}},{key:"_getViewport",value:function(e){return new(0,this.type)(e)}},{key:"_parseDimensions",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height;this._x=Mc(t),this._y=Mc(n),this._width=Mc(r),this._height=Mc(i)}}]),e}(),Lc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,t);var r=n.latitude,i=void 0===r?0:r,a=n.longitude,o=void 0===a?0:a,s=n.zoom,p=void 0===s?11:s,f=n.pitch,d=void 0===f?0:f,v=n.bearing,m=void 0===v?0:v,y=n.nearZMultiplier,g=void 0===y?.1:y,b=n.farZMultiplier,_=void 0===b?1.01:b,x=n.orthographic,w=void 0!==x&&x,k=n.width,O=n.height,E=n.altitude,S=void 0===E?1.5:E,T=Math.pow(2,p),P=ou({width:k=k||1,height:O=O||1,pitch:d,altitude:S=Math.max(.75,S),nearZMultiplier:g,farZMultiplier:_}),j=P.fov,C=P.aspect,A=P.focalDistance,M=P.near,I=P.far,R=au({height:O,pitch:d,bearing:m,scale:T,altitude:S}),L=Object.assign({},n,{width:k,height:O,viewMatrix:R,longitude:o,latitude:i,zoom:p,orthographic:w,fovyRadians:j,aspect:C,focalDistance:w?A:1,near:M,far:I});return(e=Object(l.a)(this,Object(c.a)(t).call(this,L))).latitude=i,e.longitude=o,e.zoom=p,e.pitch=d,e.bearing=m,e.altitude=S,e.orthographic=w,Object.freeze(Object(h.a)(e)),e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"addMetersToLngLat",value:function(e,t){return iu(e,t)}},{key:"getMapCenterByLngLatPosition",value:function(e){var t=e.lngLat,n=lu(e.pos,this.pixelUnprojectionMatrix),r=this.projectFlat(t),i=O.a([],r,O.d([],n)),a=O.a([],this.center,i);return this.unprojectFlat(a)}},{key:"fitBounds",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.width,i=this.height,a=hu(Object.assign({width:r,height:i,bounds:e},n)),o=a.longitude,s=a.latitude,u=a.zoom;return new t({width:r,height:i,longitude:o,latitude:s,zoom:u})}}]),t}(vc);Lc.displayName="WebMercatorViewport";var zc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e),Array.isArray(t)&&(t={compare:t,extract:t,required:t});var n=t,r=n.compare,i=n.extract,a=n.required;this._propsToCompare=r,this._propsToExtract=i,this._requiredProps=a}return Object(p.a)(e,[{key:"arePropsEqual",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=(this._propsToCompare||Object.keys(t))[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(!(s in e&&s in t&&Object(bi.e)(e[s],t[s])))return!1}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return!0}},{key:"initializeProps",value:function(e,t){var n;if(this._propsToExtract){var r={},i={},a=!0,o=!1,s=void 0;try{for(var u,l=this._propsToExtract[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;r[c]=e[c],i[c]=t[c]}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}n={start:r,end:i}}else n={start:e,end:t};return this._checkRequiredProps(n.start),this._checkRequiredProps(n.end),n}},{key:"interpolateProps",value:function(e,t,n){return t}},{key:"getDuration",value:function(e,t){return t.transitionDuration}},{key:"_checkRequiredProps",value:function(e){this._requiredProps&&this._requiredProps.forEach((function(t){var n=e[t];fn(Number.isFinite(n)||Array.isArray(n),"".concat(t," is required for transition"))}))}}]),e}(),Dc=["longitude","latitude","zoom","bearing","pitch"],Fc=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dc;return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).call(this,e))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"interpolateProps",value:function(e,t,n){var r={};for(var i in t)r[i]=Object(bi.f)(e[i],t[i],n);return r}}]),t}(zc),Bc=function(){},Nc=1,Uc=2,Vc=3,Wc={transitionDuration:0,transitionEasing:function(e){return e},transitionInterpolator:new Fc,transitionInterruption:Nc,onTransitionStart:Bc,onTransitionInterrupt:Bc,onTransitionEnd:Bc},qc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),this.ControllerState=t,this.props=Object.assign({},Wc,n),this.propsInTransition=null,this.transition=new is(n.timeline),this.onViewStateChange=n.onViewStateChange,this._onTransitionUpdate=this._onTransitionUpdate.bind(this)}return Object(p.a)(e,[{key:"finalize",value:function(){this.transition.cancel()}},{key:"getViewportInTransition",value:function(){return this.propsInTransition}},{key:"processViewStateChange",value:function(e){var t=!1,n=this.props;if(e=Object.assign({},Wc,e),this.props=e,this._shouldIgnoreViewportChange(n,e))return t;if(this._isTransitionEnabled(e)){var r=this.transition.settings,i=r.interruption,a=r.endProps,o=Object.assign({},n,i===Uc?a:this.propsInTransition||n);this._triggerTransition(o,e),t=!0}else this.transition.cancel();return t}},{key:"updateTransition",value:function(){this.transition.update()}},{key:"_isTransitionEnabled",value:function(e){var t=e.transitionDuration,n=e.transitionInterpolator;return(t>0||"auto"===t)&&Boolean(n)}},{key:"_isUpdateDueToCurrentTransition",value:function(e){return!!this.transition.inProgress&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}},{key:"_shouldIgnoreViewportChange",value:function(e,t){return this.transition.inProgress?this.transition.settings.interruption===Vc||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}},{key:"_triggerTransition",value:function(e,t){var n=new this.ControllerState(e),r=new this.ControllerState(t).shortestPathFrom(n),i=t.transitionInterpolator,a=i.getDuration?i.getDuration(e,t):t.transitionDuration,o=t.transitionInterpolator.initializeProps(e,r);this.propsInTransition={},this.duration=a,this.transition.start({duration:a,easing:t.transitionEasing,interpolator:t.transitionInterpolator,interruption:t.transitionInterruption,startProps:o.start,endProps:o.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)}),this.updateTransition()}},{key:"_onTransitionEnd",value:function(e){var t=this;return function(n){t.propsInTransition=null,e(n)}}},{key:"_onTransitionUpdate",value:function(e){var t=e.time,n=e.settings,r=n.interpolator,i=n.startProps,a=n.endProps,o=n.duration,s=(0,n.easing)(t/o),u=r.interpolateProps(i,a,s);this.propsInTransition=new this.ControllerState(Object.assign({},this.props,u)).getViewportProps(),this.onViewStateChange&&this.onViewStateChange({viewState:this.propsInTransition,interactionState:{inTransition:!0},oldViewState:this.props})}}]),e}();qc.defaultProps=Wc;var Gc={transitionDuration:0},Hc=["wheel"],Zc=["panstart","panmove","panend"],Xc=["pinchstart","pinchmove","pinchend"],Yc=["doubletap"],Kc=["keydown"],Jc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e),fn(t),this.ControllerState=t,this.controllerState=null,this.controllerStateProps=null,this.eventManager=null,this.transitionManager=new qc(t,n),this._events=null,this._state={isDragging:!1},this._customEvents=[],this.onViewStateChange=null,this.onStateChange=null,this.invertPan=!1,this.handleEvent=this.handleEvent.bind(this),this.setProps(n)}return Object(p.a)(e,[{key:"finalize",value:function(){for(var e in this._events)this._events[e]&&this.eventManager.off(e,this.handleEvent);this.transitionManager.finalize()}},{key:"handleEvent",value:function(e){var t=this.ControllerState;switch(this.controllerState=new t(Object.assign({},this.controllerStateProps,this._state)),e.type){case"panstart":return this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}},{key:"getCenter",value:function(e){var t=this.controllerStateProps,n=t.x,r=t.y,i=e.offsetCenter;return[i.x-n,i.y-r]}},{key:"isPointInBounds",value:function(e,t){var n=this.controllerStateProps,r=n.width,i=n.height;if(t&&t.handled)return!1;var a=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return a&&t&&t.stopPropagation(),a}},{key:"isFunctionKeyPressed",value:function(e){var t=e.srcEvent;return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"isDragging",value:function(){return this._state.isDragging}},{key:"setProps",value:function(e){"onViewportChange"in e&&yn.removed("onViewportChange")(),"onViewStateChange"in e&&(this.onViewStateChange=e.onViewStateChange),"onStateChange"in e&&(this.onStateChange=e.onStateChange),this.controllerStateProps=e,"eventManager"in e&&this.eventManager!==e.eventManager&&(this.eventManager=e.eventManager,this._events={},this.toggleEvents(this._customEvents,!0)),this.transitionManager.processViewStateChange(this.controllerStateProps);var t=e.scrollZoom,n=void 0===t||t,r=e.dragPan,i=void 0===r||r,a=e.dragRotate,o=void 0===a||a,s=e.doubleClickZoom,u=void 0===s||s,l=e.touchZoom,c=void 0===l||l,h=e.touchRotate,p=void 0!==h&&h,f=e.keyboard,d=void 0===f||f,v=Boolean(this.onViewStateChange);this.toggleEvents(Hc,v&&n),this.toggleEvents(Zc,v&&(i||o)),this.toggleEvents(Xc,v&&(c||p)),this.toggleEvents(Yc,v&&u),this.toggleEvents(Kc,v&&d),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=u,this.touchZoom=c,this.touchRotate=p,this.keyboard=d}},{key:"updateTransition",value:function(){this.transitionManager.updateTransition()}},{key:"toggleEvents",value:function(e,t){var n=this;this.eventManager&&e.forEach((function(e){n._events[e]!==t&&(n._events[e]=t,t?n.eventManager.on(e,n.handleEvent):n.eventManager.off(e,n.handleEvent))}))}},{key:"updateViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.assign({},e.getViewportProps(),t),i=this.controllerState!==e;if(i){var a=this.controllerState?this.controllerState.getViewportProps():null;this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:n,oldViewState:a})}Object.assign(this._state,e.getInteractiveState(),n),this.onStateChange&&this.onStateChange(this._state)}},{key:"_onPanStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.panStart({pos:t}).rotateStart({pos:t});return this.updateViewport(n,Gc,{isDragging:!0}),!0}},{key:"_onPan",value:function(e){if(!this.isDragging())return!1;var t=this.isFunctionKeyPressed(e)||e.rightButton;return(t=this.invertPan?!t:t)?this._onPanMove(e):this._onPanRotate(e)}},{key:"_onPanEnd",value:function(e){var t=this.controllerState.panEnd().rotateEnd();return this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isRotating:!1}),!0}},{key:"_onPanMove",value:function(e){if(!this.dragPan)return!1;var t=this.getCenter(e),n=this.controllerState.pan({pos:t});return this.updateViewport(n,Gc,{isDragging:!0,isPanning:!0}),!0}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.controllerState.getViewportProps(),i=t/r.width,a=n/r.height,o=this.controllerState.rotate({deltaScaleX:i,deltaScaleY:a});return this.updateViewport(o,Gc,{isDragging:!0,isRotating:!0}),!0}},{key:"_onWheel",value:function(e){if(!this.scrollZoom)return!1;e.preventDefault();var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=e.delta,r=2/(1+Math.exp(-Math.abs(.01*n)));n<0&&0!==r&&(r=1/r);var i=this.controllerState.zoom({pos:t,scale:r});return this.updateViewport(i,Gc,{isZooming:!0,isPanning:!0}),!0}},{key:"_onPinchStart",value:function(e){var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return this._state.startPinchRotation=e.rotation,this.updateViewport(n,Gc,{isDragging:!0}),!0}},{key:"_onPinch",value:function(e){if(!this.touchZoom&&!this.touchRotate)return!1;if(!this.isDragging())return!1;var t=this.controllerState;if(this.touchZoom){var n=e.scale,r=this.getCenter(e);t=t.zoom({pos:r,scale:n})}if(this.touchRotate){var i=e.rotation,a=this._state.startPinchRotation;t=t.rotate({deltaScaleX:-(i-a)/180})}return this.updateViewport(t,Gc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),!0}},{key:"_onPinchEnd",value:function(e){var t=this.controllerState.zoomEnd().rotateEnd();return this._state.startPinchRotation=0,this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1}),!0}},{key:"_onDoubleTap",value:function(e){if(!this.doubleClickZoom)return!1;var t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;var n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps(),{isZooming:!0,isPanning:!0}),!0}},{key:"_onKeyDown",value:function(e){if(!this.keyboard)return!1;var t,n=this.isFunctionKeyPressed(e),r=this.controllerState,i={};switch(e.srcEvent.keyCode){case 189:t=n?r.zoomOut().zoomOut():r.zoomOut(),i.isZooming=!0;break;case 187:t=n?r.zoomIn().zoomIn():r.zoomIn(),i.isZooming=!0;break;case 37:n?(t=r.rotateLeft(),i.isRotating=!0):(t=r.moveLeft(),i.isPanning=!0);break;case 39:n?(t=r.rotateRight(),i.isRotating=!0):(t=r.moveRight(),i.isPanning=!0);break;case 38:n?(t=r.rotateUp(),i.isRotating=!0):(t=r.moveUp(),i.isPanning=!0);break;case 40:n?(t=r.rotateDown(),i.isRotating=!0):(t=r.moveDown(),i.isPanning=!0);break;default:return!1}return this.updateViewport(t,this._getTransitionProps(),i),!0}},{key:"_getTransitionProps",value:function(){return Gc}},{key:"events",set:function(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.setProps(this.controllerStateProps)}}]),e}(),$c=function(){function e(t){Object(u.a)(this,e),fn(Number.isFinite(t.width),"`width` must be supplied"),fn(Number.isFinite(t.height),"`height` must be supplied"),this._viewportProps=this._applyConstraints(t)}return Object(p.a)(e,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"shortestPathFrom",value:function(e){return this._viewportProps}},{key:"_applyConstraints",value:function(e){return e}}]),e}(),Qc={transitionDuration:300,transitionEasing:function(e){return e},transitionInterpolator:new Fc,transitionInterruption:Nc},eh={transitionDuration:0},th=0,nh=20,rh=0,ih=60,ah=0,oh=0,sh=1.5,uh=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.width,i=n.height,a=n.latitude,o=n.longitude,s=n.zoom,h=n.bearing,p=void 0===h?oh:h,f=n.pitch,d=void 0===f?ah:f,v=n.altitude,m=void 0===v?sh:v,y=n.maxZoom,g=void 0===y?nh:y,b=n.minZoom,_=void 0===b?th:b,x=n.maxPitch,w=void 0===x?ih:x,k=n.minPitch,O=void 0===k?rh:k,E=n.startPanLngLat,S=n.startZoomLngLat,T=n.startBearing,P=n.startPitch,j=n.startZoom;return Object(u.a)(this,t),fn(Number.isFinite(o),"`longitude` must be supplied"),fn(Number.isFinite(a),"`latitude` must be supplied"),fn(Number.isFinite(s),"`zoom` must be supplied"),(e=Object(l.a)(this,Object(c.a)(t).call(this,{width:r,height:i,latitude:a,longitude:o,zoom:s,bearing:p,pitch:d,altitude:m,maxZoom:g,minZoom:_,maxPitch:w,minPitch:O})))._interactiveState={startPanLngLat:E,startZoomLngLat:S,startBearing:T,startPitch:P,startZoom:j},e}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getViewportProps",value:function(){return this._viewportProps}},{key:"getInteractiveState",value:function(){return this._interactiveState}},{key:"panStart",value:function(e){var t=e.pos;return this._getUpdatedState({startPanLngLat:this._unproject(t)})}},{key:"pan",value:function(e){var t=e.pos,n=e.startPos,r=this._interactiveState.startPanLngLat||this._unproject(n);if(!r)return this;var i=this._calculateNewLngLat({startPanLngLat:r,pos:t}),a=Object(g.a)(i,2),o=a[0],s=a[1];return this._getUpdatedState({longitude:o,latitude:s})}},{key:"panEnd",value:function(){return this._getUpdatedState({startPanLngLat:null})}},{key:"rotateStart",value:function(e){e.pos;return this._getUpdatedState({startBearing:this._viewportProps.bearing,startPitch:this._viewportProps.pitch})}},{key:"rotate",value:function(e){var t=e.deltaScaleX,n=void 0===t?0:t,r=e.deltaScaleY,i=void 0===r?0:r,a=this._interactiveState,o=a.startBearing,s=a.startPitch;if(!Number.isFinite(o)||!Number.isFinite(s))return this;var u=this._calculateNewPitchAndBearing({deltaScaleX:n,deltaScaleY:i,startBearing:o,startPitch:s}),l=u.pitch,c=u.bearing;return this._getUpdatedState({bearing:c,pitch:l})}},{key:"rotateEnd",value:function(){return this._getUpdatedState({startBearing:null,startPitch:null})}},{key:"zoomStart",value:function(e){var t=e.pos;return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this._viewportProps.zoom})}},{key:"zoom",value:function(e){var t=e.pos,n=e.startPos,r=e.scale,i=this._interactiveState,a=i.startZoom,o=i.startZoomLngLat;Number.isFinite(a)||(a=this._viewportProps.zoom,o=this._unproject(n)||this._unproject(t));var s=this._calculateNewZoom({scale:r,startZoom:a}),u=new pu(Object.assign({},this._viewportProps,{zoom:s})).getMapCenterByLngLatPosition({lngLat:o,pos:t}),l=Object(g.a)(u,2),c=l[0],h=l[1];return this._getUpdatedState({zoom:s,longitude:c,latitude:h})}},{key:"zoomEnd",value:function(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}},{key:"zoomIn",value:function(){return this._zoomFromCenter(2)}},{key:"zoomOut",value:function(){return this._zoomFromCenter(.5)}},{key:"moveLeft",value:function(){return this._panFromCenter([100,0])}},{key:"moveRight",value:function(){return this._panFromCenter([-100,0])}},{key:"moveUp",value:function(){return this._panFromCenter([0,100])}},{key:"moveDown",value:function(){return this._panFromCenter([0,-100])}},{key:"rotateLeft",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing-15})}},{key:"rotateRight",value:function(){return this._getUpdatedState({bearing:this._viewportProps.bearing+15})}},{key:"rotateUp",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch+10})}},{key:"rotateDown",value:function(){return this._getUpdatedState({pitch:this._viewportProps.pitch-10})}},{key:"shortestPathFrom",value:function(e){var t=e.getViewportProps(),n=Object.assign({},this._viewportProps),r=n.bearing,i=n.longitude;return Math.abs(r-t.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(i-t.longitude)>180&&(n.longitude=i<0?i+360:i-360),n}},{key:"_zoomFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.zoom({pos:[n/2,r/2],scale:e})}},{key:"_panFromCenter",value:function(e){var t=this._viewportProps,n=t.width,r=t.height;return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}},{key:"_getUpdatedState",value:function(e){return new t(Object.assign({},this._viewportProps,this._interactiveState,e))}},{key:"_applyConstraints",value:function(e){var t=e.maxZoom,n=e.minZoom,r=e.zoom;e.zoom=Object(bi.c)(r,n,t);var i=e.maxPitch,a=e.minPitch,o=e.pitch;return e.pitch=Object(bi.c)(o,a,i),Object.assign(e,function(e){var t=e.width,n=e.height,r=e.longitude,i=e.latitude,a=e.zoom,o=e.pitch,s=void 0===o?0:o,u=e.bearing,l=void 0===u?0:u;(r<-180||r>180)&&(r=Zs(r+180,360)-180),(l<-180||l>180)&&(l=Zs(l+180,360)-180);var c=new pu({width:t,height:n,longitude:r,latitude:i,zoom:a}),h=c.project([r,85.05113])[1],p=c.project([r,-85.05113])[1],f=0;return p-h<n&&(a+=Math.log2(n/(p-h)),h=(c=new pu({width:t,height:n,longitude:r,latitude:i,zoom:a})).project([r,85.05113])[1],p=c.project([r,-85.05113])[1]),h>0?f=h:p<n&&(f=p-n),f&&(i=c.unproject([t/2,n/2+f])[1]),{width:t,height:n,longitude:r,latitude:i,zoom:a,pitch:s,bearing:l}}(e)),e}},{key:"_unproject",value:function(e){var t=new pu(this._viewportProps);return e&&t.unproject(e)}},{key:"_calculateNewLngLat",value:function(e){var t=e.startPanLngLat,n=e.pos;return new pu(this._viewportProps).getMapCenterByLngLatPosition({lngLat:t,pos:n})}},{key:"_calculateNewZoom",value:function(e){var t=e.scale,n=e.startZoom,r=this._viewportProps,i=r.maxZoom,a=r.minZoom,o=n+Math.log2(t);return Object(bi.c)(o,a,i)}},{key:"_calculateNewPitchAndBearing",value:function(e){var t=e.deltaScaleX,n=e.deltaScaleY,r=e.startBearing,i=e.startPitch;n=Object(bi.c)(n,-1,1);var a=this._viewportProps,o=a.minPitch,s=a.maxPitch,u=i;return n>0?u=i+n*(s-i):n<0&&(u=i-n*(o-i)),{pitch:u,bearing:r+180*t}}}]),t}($c),lh=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,uh,e))).invertPan=!0,n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"_getTransitionProps",value:function(){return Qc}},{key:"_onPanRotate",value:function(e){if(!this.dragRotate)return!1;var t=e.deltaX,n=e.deltaY,r=this.getCenter(e),i=Object(g.a)(r,2)[1],a=i-n,o=this.controllerState.getViewportProps(),s=o.width,u=o.height,l=t/s,c=0;n>0?Math.abs(u-a)>5&&(c=n/(a-u)*1.2):n<0&&a>5&&(c=1-i/a),c=Math.min(1,Math.max(-1,c));var h=this.controllerState.rotate({deltaScaleX:l,deltaScaleY:c});return this.updateViewport(h,eh,{isDragging:!0,isRotating:!0})}}]),t}(Jc),ch=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).call(this,Object.assign({},e,{type:Lc})))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"controller",get:function(){return this._getControllerProps({type:lh})}}]),t}(Rc);ch.displayName="MapView";var hh=[255,255,255],ph=0,fh=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.color,r=void 0===n?hh:n,i=t.intensity,a=void 0===i?1:i;this.id=t.id||"ambient-".concat(ph++),this.color=r,this.intensity=a,this.type="ambient"},dh=[255,255,255],vh=[0,0,-1],mh=0,yh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.color,r=void 0===n?dh:n,i=t.intensity,a=void 0===i?1:i,o=t.direction,s=void 0===o?vh:o,l=t._shadow,c=void 0!==l&&l;this.id=t.id||"directional-".concat(mh++),this.color=r,this.intensity=a,this.type="directional",this.direction=new bi.b(s).normalize().toArray(),this.shadow=c}return Object(p.a)(e,[{key:"getProjectedLight",value:function(){return this}}]),e}(),gh=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.id,r=void 0===n?"effect":n;this.id=r,this.props={},Object.assign(this.props,t)}return Object(p.a)(e,[{key:"preRender",value:function(){}},{key:"getModuleParameters",value:function(){}},{key:"cleanup",value:function(){}}]),e}(),bh=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(e){var t=this.gl;return Object(xn.c)(t,{framebuffer:e.target}),this._drawLayers(e)}},{key:"_drawLayers",value:function(e){var t=this,n=e.viewports,r=e.views,i=e.onViewportActive,a=e.clearCanvas,o=void 0===a||a,s=this.gl;o&&function(e){var t=e.drawingBufferWidth,n=e.drawingBufferHeight;Object(xn.c)(e,{viewport:[0,0,t,n]}),e.clear(16640)}(s);var u=[];return n.forEach((function(n,a){var o=n.viewport||n,l=r&&r[o.id];i(o),e.viewport=o,e.view=l;var c=t._drawLayersInViewport(s,e);u.push(c)})),u}},{key:"_drawLayersInViewport",value:function(e,t){var n=this,r=t.layers,i=t.layerFilter,a=t.viewport,o=t.view,s=t.pass,u=void 0===s?"unknown":s,l=t.effects,c=t.moduleParameters,h=function(e,t){var n=t.viewport,r=e.canvas?e.canvas.clientHeight||e.canvas.height:100,i=n,a=Object(On.c)(e);return[i.x*a,(r-i.y-i.height)*a,i.width*a,i.height*a]}(e,{viewport:a});if(o&&o.props.clear){var p=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;Object(xn.d)(e,{scissorTest:!0,scissor:h},(function(){return jr(e,p)}))}var f={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};return Object(xn.c)(e,{viewport:h}),r.forEach((function(e,t){var r=n._shouldDrawLayer(e,a,u,i);if(r&&e.props.pickable&&f.pickableCount++,e.isComposite&&f.compositeCount++,r){f.visibleCount++;var o=n._getModuleParameters(e,l,u,c),s=Object.assign({},e.context.uniforms,{layerIndex:t}),h=n.getLayerParameters(e,t);e.drawLayer({moduleParameters:o,uniforms:s,parameters:h})}})),f}},{key:"shouldDrawLayer",value:function(e){return!0}},{key:"getModuleParameters",value:function(e,t){return null}},{key:"getLayerParameters",value:function(e,t){return e.props.parameters}},{key:"_shouldDrawLayer",value:function(e,t,n,r){var i=this.shouldDrawLayer(e)&&!e.isComposite&&e.props.visible;return i&&r&&(i=r({layer:e,viewport:t,isPicking:n.startsWith("picking"),renderPass:n})),i}},{key:"_getModuleParameters",value:function(e,t,n,r){var i=Object.assign(Object.create(e.props),{viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Object(On.c)(this.gl)});if(t){var a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;Object.assign(i,c.getModuleParameters(e))}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}}return Object.assign(i,this.getModuleParameters(e,t),r)}}]),t}(function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.a)(this,e);var r=n.id,i=void 0===r?"pass":r;this.id=i,this.gl=t,this.props={},Object.assign(this.props,n)}return Object(p.a)(e,[{key:"setProps",value:function(e){Object.assign(this.props,e)}},{key:"render",value:function(){}},{key:"cleanup",value:function(){}}]),e}());function _h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xh=function(e){function t(e,n){var r,i,a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(c.a)(t).call(this,e,n))).shadowMap=new Or(e,{width:1,height:1,parameters:(r={},Object(d.a)(r,10241,9729),Object(d.a)(r,10240,9729),Object(d.a)(r,10242,33071),Object(d.a)(r,10243,33071),r)}),a.depthBuffer=new Pr(e,{format:33189,width:1,height:1}),a.fbo=new Wr(e,{id:"shadowmap",width:1,height:1,attachments:(i={},Object(d.a)(i,36064,a.shadowMap),Object(d.a)(i,36096,a.depthBuffer),i)}),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(e){var n=this,r=this.fbo;Object(xn.d)(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},(function(){var i=e.viewports[0],a=Object(On.c)(n.gl),o=i.width*a,s=i.height*a;o===r.width&&s===r.height||r.resize({width:o,height:s}),Rt(Object(c.a)(t.prototype),"render",n).call(n,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_h(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_h(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{target:r,pass:"shadow"}))}))}},{key:"shouldDrawLayer",value:function(e){return!1!==e.props.shadowEnabled}},{key:"getModuleParameters",value:function(){return{drawToShadowMap:!0}}},{key:"delete",value:function(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}]),t}(bh),wh=Fs((function(e){var t=e.viewport,n=e.center;return new bi.a(t.viewProjectionMatrix).invert().transform(n)})),kh=Fs((function(e){var t=e.viewport,n=e.shadowMatrices,r=[],i=t.pixelUnprojectionMatrix,a=t.isGeospatial?void 0:1,o=[[0,0,a],[t.width,0,a],[0,t.height,a],[t.width,t.height,a],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map((function(e){return function(e,t){var n=Object(g.a)(e,3),r=n[0],i=n[1],a=n[2],o=lu([r,i,a],t);if(Number.isFinite(a))return o;return[o[0],o[1],0]}(e,i)})),s=!0,u=!1,l=void 0;try{for(var c,h=function(){var e=c.value,n=e.clone().translate(new bi.b(t.center).negate()),i=o.map((function(e){return n.transform(e)})),a=(new bi.a).ortho({left:Math.min.apply(Math,Object(wl.a)(i.map((function(e){return e[0]})))),right:Math.max.apply(Math,Object(wl.a)(i.map((function(e){return e[0]})))),bottom:Math.min.apply(Math,Object(wl.a)(i.map((function(e){return e[1]})))),top:Math.max.apply(Math,Object(wl.a)(i.map((function(e){return e[1]})))),near:Math.min.apply(Math,Object(wl.a)(i.map((function(e){return-e[2]})))),far:Math.max.apply(Math,Object(wl.a)(i.map((function(e){return-e[2]}))))});r.push(a.multiplyRight(e))},p=n[Symbol.iterator]();!(s=(c=p.next()).done);s=!0)h()}catch(e){u=!0,l=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw l}}return r})),Oh=[0,0,0,1],Eh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Sh(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:!!e.shadowMaps&&e.shadowMaps.length>0,shadow_uColor:e.shadowColor||Oh,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},r=wh({viewport:e.viewport,center:t.project_uCenter}),i=[],a=kh({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice(),o=0;o<e.shadowMatrices.length;o++){var s=a[o],u=s.clone().translate(new bi.b(e.viewport.center).negate());t.project_uCoordinateSystem===gn.LNGLAT&&t.project_uProjectionMode===bn.WEB_MERCATOR?(a[o]=u,i[o]=r):(a[o]=s.clone().multiplyRight(Eh),i[o]=u.transform(r))}for(var l=0;l<a.length;l++)n["shadow_uViewProjectionMatrices[".concat(l,"]")]=a[l],n["shadow_uProjectCenters[".concat(l,"]")]=i[l],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(l)]=e.shadowMaps[l]:n["shadow_uShadowMap".concat(l)]=e.dummyShadowMap;return n}var Th={name:"shadow",dependencies:[wc],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0){var n={},r=e.shadowEnabled,i=void 0===r||r;return i&&e.shadowMatrices&&e.shadowMatrices.length>0?Object.assign(n,Sh(e,t)):Object.assign(n,{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1}),n}return{}}},Ph={color:[255,255,255],intensity:1},jh=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Ch=[0,0,0,200/255],Ah=function(e){function t(e){var n;for(var r in Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).ambientLight=null,n.directionalLights=[],n.pointLights=[],n.shadowColor=Ch,n.shadowPasses=[],n.shadowMaps=[],n.dummyShadowMap=null,n.shadow=!1,n.programManager=null,e){var i=e[r];switch(i.type){case"ambient":n.ambientLight=i;break;case"directional":n.directionalLights.push(i);break;case"point":n.pointLights.push(i)}}return n._applyDefaultLights(),n.shadow=n.directionalLights.some((function(e){return e.shadow})),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"preRender",value:function(e,t){var n=t.layers,r=t.layerFilter,i=t.viewports,a=t.onViewportActive,o=t.views;if(this.shadow){this.shadowMatrices=this._createLightMatrix(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=jo.getDefaultProgramManager(e),Th&&this.programManager.addDefaultModule(Th)),this.dummyShadowMap||(this.dummyShadowMap=new Or(e,{width:1,height:1}));for(var s=0;s<this.shadowPasses.length;s++){this.shadowPasses[s].render({layers:n,layerFilter:r,viewports:i,onViewportActive:a,views:o,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}}},{key:"getModuleParameters",value:function(e){var t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map((function(t){return t.getProjectedLight({layer:e})})),pointLights:this.pointLights.map((function(t){return t.getProjectedLight({layer:e})}))},t}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.shadowPasses[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.delete()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Th),this.programManager=null)}},{key:"_createLightMatrix",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,a=this.directionalLights[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value,s=(new bi.a).lookAt({eye:new bi.b(o.direction).negate()});e.push(s)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"_createShadowPasses",value:function(e){for(var t=0;t<this.directionalLights.length;t++){var n=new xh(e);this.shadowPasses[t]=n,this.shadowMaps[t]=n.shadowMap}}},{key:"_applyDefaultLights",value:function(){var e=this.ambientLight,t=this.pointLights,n=this.directionalLights;e||0!==t.length||0!==n.length||(this.ambientLight=new fh(Ph),this.directionalLights.push(new yh(jh[0]),new yh(jh[1])))}}]),t}(gh),Mh=new Ah,Ih=function(){function e(){Object(u.a)(this,e),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}return Object(p.a)(e,[{key:"setProps",value:function(e){"effects"in e&&(e.effects.length===this.effects.length&&jc(e.effects,this.effects)||(this.setEffects(e.effects),this._needsRedraw="effects changed"))}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"getEffects",value:function(){return this._internalEffects}},{key:"finalize",value:function(){this.cleanup()}},{key:"setEffects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cleanup(),this.effects=e,this._createInternalEffects()}},{key:"cleanup",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.effects[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.cleanup()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}var a=!0,o=!1,s=void 0;try{for(var u,l=this._internalEffects[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){u.value.cleanup()}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}this.effects.length=0,this._internalEffects.length=0}},{key:"_createInternalEffects",value:function(){this._internalEffects=this.effects.slice(),this.effects.some((function(e){return e instanceof Ah}))||this._internalEffects.push(Mh)}}]),e}(),Rh=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),t}(bh);function Lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lh(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dh={blendFunc:[1,0,32771,0],blendEquation:32774},Fh=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(e){e.pickingFBO?this._drawPickingBuffer(e):Rt(Object(c.a)(t.prototype),"render",this).call(this,e)}},{key:"_drawPickingBuffer",value:function(e){var n=this,r=e.layers,i=e.layerFilter,a=e.viewports,o=e.onViewportActive,s=e.pickingFBO,u=e.deviceRect,l=u.x,h=u.y,p=u.width,f=u.height,d=e.pass,v=void 0===d?"picking":d,m=e.redrawReason,y=e.pickZ,g=this.gl;return this.pickZ=y,Object(xn.d)(g,zh({scissorTest:!0,scissor:[l,h,p,f],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},Dh,{blend:!y}),(function(){Rt(Object(c.a)(t.prototype),"render",n).call(n,{target:s,layers:r,layerFilter:i,viewports:a,onViewportActive:o,pass:v,redrawReason:m})}))}},{key:"shouldDrawLayer",value:function(e){return e.props.pickable}},{key:"getModuleParameters",value:function(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}},{key:"getLayerParameters",value:function(e,t){var n=this.pickZ?{blend:!1}:zh({},Dh,{blend:!0,blendColor:[0,0,0,(t+1)/255]});return Object.assign({},e.props.parameters,n)}}]),t}(bh);function Bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Nh=function(){function e(t){Object(u.a)(this,e),this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Rh(t),this.pickLayersPass=new Fh(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}return Object(p.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}},{key:"renderLayers",value:function(e){var t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=this.layerFilter,e.effects=e.effects||[],e.target=e.target||Wr.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);var n=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bh(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bh(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{target:n}));this._postRender(e.effects,e),this.renderCount++,ra("deckRenderer.renderLayers",this,r,e)}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1},t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}},{key:"finalize",value:function(){var e=this.renderBuffers,t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.delete()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}e.length=0}},{key:"_preRender",value:function(e,t){var n=null,r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;u.preRender(this.gl,t),u.postRender&&(n=u)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}},{key:"_resizeRenderBuffers",value:function(){var e=this.renderBuffers;0===e.length&&e.push(new Wr(this.gl),new Wr(this.gl));var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){i.value.resize()}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}}},{key:"_postRender",value:function(e,t){var n=this.renderBuffers,r={inputBuffer:n[0],swapBuffer:n[1],target:null},i=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(l.postRender){if(l===this.lastPostProcessEffect){r.target=t.target,l.postRender(this.gl,r);break}var c=l.postRender(this.gl,r);r.inputBuffer=c,r.swapBuffer=c===n[0]?n[1]:n[0]}}}catch(e){a=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(a)throw o}}}}]),e}(),Uh={pickedColor:null,pickedLayer:null,pickedObjectIndex:-1};function Vh(e){var t=e.pickedColors,n=e.layers,r=e.deviceX,i=e.deviceY,a=e.deviceRadius,o=e.deviceRect;if(t){for(var s=o.x,u=o.y,l=o.width,c=o.height,h=a*a,p=-1,f=0,d=0;d<c;d++){var v=d+u-i,m=v*v;if(m>h)f+=4*l;else for(var y=0;y<l;y++){if(t[f+3]-1>=0){var g=y+s-r,b=g*g+m;b<=h&&(h=b,p=f)}f+=4}}if(p>=0){var _=t[p+3]-1,x=t.slice(p,p+4),w=n[_];if(w){var k=w.decodePickingColor(x),O=Math.floor(p/4/l);return{pickedColor:x,pickedLayer:w,pickedObjectIndex:k,pickedX:s+(p/4-O*l),pickedY:u+O}}yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Uh}function Wh(e){var t=e.pickInfo,n=e.lastPickedInfo,r=e.mode,i=e.layers,a=e.viewports,o=e.x,s=e.y,u=e.z,l=e.pixelRatio,c=t.pickedColor,h=t.pickedLayer,p=t.pickedObjectIndex,f=h?[h]:[];if("hover"===r){var d=n.index,v=n.layerId,m=h&&h.props.id;if(m!==v||p!==d){if(m!==v){var y=i.find((function(e){return e.props.id===v}));y&&f.unshift(y)}n.layerId=m,n.index=p,n.info=null}}var g={viewports:a}.viewports[0],b=g&&g.unproject([o,s],{targetZ:u}),_={color:null,layer:null,index:-1,picked:!1,x:o,y:s,pixel:[o,s],coordinate:b,lngLat:b,devicePixel:[t.pickedX,t.pickedY],pixelRatio:l},x=new Map;return x.set(null,_),f.forEach((function(e){var t=Object.assign({},_);e===h&&(t.color=c,t.index=p,t.picked=!0),t=qh({layer:e,info:t,mode:r}),e===h&&"hover"===r&&(n.info=t),t&&x.set(t.layer.id,t),"hover"===r&&e.props.autoHighlight&&(e.setModuleParameters({pickingSelectedColor:h===e?c:null}),e.setNeedsRedraw())})),x}function qh(e){for(var t=e.layer,n=e.info,r=e.mode;t&&n;){var i=n.layer||t;n.layer=t,n=t.getPickingInfo({info:n,mode:r,sourceLayer:i}),t=t.parent}return n}function Gh(e,t,n){var r=[];return e.forEach((function(e){if(e.layer){switch(t){case"hover":e.handled=e.layer.onHover(e,n)}r.push(e)}})),r}var Hh=function(){function e(t){Object(u.a)(this,e),this.gl=t,this.pickingFBO=null,this.pickLayersPass=new Fh(t),this.layerFilter=null,this.lastPickedInfo={index:-1,layerId:null,info:null}}return Object(p.a)(e,[{key:"setProps",value:function(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter)}},{key:"finalize",value:function(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}},{key:"pickObject",value:function(e){return this._pickClosestObject(e)}},{key:"pickObjects",value:function(e){return this._pickVisibleObjects(e)}},{key:"getLastPickedObject",value:function(e){var t=e.x,n=e.y,r=e.layers,i=e.viewports,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.lastPickedInfo.info,o=a&&a.layer&&a.layer.id,s=o?r.find((function(e){return e.id===o})):null,u=i[0]&&i[0].unproject([t,n]),l={x:t,y:n,coordinate:u,lngLat:u,layer:s};return s?Object.assign({},a,l):Object.assign(l,{color:null,object:null,index:-1})}},{key:"_resizeBuffer",value:function(){var e=this.gl;return this.pickingFBO||(this.pickingFBO=new Wr(e),Wr.isSupported(e,{colorBufferFloat:!0})&&(this.depthFBO=new Wr(e),this.depthFBO.attach(Object(d.a)({},36064,new Or(e,{format:Object(On.h)(e)?34836:6408,type:5126}))))),this.pickingFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.depthFBO.resize({width:e.canvas.width,height:e.canvas.height}),this.pickingFBO}},{key:"_pickClosestObject",value:function(e){var t=e.layers,n=e.viewports,r=e.x,i=e.y,a=e.radius,o=void 0===a?0:a,s=e.depth,u=void 0===s?1:s,l=e.mode,c=void 0===l?"query":l,h=e.event,p=e.unproject3D,f=e.onViewportActive;this._resizeBuffer();for(var d,v=Object(On.c)(this.gl),m=Object(On.b)(this.gl,[r,i],!0),y=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],g=Math.round(o*v),b=this.pickingFBO,_=b.width,x=b.height,w=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:g,deviceWidth:_,deviceHeight:x}),k=[],O={},E=0;E<u;E++){var S=Vh({pickedColors:w&&this._drawAndSample({layers:t,viewports:n,onViewportActive:f,deviceRect:w,pass:"picking:".concat(c),redrawReason:c}),layers:t,deviceX:y[0],deviceY:y[1],deviceRadius:g,deviceRect:w}),T=void 0;if(S.pickedLayer&&p&&this.depthFBO)T=this._drawAndSample({layers:[S.pickedLayer],viewports:n,onViewportActive:f,deviceRect:{x:S.pickedX,y:S.pickedY,width:1,height:1},pass:"picking:".concat(c),redrawReason:"pick-z",pickZ:!0})[0]*n[0].distanceScales.metersPerUnit[2]+n[0].position[2];if(S.pickedColor&&E+1<u){var P=S.pickedColor[3]-1;O[P]=!0,t[P].clearPickingColor(S.pickedColor)}var j=Gh(d=Wh({pickInfo:S,lastPickedInfo:this.lastPickedInfo,mode:c,layers:t,viewports:n,x:r,y:i,z:T,pixelRatio:v}),c,h);if(j&&j.forEach((function(e){return k.push(e)})),!S.pickedColor)break}for(var C in O)t[C].restorePickingColors();return{result:k,emptyInfo:d&&d.get(null)}}},{key:"_pickVisibleObjects",value:function(e){var t=e.layers,n=e.viewports,r=e.x,i=e.y,a=e.width,o=void 0===a?1:a,s=e.height,u=void 0===s?1:s,l=e.mode,c=void 0===l?"query":l,h=e.onViewportActive;this._resizeBuffer();var p=Object(On.c)(this.gl),f=Object(On.b)(this.gl,[r,i],!0),d=f.x,v=f.y+f.height,m=Object(On.b)(this.gl,[r+o,i+u],!0),y=m.x+m.width,g=m.y,b={x:d,y:g,width:y-d,height:v-g},_=function(e){var t=e.pickedColors,n=e.layers,r=new Map;if(t)for(var i=0;i<t.length;i+=4){var a=t[i+3]-1;if(a>=0){var o=t.slice(i,i+4),s=o.join(",");if(!r.has(s)){var u=n[a];u?r.set(s,{pickedColor:o,pickedLayer:u,pickedObjectIndex:u.decodePickingColor(o)}):yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}({pickedColors:this._drawAndSample({layers:t,viewports:n,onViewportActive:h,deviceRect:b,pass:"picking:".concat(c),redrawReason:c}),layers:t}),x=new Map;return _.forEach((function(e){var t={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:i,width:o,height:u,pixelRatio:p};t=qh({layer:e.pickedLayer,info:t,mode:c}),x.has(t.object)||x.set(t.object,t)})),Array.from(x.values())}},{key:"_drawAndSample",value:function(e){var t=e.layers,n=e.viewports,r=e.onViewportActive,i=e.deviceRect,a=e.pass,o=e.redrawReason,s=e.pickZ;if(fn(i.width>0&&i.height>0),t.filter((function(e){return e.isPickable()})).length<1)return null;var u=s?this.depthFBO:this.pickingFBO;this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,viewports:n,onViewportActive:r,pickingFBO:u,deviceRect:i,pass:a,redrawReason:o,pickZ:s});var l=i.x,c=i.y,h=i.width,p=i.height,f=new(s?Float32Array:Uint8Array)(h*p*4);return Br(u,{sourceX:l,sourceY:c,sourceWidth:h,sourceHeight:p,target:f}),f}},{key:"_getPickingRect",value:function(e){var t=e.deviceX,n=e.deviceY,r=e.deviceRadius,i=e.deviceWidth,a=e.deviceHeight,o=Math.max(0,t-r),s=Math.max(0,n-r),u=Math.min(i,t+r+1)-o,l=Math.min(a,n+r+1)-s;return u<=0||l<=0?null:{x:o,y:s,width:u,height:l}}}]),e}(),Zh={zIndex:1,position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:0,left:0,display:"none"},Xh=function(){function e(t){Object(u.a)(this,e);var n=t.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Zh),n.appendChild(this.el))}return Object(p.a)(e,[{key:"setTooltip",value:function(e,t,n){var r=this.el;if("string"==typeof e)r.innerText=e;else{if(!e)return void(r.style.display="none");"text"in e&&(r.innerText=e.text),"html"in e&&(r.innerHTML=e.html),"className"in e&&(r.className=e.className),Object.assign(r.style,e.style)}r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}},{key:"remove",value:function(){this.el&&this.el.remove()}}]),e}();function Yh(e,t){if(!e)throw new Error(t)}var Kh=n(40),Jh="undefined"!=typeof ImageBitmap,$h="undefined"!=typeof Image,Qh=Boolean(Kh.a._parseImageNode);function ep(e){switch(e){case"auto":return!0;case"imagebitmap":return Jh;case"html":return $h;case"ndarray":return Qh;default:throw new Error("Unknown image format ".concat(e))}}function tp(){if(ep("ndarray"))return"ndarray";if(ep("html"))return"html";if(ep("imagebitmap"))return"imagebitmap";if(!Kh.b)throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js");return Yh(!1)}function np(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.image||{},n=t.type||"auto";switch(n){case"imagebitmap":case"html":case"ndarray":if(!ep(n))throw new Error("Requested image type ".concat(n," not available in current environment"));return n;case"auto":return tp();default:throw new Error("Unknown image format ".concat(n))}}var rp=new Map([["image/png",{test:ip,getSize:function(e){return{width:e.getUint32(16,!1),height:e.getUint32(20,!1)}}}],["image/jpeg",{test:sp,getSize:function(e){if(e.byteLength<2||65496!==e.getUint16(0,!1))return null;var t=function(){for(var e=new Set([65499,65476,65484,65501,65534]),t=65504;t<65520;++t)e.add(t);var n=new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502]);return{tableMarkers:e,sofMarkers:n}}(),n=t.tableMarkers,r=t.sofMarkers,i=2;for(;i<e.byteLength;){var a=e.getUint16(i,!1);if(r.has(a))return{height:e.getUint16(i+5,!1),width:e.getUint16(i+7,!1)};if(!n.has(a))return null;i+=2,i+=e.getUint16(i,!1)}return null}}],["image/gif",{test:ap,getSize:function(e){return{width:e.getUint16(6,!0),height:e.getUint16(8,!0)}}}],["image/bmp",{test:op,getSize:function(e){return{width:e.getUint32(18,!0),height:e.getUint32(22,!0)}}}]]);function ip(e){return e.byteLength>=24&&2303741511===e.getUint32(0,!1)}function ap(e){return e.byteLength>=10&&1195984440===e.getUint32(0,!1)}function op(e){return e.byteLength>=2&&16973===e.getUint16(0,!1)}function sp(e){return e.byteLength>=3&&65496===e.getUint16(0,!1)&&255===e.getUint8(2,!1)}"Invalid MIME type. Supported MIME types are: ".concat(Array.from(rp.keys()).join(", "));function up(e){var t=lp(e),n=!0,r=!1,i=void 0;try{for(var a,o=rp.entries()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=Object(g.a)(a.value,2),u=s[0];if((0,s[1].test)(t))return u}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}function lp(e){if((e=e.buffer||e)instanceof ArrayBuffer||ArrayBuffer.isView(e))return new DataView(e.buffer||e);throw new Error("toDataView")}function cp(e,t){Yh(Kh.a._parseImageNode);var n=up(e);return Kh.a._parseImageNode(e,n,t)}function hp(e,t){return pp.apply(this,arguments)}function pp(){return(pp=Lr(Ir.a.mark((function e(t,n){var r,i,a;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"image/jpeg",r=new Blob([t],{type:"image/jpeg"}),i=self.URL||self.webkitURL,a=i.createObjectURL(r),e.prev=4,e.next=7,fp(a,n);case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,i.revokeObjectURL(a),e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[4,,8,11]])})))).apply(this,arguments)}function fp(e,t){return dp.apply(this,arguments)}function dp(){return(dp=Lr(Ir.a.mark((function e(t,n){var r;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new Image).src=t,!(n.image&&n.image.decode&&r.decode)){e.next=6;break}return e.next=5,r.decode();case 5:return e.abrupt("return",r);case 6:return e.next=8,new Promise((function(e,n){try{r.onload=function(){return e(r)},r.onerror=function(e){return n(new Error("Could not load image ".concat(t,": ").concat(e)))}}catch(e){n(e)}}));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vp(e,t){var n=new Blob([new Uint8Array(e)]),r=t&&t.imagebitmap;return r?createImageBitmap(n):createImageBitmap(n,r)}function mp(e,t){return yp.apply(this,arguments)}function yp(){return(yp=Lr(Ir.a.mark((function e(t,n){var r,i,a;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextDecoder,i=r.decode(t),a="data:image/svg+xml;base64,".concat(btoa(i)),e.next=5,fp(a,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gp=/^data:image\/svg\+xml/,bp=/\.svg((\?|#).*)?$/;function _p(){return(_p=Lr(Ir.a.mark((function e(t,n,r){var i,a;return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||{},!(i=(r||{}).url)||!gp.test(i)&&!bp.test(i)){e.next=6;break}return e.next=5,mp(t,n);case 5:return e.abrupt("return",e.sent);case 6:a=np(n),e.t0=a,e.next="imagebitmap"===e.t0?10:"html"===e.t0?13:"ndarray"===e.t0?16:19;break;case 10:return e.next=12,vp(t,n);case 12:return e.abrupt("return",e.sent);case 13:return e.next=15,hp(t,n);case 15:return e.abrupt("return",e.sent);case 16:return e.next=18,cp(t,n);case 18:return e.abrupt("return",e.sent);case 19:return e.abrupt("return",Yh(!1));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xp={name:"Images",version:"2.0.4",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vndmicrosofticon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function(e,t,n){return _p.apply(this,arguments)},test:function(e){var t=new DataView(e);return sp(t)||op(t)||ap(t)||ip(t)},options:{image:{format:"auto",decodeHTML:!0}}};var wp={name:"JSON",extensions:["json","geojson"],testText:function(e){var t=e[0],n=e[e.length-1];return"{"===t&&"}"===n||"["===t&&"]"===n},parseTextSync:JSON.parse},kp=kn.global.deck&&kn.global.deck.VERSION;if(kp&&"8.0.16"!==kp)throw new Error("deck.gl - multiple versions detected: ".concat(kp," vs ").concat("8.0.16"));kp||(yn.log(0,"deck.gl ".concat("8.0.16"," - set deck.log.level=1 (or higher) to trace attribute updates"))(),kn.global.deck=Object.assign(kn.global.deck||{},{VERSION:"8.0.16",version:"8.0.16",log:yn,_registerLoggers:function(e){na=e}}),function(e){e=Array.isArray(e)?e:[e];var t=!0,n=!1,r=void 0;try{for(var i,a=function(){var e=nl(i.value);Vl.find((function(t){return e===t}))||Vl.unshift(e)},o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)a()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}([wp,xp]));var Op=kn.global.deck,Ep=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e,r))).target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(On.h)(e),r=di(e,Zr),i=n||r,a=!0,o=!1,s=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var c=u.value;switch(c){case"queries":i=i&&n;break;case"timers":i=i&&r;break;default:Bn(!1)}}}catch(e){o=!0,s=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw s}}return i}}]),Object(p.a)(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(35007)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?36202:35887)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(35976)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(36795)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,34918)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,i){requestAnimationFrame((function a(){e.isResultAvailable()?(r(e.getResult()),e._pollingPromise=null):n++>t?(i("Timed out"),e._pollingPromise=null):requestAnimationFrame(a)}))})),this._pollingPromise}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),t}(Kn);function Sp(e){return"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}var Tp=Object(kn.isBrowser)()&&"undefined"!=typeof document,Pp=0,jp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.onCreateContext,r=void 0===n?function(e){return Pn(e)}:n,i=t.onAddHTML,a=void 0===i?null:i,o=t.onInitialize,s=void 0===o?function(){}:o,l=t.onRender,c=void 0===l?function(){}:l,h=t.onFinalize,p=void 0===h?function(){}:h,f=t.gl,d=void 0===f?null:f,v=t.glOptions,m=void 0===v?{}:v,y=t.debug,g=void 0!==y&&y,b=t.createFramebuffer,_=void 0!==b&&b,x=t.autoResizeViewport,w=void 0===x||x,k=t.autoResizeDrawingBuffer,O=void 0===k||k,E=t.stats,S=void 0===E?Fn.get("animation-loop-".concat(Pp++)):E,T=t.useDevicePixels,P=void 0===T||T;"useDevicePixelRatio"in t&&(On.i.deprecated("useDevicePixelRatio","useDevicePixels")(),P=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:a,onInitialize:s,onRender:c,onFinalize:p,gl:d,glOptions:m,debug:g,createFramebuffer:_},this.gl=d,this.needsRedraw=null,this.timeline=null,this.stats=S,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:w,autoResizeDrawingBuffer:O,useDevicePixels:P}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}var t;return Object(p.a)(e,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(e){return Bn("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}},{key:"setProps",value:function(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}},{key:"start",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,this._getPageLoadPromise().then((function(){return!e._running||e._initialized?null:(e._createWebGLContext(t),e._createFramebuffer(),e._startEventHandling(),e._initializeCallbackData(),e._updateCallbackData(),e._resizeCanvasDrawingBuffer(),e._resizeViewport(),e._gpuTimeQuery=Ep.isSupported(e.gl,["timers"])?new Ep(e.gl):null,e._initialized=!0,e.onInitialize(e.animationProps))})).then((function(t){e._running&&(e._addCallbackData(t||{}),!1!==t&&e._startLoop())}))),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),Sp(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(e){return this.timeline=e,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var e=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(t){e._resolveNextFrame=t}))),this._nextFramePromise}},{key:"toDataURL",value:(t=Lr(Ir.a.mark((function e(){return Ir.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setNeedsRedraw("toDataURL"),e.next=3,this.waitForRender();case 3:return e.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onCreateContext",value:function(){var e;return(e=this.props).onCreateContext.apply(e,arguments)}},{key:"onInitialize",value:function(){var e;return(e=this.props).onInitialize.apply(e,arguments)}},{key:"onRender",value:function(){var e;return(e=this.props).onRender.apply(e,arguments)}},{key:"onFinalize",value:function(){var e;return(e=this.props).onFinalize.apply(e,arguments)}},{key:"getHTMLControlValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=document.getElementById(e);return n?Number(n.value):t}},{key:"setViewParameters",value:function(){return On.i.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var e=this;Sp(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame((function t(){e._running&&(e.redraw(),e._animationFrameId=e._requestAnimationFrame(t))}))}},{key:"_getPageLoadPromise",value:function(){return this._pageLoadPromise||(this._pageLoadPromise=Tp?new Promise((function(e,t){Tp&&"complete"===document.readyState?e(document):window.addEventListener("load",(function(){e(document)}))})):Promise.resolve({})),this._pageLoadPromise}},{key:"_setDisplay",value:function(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}},{key:"_requestAnimationFrame",value:function(e){var t;this.display&&this.display.requestAnimationFrame(e)||(t=e,"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60))}},{key:"_renderFrame",value:function(){var e;this.display?(e=this.display)._renderFrame.apply(e,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var e=this._getSizeAndAspect(),t=e.width,n=e.height,r=e.aspect;t===this.animationProps.width&&n===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(e){"object"===Object(rt.a)(e)&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}},{key:"_createWebGLContext",value:function(e){if(this.offScreen=e.canvas&&"undefined"!=typeof OffscreenCanvas&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?jn(this.props.gl,e):this.onCreateContext(e),!Object(On.g)(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(xn.b)(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";var t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);var n=this.props.onAddHTML(t);n&&(t.innerHTML=n)}}},{key:"_getSizeAndAspect",value:function(){var e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight,n=1,r=this.gl.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&t>0&&(n=e/t),{width:e,height:t,aspect:n}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=Object(On.e)(t.useDevicePixels);Rn(e,n,t)}else{var r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}}(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new Wr(this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var e=this.gl.canvas;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}},{key:"_onMouseleave",value:function(e){this.animationProps._mousePosition=null}}]),e}();function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ap(){}var Mp={id:"deckgl-overlay",width:"100%",height:"100%",pickingRadius:0,layerFilter:null,glOptions:{},gl:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",_framebuffer:null,_animate:!1,onWebGLInitialized:Ap,onResize:Ap,onViewStateChange:Ap,onBeforeRender:Ap,onAfterRender:Ap,onLoad:Ap,_onMetrics:null,getCursor:function(e){return e.isDragging?"grabbing":"grab"},debug:!1,drawPickingColors:!1},Ip=function(){function e(t){Object(u.a)(this,e),t=Object.assign({},Mp,t),this.width=0,this.height=0,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this._needsRedraw=!0,this._pickRequest={},this._lastPointerDownInfo=null,this.viewState=t.initialViewState||null,this.interactiveState={isDragging:!1},this._onEvent=this._onEvent.bind(this),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._pickAndCallback=this._pickAndCallback.bind(this),this._onRendererInitialized=this._onRendererInitialized.bind(this),this._onRenderFrame=this._onRenderFrame.bind(this),this._onViewStateChange=this._onViewStateChange.bind(this),this._onInteractiveStateChange=this._onInteractiveStateChange.bind(this),t.viewState&&t.initialViewState&&yn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===Object(kn.getBrowser)()&&yn.warn("IE 11 support will be deprecated in v8.0")(),t.gl||"undefined"!=typeof document&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new Dn({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),this.animationLoop.start()}return Object(p.a)(e,[{key:"finalize",value:function(){this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager&&(this.layerManager.finalize(),this.layerManager=null),this.viewManager&&(this.viewManager.finalize(),this.viewManager=null),this.effectManager&&(this.effectManager.finalize(),this.effectManager=null),this.deckRenderer&&(this.deckRenderer.finalize(),this.deckRenderer=null),this.deckPicker&&(this.deckPicker.finalize(),this.deckPicker=null),this.eventManager&&this.eventManager.destroy(),this.tooltip&&(this.tooltip.remove(),this.tooltip=null),this.props.canvas||this.props.gl||!this.canvas||(this.canvas.parentElement.removeChild(this.canvas),this.canvas=null)}},{key:"setProps",value:function(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&yn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&yn.removed("onLayerClick","onClick")(),e=Object.assign({},this.props,e),this.props=e,this._setCanvasSize(e);var t=Object.assign({},e,{views:this._getViews(this.props),width:this.width,height:this.height}),n=this._getViewState(e);n&&(t.viewState=n),this.viewManager&&this.viewManager.setProps(t),this.layerManager&&this.layerManager.setProps(t),this.effectManager&&this.effectManager.setProps(t),this.animationLoop&&this.animationLoop.setProps(t),this.deckRenderer&&this.deckRenderer.setProps(t),this.deckPicker&&this.deckPicker.setProps(t),this.stats.get("setProps Time").timeEnd()}},{key:"needsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{clearRedrawFlags:!1};if(this.props._animate)return"Deck._animate";var t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);var n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),i=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return t=t||n||r||i||a}},{key:"redraw",value:function(e){if(this.layerManager){var t=e||this.needsRedraw({clearRedrawFlags:!0});t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}}},{key:"getViews",value:function(){return this.viewManager.views}},{key:"getViewports",value:function(e){return this.viewManager.getViewports(e)}},{key:"pickObject",value:function(e){var t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}},{key:"pickMultipleObjects",value:function(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}},{key:"pickObjects",value:function(e){return this._pick("pickObjects","pickObjects Time",e)}},{key:"_pick",value:function(e,t,n){var r=this.stats;r.get("Pick Count").incrementCount(),r.get(t).timeStart();var i=this.deckPicker[e](Object.assign({layers:this.layerManager.getLayers(n),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport},n));return r.get(t).timeEnd(),i}},{key:"_createCanvas",value:function(e){var t=e.canvas;("string"==typeof t&&fn(t=document.getElementById(t)),t)||(t=document.createElement("canvas"),(e.parent||document.body).appendChild(t));var n=e.id,r=e.style;return t.id=n,Object.assign(t.style,r),t}},{key:"_setCanvasSize",value:function(e){if(this.canvas){var t=e.width,n=e.height;(t||0===t)&&(t=Number.isFinite(t)?"".concat(t,"px"):t,this.canvas.style.width=t),(n||0===n)&&(n=Number.isFinite(n)?"".concat(n,"px"):n,this.canvas.style.position="absolute",this.canvas.style.height=n)}}},{key:"_updateCanvasSize",value:function(){if(this._checkForCanvasSizeChange()){var e=this.width,t=this.height;this.viewManager.setProps({width:e,height:t}),this.props.onResize({width:this.width,height:this.height})}}},{key:"_checkForCanvasSizeChange",value:function(){var e=this.canvas;if(!e)return!1;var t=e.clientWidth||e.width,n=e.clientHeight||e.height;return(t!==this.width||n!==this.height)&&(this.width=t,this.height=n,!0)}},{key:"_createAnimationLoop",value:function(e){var t=this,n=e.width,r=e.height,i=e.gl,a=e.glOptions,o=e.debug,s=e.useDevicePixels,u=e.autoResizeDrawingBuffer;return new jp({width:n,height:r,useDevicePixels:s,autoResizeDrawingBuffer:u,autoResizeViewport:!1,gl:i,onCreateContext:function(e){return Pn(Object.assign({},a,e,{canvas:t.canvas,debug:o}))},onInitialize:this._onRendererInitialized,onRender:this._onRenderFrame,onBeforeRender:e.onBeforeRender,onAfterRender:e.onAfterRender})}},{key:"_getViewState",value:function(e){return e.viewState||this.viewState}},{key:"_getViews",value:function(e){var t=e.views||[new ch({id:"default-view"})];return(t=Array.isArray(t)?t:[t]).length&&e.controller&&(t[0].props.controller=e.controller),t}},{key:"_onPointerMove",value:function(e){var t=this._pickRequest;if("pointerleave"===e.type)t.x=-1,t.y=-1,t.radius=0;else{if(e.leftButton||e.rightButton)return;var n=e.offsetCenter;if(!n)return;t.x=n.x,t.y=n.y,t.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:t.x,y:t.y}),t.callback=this.props.onHover,t.event=e,t.mode="hover"}},{key:"_pickAndCallback",value:function(){var e=this._pickRequest;if(e.mode){var t=this._pick("pickObject","pickObject Time",e),n=t.result,r=t.emptyInfo,i=(e.callback||this.props.getTooltip)&&(n.find((function(e){return e.index>=0}))||r);if(this.props.getTooltip){var a=this.props.getTooltip(i);this.tooltip.setTooltip(a,i.x,i.y)}e.callback&&!i.handled&&e.callback(i,e.event),e.mode=null}}},{key:"_updateCursor",value:function(){var e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.interactiveState))}},{key:"_setGLContext",value:function(e){if(!this.layerManager){this.canvas||(this.canvas=e.canvas,jn(e,{enable:!0,copyState:!0})),this.tooltip=new Xh(this.canvas),Object(xn.c)(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);var t=new mn;for(var n in t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new ut(this.props.parent||e.canvas,{touchAction:this.props.touchAction,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),_n)this.eventManager.on(n,this._onEvent);this.viewManager=new Cc({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange,onInteractiveStateChange:this._onInteractiveStateChange,views:this._getViews(this.props),viewState:this._getViewState(this.props),width:this.width,height:this.height});var r=this.viewManager.getViewports()[0];this.layerManager=new Pc(e,{deck:this,stats:this.stats,viewport:r,timeline:t}),this.effectManager=new Ih,this.deckRenderer=new Nh(e),this.deckPicker=new Hh(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}}},{key:"_drawLayers",value:function(e,t){var n=this.layerManager.context.gl;Object(xn.c)(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers(Object.assign({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},t)),this.props.onAfterRender({gl:n})}},{key:"_onRendererInitialized",value:function(e){var t=e.gl;this._setGLContext(t)}},{key:"_onRenderFrame",value:function(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),yn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(!1),this.viewManager&&this.viewManager.updateViewStates()}},{key:"_onViewStateChange",value:function(e){var t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cp(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.viewState,Object(d.a)({},e.viewId,t)),this.props.viewState||this.viewManager.setProps({viewState:this.viewState}))}},{key:"_onInteractiveStateChange",value:function(e){var t=e.isDragging,n=void 0!==t&&t;n!==this.interactiveState.isDragging&&(this.interactiveState.isDragging=n)}},{key:"_onEvent",value:function(e){var t=_n[e.type],n=e.offsetCenter;if(t&&n){var r=this.layerManager.getLayers(),i=this.deckPicker.getLastPickedObject({x:n.x,y:n.y,layers:r,viewports:this.getViewports(n)},this._lastPointerDownInfo),a=i.layer,o=a&&(a[t.handler]||a.props[t.handler]),s=this.props[t.handler],u=!1;o&&(u=o.call(a,i,e)),!u&&s&&s(i,e)}}},{key:"_onPointerDown",value:function(e){var t=e.offsetCenter;this._lastPointerDownInfo=this.pickObject({x:t.x,y:t.y,radius:this.props.pickingRadius})}},{key:"_getFrameStats",value:function(){var e=this.stats;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();var t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}},{key:"_getMetrics",value:function(){var e=this.metrics,t=this.stats;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();var n=Fn.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}]),e}();function Rp(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}function Lp(e){return e?"function"==typeof e?Object(r.createElement)(Rc,{},e):Array.isArray(e)?e.map(Lp):(Rp(e.type,Rc),e):e}function zp(e){var t=e.children,n=e.layers,r=e.views,a=[],o=[],s={};return i.a.Children.forEach(Lp(t),(function(e){if(e){var t=e.type;if(Rp(t,cc)){var n=function(e,t){var n={},r=e.defaultProps||{};for(var i in t)r[i]!==t[i]&&(n[i]=t[i]);return new e(n)}(t,e.props);o.push(n)}else a.push(e);if(t!==Rc&&Rp(t,Rc)&&e.props.id){var r=new t(e.props);s[r.id]=r}}})),Object.keys(s).length>0&&(Array.isArray(r)?r.forEach((function(e){s[e.id]=e})):r&&(s[r.id]=r),r=Object.values(s)),{layers:n=o.length>0?[].concat(o,Object(wl.a)(n)):n,children:a,views:r}}Ip.getPropTypes=function(e){return{id:e.string,width:e.oneOfType([e.number,e.string]),height:e.oneOfType([e.number,e.string]),layers:e.oneOfType([e.object,e.array]),layerFilter:e.func,views:e.oneOfType([e.object,e.array]),viewState:e.object,effects:e.arrayOf(e.instanceOf(gh)),controller:e.oneOfType([e.func,e.bool,e.object]),gl:e.object,glOptions:e.object,parameters:e.object,pickingRadius:e.number,useDevicePixels:e.oneOfType([e.bool,e.number]),touchAction:e.string,onWebGLInitialized:e.func,onResize:e.func,onViewStateChange:e.func,onBeforeRender:e.func,onAfterRender:e.func,onLoad:e.func,debug:e.bool,drawPickingColors:e.bool,_framebuffer:e.object,_animate:e.bool}},Ip.defaultProps=Mp,Ip.VERSION=Op.VERSION;var Dp={position:"absolute",zIndex:-1};function Fp(e,t){return e?"function"==typeof e?e(t):Array.isArray(e)?e.map((function(e){return Fp(e,t)})):(i=(n=e)&&n.type,(a=i&&i.defaultProps)&&a.mapStyle?(t.style=Dp,Object(r.cloneElement)(e,t)):function(e){var t=e&&e.type;return t&&t.deckGLViewProps}(e)?Object(r.cloneElement)(e,t):e):e;var n,i,a}function Bp(e){var t=e.children,n=(e.viewports,e.deck),i=e.ContextProvider,a=(n||{}).viewManager;if(!a||!a.views.length)return[];var o={},s=a.views[0].id,u=!0,l=!1,c=void 0;try{for(var h,p=t[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value,d=s,v=f;Rp(f.type,Rc)&&(d=f.props.id||s,v=f.props.children);var m=a.getViewport(d),y=a.getViewState(d);if(m)v=Fp(v,{x:m.x,y:m.y,width:m.width,height:m.height,viewport:m,viewState:y}),o[d]||(o[d]={viewport:m,children:[]}),o[d].children.push(v)}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}return Object.keys(o).map((function(e){var t=o[e],a=t.viewport,s=t.children,u={position:"absolute",left:a.x,top:a.y,width:a.width,height:a.height},l="view-".concat(e),c=r.createElement.apply(void 0,["div",{key:l,id:l,style:u}].concat(Object(wl.a)(s)));if(i){var h={viewport:a,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:function(t){t.viewId=e,n._onViewStateChange(t)}};return Object(r.createElement)(i,{value:h},c)}return c}))}var Np={mixBlendMode:null};function Up(e){var t=e.width,n=e.height,r=e.style,i={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},a={left:0,top:0};if(r)for(var o in r)o in Np?a[o]=r[o]:i[o]=r[o];return{containerStyle:i,canvasStyle:a}}var Vp=Ip.getPropTypes(m.a),Wp=Ip.defaultProps,qp=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(l.a)(this,Object(c.a)(t).call(this,e))).viewports=null,n.children=null,n._needsRedraw=null,n._containerRef=i.a.createRef(),n._canvasRef=i.a.createRef(),n.pickObject=n.pickObject.bind(Object(h.a)(n)),n.pickMultipleObjects=n.pickMultipleObjects.bind(Object(h.a)(n)),n.pickObjects=n.pickObjects.bind(Object(h.a)(n)),n._extractJSXLayers=Fs(zp),n._positionChildrenUnderViews=Fs(Bp),n._extractStyles=Fs(Up),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.Deck||Ip;this.deck=this.deck||new e(Object.assign({},this.props,{parent:this._containerRef.current,canvas:this._canvasRef.current,style:null,width:"100%",height:"100%",_customRender:this._customRender.bind(this)})),this._updateFromProps(this.props)}},{key:"shouldComponentUpdate",value:function(e){this._updateFromProps(e);var t=this.children!==this._parseJSX(e).children,n=this.deck.viewManager&&this.deck.viewManager.needsRedraw();return t&&!n}},{key:"componentDidUpdate",value:function(){this._redrawDeck()}},{key:"componentWillUnmount",value:function(){this.deck.finalize()}},{key:"pickObject",value:function(e){return this.deck.pickObject(e)}},{key:"pickMultipleObjects",value:function(e){return this.deck.pickMultipleObjects(e)}},{key:"pickObjects",value:function(e){return this.deck.pickObjects(e)}},{key:"_redrawDeck",value:function(){this._needsRedraw&&(this.deck._drawLayers(this._needsRedraw),this._needsRedraw=null)}},{key:"_customRender",value:function(e){this._needsRedraw=e,this.deck.viewManager.getViewports()!==this.viewports?this.forceUpdate():this._redrawDeck()}},{key:"_parseJSX",value:function(e){return this._extractJSXLayers({layers:e.layers,views:e.views,children:e.children})}},{key:"_updateFromProps",value:function(e){var t=this._parseJSX(e),n=t.layers,r=t.views,i=Object.assign({},e,{style:null,width:"100%",height:"100%",layers:n,views:r});this.deck.setProps(i)}},{key:"render",value:function(){var e=this.props,t=e.ContextProvider,n=e.width,i=e.height,a=e.style,o=(this.deck||{}).viewManager;this.viewports=o&&o.getViewports(),this.children=this._parseJSX(this.props).children;var s=this._positionChildrenUnderViews({children:this.children,viewports:this.viewports,deck:this.deck,ContextProvider:t}),u=this._extractStyles({width:n,height:i,style:a}),l=u.containerStyle,c=u.canvasStyle,h=Object(r.createElement)("canvas",{key:"canvas",ref:this._canvasRef,style:c});return Object(r.createElement)("div",{id:"deckgl-wrapper",ref:this._containerRef,style:l},[h,s])}}]),t}(i.a.Component);qp.propTypes=Vp,qp.defaultProps=Wp;var Gp={name:"project32",dependencies:[wc],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},Hp={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1};var Zp={name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hp,t={};if(void 0!==e.pickingSelectedColor)if(e.pickingSelectedColor){var n=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}else t.picking_uSelectedColorValid=0;return e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor.map((function(e){return e/255}))),void 0!==e.pickingActive&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}},Xp=Object.assign({inject:{"vs:DECKGL_FILTER_COLOR":"\n    picking_setPickingColor(geometry.pickingColor);\n    // for picking depth values\n    picking_setPickingAttribute(geometry.position.z);\n    ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n    // use highlight color if this fragment belongs to the selected object.\n    color = picking_filterHighlightColor(color);\n\n    // use picking color if rendering to picking FBO.\n    color = picking_filterPickingColor(color);\n      "}}},Zp),Yp={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Kp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.id,r=void 0===n?Gn("geometry"):n,i=t.drawMode,a=void 0===i?Yp.TRIANGLES:i,o=t.attributes,s=void 0===o?{}:o,l=t.indices,c=void 0===l?null:l,h=t.vertexCount,p=void 0===h?null:h;this.id=r,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(s,c),this.vertexCount=p||this._calculateVertexCount(this.attributes,this.indices)}return Object(p.a)(e,null,[{key:"DRAW_MODE",get:function(){return Yp}}]),Object(p.a)(e,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Xo({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(e){return"Geometry ".concat(this.id," attribute ").concat(e)}},{key:"_setAttributes",value:function(e,t){for(var n in t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t),e){var r=e[n];r=ArrayBuffer.isView(r)?{value:r}:r,Bn(ArrayBuffer.isView(r.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),"POSITION"!==n&&"positions"!==n||r.size||(r.size=3),"indices"===n?(Bn(!this.indices),this.indices=r):this.attributes[n]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(e,t){if(t)return t.value.length;var n=1/0;for(var r in e){var i=e[r],a=i.value,o=i.size;!i.constant&&a&&o>=1&&(n=Math.min(n,a.length/o))}return Bn(Number.isFinite(n)),n}},{key:"mode",get:function(){return this.drawMode}}]),e}(),Jp=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.a)(this,e);var n=t.attributes,r=void 0===n?{}:n;this.typedArrayManager=gi,this.indexStarts=null,this.vertexStarts=null,this.vertexCount=0,this.instanceCount=0,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t),Object.seal(this)}return Object(p.a)(e,[{key:"updateGeometry",value:function(e){Object.assign(this.opts,e);var t=this.opts,n=t.data,r=t.buffers,i=void 0===r?{}:r,a=t.getGeometry,o=t.geometryBuffer,s=t.positionFormat,u=t.dataChanged,l=t.normalize,c=void 0===l||l;if(this.data=n,this.getGeometry=a,this.positionSize=o&&o.size||("XY"===s?2:3),this.buffers=i,this.normalize=c,o&&(fn(n.startIndices,"binary data missing startIndices"),this.getGeometry=this.getGeometryFromBuffer(o),c||(i.positions=o)),this.geometryBuffer=i.positions,Array.isArray(u)){var h=!0,p=!1,f=void 0;try{for(var d,v=u[Symbol.iterator]();!(h=(d=v.next()).done);h=!0){var m=d.value;this._rebuildGeometry(m)}}catch(e){p=!0,f=e}finally{try{h||null==v.return||v.return()}finally{if(p)throw f}}}else this._rebuildGeometry()}},{key:"updatePartialGeometry",value:function(e){var t=e.startRow,n=e.endRow;this._rebuildGeometry({startRow:t,endRow:n})}},{key:"updateGeometryAttributes",value:function(e,t,n){throw new Error("Not implemented")}},{key:"getGeometrySize",value:function(e){throw new Error("Not implemented")}},{key:"getGeometryFromBuffer",value:function(e){var t=e.value||e;return fn(ArrayBuffer.isView(t),"cannot read geometries"),Fi(t,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices})}},{key:"_allocate",value:function(e,t){var n=this.attributes,r=this.buffers,i=this._attributeDefs,a=this.typedArrayManager;for(var o in i)if(o in r)a.release(n[o]),n[o]=null;else{var s=i[o];s.copy=t,n[o]=a.allocate(n[o],e,s)}}},{key:"_forEachGeometry",value:function(e,t,n){var r=this.data,i=this.getGeometry,a=zi(r,t,n),o=a.iterable,s=a.objectInfo,u=!0,l=!1,c=void 0;try{for(var h,p=o[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value;s.index++,e(i(f,s),s.index)}}catch(e){l=!0,c=e}finally{try{u||null==p.return||p.return()}finally{if(l)throw c}}}},{key:"_rebuildGeometry",value:function(e){var t=this;if(this.data&&this.getGeometry){var n=this.indexStarts,r=this.vertexStarts,i=this.instanceCount,a=this.data,o=this.geometryBuffer,s=e||{},u=s.startRow,l=void 0===u?0:u,c=s.endRow,h=void 0===c?1/0:c;if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((function(e,n){r[n+1]=r[n]+t.getGeometrySize(e)}),l,h),i=r[r.length-1];else if(o.buffer instanceof pr){var p=o.stride||4*this.positionSize;r=a.startIndices,i=r[a.length]||o.buffer.byteLength/p}else{var f=o.value||o,d=o.stride/f.BYTES_PER_ELEMENT||this.positionSize;r=a.startIndices,i=r[a.length]||f.length/d}this._allocate(i,Boolean(e)),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;var v={};this._forEachGeometry((function(e,a){v.vertexStart=r[a],v.indexStart=n[a];var o=a<r.length-1?r[a+1]:i;v.geometrySize=o-r[a],v.geometryIndex=a,t.updateGeometryAttributes(e,v)}),l,h),this.vertexCount=n[n.length-1]}}}]),e}();function $p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qp=function(e){function t(e){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$p(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{attributes:{positions:{size:3,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getGeometryFromBuffer",value:function(e){return this.normalize?Rt(Object(c.a)(t.prototype),"getGeometryFromBuffer",this).call(this,e):function(){return null}}},{key:"get",value:function(e){return this.attributes[e]}},{key:"getGeometrySize",value:function(e){if(!this.normalize){var t=e.length/this.positionSize;return this.opts.loop?t+2:t}var n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}},{key:"updateGeometryAttributes",value:function(e,t){0!==t.geometrySize&&(this._updateSegmentTypes(e,t),this._updatePositions(e,t))}},{key:"_updateSegmentTypes",value:function(e,t){var n=this.attributes.segmentTypes,r=this.isClosed(e),i=t.vertexStart,a=t.geometrySize;n.fill(0,i,i+a),r?(n[i]=4,n[i+a-2]=4):(n[i]+=1,n[i+a-2]+=2),n[i+a-1]=4}},{key:"_updatePositions",value:function(e,t){var n=this.attributes.positions;if(n)for(var r=t.vertexStart,i=t.geometrySize,a=r,o=0;o<i;a++,o++){var s=this.getPointOnPath(e,o);n[3*a]=s[0],n[3*a+1]=s[1],n[3*a+2]=s[2]||0}}},{key:"getPathLength",value:function(e){return Number.isFinite(e[0])?e.length/this.positionSize:e.length}},{key:"getPointOnPath",value:function(e,t){if(Number.isFinite(e[0])){var n=this.positionSize;return t*n>=e.length&&(t+=1-e.length/n),[e[t*n],e[t*n+1],3===n?e[t*n+2]:0]}return t>=e.length&&(t+=1-e.length),e[t]}},{key:"isClosed",value:function(e){if(!this.normalize)return this.opts.loop;var t=this.getPathLength(e),n=this.getPointOnPath(e,0),r=this.getPointOnPath(e,t-1);return n[0]===r[0]&&n[1]===r[1]&&n[2]===r[2]}}]),t}(Jp),ef=[0,0,0,255],tf={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},rounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:function(e){return e.path}},getColor:{type:"accessor",value:ef},getWidth:{type:"accessor",value:1}},nf={enter:function(e,t){return t.length?t.subarray(t.length-e.length):e}},rf=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getShaders",value:function(){return Rt(Object(c.a)(t.prototype),"getShaders",this).call(this,{vs:"#define SHADER_NAME path-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute float instanceTypes;\nattribute vec3 instanceStartPositions;\nattribute vec3 instanceEndPositions;\nattribute vec3 instanceLeftPositions;\nattribute vec3 instanceRightPositions;\nattribute vec3 instanceLeftPositions64Low;\nattribute vec3 instanceStartPositions64Low;\nattribute vec3 instanceEndPositions64Low;\nattribute vec3 instanceRightPositions64Low;\nattribute float instanceStrokeWidths;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float widthScale;\nuniform float widthMinPixels;\nuniform float widthMaxPixels;\nuniform float jointType;\nuniform float miterLimit;\nuniform bool billboard;\n\nuniform float opacity;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nconst float EPSILON = 0.001;\nconst vec3 ZERO_OFFSET = vec3(0.0);\n\nfloat flipIfTrue(bool flag) {\n  return -(float(flag) * 2. - 1.);\n}\nvec3 lineJoin(\n  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,\n  float relativePosition, bool isEnd, bool isJoint,\n  vec2 width, vec2 widthPixels\n) {\n  vec2 deltaA = (currPoint.xy - prevPoint.xy) / width;\n  vec2 deltaB = (nextPoint.xy - currPoint.xy) / width;\n\n  float lenA = length(deltaA);\n  float lenB = length(deltaB);\n  lenA = lenA > EPSILON ? lenA : 0.0;\n  lenB = lenB > EPSILON ? lenB : 0.0;\n\n  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);\n  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);\n\n  vec2 perpA = vec2(-dirA.y, dirA.x);\n  vec2 perpB = vec2(-dirB.y, dirB.x);\n  vec2 tangent = vec2(dirA + dirB);\n  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;\n  vec2 miterVec = vec2(-tangent.y, tangent.x);\n  vec2 perp = isEnd ? perpA : perpB;\n  float L = isEnd ? lenA : lenB;\n  float sinHalfA = abs(dot(miterVec, perp));\n  float cosHalfA = abs(dot(dirA, miterVec));\n\n  bool turnsRight = dirA.x * dirB.y > dirA.y * dirB.x;\n\n  float offsetScale = 1.0 / max(sinHalfA, EPSILON);\n\n  float cornerPosition = isJoint ?\n    0.0 :\n    flipIfTrue(turnsRight == (relativePosition > 0.0));\n  cornerPosition *=\n    float(cornerPosition <= 0.0 || sinHalfA < min(lenA, lenB) * cosHalfA);\n  if (cornerPosition < 0.0) {\n    offsetScale = min(offsetScale, L / max(cosHalfA, EPSILON));\n  }\n\n  vMiterLength = cornerPosition >= 0.0 ?\n    mix(offsetScale, 0.0, cornerPosition) :\n    offsetScale * cornerPosition;\n  vMiterLength -= sinHalfA * jointType;\n\n  float offsetDirection = mix(\n    positions.y,\n    mix(\n      flipIfTrue(turnsRight),\n      positions.y * flipIfTrue(turnsRight == (positions.x == 1.)),\n      cornerPosition\n    ),\n    step(0.0, cornerPosition)\n  );\n\n  vec2 offsetVec = mix(miterVec, -tangent, step(0.5, cornerPosition));\n  offsetScale = mix(offsetScale, 1.0 / max(cosHalfA, 0.001), step(0.5, cornerPosition));\n  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));\n  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));\n  bool isCap = isStartCap || isEndCap;\n  cornerPosition = isCap ? (1.0 - positions.z) : 0.;\n  if (isStartCap) {\n    offsetVec = mix(dirB, perpB, cornerPosition);\n  }\n  if (isEndCap) {\n    offsetVec = mix(dirA, perpA, cornerPosition);\n  }\n  if (isCap) {\n    offsetScale = mix(4.0 * jointType, 1.0, cornerPosition);\n    vMiterLength = 1.0 - cornerPosition;\n    offsetDirection = mix(flipIfTrue(isStartCap), positions.y, cornerPosition);\n  }\n\n  vCornerOffset = offsetVec * offsetDirection * offsetScale;\n  vPathLength = L;\n  vec2 offsetFromStartOfPath = vCornerOffset;\n  if (isEnd) {\n    offsetFromStartOfPath += deltaA;\n  }\n  vec2 dir = isEnd ? dirA : dirB;\n  vPathPosition = vec2(\n    positions.y + positions.z * offsetDirection,\n    dot(offsetFromStartOfPath, dir)\n  );\n  geometry.uv = vPathPosition;\n\n  float isValid = step(instanceTypes, 3.5);\n  vec3 offset = vec3(vCornerOffset * widthPixels * isValid, 0.0);\n  DECKGL_FILTER_SIZE(offset, geometry);\n  return currPoint + vec3(offset.xy / widthPixels * width, 0.0);\n}\nvec3 lineJoin(vec3 prevPoint, vec3 currPoint, vec3 nextPoint) {\n\n  float relativePosition = positions.y;\n  bool isEnd = positions.x > EPSILON;\n  bool isJoint = positions.z > EPSILON;\n\n  vec2 widthPixels = vec2(clamp(project_size_to_pixel(instanceStrokeWidths * widthScale),\n    widthMinPixels, widthMaxPixels) / 2.0);\n\n  vec2 width = billboard ? project_pixel_size_to_clipspace(widthPixels) : project_pixel_size(widthPixels);\n\n  return lineJoin(\n    prevPoint, currPoint, nextPoint,\n    relativePosition, isEnd, isJoint,\n    width, widthPixels\n  );\n}\nvoid clipLine(inout vec4 position, vec4 refPosition) {\n  if (position.w < EPSILON) {\n    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);\n    position = refPosition + (position - refPosition) * r;\n  }\n}\n\nvoid main() {\n  geometry.worldPosition = instanceStartPositions;\n  geometry.worldPositionAlt = instanceEndPositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);\n\n  float isEnd = positions.x;\n\n  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);\n  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);\n\n  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);\n  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);\n\n  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);\n  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);\n\n  if (billboard) {\n    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);\n    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);\n    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);\n\n    clipLine(prevPositionScreen, currPositionScreen);\n    clipLine(nextPositionScreen, currPositionScreen);\n    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));\n\n    vec3 pos = lineJoin(\n      prevPositionScreen.xyz / prevPositionScreen.w,\n      currPositionScreen.xyz / currPositionScreen.w,\n      nextPositionScreen.xyz / nextPositionScreen.w\n    );\n\n    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);\n  } else {\n    prevPosition = project_position(prevPosition, prevPosition64Low);\n    currPosition = project_position(currPosition, currPosition64Low);\n    nextPosition = project_position(nextPosition, nextPosition64Low);\n\n    vec4 pos = vec4(\n      lineJoin(prevPosition, currPosition, nextPosition),\n      1.0);\n    geometry.position = pos;\n    gl_Position = project_common_position_to_clipspace(pos);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#define SHADER_NAME path-layer-fragment-shader\n\nprecision highp float;\n\nuniform float jointType;\nuniform float miterLimit;\n\nvarying vec4 vColor;\nvarying vec2 vCornerOffset;\nvarying float vMiterLength;\nvarying vec2 vPathPosition;\nvarying float vPathLength;\n\nvoid main(void) {\n  geometry.uv = vPathPosition;\n  if (jointType > 0.0 && vMiterLength > 0.0 && length(vCornerOffset) > 1.0) {\n    discard;\n  }\n  if (jointType == 0.0 && vMiterLength > miterLimit) {\n    discard;\n  }\n  gl_FragColor = vColor;\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Gp,Xp]})}},{key:"initializeState",value:function(){var e=this;this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:nf,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:nf,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:nf,defaultValue:ef},instancePickingColors:{size:3,type:5121,accessor:function(t,n){var r=n.index,i=n.target;return e.encodePickingColor(r,i)}}}),this.setState({pathTesselator:new Qp({fp64:this.use64bitPositions()})}),this.props.getDashArray&&!this.props.extensions.length&&yn.removed("getDashArray","PathStyleExtension")()}},{key:"updateState",value:function(e){var n=e.oldProps,r=e.props,i=e.changeFlags;Rt(Object(c.a)(t.prototype),"updateState",this).call(this,{props:r,oldProps:n,changeFlags:i});var a=this.getAttributeManager();if(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getPath)){var o=this.state.pathTesselator,s=r.data.attributes||{};o.updateGeometry({data:r.data,geometryBuffer:s.getPath,buffers:s,normalize:!r._pathType,loop:"loop"===r._pathType,getGeometry:r.getPath,positionFormat:r.positionFormat,dataChanged:i.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),i.dataChanged||a.invalidateAll()}if(i.extensionsChanged){var u=this.context.gl;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(u)}),a.invalidateAll()}}},{key:"draw",value:function(e){var t=e.uniforms,n=this.context.viewport,r=this.props,i=r.rounded,a=r.billboard,o=r.miterLimit,s=r.widthUnits,u=r.widthScale,l=r.widthMinPixels,c=r.widthMaxPixels,h="pixels"===s?n.metersPerPixel:1;this.state.model.setUniforms(Object.assign({},t,{jointType:Number(i),billboard:a,widthScale:u*h,miterLimit:o,widthMinPixels:l,widthMaxPixels:c})).draw()}},{key:"_getModel",value:function(e){return new es(e,Object.assign({},this.getShaders(),{id:this.props.id,geometry:new Kp({drawMode:4,attributes:{indices:new Uint16Array([0,2,1,1,2,4,1,4,3,3,4,5]),positions:new Float32Array([0,0,1,0,-1,0,0,1,0,1,-1,0,1,1,0,1,0,1])}}),isInstanced:!0}))}},{key:"calculatePositions",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("positions")}},{key:"calculateSegmentTypes",value:function(e){var t=this.state.pathTesselator;e.startIndices=t.vertexStarts,e.value=t.get("segmentTypes")}}]),t}(cc);rf.layerName="PathLayer",rf.defaultProps=tf;var af=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"getShaders",value:function(){var e=Rt(Object(c.a)(t.prototype),"getShaders",this).call(this);return e.inject={"vs:#decl":"uniform float trailLength;\nattribute float instanceTimestamps;\nattribute float instanceNextTimestamps;\nvarying float vTime;\n","vs:#main-end":"vTime = instanceTimestamps + (instanceNextTimestamps - instanceTimestamps) * vPathPosition.y / vPathLength;\n","fs:#decl":"uniform float trailLength;\nuniform float currentTime;\nvarying float vTime;\n","fs:#main-start":"if(vTime > currentTime || vTime < currentTime - trailLength) {\n  discard;\n}\n","fs:DECKGL_FILTER_COLOR":"color.a *= 1.0 - (currentTime - vTime) / trailLength;"},e}},{key:"initializeState",value:function(e){Rt(Object(c.a)(t.prototype),"initializeState",this).call(this,e),this.getAttributeManager().addInstanced({timestamps:{size:1,accessor:"getTimestamps",shaderAttributes:{instanceTimestamps:{vertexOffset:0},instanceNextTimestamps:{vertexOffset:1}}}})}},{key:"draw",value:function(e){var n=this.props,r=n.trailLength,i=n.currentTime;e.uniforms=Object.assign({},e.uniforms,{trailLength:r,currentTime:i}),Rt(Object(c.a)(t.prototype),"draw",this).call(this,e)}}]),t}(rf);function of(e){return(of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uf(e,t){return!t||"object"!==of(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lf(e){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cf(e,t){return(cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}af.layerName="TripsLayer",af.defaultProps={trailLength:{type:"number",value:120,min:0},currentTime:{type:"number",value:0,min:0},getTimestamps:{type:"accessor",value:null}};var hf="https://gist.githubusercontent.com/yudai-nkt/80bdbecde74ea431c755e31fa167451d/raw/6b37fadcd38a009eeec6e732439b1eb6a47e7a19/tmp.json",pf={aizu_BL_01_3:[0,139,148],aizu_BL_01_13:[217,84,104],aizu_BL_01_1:[217,142,72],aizu_BL_01_10:[139,212,156],aizu_BL_01_20:[83,154,252]},ff={longitude:139.91,latitude:37.48,zoom:13,pitch:45,bearing:-30},df=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uf(this,lf(t).call(this,e))).state={time:0},n}var n,r,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cf(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this._animate()}},{key:"componentWillUnmount",value:function(){this._animationFrame&&window.cancelAnimationFrame(this._animationFrame)}},{key:"_animate",value:function(){var e=this.props,t=e.loopLength,n=void 0===t?3600:t,r=e.animationSpeed,i=void 0===r?30:r,a=Date.now()/1e3,o=n/i;this.setState({time:a%o/o*n}),this._animationFrame=window.requestAnimationFrame(this._animate.bind(this))}},{key:"_renderLayers",value:function(){var e=this.props,t=e.trips,n=void 0===t?hf:t,r=e.trailLength,i=void 0===r?60:r,a=e.theme,o=void 0===a?pf:a;return[new af({id:"trips",data:n,getPath:function(e){return e.path},getWidth:function(e){return 25},getTimestamps:function(e){return e.timestamps},getColor:function(e){return o[e.vendor]},opacity:.3,widthMinPixels:2,rounded:!0,trailLength:i,currentTime:this.state.time,shadowEnabled:!1})]}},{key:"render",value:function(){var e=this.props,t=e.viewState,n=e.mapStyle,r=void 0===n?"mapbox://styles/mapbox/dark-v9":n;return e.theme,i.a.createElement(qp,{layers:this._renderLayers(),initialViewState:ff,viewState:t,controller:!0},i.a.createElement(Oe,{reuseMaps:!0,mapStyle:r,preventStyleDiffing:!0,mapboxApiAccessToken:void 0}))}}])&&sf(n.prototype,r),a&&sf(n,a),t}(r.Component);o.a.render(i.a.createElement(df,null),document.getElementById("app")),e.hot.accept()},,,,,function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(13),a=("undefined"!=typeof self&&self,"undefined"!=typeof window&&window,"undefined"!=typeof document&&document,"object"!==(void 0===r?"undefined":Object(i.a)(r))||"[object process]"!==String(r)||r.browser),o=void 0!==r&&r.version&&r.version.match(/v([0-9]*)/),s=o&&parseFloat(o[1])||0}).call(this,n(30),n(31))},function(e,t,n){"use strict";var r=n(13),i=n(15),a=n(0),o=n(2),s=n(1),u=n(51),l="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",c=Object(u.a)();function h(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),t}catch(e){return null}}var p=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Object(o.a)(this,e),this.storage=h(r),this.id=t,this.config={},Object.assign(this.config,n),this._loadConfiguration()}return Object(s.a)(e,[{key:"getConfiguration",value:function(){return this.config}},{key:"setConfiguration",value:function(e){return this.config={},this.updateConfiguration(e)}},{key:"updateConfiguration",value:function(e){if(Object.assign(this.config,e),this.storage){var t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}return this}},{key:"_loadConfiguration",value:function(){var e={};if(this.storage){var t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}]),e}();function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600,i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>r&&(n=Math.min(n,r/e.width));var a=e.width*n,o=e.height*n,s=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(a/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(a,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}var d={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function v(e){return"string"==typeof e?d[e.toUpperCase()]||d.WHITE:e}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"],n=Object.getPrototypeOf(e),r=Object.getOwnPropertyNames(n),i=!0,a=!1,o=void 0;try{for(var s,u=function(){var n=s.value;"function"==typeof e[n]&&(t.find((function(e){return n===e}))||(e[n]=e[n].bind(e)))},l=r[Symbol.iterator]();!(i=(s=l.next()).done);i=!0)u()}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}function y(e,t){if(!e)throw new Error(t||"Assertion failed")}var g=n(26);function b(){var e;if(c&&g.b.performance)e=g.b.performance.now();else if(g.a.hrtime){var t=g.a.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}n.d(t,"a",(function(){return S}));var _={debug:c&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},x={enabled:!0,level:0};function w(){}var k={},O={once:!0};function E(e){for(var t in e)for(var n in e[t])return n||"untitled";return"empty"}var S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id;Object(o.a)(this,e),this.id=n,this.VERSION=l,this._startTs=b(),this._deltaTs=b(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new p("__probe-".concat(this.id,"__"),x),this.userData={},this.timeStamp("".concat(this.id," started")),m(this),Object.seal(this)}return Object(s.a)(e,[{key:"isEnabled",value:function(){return this._storage.config.enabled}},{key:"getLevel",value:function(){return this._storage.config.level}},{key:"getTotal",value:function(){return Number((b()-this._startTs).toPrecision(10))}},{key:"getDelta",value:function(){return Number((b()-this._deltaTs).toPrecision(10))}},{key:"getPriority",value:function(){return this.level}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}},{key:"setLevel",value:function(e){return this._storage.updateConfiguration({level:e}),this}},{key:"assert",value:function(e,t){y(e,t)}},{key:"warn",value:function(e){return this._getLogFunction(0,e,_.warn,arguments,O)}},{key:"error",value:function(e){return this._getLogFunction(0,e,_.error,arguments)}},{key:"deprecated",value:function(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}},{key:"removed",value:function(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}},{key:"probe",value:function(e,t){return this._getLogFunction(e,t,_.log,arguments,{time:!0,once:!0})}},{key:"log",value:function(e,t){return this._getLogFunction(e,t,_.debug,arguments)}},{key:"info",value:function(e,t){return this._getLogFunction(e,t,console.info,arguments)}},{key:"once",value:function(e,t){return this._getLogFunction(e,t,_.debug||_.info,arguments,O)}},{key:"table",value:function(e,t,n){return t?this._getLogFunction(e,t,console.table||w,n&&[n],{tag:E(t)}):w}},{key:"image",value:function(e){var t=e.logLevel,r=e.priority,a=e.image,o=e.message,s=void 0===o?"":o,u=e.scale,l=void 0===u?1:u;return this._shouldLog(t||r)?c?function(e){var t=e.image,n=e.message,r=void 0===n?"":n,a=e.scale,o=void 0===a?1:a;if("string"==typeof t){var s=new Image;return s.onload=function(){var e,t=f(s,r,o);(e=console).log.apply(e,Object(i.a)(t))},s.src=t,w}var u=t.nodeName||"";if("img"===u.toLowerCase()){var l;return(l=console).log.apply(l,Object(i.a)(f(t,r,o))),w}if("canvas"===u.toLowerCase()){var c=new Image;return c.onload=function(){var e;return(e=console).log.apply(e,Object(i.a)(f(c,r,o)))},c.src=t.toDataURL(),w}return w}({image:a,message:s,scale:l}):function(e){var t=e.image,r=(e.message,e.scale),i=void 0===r?1:r,a=null;try{a=n(90)}catch(e){}if(a)return function(){return a(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((function(e){return console.log(e)}))};return w}({image:a,message:s,scale:l}):w}},{key:"settings",value:function(){console.table?console.table(this._storage.config):console.log(this._storage.config)}},{key:"get",value:function(e){return this._storage.config[e]}},{key:"set",value:function(e,t){this._storage.updateConfiguration(Object(a.a)({},e,t))}},{key:"time",value:function(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}},{key:"timeEnd",value:function(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}},{key:"timeStamp",value:function(e,t){return this._getLogFunction(e,t,console.timeStamp||w)}},{key:"group",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1},r=n=P({logLevel:e,message:t,opts:n}),i=r.collapsed;return n.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(n)}},{key:"groupCollapsed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},n,{collapsed:!0}))}},{key:"groupEnd",value:function(e){return this._getLogFunction(e,"",console.groupEnd||w)}},{key:"withGroup",value:function(e,t,n){this.group(e,t)();try{n()}finally{this.groupEnd(e)()}}},{key:"trace",value:function(){console.trace&&console.trace()}},{key:"_shouldLog",value:function(e){return this.isEnabled()&&this.getLevel()>=T(e)}},{key:"_getLogFunction",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4?arguments[4]:void 0;if(this._shouldLog(e)){var o;a=P({logLevel:e,message:t,args:r,opts:a}),y(n=n||a.method),a.total=this.getTotal(),a.delta=this.getDelta(),this._deltaTs=b();var s=a.tag||a.message;if(a.once){if(k[s])return w;k[s]=b()}return t=j(this.id,a.message,a),(o=n).bind.apply(o,[console,t].concat(Object(i.a)(a.args)))}return w}},{key:"level",set:function(e){this.setLevel(e)},get:function(){return this.getLevel()}},{key:"priority",set:function(e){this.level=e},get:function(){return this.level}}]),e}();function T(e){if(!e)return 0;var t;switch(Object(r.a)(e)){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return y(Number.isFinite(t)&&t>=0),t}function P(e){var t=e.logLevel,n=e.message;e.logLevel=T(t);for(var i=e.args?Array.from(e.args):[];i.length&&i.shift()!==n;);switch(e.args=i,Object(r.a)(t)){case"string":case"function":void 0!==n&&i.unshift(n),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());var a=Object(r.a)(e.message);return y("string"===a||"object"===a),Object.assign(e,e.opts)}function j(e,t,n){if("string"==typeof t){var r=n.time?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=Math.max(t-e.length,0);return"".concat(" ".repeat(n)).concat(e)}((s=n.total)<10?"".concat(s.toFixed(2),"ms"):s<100?"".concat(s.toFixed(1),"ms"):s<1e3?"".concat(s.toFixed(0),"ms"):"".concat((s/1e3).toFixed(2),"s")):"";t=n.time?"".concat(e,": ").concat(r,"  ").concat(t):"".concat(e,": ").concat(t),i=t,a=n.color,o=n.background,c||"string"!=typeof i||(a&&(a=v(a),i="[".concat(a,"m").concat(i,"[39m")),o&&(a=v(o),i="[".concat(o+10,"m").concat(i,"[49m"))),t=i}var i,a,o,s;return t}S.VERSION=l}]);